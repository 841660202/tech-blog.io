{"title":"useLoading","uid":"29b0b8b961c24a72a92c8b50680ebcb5","slug":"2023-07-11useLoading","date":"2023-07-11T07:29:14.000Z","updated":"2023-08-04T06:07:32.210Z","comments":true,"path":"api/articles/2023-07-11useLoading.json","keywords":null,"cover":null,"content":"<h2 id=\"useLoading\"><a href=\"#useLoading\" class=\"headerlink\" title=\"useLoading\"></a>useLoading</h2><pre class=\"line-numbers language-typescript\" data-language=\"typescript\"><code class=\"language-typescript\">import &#123; useRef, useEffect, useState, useCallback &#125; from &#39;react&#39;\n&#x2F;&#x2F; useMountState\nconst useMountState &#x3D; () &#x3D;&gt; &#123;\n  const mountRef &#x3D; useRef&lt;boolean&gt;(false)\n  useEffect(() &#x3D;&gt; &#123;\n    mountRef.current &#x3D; true\n    return () &#x3D;&gt; &#123;\n      mountRef.current &#x3D; false\n    &#125;\n  &#125;)\n  return mountRef\n&#125;\n\nexport  useMountState\n&#x2F;&#x2F; useLoading\nconst useLoading &#x3D; &lt;P extends (...args: any[]) &#x3D;&gt; Promise&lt;any&gt;&gt;(returnPromiseFunc: P): [boolean, P] &#x3D;&gt; &#123;\n  const [loading, setLoading] &#x3D; useState&lt;boolean&gt;(false)\n  const mountState &#x3D; useMountState()\n  const execution &#x3D; useCallback((...args: any[]) &#x3D;&gt; &#123;\n    setLoading(true)\n    return returnPromiseFunc(...args).finally(() &#x3D;&gt; &#123;\n      if (mountState.current) &#123;\n        setLoading(false)\n      &#125;\n    &#125;)\n  &#125;, [returnPromiseFunc])\n  return [loading, execution as P]\n&#125;\n\nexport  useLoading\n\n&#x2F;&#x2F; use\n\n&#x2F;&#x2F; const [loading, wrapApi] &#x3D; useLoading(api)</code></pre>\n","text":"useLoadingimport &#123; useRef, useEffect, useState, useCallback &#125; from &#39;react&#39; &#x2F;&#x2F; useMountState const useMountState ...","link":"","photos":[],"count_time":{"symbolsCount":"1.1k","symbolsTime":"1 mins."},"categories":[{"name":"React","slug":"React","count":39,"path":"api/categories/React.json"}],"tags":[{"name":"React","slug":"React","count":33,"path":"api/tags/React.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#useLoading\"><span class=\"toc-text\">useLoading</span></a></li></ol>","author":{"name":"举手摘月亮","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/202303171118970.webp","link":"/","description":"<div><p>举手向苍穹，并非一定要摘到星月</p><p>眼中有光，心中有梦，脚下有路</p><div>","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"js.design","uid":"62add969b0b0172687e3e105ea93f5fa","slug":"2023-07-11design","date":"2023-07-11T09:54:29.000Z","updated":"2023-07-16T02:13:26.428Z","comments":true,"path":"api/articles/2023-07-11design.json","keywords":null,"cover":[],"text":"js.design 快捷键 js.design 比 sketch 酷多了sketch 几乎没有快捷键 js.design 官网屏蔽了 console.log js.design 快捷键高效 操作 快捷键 复制样式 ⌘ + ⌥ + C 粘贴样式 ⌘ + ⌥ + V 选中子级 Ent...","link":"","photos":[],"count_time":{"symbolsCount":"3.1k","symbolsTime":"3 mins."},"categories":[{"name":"UI工具","slug":"UI工具","count":1,"path":"api/categories/UI工具.json"}],"tags":[{"name":"UI工具","slug":"UI工具","count":1,"path":"api/tags/UI工具.json"}],"author":{"name":"举手摘月亮","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/202303171118970.webp","link":"/","description":"<div><p>举手向苍穹，并非一定要摘到星月</p><p>眼中有光，心中有梦，脚下有路</p><div>","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}},"next_post":{"title":"Echarts","uid":"bd8c19e11e91b5a0b7b99bb51502fe91","slug":"2023-07-07echart","date":"2023-07-07T06:47:21.000Z","updated":"2023-07-20T14:58:47.211Z","comments":true,"path":"api/articles/2023-07-07echart.json","keywords":null,"cover":[],"text":" alignTicks: true, 祖父级容器 zoom，导致 echart hover 操作偏移，修复代码import &#123; useModel &#125; from &#39;umi&#39;; import useMemoizedFn from &#39;.&#x...","link":"","photos":[],"count_time":{"symbolsCount":744,"symbolsTime":"1 mins."},"categories":[{"name":"ECharts","slug":"ECharts","count":1,"path":"api/categories/ECharts.json"}],"tags":[{"name":"ECharts","slug":"ECharts","count":1,"path":"api/tags/ECharts.json"}],"author":{"name":"举手摘月亮","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/202303171118970.webp","link":"/","description":"<div><p>举手向苍穹，并非一定要摘到星月</p><p>眼中有光，心中有梦，脚下有路</p><div>","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}}}