{"title":"piniaæºç ","uid":"5a6ede004598b1b2a7c46059e37dbd43","slug":"2022-06-14vue-pinia","date":"2022-06-15T02:22:49.000Z","updated":"2022-06-25T09:34:46.432Z","comments":true,"path":"api/articles/2022-06-14vue-pinia.json","keywords":null,"cover":null,"content":"<h2 id=\"èƒŒæ™¯\"><a href=\"#èƒŒæ™¯\" class=\"headerlink\" title=\"èƒŒæ™¯\"></a>èƒŒæ™¯</h2><p>äº†è§£äº† playgroundï¼Œç°åœ¨æˆ‘ä»¬æ¥çœ‹çœ‹ pinia æºç ï¼Œé‚£äº› api å’Œæ–¹æ³•ã€‚è¿™ä¹ˆç”¨åšäº†ä»€ä¹ˆäº‹æƒ…</p>\n<p><code>this.$patch</code><a href=\"https://github.com/vuejs/pinia/blob/2eb123d8114ceb4fad46ac019844a1967d9a9135/packages/playground/src/stores/counter.ts#L49\" target=\"_blank\" >playgound</a></p>\n<p><code>defineStore</code></p>\n<ul>\n<li>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å”¯ä¸€å­—ç¬¦ä¸²ï¼Œç”¨æ¥æ ‡è¯† storeï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ª store å¯¹è±¡ <a href=\"https://github.com/vuejs/pinia/blob/2eb123d8114ceb4fad46ac019844a1967d9a9135/packages/playground/src/stores/nasa-pod.ts#L6\" target=\"_blank\" >playground</a></li>\n<li>ç¬¬ä¸€ä¸ªå‚æ•°ç›´æ¥æ˜¯é…ç½®é¡¹ <a href=\"https://github.com/vuejs/pinia/blob/2eb123d8114ceb4fad46ac019844a1967d9a9135/packages/playground/src/stores/jokesUsePromised.ts#L6\" target=\"_blank\" >playgound</a></li>\n</ul>\n<p>ç»„ä»¶ä¸­ç›´æ¥é€šè¿‡<code>useXXStoreè·å–store</code> <a href=\"https://github.com/vuejs/pinia/blob/2eb123d8114ceb4fad46ac019844a1967d9a9135/packages/playground/src/views/NasaPOD.vue#L52\" target=\"_blank\" >playground</a></p>\n<p><code>state</code>æ€ä¹ˆå°±æ˜¯ä¸ªå‡½æ•°ï¼Œè€Œä¸”è¿™ä¸ªå‡½æ•°å¯ä»¥è®©æˆ‘ä»¬è‡ªå®šä¹‰ store çš„åˆå§‹å€¼<br><code>$dispose</code> <a href=\"https://github.com/vuejs/pinia/blob/2eb123d8114ceb4fad46ac019844a1967d9a9135/packages/playground/src/views/NasaPOD.vue#L49\" target=\"_blank\" >playgound</a></p>\n<pre class=\"line-numbers language-ts\" data-language=\"ts\"><code class=\"language-ts\">onUnmounted(() &#x3D;&gt; &#123;\n  userStore.$dispose();\n  cartStore.$dispose();\n  counterStore.$dispose();\n&#125;);</code></pre>\n\n<p><code>import &#123; storeToRefs &#125; from &#39;pinia&#39;</code></p>\n<p>ä»¥åŠ playground æ²¡æ²¡æœ‰ç”¨åˆ°çš„ api</p>\n<pre class=\"line-numbers language-ts\" data-language=\"ts\"><code class=\"language-ts\">const partialStore &#x3D; &#123;\n  _p: pinia,\n  &#x2F;&#x2F; _s: scope,\n  $id,\n  $onAction: addSubscription.bind(null, actionSubscriptions),\n  $patch,\n  $reset,\n  $subscribe,\n  $dispose,\n&#125; as _StoreWithState&lt;Id, S, G, A&gt;;\nconst store: Store&lt;Id, S, G, A&gt; &#x3D; reactive(partialStore); &#x2F;&#x2F; ç®€åŒ–äº†ï¼Œä¸è€ƒè™‘ä¸­é—´ä»»ä½•ç»†èŠ‚\npinia._s.set($id, store);</code></pre>\n\n<ul>\n<li>$reset:è¯¥apiæ˜¯$patchçš„è¯­æ³•ç³–ï¼Œåªä¸è¿‡ä¼ é€’çš„å‚æ•°æ˜¯åˆå§‹çš„stateå‡½æ•°çš„æ‰§è¡Œç»“æœï¼Œæºç ä¸­<code>const newState = state? state() : &#123;&#125;</code></li>\n<li>$patchï¼špatchå°±æ˜¯ä¸€æ¬¡é€’å½’å¯¹valueè¦†ç›–çš„è¿‡ç¨‹</li>\n<li>$subscribeï¼š æœ‰ç‚¹ç±»ä¼¼è§‚å¯Ÿè€…ï¼Œå½“è°ƒç”¨subscribeæ—¶ï¼Œä¼šå°†å½“å‰çš„çŠ¶æ€ä¿¡æ¯ä¿å­˜åˆ°subscriptions</li>\n</ul>\n<h2 id=\"æºç è§£è¯»\"><a href=\"#æºç è§£è¯»\" class=\"headerlink\" title=\"æºç è§£è¯»\"></a>æºç è§£è¯»</h2><p><a href=\"https://www.jianshu.com/p/2acc2d043d35\" target=\"_blank\" >piniaæºç è§£è¯»â€“å®ç°æµç¨‹</a></p>\n<h2 id=\"å‚è€ƒé“¾æ¥\"><a href=\"#å‚è€ƒé“¾æ¥\" class=\"headerlink\" title=\"å‚è€ƒé“¾æ¥\"></a>å‚è€ƒé“¾æ¥</h2><p><a href=\"https://www.jianshu.com/p/2acc2d043d35\" target=\"_blank\" >pinia æºç è§£è¯»â€“å®ç°æµç¨‹</a><br><a href=\"https://github.com/vuejs/pinia\" target=\"_blank\" >pinia</a></p>\n","text":"èƒŒæ™¯äº†è§£äº† playgroundï¼Œç°åœ¨æˆ‘ä»¬æ¥çœ‹çœ‹ pinia æºç ï¼Œé‚£äº› api å’Œæ–¹æ³•ã€‚è¿™ä¹ˆç”¨åšäº†ä»€ä¹ˆäº‹æƒ… this.$patchplaygound defineStore ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å”¯ä¸€å­—ç¬¦ä¸²ï¼Œç”¨æ¥æ ‡è¯† storeï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ª store å¯¹è±¡ play...","link":"","photos":[],"count_time":{"symbolsCount":"1.1k","symbolsTime":"1 mins."},"categories":[{"name":"vue","slug":"vue","count":14,"path":"api/categories/vue.json"}],"tags":[{"name":"æºç ","slug":"æºç ","count":12,"path":"api/tags/æºç .json"},{"name":"vue","slug":"vue","count":13,"path":"api/tags/vue.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%83%8C%E6%99%AF\"><span class=\"toc-text\">èƒŒæ™¯</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB\"><span class=\"toc-text\">æºç è§£è¯»</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5\"><span class=\"toc-text\">å‚è€ƒé“¾æ¥</span></a></li></ol>","author":{"name":"é™ˆæµ·é¾™","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"éœ€è¦å°±å­¦å‘—ï¼Œå¤šå¤§ç‚¹äº‹ğŸ˜‚","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"httpé”™è¯¯ä¿¡æ¯","uid":"5b104c45df830a680c682d4e4b65c048","slug":"2022-06-15http","date":"2022-06-15T06:27:41.000Z","updated":"2022-06-25T09:34:46.433Z","comments":true,"path":"api/articles/2022-06-15http.json","keywords":null,"cover":null,"text":"http é”™è¯¯ä¿¡æ¯Request URL: http:&#x2F;&#x2F;localhost:8888&#x2F;api&#x2F;redline&#x2F;content_management&#x2F;api&#x2F;kbs&#x2F;search&#x2F;conte...","link":"","photos":[],"count_time":{"symbolsCount":"1.4k","symbolsTime":"1 mins."},"categories":[{"name":"bug","slug":"bug","count":3,"path":"api/categories/bug.json"}],"tags":[{"name":"bug","slug":"bug","count":5,"path":"api/tags/bug.json"}],"author":{"name":"é™ˆæµ·é¾™","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"éœ€è¦å°±å­¦å‘—ï¼Œå¤šå¤§ç‚¹äº‹ğŸ˜‚","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}},"next_post":{"title":"piniaä¸­çš„vue-demiæºç ","uid":"a2db94377c4f0ef1a22f18cb45800737","slug":"2022-06-15vue-demi","date":"2022-06-15T01:46:31.000Z","updated":"2022-06-25T09:34:46.433Z","comments":true,"path":"api/articles/2022-06-15vue-demi.json","keywords":null,"cover":null,"text":"pinia ä¸­çš„ vue-demiVue Demi æ˜¯ä¸€ä¸ªè®©ä½ å¯ä»¥å¼€å‘åŒæ—¶æ”¯æŒ Vue2 å’Œ 3 çš„é€šç”¨çš„ Vue åº“çš„å¼€å‘å·¥å…·ï¼Œè€Œæ— éœ€æ‹…å¿ƒç”¨æˆ·å®‰è£…çš„ç‰ˆæœ¬ã€‚ å½“ç”¨æˆ·è¦åˆ›å»ºä¸€ä¸ª Vue æ’ä»¶&#x2F;åº“æ—¶ï¼Œåªéœ€å°† vue-demi å®‰è£…ä¸ºä¾èµ–é¡¹å¹¶å°†å…¶å¯¼å…¥ï¼Œç„¶ååƒä¹‹å‰ä¸€æ ·å‘å¸ƒä½ çš„æ’...","link":"","photos":[],"count_time":{"symbolsCount":"6k","symbolsTime":"5 mins."},"categories":[{"name":"vue","slug":"vue","count":14,"path":"api/categories/vue.json"}],"tags":[{"name":"æºç ","slug":"æºç ","count":12,"path":"api/tags/æºç .json"},{"name":"vue","slug":"vue","count":13,"path":"api/tags/vue.json"}],"author":{"name":"é™ˆæµ·é¾™","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"éœ€è¦å°±å­¦å‘—ï¼Œå¤šå¤§ç‚¹äº‹ğŸ˜‚","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}}}