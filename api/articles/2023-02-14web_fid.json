{"title":"性能指标 - FID","uid":"7f4dccbee0ac34fdbc8e55c8be3f50e9","slug":"2023-02-14web_fid","date":"2023-02-14T14:04:49.000Z","updated":"2023-02-20T21:20:56.495Z","comments":true,"path":"api/articles/2023-02-14web_fid.json","keywords":null,"cover":"https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/iHYrrXKe4QRcb2uu8eV8.svg","content":"<h2 id=\"First-Input-Delay-FID\"><a href=\"#First-Input-Delay-FID\" class=\"headerlink\" title=\"First Input Delay (FID)\"></a>First Input Delay (FID)</h2><p>首次输入延迟，测量交互性。为了提供良好的用户体验，页面的 FID 应为 100 毫秒或更短</p>\n<img src=\"https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/iHYrrXKe4QRcb2uu8eV8.svg\" style=\"width:200px;max-width:100%\"/>\n\n<h2 id=\"如何改进-FID\"><a href=\"#如何改进-FID\" class=\"headerlink\" title=\"如何改进 FID\"></a>如何改进 FID</h2><p>要了解如何改进某个特定网站的 FID，您可以运行一次灯塔性能审计，并留心查看审计建议的各种具体机会。</p>\n<p>虽然 FID 是一项实际指标（而灯塔是一个实验室指标工具），但改进 FID 的指导方向与改进总阻塞时间 (TBT)这项实验室指标的指导方向相同。</p>\n<p>如需深入了解如何改进 FID，请参阅优化 FID。有关其他能够改进 FID 的单个性能技巧的进一步指导，请参阅：</p>\n<ol>\n<li>减少第三方代码的影响</li>\n<li>减少 JavaScript 执行时间</li>\n<li>最小化主线程工作</li>\n<li>保持较低的请求数和较小的传输大小</li>\n</ol>\n<h2 id=\"繁重的-JavaScript-执行\"><a href=\"#繁重的-JavaScript-执行\" class=\"headerlink\" title=\"繁重的 JavaScript 执行\"></a>繁重的 JavaScript 执行</h2><p>浏览器在主线程上执行 JavaScript 时无法对大多数用户输入作出响应。换句话说，当主线程繁忙时，浏览器无法响应用户交互。要想改善这一点：</p>\n<ol>\n<li>分割长任务, 将长时间运行的代码拆解为更小的异步任务</li>\n<li>优化您的页面，做好交互准备</li>\n<li>使用 Web Worker</li>\n<li>减少 JavaScript 执行时间</li>\n</ol>\n<h3 id=\"分割长任务\"><a href=\"#分割长任务\" class=\"headerlink\" title=\"分割长任务\"></a>分割长任务</h3><ol>\n<li>任何阻塞主线程 50 毫秒或以上的代码都可以被称为长任务。</li>\n<li>长任务是 JavaScript 的执行期，这期间，用户可能会发现您的用户界面没有响应。</li>\n<li>将长任务拆分可以减少您网站上的输入延迟。</li>\n</ol>\n<h2 id=\"优化您的页面，做好交互准备\"><a href=\"#优化您的页面，做好交互准备\" class=\"headerlink\" title=\"优化您的页面，做好交互准备\"></a>优化您的页面，做好交互准备</h2><p>对于高度依赖 JavaScript 的网络应用程序来说，导致 FID 和 TBT 分数较差的常见原因有很多：</p>\n<h3 id=\"第一方脚本执行会延迟交互准备\"><a href=\"#第一方脚本执行会延迟交互准备\" class=\"headerlink\" title=\"第一方脚本执行会延迟交互准备\"></a>第一方脚本执行会延迟交互准备</h3><p>JavaScript 体积膨胀、执行时间过长和分块效率低下会延迟页面对用户输入作出响应的时机，并影响 FID、TBT 和 TTI。渐进式加载代码和功能可以有助于分散工作量，改善交互准备。<br>服务端渲染的应用程序在屏幕上绘制像素的速度可能看起来很快，但需要注意用户交互被大型脚本执行（例如通过数据重构来连接事件侦听器）阻塞的情况。如果使用了基于路由的代码分割，这可能会花费数百毫秒，有时甚至是数秒。请考虑将更多逻辑转移到服务器端，或在构建期间静态生成更多内容。<br>以下是优化某应用程序的第一方脚本加载之前和之后的 TBT 分数。通过移除关键路径上消耗大量资源为非必要组件加载（和执行）的脚本，用户便能够更快地与页面进行交互。</p>\n<h3 id=\"数据获取会影响交互准备的许多方面\"><a href=\"#数据获取会影响交互准备的许多方面\" class=\"headerlink\" title=\"数据获取会影响交互准备的许多方面\"></a>数据获取会影响交互准备的许多方面</h3><p>等待一连串的级联获取（例如组件的 JavaScript 和数据获取）会影响交互延迟。请尽量最大限度地减少对级联数据获取的依赖。<br>大型内联数据存储会延长 HTML 解析时间并影响绘制和交互指标。请尽量最大限度地减少需要在客户端进行后处理的数据量。</p>\n<h3 id=\"第三方脚本执行也会加剧交互延迟\"><a href=\"#第三方脚本执行也会加剧交互延迟\" class=\"headerlink\" title=\"第三方脚本执行也会加剧交互延迟\"></a>第三方脚本执行也会加剧交互延迟</h3><p>许多网站包括的第三方标签和分析会使网络一直处于忙碌状态，并使主线程周期性地无响应，从而影响交互延迟。请探究按需加载第三方代码的相关做法（例如，不要加载还未滚动到可视区域附近的非首屏广告）。<br>在某些情况下，第三方脚本会在主线程的优先级和带宽方面抢占第一方脚本，并延迟页面做好交互准备的时机。请尝试优先加载您认为可以为用户提供最大价值的内容。</p>\n<h2 id=\"使用-Web-Worker\"><a href=\"#使用-Web-Worker\" class=\"headerlink\" title=\"使用 Web Worker\"></a>使用 Web Worker</h2><p>被阻塞的主线程是输入延迟的主要原因之一。Web Worker 能够让 JavaScript 在后台线程上运行。将非用户界面操作移动到单独的工作线程上可以缩减主线程阻塞时间，从而改善 FID。</p>\n<p>请考虑使用以下库来使您更轻松地在网站上使用 Web Worker：</p>\n<ol>\n<li>Comlink：一个助手类库，该库抽象了 postMessage，使其更易于使用</li>\n<li>Workway : 一个通用的 Web Worker 导出器</li>\n<li>Workerize：将模块移动到 Web Worker 中</li>\n</ol>\n<h2 id=\"减少-JavaScript-执行时间\"><a href=\"#减少-JavaScript-执行时间\" class=\"headerlink\" title=\"减少 JavaScript 执行时间\"></a>减少 JavaScript 执行时间</h2><p>限制页面上 JavaScript 的数量可以减少浏览器执行 JavaScript 代码所需的时间。这样能够使浏览器更迅速地开始对任何用户交互作出响应。</p>\n<h3 id=\"要想减少在页面上执行的-JavaScript-数量：\"><a href=\"#要想减少在页面上执行的-JavaScript-数量：\" class=\"headerlink\" title=\"要想减少在页面上执行的 JavaScript 数量：\"></a>要想减少在页面上执行的 JavaScript 数量：</h3><ol>\n<li>延迟加载未使用的 JavaScript</li>\n<li>最大限度减少未使用的 polyfill</li>\n</ol>\n<h3 id=\"延迟加载未使用的-JavaScript\"><a href=\"#延迟加载未使用的-JavaScript\" class=\"headerlink\" title=\"延迟加载未使用的 JavaScript\"></a>延迟加载未使用的 JavaScript</h3><p>默认情况下，所有 JavaScript 都是阻塞渲染的。当浏览器遇到链接到外部 JavaScript 文件的脚本标签时，就必须暂停正在执行的操作，转而下载、解析、编译和执行该 JavaScript。因此，您应该只加载页面所需的代码或响应用户输入所需的代码。</p>\n<p>Chrome 开发者工具中的<code>代码覆盖率选项卡</code>能够告诉您网页上有多少未在使用的 JavaScript。</p>\n<h2 id=\"参考链接\"><a href=\"#参考链接\" class=\"headerlink\" title=\"参考链接\"></a>参考链接</h2><p><a href=\"https://web.dev/optimize-fid/\" target=\"_blank\" >optimize-fid</a></p>\n","text":"First Input Delay (FID)首次输入延迟，测量交互性。为了提供良好的用户体验，页面的 FID 应为 100 毫秒或更短 如何改进 FID要了解如何改进某个特定网站的 FID，您可以运行一次灯塔性能审计，并留心查看审计建议的各种具体机会。 虽然 FID 是一项实际...","link":"","photos":[],"count_time":{"symbolsCount":"1.9k","symbolsTime":"2 mins."},"categories":[{"name":"性能优化","slug":"性能优化","count":9,"path":"api/categories/性能优化.json"}],"tags":[{"name":"性能优化","slug":"性能优化","count":9,"path":"api/tags/性能优化.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#First-Input-Delay-FID\"><span class=\"toc-text\">First Input Delay (FID)</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%A6%82%E4%BD%95%E6%94%B9%E8%BF%9B-FID\"><span class=\"toc-text\">如何改进 FID</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%B9%81%E9%87%8D%E7%9A%84-JavaScript-%E6%89%A7%E8%A1%8C\"><span class=\"toc-text\">繁重的 JavaScript 执行</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%88%86%E5%89%B2%E9%95%BF%E4%BB%BB%E5%8A%A1\"><span class=\"toc-text\">分割长任务</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BC%98%E5%8C%96%E6%82%A8%E7%9A%84%E9%A1%B5%E9%9D%A2%EF%BC%8C%E5%81%9A%E5%A5%BD%E4%BA%A4%E4%BA%92%E5%87%86%E5%A4%87\"><span class=\"toc-text\">优化您的页面，做好交互准备</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%AC%AC%E4%B8%80%E6%96%B9%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E4%BC%9A%E5%BB%B6%E8%BF%9F%E4%BA%A4%E4%BA%92%E5%87%86%E5%A4%87\"><span class=\"toc-text\">第一方脚本执行会延迟交互准备</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E4%BC%9A%E5%BD%B1%E5%93%8D%E4%BA%A4%E4%BA%92%E5%87%86%E5%A4%87%E7%9A%84%E8%AE%B8%E5%A4%9A%E6%96%B9%E9%9D%A2\"><span class=\"toc-text\">数据获取会影响交互准备的许多方面</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%AC%AC%E4%B8%89%E6%96%B9%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E4%B9%9F%E4%BC%9A%E5%8A%A0%E5%89%A7%E4%BA%A4%E4%BA%92%E5%BB%B6%E8%BF%9F\"><span class=\"toc-text\">第三方脚本执行也会加剧交互延迟</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BD%BF%E7%94%A8-Web-Worker\"><span class=\"toc-text\">使用 Web Worker</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%87%8F%E5%B0%91-JavaScript-%E6%89%A7%E8%A1%8C%E6%97%B6%E9%97%B4\"><span class=\"toc-text\">减少 JavaScript 执行时间</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%A6%81%E6%83%B3%E5%87%8F%E5%B0%91%E5%9C%A8%E9%A1%B5%E9%9D%A2%E4%B8%8A%E6%89%A7%E8%A1%8C%E7%9A%84-JavaScript-%E6%95%B0%E9%87%8F%EF%BC%9A\"><span class=\"toc-text\">要想减少在页面上执行的 JavaScript 数量：</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%BB%B6%E8%BF%9F%E5%8A%A0%E8%BD%BD%E6%9C%AA%E4%BD%BF%E7%94%A8%E7%9A%84-JavaScript\"><span class=\"toc-text\">延迟加载未使用的 JavaScript</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5\"><span class=\"toc-text\">参考链接</span></a></li></ol>","author":{"name":"十三","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/202303171118970.webp","link":"/","description":"<div><p>自律，为了更好的自己</p><p>眼中有光，心中有梦，脚下有路</p><div>","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"性能指标 - CLS","uid":"fd6ac5dbf2fdaf53f897b01a2ee4dbfc","slug":"2023-02-14web_cls","date":"2023-02-14T14:32:14.000Z","updated":"2023-02-20T21:20:56.495Z","comments":true,"path":"api/articles/2023-02-14web_cls.json","keywords":null,"cover":"https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/dgpDFckbHwwOKdIGDa3N.svg","text":"Cumulative Layout Shift (CLS)累积布局偏移，测量视觉稳定性。为了提供良好的用户体验，页面的 CLS 应保持在 0.1. 或更少。 什么是 CLSCLS，即 Cumulative Layout Shift 累积布局偏移 CLS 测量整个页面生命周期内发生...","link":"","photos":[],"count_time":{"symbolsCount":824,"symbolsTime":"1 mins."},"categories":[{"name":"性能优化","slug":"性能优化","count":9,"path":"api/categories/性能优化.json"}],"tags":[{"name":"性能优化","slug":"性能优化","count":9,"path":"api/tags/性能优化.json"}],"author":{"name":"十三","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/202303171118970.webp","link":"/","description":"<div><p>自律，为了更好的自己</p><p>眼中有光，心中有梦，脚下有路</p><div>","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}},"next_post":{"title":"性能指标 - LCP","uid":"c0c40ac20df205f0ad9a5f01d2cefd4b","slug":"2023-02-14web_lcp","date":"2023-02-14T13:19:15.000Z","updated":"2023-02-20T21:20:56.495Z","comments":true,"path":"api/articles/2023-02-14web_lcp.json","keywords":null,"cover":"https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/ZZU8Z7TMKXmzZT2mCjJU.svg","text":"Largest Contentful Paint (LCP)最大内容绘制，测量加载性能。为了提供良好的用户体验，LCP 应在页面首次开始加载后的 2.5 秒内发生 导致 LCP 不佳的最常见原因是： 缓慢的服务器响应速度 阻塞渲染的 JavaScript 和 CSS 缓慢的资源加...","link":"","photos":[],"count_time":{"symbolsCount":"3.9k","symbolsTime":"4 mins."},"categories":[{"name":"性能优化","slug":"性能优化","count":9,"path":"api/categories/性能优化.json"}],"tags":[{"name":"性能优化","slug":"性能优化","count":9,"path":"api/tags/性能优化.json"}],"author":{"name":"十三","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/202303171118970.webp","link":"/","description":"<div><p>自律，为了更好的自己</p><p>眼中有光，心中有梦，脚下有路</p><div>","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}}}