{"title":"ant design formè®¾ç½®å€¼ !== è·å–å€¼","uid":"e2b55be84d65cc914ce2f0d3a3e083d3","slug":"2022-05-13react","date":"2022-05-13T07:39:33.000Z","updated":"2022-09-15T14:26:10.517Z","comments":true,"path":"api/articles/2022-05-13react.json","keywords":null,"cover":[],"content":"<h2 id=\"æœ‰æ„æ€çš„äº‹\"><a href=\"#æœ‰æ„æ€çš„äº‹\" class=\"headerlink\" title=\"æœ‰æ„æ€çš„äº‹\"></a>æœ‰æ„æ€çš„äº‹</h2><ul>\n<li>ä»Šå¤©ç»´æŠ¤é¡¹ç›®é‡åˆ°ä¸€ä¸ªæœ‰æ„æ€çš„äº‹ï¼Œç›´è§‚æ„Ÿå—ï¼Œè®¾ç½®å€¼ï¼Œå†å–å‡ºæ¥ï¼Œè²Œä¼¼æ²¡æ¯›ç—…<pre class=\"line-numbers language-tsx\" data-language=\"tsx\"><code class=\"language-tsx\">  &#x2F;&#x2F; ...\n  const [values, setValues] &#x3D; useState&lt;Record&lt;string, any&gt;&gt;()\n\n  const &#123; applyStartTime, applyEndTime, attendanceType, staffId &#125; &#x3D; values || &#123;&#125;\n\n  const getDetail &#x3D; usePersistFn(async () &#x3D;&gt; &#123;\n    &#x2F;&#x2F; ...ç•¥\n    const obj: Record&lt;string, any&gt; &#x3D; &#123;\n      staffId: applyStaff.staffId,\n      attendanceType: res.result.attendanceType,\n      applyStartTime: &#123;\n        value: moment(res.result.applyStartTime),\n        half: res.result.startDayType,\n      &#125;,\n      applyEndTime: &#123;\n        value: moment(res.result.applyEndTime),\n        half: res.result.endDayType,\n      &#125;,\n      applyReason,\n      applyAttachments,\n    &#125;\n    &#x2F;&#x2F; ...ç•¥\n    form.setFieldsValue(obj)\n    setValues(form.getFieldsValue())\n  &#125;)\n\n  &#x2F;&#x2F; ...ç•¥\n  const &#123; total, loading: totalLoading &#125; &#x3D; useCaculateDays(\n    &#123;\n      start: applyStartTime,\n      end: applyEndTime,\n    &#125;,\n    staffId,\n    attendanceType,\n  )\n  &#x2F;&#x2F; ...ç•¥\n\n  &#x2F;&#x2F; AnualFormç»„ä»¶\n  &lt;Form.Item name&#x3D;&quot;applyStartTime&quot; label&#x3D;&quot;èµ·å§‹æ—¥æœŸ&quot; rules&#x3D;&#123;[&#123; required: true &#125;]&#125;&gt;\n      &lt;HalftDatePicker predict&#x3D;&#123;&#123; lessThan: end?.value &#125;&#125; &#x2F;&gt;\n    &lt;&#x2F;Form.Item&gt;\n  &lt;Form.Item name&#x3D;&quot;applyEndTime&quot; label&#x3D;&quot;ç»“æŸæ—¥æœŸ&quot; rules&#x3D;&#123;[&#123; required: true &#125;]&#125;&gt;\n    &lt;HalftDatePicker predict&#x3D;&#123;&#123; moreThan: start?.value &#125;&#125; &#x2F;&gt;\n  &lt;&#x2F;Form.Item&gt;\n\n\n  type IValue &#x3D; &#123;\n    value?: moment.Moment\n    half: 1 | 2\n  &#125;\n &#x2F;&#x2F; HalftDatePickerç»„ä»¶\nconst HalftDatePicker: React.ForwardRefRenderFunction&lt;any, PickerProps&lt;moment.Moment&gt; &amp; &#123;\n  value?: IValue\n  onChange?: (v?: IValue) &#x3D;&gt; void\n  predict?: &#123;\n    lessThan?: moment.Moment\n    moreThan?: moment.Moment\n    holiday?: boolean\n  &#125;\n&#125;&gt; &#x3D; (props, ref) &#x3D;&gt; &#123;\n  &#x2F;&#x2F; ...ç•¥\n&#125;</code></pre></li>\n</ul>\n<p>ä»£ç çš„ç›®çš„æ˜¯ï¼š </p>\n<ol>\n<li>è¯·æ±‚è¯¦æƒ…</li>\n<li>è£…é…æ•°æ®ï¼Œæ›´æ–°values</li>\n<li>useCaculateDays é€šè¿‡åå°åŠ¨æ€è®¡ç®—æœ‰æ•ˆå·¥ä½œæ—¥ï¼Œè¿”å›totalè¯·å‡å¤©æ•°ï¼Œ</li>\n<li>æ¸²æŸ“totalåˆ°è¡¨å•å¯¹åº”ä½ç½®</li>\n</ol>\n<h3 id=\"è°ƒè¯•\"><a href=\"#è°ƒè¯•\" class=\"headerlink\" title=\"è°ƒè¯•\"></a>è°ƒè¯•</h3><p>ç»è¿‡ä¸€ç‚¹ä¸€ç‚¹å›æº¯è°ƒè¯•ï¼Œå‘ç° useCaculateDays æ²¡è¯·æ±‚ï¼Œè¢«åˆ¤æ–­æ‹¦æˆªæ‰äº†ï¼Œå¾€ä¸Šæ‰¾æ‰¾ï¼Œ</p>\n<pre class=\"line-numbers language-tsx\" data-language=\"tsx\"><code class=\"language-tsx\">form.setFieldsValue(obj)\nsetValues(form.getFieldsValue())</code></pre>\n\n<h3 id=\"æ‰“ä¸Šæ—¥å¿—\"><a href=\"#æ‰“ä¸Šæ—¥å¿—\" class=\"headerlink\" title=\"æ‰“ä¸Šæ—¥å¿—\"></a>æ‰“ä¸Šæ—¥å¿—</h3><pre class=\"line-numbers language-tsx\" data-language=\"tsx\"><code class=\"language-tsx\">&#x2F;&#x2F; ...ç•¥\nconsole.log(&quot;obj&quot;,obj);\nform.setFieldsValue(obj)\nconsole.log(&quot;obj1&quot;,form.getFieldsValue());\nsetValues(obj)</code></pre>\n\n<p>å‘ç°<code>obj</code>é”®å€¼å†…å®¹ä¸ç­‰äº<code>obj1</code></p>\n<ul>\n<li>obj</li>\n</ul>\n<pre class=\"line-numbers language-json\" data-language=\"json\"><code class=\"language-json\">&#123;\n    &quot;staffId&quot;: &quot;02333&quot;,\n    &quot;attendanceType&quot;: 11,\n    &quot;applyStartTime&quot;: &#123;\n        &quot;value&quot;: &quot;2022-03-23T16:00:00.000Z&quot;,\n        &quot;half&quot;: 1\n    &#125;,\n    &quot;applyEndTime&quot;: &#123;\n        &quot;value&quot;: &quot;2022-03-23T16:00:00.000Z&quot;,\n        &quot;half&quot;: 2\n    &#125;,\n    &quot;applyReason&quot;: &quot;&quot;,\n    &quot;applyAttachments&quot;: []\n&#125;\n</code></pre>\n<ul>\n<li>obj1<pre class=\"line-numbers language-json\" data-language=\"json\"><code class=\"language-json\">&#123;\n    &quot;staffId&quot;: &quot;02333&quot;,\n    &quot;attendanceType&quot;: 11,\n    &quot;applyReason&quot;: &quot;&quot;,\n    &quot;applyAttachments&quot;: []\n&#125;</code></pre></li>\n</ul>\n<p><em>çŒœæƒ³</em></p>\n<ul>\n<li>ä¼šä¸ä¼š<code>form.setFieldsValue</code>å¼‚æ­¥ï¼ŸæŸ¥äº†ä¸‹apiæ˜¯åŒæ­¥çš„<em>æ’é™¤è¿™ç§å¯èƒ½</em></li>\n<li>æ–­ç‚¹è°ƒè¯•è¿‡ç¨‹ä¸­ï¼Œä¹Ÿä¼šé‡åˆ°è¡¨å•æ¸²æŸ“ä¸€åŠçš„æƒ…å†µï¼Œ<code>AnualFormç»„ä»¶</code>æ˜¯æ¡ä»¶æ¸²æŸ“ï¼Œå¦‚æœè¿™å—è¡¨å•æ²¡æœ‰æ¸²æŸ“å‡ºæ¥ï¼Œé€šè¿‡<code>form.getFieldsValue</code>å°±æ‹¿ä¸åˆ°</li>\n</ul>\n<h3 id=\"ä¿®æ”¹ä»£ç éªŒè¯ä¸‹çŒœæƒ³\"><a href=\"#ä¿®æ”¹ä»£ç éªŒè¯ä¸‹çŒœæƒ³\" class=\"headerlink\" title=\"ä¿®æ”¹ä»£ç éªŒè¯ä¸‹çŒœæƒ³\"></a>ä¿®æ”¹ä»£ç éªŒè¯ä¸‹çŒœæƒ³</h3><pre class=\"line-numbers language-tsx\" data-language=\"tsx\"><code class=\"language-tsx\">console.log(&quot;obj&quot;,obj);\nform.setFieldsValue(obj)\nconsole.log(&quot;obj1&quot;,form.getFieldsValue());\nsetTimeout(() &#x3D;&gt; &#123;\n  setValues(form.getFieldsValue())\n  &#125;, 5000);\n&#125;</code></pre>\n<img src=\"http://t-blog-images.aijs.top/img/Kapture%202022-05-13%20at%2016.01.46.gif\" width=300 />\n\n<h3 id=\"æœ€ç»ˆä¿®æ”¹\"><a href=\"#æœ€ç»ˆä¿®æ”¹\" class=\"headerlink\" title=\"æœ€ç»ˆä¿®æ”¹\"></a>æœ€ç»ˆä¿®æ”¹</h3><pre class=\"line-numbers language-tsx\" data-language=\"tsx\"><code class=\"language-tsx\">form.setFieldsValue(obj)\nsetValues(obj)</code></pre>","text":"æœ‰æ„æ€çš„äº‹ ä»Šå¤©ç»´æŠ¤é¡¹ç›®é‡åˆ°ä¸€ä¸ªæœ‰æ„æ€çš„äº‹ï¼Œç›´è§‚æ„Ÿå—ï¼Œè®¾ç½®å€¼ï¼Œå†å–å‡ºæ¥ï¼Œè²Œä¼¼æ²¡æ¯›ç—… &#x2F;&#x2F; ... const [values, setValues] &#x3D; useState&lt;Record&lt;string, any&gt;&gt;() cons...","link":"","photos":[],"count_time":{"symbolsCount":"3.5k","symbolsTime":"3 mins."},"categories":[{"name":"react","slug":"react","count":18,"path":"api/categories/react.json"}],"tags":[{"name":"react","slug":"react","count":13,"path":"api/tags/react.json"},{"name":"bug","slug":"bug","count":6,"path":"api/tags/bug.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%9C%89%E6%84%8F%E6%80%9D%E7%9A%84%E4%BA%8B\"><span class=\"toc-text\">æœ‰æ„æ€çš„äº‹</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%B0%83%E8%AF%95\"><span class=\"toc-text\">è°ƒè¯•</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%89%93%E4%B8%8A%E6%97%A5%E5%BF%97\"><span class=\"toc-text\">æ‰“ä¸Šæ—¥å¿—</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BF%AE%E6%94%B9%E4%BB%A3%E7%A0%81%E9%AA%8C%E8%AF%81%E4%B8%8B%E7%8C%9C%E6%83%B3\"><span class=\"toc-text\">ä¿®æ”¹ä»£ç éªŒè¯ä¸‹çŒœæƒ³</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9C%80%E7%BB%88%E4%BF%AE%E6%94%B9\"><span class=\"toc-text\">æœ€ç»ˆä¿®æ”¹</span></a></li></ol></li></ol>","author":{"name":"é™ˆæµ·é¾™","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"éœ€è¦å°±å­¦å‘—ï¼Œå¤šå¤§ç‚¹äº‹ğŸ˜‚","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"è®¾è®¡æ¨¡å¼","uid":"deffdaaa2a24a19ee257667b3b36743c","slug":"2022-05-13design_mode","date":"2022-05-13T09:01:15.000Z","updated":"2022-09-15T14:26:10.516Z","comments":true,"path":"api/articles/2022-05-13design_mode.json","keywords":null,"cover":null,"text":"å…ˆèŠç”¨åˆ°è¿‡å“ªäº›ï¼ŒèƒŒåçš„è®¾è®¡æ¨¡å¼æ˜¯ä»€ä¹ˆ å®ä¾‹åŒ–ä¸€ä¸ª axios å®ä¾‹ï¼Œå…¨å±€éƒ½æ¥ä½¿ç”¨å®ƒ å•ä¾‹æ¨¡å¼ å…„å¼Ÿç»„ä»¶é€šä¿¡,äº‹ä»¶ç›‘å¬ è§‚å¯Ÿè€…æ¨¡å¼ æ„é€ å‡½æ•°ç»§æ‰¿ã€ç±»çš„ç»§æ‰¿ æ„é€ å‡½æ•°æ¨¡å¼ å®ä¾‹åŒ–ä¸åŒçš„å®ä¾‹ å·¥å‚æ¨¡å¼ ä¼˜åŒ–ä¸­çš„äº‹ä»¶ä»£ç†ä»£ç†æ¨¡å¼ esmã€commonjsæ¨¡å—æ¨¡å¼ ç†Ÿæ‚‰è€Œåˆé™Œç”Ÿï¼šç†Ÿæ‚‰çš„æ˜¯ä¸€...","link":"","photos":[],"count_time":{"symbolsCount":"2k","symbolsTime":"2 mins."},"categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","count":1,"path":"api/categories/å‰ç«¯.json"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","count":1,"path":"api/tags/è®¾è®¡æ¨¡å¼.json"},{"name":"å‰ç«¯","slug":"å‰ç«¯","count":1,"path":"api/tags/å‰ç«¯.json"}],"author":{"name":"é™ˆæµ·é¾™","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"éœ€è¦å°±å­¦å‘—ï¼Œå¤šå¤§ç‚¹äº‹ğŸ˜‚","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}},"next_post":{"title":"ModHeader","uid":"f31094f49d8642b9a610a9630bcdbff8","slug":"2022-05-13modeheader","date":"2022-05-13T06:59:19.000Z","updated":"2022-09-15T14:26:10.516Z","comments":true,"path":"api/articles/2022-05-13modeheader.json","keywords":null,"cover":[],"text":"é€šè¿‡ä¸åŒè¯·æ±‚å¤´å­—æ®µæ ‡è¯†è¯·æ±‚ä¸åŒçš„ç¯å¢ƒ Requesr HeadersAccept: *&#x2F;* Accept-Encoding: gzip, deflate, br Accept-Language: zh-CN,zh;q&#x3D;0.9,en;q&#x3D;0.8,zh-...","link":"","photos":[],"count_time":{"symbolsCount":685,"symbolsTime":"1 mins."},"categories":[{"name":"å·¥å…·","slug":"å·¥å…·","count":15,"path":"api/categories/å·¥å…·.json"}],"tags":[{"name":"å·¥å…·","slug":"å·¥å…·","count":7,"path":"api/tags/å·¥å…·.json"},{"name":"Chrome","slug":"Chrome","count":1,"path":"api/tags/Chrome.json"}],"author":{"name":"é™ˆæµ·é¾™","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"éœ€è¦å°±å­¦å‘—ï¼Œå¤šå¤§ç‚¹äº‹ğŸ˜‚","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}}}