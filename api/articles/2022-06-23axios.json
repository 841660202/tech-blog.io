{"title":"axios 1.0.0-alpha.1 æºç ","uid":"5878c07e39be3e6af6ed1f1edce82a5a","slug":"2022-06-23axios","date":"2022-06-23T01:22:54.000Z","updated":"2022-09-16T15:01:27.534Z","comments":true,"path":"api/articles/2022-06-23axios.json","keywords":null,"cover":"http://t-blog-images.aijs.top/img/20220623092515.webp","content":"<h2 id=\"å®˜ç½‘\"><a href=\"#å®˜ç½‘\" class=\"headerlink\" title=\"å®˜ç½‘\"></a>å®˜ç½‘</h2><p><a href=\"https://axios-http.com\" target=\"_blank\" >å®˜ç½‘é¦–é¡µ</a><br><a href=\"https://axios-http.com/docs/intro\" target=\"_blank\" >å®˜æ–¹æ–‡æ¡£ä»‹ç»</a><br><a href=\"https://axios-http.com/zh/docs/example\" target=\"_blank\" >ä¸­æ–‡æ–‡æ¡£</a></p>\n<p>Promise based HTTP client for the browser and node.js<br><em>åŸºäº promise å¯ä»¥ç”¨äºæµè§ˆå™¨å’Œ node.js çš„ç½‘ç»œè¯·æ±‚åº“</em></p>\n<p>Axios is a promise-based HTTP Client for node.js and the browser. It is isomorphic (&#x3D; it can run in the browser and nodejs with the same codebase). On the server-side it uses the native node.js http module, while on the client (browser) it uses XMLHttpRequests.<br><em>Axios æ˜¯ä¸€ä¸ªåŸºäº promise ç½‘ç»œè¯·æ±‚åº“ï¼Œä½œç”¨äº node.js å’Œæµè§ˆå™¨ä¸­ã€‚ å®ƒæ˜¯ isomorphicã€ŒåŒæ„ã€ çš„(å³åŒä¸€å¥—ä»£ç å¯ä»¥è¿è¡Œåœ¨æµè§ˆå™¨å’Œ node.js ä¸­)ã€‚åœ¨æœåŠ¡ç«¯å®ƒä½¿ç”¨åŸç”Ÿ node.js http æ¨¡å—, è€Œåœ¨å®¢æˆ·ç«¯ (æµè§ˆç«¯) åˆ™ä½¿ç”¨ XMLHttpRequestsã€‚</em></p>\n<h2 id=\"ç‰¹æ€§\"><a href=\"#ç‰¹æ€§\" class=\"headerlink\" title=\"ç‰¹æ€§\"></a>ç‰¹æ€§</h2><ul>\n<li>ä»æµè§ˆå™¨åˆ›å»º XMLHttpRequests</li>\n<li>ä» node.js åˆ›å»º http è¯·æ±‚</li>\n<li>æ”¯æŒ Promise API</li>\n<li>æ‹¦æˆªè¯·æ±‚å’Œå“åº”</li>\n<li>è½¬æ¢è¯·æ±‚å’Œå“åº”æ•°æ®</li>\n<li>å–æ¶ˆè¯·æ±‚</li>\n<li>è‡ªåŠ¨è½¬æ¢ JSON æ•°æ®</li>\n<li>å®¢æˆ·ç«¯æ”¯æŒé˜²å¾¡ XSRF</li>\n</ul>\n<h2 id=\"ä½¿ç”¨åŠ-Axios-API\"><a href=\"#ä½¿ç”¨åŠ-Axios-API\" class=\"headerlink\" title=\"ä½¿ç”¨åŠ Axios API\"></a>ä½¿ç”¨åŠ Axios API</h2><p><a href=\"https://axios-http.com/zh/docs/example\" target=\"_blank\" >get example ä½¿ç”¨</a><br><a href=\"https://axios-http.com/zh/docs/post_example\" target=\"_blank\" >post example ä½¿ç”¨</a><br><a href=\"https://axios-http.com/zh/docs/api_intro\" target=\"_blank\" >API</a></p>\n<div class=\"custom-quote tip\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12.01 15C12.01 14.5 12.01 14.5 12.01 14.5C12.04 13.75 13 13.46 14.04 12.2C14.41 11.74 14.69 11.41 14.86 10.85C15.15 9.95 14.92 9.18 14.86 9.02C14.8 8.79 14.52 8 13.72 7.46C13.06 7.02 12.42 7 12.14 7C11.9 7 11.36 7 10.78 7.3C10.28 7.56 9.98 7.9 9.83 8.1C9.24 8.82 9.06 9.63 9 10.06\"></path>\n<path stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 18H12.01\"></path>\n</svg></span>\n<p class=\"custom-quote-title\">TIP</p>\n<p>è¯·æ±‚æ–¹å¼åˆ«å<br>ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œå·²ç»ä¸ºæ‰€æœ‰æ”¯æŒçš„è¯·æ±‚æ–¹æ³•æä¾›äº†åˆ«åã€‚</p>\n<p>axios.request(config)<br>axios.get(url[, config])<br>axios.delete(url[, config])<br>axios.head(url[, config]) ?<br>axios.options(url[, config]) é¢„æ£€<br>axios.post(url[, data[, config]])<br>axios.put(url[, data[, config]])<br>axios.patch(url[, data[, config]])? patch æ–¹æ³•ç”¨æ¥æ›´æ–°å±€éƒ¨èµ„æº<br>æ³¨æ„<br>åœ¨ä½¿ç”¨åˆ«åæ–¹æ³•æ—¶ï¼Œ urlã€methodã€data è¿™äº›å±æ€§éƒ½ä¸å¿…åœ¨é…ç½®ä¸­æŒ‡å®šã€‚</p>\n<p>restful åªæ˜¯æ ‡å‡†ï¼Œæ ‡å‡†çš„æ„æ€æ˜¯å¦‚æœåœ¨å¤§å®¶éƒ½ä¾æ­¤è¡Œäº‹çš„è¯ï¼Œæ²Ÿé€šæˆæœ¬ä¼šå¾ˆä½ï¼Œå¼€å‘æ•ˆç‡å°±é«˜ã€‚ä½†å¹¶éå¼ºåˆ¶(ä¹Ÿæ²¡äººå¼ºåˆ¶å¾—äº†)ï¼Œæ‰€ä»¥ä½ è¯´åœ¨ä½ çš„ç¨‹åºé‡ŒæŠŠæ–¹æ³•åä» put æ”¹æˆ patch æ²¡æœ‰ä»»ä½•å½±å“ï¼Œé‚£æ˜¯è‡ªç„¶ï¼Œå› ä¸ºä½ çš„åç«¯ç¨‹åºå¹¶æ²¡æœ‰æŒ‰ç…§æ ‡å‡†å¯¹ä¸¤ä¸ªæ–¹æ³•åšä¸åŒå¤„ç†ï¼Œå¥¹çš„è¡¨ç°è‡ªç„¶æ˜¯ä¸€æ ·çš„</p>\n<p>å³çº¦å®šï¼Œä½†å¹¶ä¸æ˜¯æ‰€æœ‰çš„äººéƒ½è¿™ä¹ˆå¹²ï¼Œå…·ä½“é¡¹ç›®å¦‚ä½•å®ç°ï¼Œè¿˜éœ€è¦å‰åç«¯ä¸€è‡´ï¼ˆæ‰“ä¸ªæ¯”æ–¹ï¼šæœ‰çš„åç«¯ç”¨ post åšåˆ é™¤ï¼Œç”¨ post åšæŸ¥è¯¢ï¼Œç”¨ post åšæ›´æ–°ï¼Œå†ä¸¾ä¸ªä¾‹å­ä¸‰è„šæ’å¤´æœ‰å¤§æœ‰å°ä¸çŸ¥é“ä½ æ™“ä¸æ™“å¾—ï¼Ÿåªè¦å¯¹åº”çš„æ’å­”æ˜¯å¯¹åº”çš„å¤§å°ä¹Ÿå°±å¯ä»¥è¿è¡Œï¼Œè¦ä¸ç„¶è¿ä¸ä¸Šï¼‰</p>\n</p>\n</div>\n<p>â€¦</p>\n<p><strong>axios.options(url[, config])</strong></p>\n<p><a href=\"https://blog.csdn.net/csdnyp/article/details/122651869\">axios ä¸­ä¸ºä»€ä¹ˆä¼šæœ‰ OPTIONS è¯·æ±‚</a></p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>æµè§ˆå™¨é™åˆ¶è·¨åŸŸ<br>æµè§ˆå™¨é™åˆ¶è·¨åŸŸè¯·æ±‚ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼ï¼š<br>1ã€é™åˆ¶å‘èµ·è·¨åŸŸè¯·æ±‚<br>2ã€è·¨åŸŸè¯·æ±‚å¯ä»¥æ­£å¸¸å‘èµ·ï¼Œä½†æ˜¯è¿”å›çš„ç»“æœä¼šè¢«æµè§ˆå™¨æ‹¦æˆª</p></blockquote>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨ä¼šä»¥ç¬¬äºŒç§æ–¹å¼é™åˆ¶è·¨åŸŸè¯·æ±‚ã€‚è¿™ç§å­˜åœ¨ä¸€ç§æƒ…å†µï¼Œ_è¯·æ±‚å·²ç»åˆ°è¾¾æœåŠ¡å™¨å¹¶å“åº”äº†æŸäº›æ“ä½œï¼Œæ”¹å˜äº†æ•°æ®åº“æ•°æ®ï¼Œä½†æ˜¯è¿”å›çš„ç»“æœä¼šè¢«æµè§ˆå™¨æ‹¦æˆªï¼Œç”¨æˆ·å°±ä¸èƒ½å–åˆ°ç›¸åº”çš„ç»“æœè¿›è¡Œåç»­çš„æ“ä½œ_ã€‚<strong>æ‰€ä»¥ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œæµè§ˆå™¨å°±ä¼šé€šè¿‡ OPTIONS æ–¹æ³•å¯¹è¯·æ±‚è¿›è¡Œé¢„æ£€ï¼Œé€šè¿‡è¯¢é—®æœåŠ¡å™¨æ˜¯å¦å…è®¸è¿™æ¬¡è¯·æ±‚ï¼Œå…è®¸ä¹‹åï¼ŒæœåŠ¡å™¨æ‰ä¼šå“åº”çœŸå®è¯·æ±‚ï¼Œå¦åˆ™å°±é˜»æ­¢çœŸå®è¯·æ±‚</strong>ã€‚</p></blockquote>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>é¡¹ç›®ä¸­éœ€è¦ OPTIONS é¢„æ£€å—ï¼Ÿ<br>ç”¨æˆ·ç™»é™†ä¹‹åï¼Œæˆ‘ä»¬ä¼šè·å– token å€¼ï¼Œåœ¨æ¯ä¸€æ¬¡å‘èµ·è¯·æ±‚æ—¶ï¼Œè¯·æ±‚å¤´éƒ½ä¼šæºå¸¦è¿™ä¸ª token å€¼ï¼Œæ‰€ä»¥ä¼šè§¦å‘é¢„æ£€è¯·æ±‚ã€‚å› ä¸ºç›®å‰é™¤äº†ç™»å½•ï¼Œå…¶ä»–è¯·æ±‚æ¥å£è¯·æ±‚å¤´éƒ½æºå¸¦äº† tokenï¼Œè€Œä¸”æˆ‘ä»¬çš„ Content-Type ç»å¤§å¤šæ•°æ˜¯ application&#x2F;jsonï¼Œæ‰€ä»¥é¢„æ£€æ€»ä¼šå­˜åœ¨ã€‚å¦‚æœä¸æƒ³å‘èµ· OPTIONS é¢„æ£€è¯·æ±‚ï¼Œå»ºè®®åç«¯åœ¨è¯·æ±‚çš„è¿”å›å¤´éƒ¨æ·»åŠ ï¼šAccess-Control-Max-Age:(number)ã€‚</p></blockquote>\n<p><a href=\"https://blog.csdn.net/u011200562/article/details/110431341\" target=\"_blank\" >Access-Control-Max-Age æ˜¯ä»€ä¹ˆ</a></p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>æµè§ˆå™¨çš„åŒæºç­–ç•¥ï¼Œå°±æ˜¯å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œæµè§ˆå™¨ä¼šé™åˆ¶ä»è„šæœ¬å‘èµ·çš„è·¨åŸŸ HTTP è¯·æ±‚ï¼ˆæ¯”å¦‚å¼‚æ­¥è¯·æ±‚ GET, POST, PUT, DELETE, OPTIONS ç­‰ç­‰ï¼‰ï¼Œæ‰€ä»¥æµè§ˆå™¨ä¼šå‘æ‰€è¯·æ±‚çš„æœåŠ¡å™¨å‘èµ·ä¸¤æ¬¡è¯·æ±‚ï¼Œç¬¬ä¸€æ¬¡æ˜¯æµè§ˆå™¨ä½¿ç”¨ OPTIONS æ–¹æ³•å‘èµ·ä¸€ä¸ªé¢„æ£€è¯·æ±‚ï¼Œç¬¬äºŒæ¬¡æ‰æ˜¯çœŸæ­£çš„å¼‚æ­¥è¯·æ±‚ï¼Œç¬¬ä¸€æ¬¡çš„é¢„æ£€è¯·æ±‚è·çŸ¥æœåŠ¡å™¨æ˜¯å¦å…è®¸è¯¥è·¨åŸŸè¯·æ±‚ï¼šå¦‚æœå…è®¸ï¼Œæ‰å‘èµ·ç¬¬äºŒæ¬¡çœŸå®çš„è¯·æ±‚ï¼›å¦‚æœä¸å…è®¸ï¼Œåˆ™æ‹¦æˆªç¬¬äºŒæ¬¡è¯·æ±‚ã€‚</p>\n<p>Access-Control-Max-Age ç”¨æ¥æŒ‡å®šæœ¬æ¬¡é¢„æ£€è¯·æ±‚çš„æœ‰æ•ˆæœŸï¼Œå•ä½ä¸ºç§’ï¼Œï¼Œåœ¨æ­¤æœŸé—´ä¸ç”¨å‘å‡ºå¦ä¸€æ¡é¢„æ£€è¯·æ±‚ã€‚</p>\n<p>ä¾‹å¦‚ï¼š</p>\n<p>resp.addHeader(â€œAccess-Control-Max-Ageâ€, â€œ0â€)ï¼Œè¡¨ç¤ºæ¯æ¬¡å¼‚æ­¥è¯·æ±‚éƒ½å‘èµ·é¢„æ£€è¯·æ±‚ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå‘é€ä¸¤æ¬¡è¯·æ±‚ã€‚</p>\n<p>resp.addHeader(â€œAccess-Control-Max-Ageâ€, â€œ1800â€)ï¼Œè¡¨ç¤ºéš” 30 åˆ†é’Ÿæ‰å‘èµ·é¢„æ£€è¯·æ±‚ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå‘é€ä¸¤æ¬¡è¯·æ±‚</p></blockquote>\n<h2 id=\"æ³¨æ„ç‚¹\"><a href=\"#æ³¨æ„ç‚¹\" class=\"headerlink\" title=\"æ³¨æ„ç‚¹\"></a>æ³¨æ„ç‚¹</h2><ol>\n<li><p><a href=\"https://axios-http.com/zh/docs/config_defaults#:~:text=%3D%20AUTH_TOKEN%3B-,%E9%85%8D%E7%BD%AE%E7%9A%84%E4%BC%98%E5%85%88%E7%BA%A7,-%E9%85%8D%E7%BD%AE%E5%B0%86%E4%BC%9A%E6%8C%89\" target=\"_blank\" >é…ç½®çš„ä¼˜å…ˆçº§</a><br>é…ç½®å°†ä¼šæŒ‰ä¼˜å…ˆçº§è¿›è¡Œåˆå¹¶ã€‚å®ƒçš„é¡ºåºæ˜¯ï¼šåœ¨ <code>lib/defaults.js</code> ä¸­æ‰¾åˆ°çš„åº“é»˜è®¤å€¼ï¼Œç„¶åæ˜¯å®ä¾‹çš„ <code>defaults</code> å±æ€§ï¼Œæœ€åæ˜¯<code>è¯·æ±‚çš„ config å‚æ•°</code>ã€‚åé¢çš„ä¼˜å…ˆçº§è¦é«˜äºå‰é¢çš„ã€‚ä¸‹é¢æœ‰ä¸€ä¸ªä¾‹å­ã€‚</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">&#x2F;&#x2F; ä½¿ç”¨åº“æä¾›çš„é»˜è®¤é…ç½®åˆ›å»ºå®ä¾‹\n&#x2F;&#x2F; æ­¤æ—¶è¶…æ—¶é…ç½®çš„é»˜è®¤å€¼æ˜¯ &#96;0&#96;\nconst instance &#x3D; axios.create();\n&#x2F;&#x2F; é‡å†™åº“çš„è¶…æ—¶é»˜è®¤å€¼\n&#x2F;&#x2F; ç°åœ¨ï¼Œæ‰€æœ‰ä½¿ç”¨æ­¤å®ä¾‹çš„è¯·æ±‚éƒ½å°†ç­‰å¾… 2.5 ç§’ï¼Œç„¶åæ‰ä¼šè¶…æ—¶\ninstance.defaults.timeout &#x3D; 2500;\n\n&#x2F;&#x2F; é‡å†™æ­¤è¯·æ±‚çš„è¶…æ—¶æ—¶é—´ï¼Œå› ä¸ºè¯¥è¯·æ±‚éœ€è¦å¾ˆé•¿æ—¶é—´\ninstance.get(&quot;&#x2F;longRequest&quot;, &#123;\n  timeout: 5000,\n&#125;);</code></pre>\n</li>\n<li><p>ç‰ˆæœ¬å‘å¸ƒæ²¡æœ‰éµå®ˆ<code>è¯­ä¹‰åŒ–ç‰ˆæœ¬</code></p>\n</li>\n</ol>\n<p>åœ¨ redux ç« èŠ‚æ›¾èŠè¿‡åŒ…çš„ç‰ˆæœ¬, å¿…é¡»æœ‰, è¦ç¬¦åˆ<a href=\"https://docs.npmjs.com/about-semantic-versioning\">semantic versioning guidelines</a>, å‚è€ƒ <a href=\"https://semver.org/lang/zh-CN/\">è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶è§„èŒƒ</a>, å»ºè®®ä»”ç»†é€šè¯»<br><img src=\"http://t-blog-images.aijs.top/img/20220525140247.webp\" width=600 style=\"object-fit: content\"/></p>\n<p></p>\n\n<h2 id=\"å‡è®¾\"><a href=\"#å‡è®¾\" class=\"headerlink\" title=\"å‡è®¾\"></a>å‡è®¾</h2><p>å·²ç»é€šè¿‡å®˜æ–¹æ–‡æ¡£å¯¹ axios çš„ä½¿ç”¨å’Œ api å·²ç»æœ‰äº†åˆæ­¥çš„äº†è§£</p>\n<h2 id=\"æºç \"><a href=\"#æºç \" class=\"headerlink\" title=\"æºç \"></a>æºç </h2><ul>\n<li>äº†è§£ç‰¹æ€§çš„å®ç°è¿‡ç¨‹</li>\n<li>äº†è§£ api çš„å®ç°è¿‡ç¨‹</li>\n<li>çœ‹çœ‹ä»£ç é ä¸é è°±ï¼Œæœ‰æ²¡æœ‰â€œå½©è›‹â€(è›™å»ï½ï¼Œæˆ‘æ—©ä¸Šçªç„¶å†’çš„æƒ³æ³•ï¼Œç«Ÿç„¶åœ¨ä¸‹åˆçœŸçš„é‡åˆ°äº†ï¼Œç›´è§‰ï½)</li>\n</ul>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">.\nâ”œâ”€â”€ CHANGELOG.md\nâ”œâ”€â”€ CODE_OF_CONDUCT.md\nâ”œâ”€â”€ COLLABORATOR_GUIDE.md\nâ”œâ”€â”€ CONTRIBUTING.md\nâ”œâ”€â”€ ECOSYSTEM.md\nâ”œâ”€â”€ LICENSE\nâ”œâ”€â”€ README.md\nâ”œâ”€â”€ SECURITY.md\nâ”œâ”€â”€ UPGRADE_GUIDE.md\nâ”œâ”€â”€ bin\nâ”œâ”€â”€ bower.json # ç”¨äºbower install\nâ”œâ”€â”€ dist\nâ”œâ”€â”€ examples\nâ”œâ”€â”€ gulpfile.js # gulpä»»åŠ¡\nâ”œâ”€â”€ index.d.ts\nâ”œâ”€â”€ index.js\nâ”œâ”€â”€ karma.conf.cjs\nâ”œâ”€â”€ lib\nâ”œâ”€â”€ package-lock.json\nâ”œâ”€â”€ package.json # &quot;build&quot;: &quot;gulp clear &amp;&amp; cross-env NODE_ENV&#x3D;production rollup -c -m&quot;,\nâ”œâ”€â”€ rollup.config.js # rollup æ‰“åŒ…é…ç½®\nâ”œâ”€â”€ sandbox # ä¸€ä¸ªå‰åç«¯æµ‹è¯•demo\nâ”œâ”€â”€ test\nâ”œâ”€â”€ tsconfig.json\nâ”œâ”€â”€ tslint.json\nâ””â”€â”€ webpack.config.js # webpacké…ç½®ï¼Œæ²¡æœ‰ä½¿ç”¨çš„æ ·å­\n\n6 directories, 20 files\n</code></pre>\n\n<h2 id=\"gulpfile-js\"><a href=\"#gulpfile-js\" class=\"headerlink\" title=\"gulpfile.js\"></a>gulpfile.js</h2><p>gulpfile ç°åœ¨é¡¹ç›®å¾ˆå°‘è§ï¼Œä¸Šæ¬¡è§æ˜¯åœ¨ 2017 å¹´çš„æ—¶å€™äº†ï¼Œä¸€å¼€å§‹ï¼Œæˆ‘çœ‹åˆ°æœ‰ æ ¹ç›®å½•<code>bower.json</code> <code>gulpfile.js</code> <code>rollup.config.js</code> <code>webpack.config.js</code>,æœ‰ç‚¹æ‡µé€¼ï½</p>\n<img src=\"http://t-blog-images.aijs.top/img/20220623135204.webp\"/>\n\n<h2 id=\"bower-json\"><a href=\"#bower-json\" class=\"headerlink\" title=\"bower.json\"></a>bower.json</h2><p><strong>äº†è§£ä¸‹ï¼Œæœ‰è¿™ä¹ˆä¸ªä¸œè¥¿ï¼Œä»¥åä¼°è®¡ä¹Ÿç”¨ä¸åˆ°</strong></p>\n<p><a href=\"https://baijiahao.baidu.com/s?id=1710656712337561707&wfr=spider&for=pc\" target=\"_blank\" >bower ä»‹ç»è§</a><br><a href=\"https://github.com/bower/bower\" target=\"_blank\" >github ä»“åº“</a></p>\n<p>Bower æ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯çš„è½¯ä»¶åŒ…ç®¡ç†å™¨ï¼Œå®ƒå¯ç”¨äºæœç´¢ã€å®‰è£…å’Œå¸è½½å¦‚ JavaScriptã€HTMLã€CSS<br>ä¹‹ç±»çš„ç½‘ç»œèµ„æºï¼ŒBower æ˜¯ Web å¼€å‘ä¸­çš„ä¸€ä¸ªå‰ç«¯æ–‡ä»¶åŒ…ç®¡ç†å™¨ï¼Œç±»ä¼¼äº Node æ¨¡å—çš„<br>npm åŒ…ç®¡ç†å™¨ï¼Œbower ä¾èµ–äº Gitã€Node å’Œ npmã€‚</p>\n<h2 id=\"package-json\"><a href=\"#package-json\" class=\"headerlink\" title=\"package.json\"></a>package.json</h2><p>çœ‹å®Œä¸Šè¿°å‡ ä¸ªæ–‡ä»¶æœ‰ç‚¹æ‡µï¼Œå·¥å…·åƒæ˜¯é‡å¤çš„æ ·å­</p>\n<pre class=\"line-numbers language-json\" data-language=\"json\"><code class=\"language-json\">&quot;scripts&quot;: &#123;\n  &quot;test&quot;: &quot;npm run test:eslint &amp;&amp; npm run test:mocha &amp;&amp; npm run test:karma &amp;&amp; npm run test:dtslint&quot;,\n  &quot;test:eslint&quot;: &quot;node bin&#x2F;ssl_hotfix.js eslint lib&#x2F;**&#x2F;*.js&quot;,\n  &quot;test:dtslint&quot;: &quot;node bin&#x2F;ssl_hotfix.js dtslint&quot;,\n  &quot;test:mocha&quot;: &quot;node bin&#x2F;ssl_hotfix.js mocha test&#x2F;unit&#x2F;**&#x2F;*.js --timeout 30000 --exit&quot;,\n  &quot;test:karma&quot;: &quot;node bin&#x2F;ssl_hotfix.js cross-env LISTEN_ADDR&#x3D;:: karma start karma.conf.cjs --single-run&quot;,\n  &quot;test:karma:server&quot;: &quot;node bin&#x2F;ssl_hotfix.js cross-env karma start karma.conf.cjs&quot;,\n  &quot;start&quot;: &quot;node .&#x2F;sandbox&#x2F;server.js&quot;,\n  &quot;preversion&quot;: &quot;gulp version &amp;&amp; npm test&quot;,\n  &quot;version&quot;: &quot;npm run build &amp;&amp; git add dist &amp;&amp; git add package.json&quot;,\n  &quot;prepublishOnly&quot;: &quot;npm test&quot;,\n  &quot;postpublish&quot;: &quot;git push &amp;&amp; git push --tags &quot;,\n  &quot;build&quot;: &quot;gulp clear &amp;&amp; cross-env NODE_ENV&#x3D;production rollup -c -m&quot;, &#x2F;&#x2F; æ‰“åŒ…åªç”¨åˆ°äº†gulp å’Œ rollupï¼Œæ²¡æœ‰ç”¨åˆ°webpack,webpack.config.jsæ˜¯å¤šä½™çš„\n  &quot;examples&quot;: &quot;node .&#x2F;examples&#x2F;server.js&quot;,\n  &quot;coveralls&quot;: &quot;cat coverage&#x2F;lcov.info | .&#x2F;node_modules&#x2F;coveralls&#x2F;bin&#x2F;coveralls.js&quot;,\n  &quot;fix&quot;: &quot;eslint --fix lib&#x2F;**&#x2F;*.js&quot;\n&#125;,</code></pre>\n\n<h2 id=\"rollup-config-js\"><a href=\"#rollup-config-js\" class=\"headerlink\" title=\"rollup.config.js\"></a>rollup.config.js</h2><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">import resolve from &quot;@rollup&#x2F;plugin-node-resolve&quot;;\nimport commonjs from &quot;@rollup&#x2F;plugin-commonjs&quot;;\nimport &#123; terser &#125; from &quot;rollup-plugin-terser&quot;;\nimport json from &quot;@rollup&#x2F;plugin-json&quot;;\nimport &#123; babel &#125; from &quot;@rollup&#x2F;plugin-babel&quot;;\nimport autoExternal from &quot;rollup-plugin-auto-external&quot;;\n\nconst lib &#x3D; require(&quot;.&#x2F;package.json&quot;);\nconst outputFileName &#x3D; &quot;axios&quot;;\nconst name &#x3D; &quot;axios&quot;;\nconst input &#x3D; &quot;.&#x2F;lib&#x2F;axios.js&quot;; &#x2F;&#x2F; æºç å…¥å£\n&#x2F;&#x2F; minifiedVersionå‚æ•°æœ€å°åŒ–ï¼Œé»˜è®¤trueï¼Œä¸‹é¢ä¸‰å¤„è°ƒç”¨éƒ½æ²¡æœ‰ä¼ ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸webpack.config.jsæ— å…³\nconst buildConfig &#x3D; (&#123;\n  es5,\n  browser &#x3D; true,\n  minifiedVersion &#x3D; true,\n  ...config\n&#125;) &#x3D;&gt; &#123;\n  const build &#x3D; (&#123; minified &#125;) &#x3D;&gt; (&#123;\n    input,\n    ...config,\n    output: &#123;\n      ...config.output, &#x2F;&#x2F; é‡Œé¢æœ‰bannerä¿¡æ¯\n      file: &#96;$&#123;config.output.file&#125;.$&#123;minified ? &quot;min.js&quot; : &quot;js&quot;&#125;&#96;,\n    &#125;,\n    plugins: [\n      json(),\n      resolve(&#123; browser &#125;),\n      commonjs(),\n      minified &amp;&amp; terser(),\n      ...(es5\n        ? [\n            babel(&#123;\n              babelHelpers: &quot;bundled&quot;,\n              presets: [&quot;@babel&#x2F;preset-env&quot;],\n            &#125;),\n          ]\n        : []),\n      ...(config.plugins || []),\n    ],\n  &#125;);\n\n  const configs &#x3D; [build(&#123; minified: false &#125;)];\n\n  if (minifiedVersion) &#123;\n    build(&#123; minified: true &#125;);\n  &#125;\n\n  return configs;\n&#125;;\n\nexport default async () &#x3D;&gt; &#123;\n  const year &#x3D; new Date().getFullYear();\n  const banner &#x3D; &#96;&#x2F;&#x2F; Axios v$&#123;lib.version&#125; Copyright (c) $&#123;year&#125; $&#123;lib.author&#125; and contributors&#96;;\n\n  return [\n    ...buildConfig(&#123;\n      es5: true,\n      output: &#123;\n        file: &#96;dist&#x2F;$&#123;outputFileName&#125;&#96;,\n        name,\n        format: &quot;umd&quot;, &#x2F;&#x2F; umdæ ¼å¼\n        exports: &quot;default&quot;,\n        banner,\n      &#125;,\n    &#125;),\n\n    ...buildConfig(&#123;\n      output: &#123;\n        file: &#96;dist&#x2F;esm&#x2F;$&#123;outputFileName&#125;&#96;,\n        format: &quot;esm&quot;, &#x2F;&#x2F; esmæ ¼å¼\n        preferConst: true,\n        exports: &quot;named&quot;,\n        banner,\n      &#125;,\n    &#125;),\n    &#x2F;&#x2F; Node.js commonjs build\n    &#123;\n      input,\n      output: &#123;\n        file: &#96;dist&#x2F;node&#x2F;$&#123;name&#125;.cjs&#96;,\n        format: &quot;cjs&quot;, &#x2F;&#x2F; commonjsæ ¼å¼\n        preferConst: true,\n        exports: &quot;default&quot;,\n        banner,\n      &#125;,\n      plugins: [autoExternal(), resolve(), commonjs()],\n    &#125;,\n  ];\n&#125;;</code></pre>\n\n<h2 id=\"æ³¨æ„\"><a href=\"#æ³¨æ„\" class=\"headerlink\" title=\"æ³¨æ„\"></a>æ³¨æ„</h2><div class=\"custom-quote warning\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12 8V13\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12 15.99V16.01\"></path>\n</svg>\n</span>\n<p class=\"custom-quote-title\">WARNING</p>\n<p><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">ğŸ‘‘ ~&#x2F;Desktop&#x2F;axios git:(v1.x) âœ— $ yarn build\nyarn run v1.4.0\n$ gulp clear &amp;&amp; cross-env NODE_ENV&#x3D;production rollup -c -m\n[14:19:33] Using gulpfile ~&#x2F;Desktop&#x2F;axios&#x2F;gulpfile.js\n[14:19:33] Starting &#39;clear&#39;...\n[14:19:33] Finished &#39;clear&#39; after 5.74 ms\n[!] Error: Cannot find module &#39;@babel&#x2F;core&#39;\nRequire stack:\n- &#x2F;Users&#x2F;haotian&#x2F;Desktop&#x2F;axios&#x2F;node_modules&#x2F;@rollup&#x2F;plugin-babel&#x2F;dist&#x2F;index.js\n- &#x2F;Users&#x2F;haotian&#x2F;Desktop&#x2F;axios&#x2F;rollup.config.js\n- &#x2F;Users&#x2F;haotian&#x2F;Desktop&#x2F;axios&#x2F;node_modules&#x2F;rollup&#x2F;dist&#x2F;shared&#x2F;loadConfigFile.js\n- &#x2F;Users&#x2F;haotian&#x2F;Desktop&#x2F;axios&#x2F;node_modules&#x2F;rollup&#x2F;dist&#x2F;bin&#x2F;rollup\nError: Cannot find module &#39;@babel&#x2F;core&#39;\n\nè§£å†³ï¼š\n\nğŸ‘‘ ~&#x2F;Desktop&#x2F;axios git:(v1.x) âœ— $ yarn add @babel&#x2F;core -D\nyarn add v1.4.0\n[1&#x2F;4] ğŸ”  Resolving packages...\n[2&#x2F;4] ğŸšš  Fetching packages...\nwarning Pattern [&quot;@definitelytyped&#x2F;typescript-versions@latest&quot;] is trying to unpack in the same destination &quot;&#x2F;Users&#x2F;haotian&#x2F;Library&#x2F;Caches&#x2F;Yarn&#x2F;v1&#x2F;npm-@definitelytyped&#x2F;typescript-versions-0.0.118-de13fb755c5181443860c3c74b6730f47f6541fc&quot; as pattern [&quot;@definitelytyped&#x2F;typescript-versions@^0.0.118&quot;,&quot;@definitelytyped&#x2F;typescript-versions@^0.0.118&quot;,&quot;@definitelytyped&#x2F;typescript-versions@^0.0.118&quot;]. This could result in non-deterministic behavior, skipping.\n[3&#x2F;4] ğŸ”—  Linking dependencies...\nwarning &quot; &gt; @rollup&#x2F;plugin-babel@5.3.1&quot; has unmet peer dependency &quot;@types&#x2F;babel__core@^7.1.9&quot;.\nwarning &quot; &gt; istanbul-instrumenter-loader@3.0.1&quot; has unmet peer dependency &quot;webpack@^2.0.0 || ^3.0.0 || ^4.0.0&quot;.\nwarning &quot;karma &gt; socket.io &gt; engine.io &gt; ws@8.2.3&quot; has unmet peer dependency &quot;bufferutil@^4.0.1&quot;.\nwarning &quot;karma &gt; socket.io &gt; engine.io &gt; ws@8.2.3&quot; has unmet peer dependency &quot;utf-8-validate@^5.0.2&quot;.\nwarning &quot;karma-sauce-launcher &gt; webdriverio &gt; puppeteer-core &gt; node-fetch@2.6.7&quot; has unmet peer dependency &quot;encoding@^0.1.0&quot;.\nwarning &quot;karma-sauce-launcher &gt; webdriverio &gt; puppeteer-core &gt; ws@7.5.8&quot; has unmet peer dependency &quot;bufferutil@^4.0.1&quot;.\nwarning &quot;karma-sauce-launcher &gt; webdriverio &gt; puppeteer-core &gt; ws@7.5.8&quot; has unmet peer dependency &quot;utf-8-validate@^5.0.2&quot;.\nwarning &quot; &gt; terser-webpack-plugin@4.2.3&quot; has unmet peer dependency &quot;webpack@^4.0.0 || ^5.0.0&quot;.\n[4&#x2F;4] ğŸ“ƒ  Building fresh packages...\nsuccess Saved lockfile.\nsuccess Saved 5 new dependencies.\nâ”œâ”€ @ampproject&#x2F;remapping@2.2.0\nâ”œâ”€ @babel&#x2F;core@7.18.5\nâ”œâ”€ @babel&#x2F;helpers@7.18.2\nâ”œâ”€ gensync@1.0.0-beta.2\nâ””â”€ json5@2.2.1\nâœ¨  Done in 37.80s.\nğŸ‘‘ ~&#x2F;Desktop&#x2F;axios git:(v1.x) âœ— $ yarn build\nyarn run v1.4.0\n$ gulp clear &amp;&amp; cross-env NODE_ENV&#x3D;production rollup -c -m\n[14:20:32] Using gulpfile ~&#x2F;Desktop&#x2F;axios&#x2F;gulpfile.js\n[14:20:32] Starting &#39;clear&#39;...\n[14:20:32] Finished &#39;clear&#39; after 48 ms\n\n.&#x2F;lib&#x2F;axios.js â†’ dist&#x2F;axios.js...\ncreated dist&#x2F;axios.js in 3.5s\n\n.&#x2F;lib&#x2F;axios.js â†’ dist&#x2F;esm&#x2F;axios.js...\ncreated dist&#x2F;esm&#x2F;axios.js in 711ms\n\n.&#x2F;lib&#x2F;axios.js â†’ dist&#x2F;node&#x2F;axios.cjs...\ncreated dist&#x2F;node&#x2F;axios.cjs in 1.1s\nâœ¨  Done in 9.39s.\nğŸ‘‘ ~&#x2F;Desktop&#x2F;axios git:(v1.x) âœ— $</code></pre>\n\n</p>\n</div>\n<h2 id=\"æ‰“åŒ…äº§ç‰©\"><a href=\"#æ‰“åŒ…äº§ç‰©\" class=\"headerlink\" title=\"æ‰“åŒ…äº§ç‰©\"></a>æ‰“åŒ…äº§ç‰©</h2><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">.\nâ”œâ”€â”€ axios.js\nâ”œâ”€â”€ axios.js.map\nâ”œâ”€â”€ esm\nâ”‚   â”œâ”€â”€ axios.js\nâ”‚   â””â”€â”€ axios.js.map\nâ””â”€â”€ node\n    â”œâ”€â”€ axios.cjs\n    â””â”€â”€ axios.cjs.map\n\n2 directories, 6 files</code></pre>\n\n<p>å“ï¼Ÿå’‹æ»´å›äº‹ï¼Œæˆ‘ä»¬åœ¨<code>rollup.config.js</code>è§åˆ°<code>minifiedVersion</code>é»˜è®¤æ˜¯<code>true</code>,ä¼ ç»™ <code>minified</code>å’‹çš„æ²¡è§<code>min.js</code></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">const configs &#x3D; [build(&#123; minified: false &#125;)];\n\nif (minifiedVersion) &#123;\n  build(&#123; minified: true &#125;); &#x2F;&#x2F; è¿™ä¹ˆäº›åº”è¯¥æ˜¯ä¸ºäº†å¼€å‘è°ƒè¯•ï¼Œåœ¨sandboxä¸­ &lt;script src&#x3D;&quot;&#x2F;axios.js&quot;&gt;&lt;&#x2F;script&gt;\n&#125;\n\nreturn configs;\n&#x2F;&#x2F; è¿™é‡Œæš´éœ²çš„æ˜¯configsï¼Œ build(&#123;minified: true&#125;)å®Œå…¨æ²¡æäº‹æƒ…ï¼Œ\n&#x2F;&#x2F; è¿™ä»£ç åº”è¯¥æ˜¯ç”¨ build(&#123;minified: true&#125;) æ›¿æ¢   build(&#123;minified: false&#125;) æ‰å¯¹</code></pre>\n\n<p>ä¿®æ”¹ä¸‹ï¼Œç„¶åè¿è¡Œ<code>yarn build</code></p>\n<img src=\"http://t-blog-images.aijs.top/img/20220623143251.webp\" />\n\n<h2 id=\"axios-js\"><a href=\"#axios-js\" class=\"headerlink\" title=\"axios.js\"></a>axios.js</h2><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">&quot;use strict&quot;;\n\nimport utils from &quot;.&#x2F;utils.js&quot;;\nimport bind from &quot;.&#x2F;helpers&#x2F;bind.js&quot;;\nimport Axios from &quot;.&#x2F;core&#x2F;Axios.js&quot;;\nimport mergeConfig from &quot;.&#x2F;core&#x2F;mergeConfig.js&quot;;\nimport defaults from &quot;.&#x2F;defaults&#x2F;index.js&quot;;\nimport formDataToJSON from &quot;.&#x2F;helpers&#x2F;formDataToJSON.js&quot;;\nimport CanceledError from &quot;.&#x2F;cancel&#x2F;CanceledError.js&quot;;\nimport CancelToken from &quot;.&#x2F;cancel&#x2F;CancelToken.js&quot;;\nimport isCancel from &quot;.&#x2F;cancel&#x2F;isCancel.js&quot;;\nimport &#123; VERSION &#125; from &quot;.&#x2F;env&#x2F;data.js&quot;;\nimport toFormData from &quot;.&#x2F;helpers&#x2F;toFormData.js&quot;;\nimport AxiosError from &quot;..&#x2F;lib&#x2F;core&#x2F;AxiosError.js&quot;;\nimport spread from &quot;.&#x2F;helpers&#x2F;spread.js&quot;;\nimport isAxiosError from &quot;.&#x2F;helpers&#x2F;isAxiosError.js&quot;;\n\n&#x2F;**\n * Create an instance of Axios\n *\n * @param &#123;Object&#125; defaultConfig The default config for the instance\n *\n * @returns &#123;Axios&#125; A new instance of Axios\n *&#x2F;\nfunction createInstance(defaultConfig) &#123;\n  const context &#x3D; new Axios(defaultConfig);\n  const instance &#x3D; bind(Axios.prototype.request, context);\n\n  &#x2F;&#x2F; Copy axios.prototype to instance\n  &#x2F;&#x2F; æ‹·è´åŸå‹åˆ°å®ä¾‹\n  utils.extend(instance, Axios.prototype, context, &#123; allOwnKeys: true &#125;);\n\n  &#x2F;&#x2F; Copy context to instance\n  &#x2F;&#x2F; æ‹·è´ä¸Šä¸‹æ–‡åˆ°å®ä¾‹\n  utils.extend(instance, context, &#123; allOwnKeys: true &#125;);\n\n  &#x2F;&#x2F; Factory for creating new instances\n  &#x2F;&#x2F; ç”¨äºåˆ›å»ºæ–°å®ä¾‹çš„å·¥å‚\n  instance.create &#x3D; function create(instanceConfig) &#123;\n    return createInstance(mergeConfig(defaultConfig, instanceConfig));\n  &#125;;\n\n  return instance;\n&#125;\n\n&#x2F;&#x2F; Create the default instance to be exported\n&#x2F;&#x2F; ä½¿ç”¨é»˜è®¤é…ç½®åˆ›å»ºå®ä¾‹\nconst axios &#x3D; createInstance(defaults);\n\n&#x2F;&#x2F; Expose Axios class to allow class inheritance\n&#x2F;&#x2F; æš´éœ²Axiosç±»ï¼Œå…è®¸ç±»è¢«ç»§æ‰¿\naxios.Axios &#x3D; Axios;\n\n&#x2F;&#x2F; Expose Cancel &amp; CancelToken\naxios.CanceledError &#x3D; CanceledError;\naxios.CancelToken &#x3D; CancelToken;\naxios.isCancel &#x3D; isCancel;\naxios.VERSION &#x3D; VERSION; &#x2F;&#x2F; gulpçš„envä»»åŠ¡ä¼šå°†package.jsonçš„ç‰ˆæœ¬ä¿¡æ¯è¯»å–å¹¶å†™å…¥ .&#x2F;lib&#x2F;env&#x2F;data.jsï¼Œè§ä¸‹é¢ä»£ç ï¼š\n&#x2F;&#x2F; const env &#x3D; gulp.task(&#39;env&#39;, async function () &#123;\n&#x2F;&#x2F;   var npm &#x3D; JSON.parse(await fs.readFile(&#39;package.json&#39;));\n\n&#x2F;&#x2F;   await fs.writeFile(&#39;.&#x2F;lib&#x2F;env&#x2F;data.js&#39;, Object.entries(&#123;\n&#x2F;&#x2F;     VERSION: npm.version\n&#x2F;&#x2F;   &#125;).map(([key, value]) &#x3D;&gt; &#123;\n&#x2F;&#x2F;     return &#96;export const $&#123;key&#125; &#x3D; $&#123;JSON.stringify(value)&#125;;&#96;\n&#x2F;&#x2F;   &#125;).join(&#39;\\n&#39;));\n&#x2F;&#x2F; &#125;);\naxios.toFormData &#x3D; toFormData;\n\n&#x2F;&#x2F; Expose AxiosError class\n&#x2F;&#x2F; æš´éœ²AxuosErroré”™è¯¯ç±»\naxios.AxiosError &#x3D; AxiosError;\n\n&#x2F;&#x2F; alias for CanceledError for backward compatibility\n&#x2F;&#x2F; CanceledErrorçš„åˆ«åç”¨äºå‘åå…¼å®¹\naxios.Cancel &#x3D; axios.CanceledError;\n\n&#x2F;&#x2F; Expose all&#x2F;spread\n&#x2F;&#x2F; æš´éœ²å¹¶å‘\naxios.all &#x3D; function all(promises) &#123;\n  return Promise.all(promises);\n&#125;;\n&#x2F;&#x2F; æš´éœ²spread\naxios.spread &#x3D; spread; &#x2F;&#x2F; ä½¿ç”¨å°¾éƒ¨è°ƒç”¨æŸ¯é‡ŒåŒ–ï¼Œæ‰§è¡Œçš„ç»“æœè¿˜æ˜¯ä¸€ä¸ªå‡½æ•°\n\n&#x2F;&#x2F; Expose isAxiosError\n&#x2F;&#x2F; æš´éœ²åˆ¤æ–­AxiosErrorçš„æ–¹æ³•\naxios.isAxiosError &#x3D; isAxiosError;\n\naxios.formToJSON &#x3D; (thing) &#x3D;&gt; &#123;\n  &#x2F;&#x2F; è°ƒç”¨å·¥å…·ï¼Œå°†thingè¿›è¡ŒjsonåŒ–\n  return formDataToJSON(utils.isHTMLForm(thing) ? new FormData(thing) : thing);\n&#125;;\n\nexport default axios;</code></pre>\n\n<p>å…¶ä»–ç»†èŠ‚ä¸çœ‹</p>\n<h2 id=\"è¿è¡Œ-sandbox\"><a href=\"#è¿è¡Œ-sandbox\" class=\"headerlink\" title=\"è¿è¡Œ sandbox\"></a>è¿è¡Œ sandbox</h2><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">yarn start</code></pre>\n\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">\nğŸ‘‘ ~&#x2F;Desktop&#x2F;axios git:(v1.x) âœ— $ yarn start\nyarn run v1.4.0\n$ node .&#x2F;sandbox&#x2F;server.js\nListening on localhost:3009...\n[Thu Jun 23 2022 16:16:31 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)] GET &#x2F;\nfile:&#x2F;&#x2F;&#x2F;Users&#x2F;haotian&#x2F;Desktop&#x2F;axios&#x2F;sandbox&#x2F;server.js:14\n  fs.createReadStream(path.join(__dirname, file)).pipe(res);\n                                ^\n\nReferenceError: __dirname is not defined\n    at pipeFileToResponse (file:&#x2F;&#x2F;&#x2F;Users&#x2F;haotian&#x2F;Desktop&#x2F;axios&#x2F;sandbox&#x2F;server.js:14:33)\n    at Server.&lt;anonymous&gt; (file:&#x2F;&#x2F;&#x2F;Users&#x2F;haotian&#x2F;Desktop&#x2F;axios&#x2F;sandbox&#x2F;server.js:30:5)\n    at Server.emit (node:events:390:28)\n    at parserOnIncoming (node:_http_server:951:12)\n    at HTTPParser.parserOnHeadersComplete (node:_http_common:128:17)\nerror An unexpected error occurred: &quot;Command failed.\\nExit code: 1\\nCommand: sh\\nArguments: -c node .&#x2F;sandbox&#x2F;server.js\\nDirectory: &#x2F;Users&#x2F;haotian&#x2F;Desktop&#x2F;axios\\nOutput:\\n&quot;.\ninfo If you think this is a bug, please open a bug report with the information provided in &quot;&#x2F;Users&#x2F;haotian&#x2F;Desktop&#x2F;axios&#x2F;yarn-error.log&quot;.\ninfo Visit https:&#x2F;&#x2F;yarnpkg.com&#x2F;en&#x2F;docs&#x2F;cli&#x2F;run for documentation about this command.\n</code></pre>\n\n<p>ä¿®æ”¹</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">const __filename &#x3D; url.fileURLToPath(import.meta.url); &#x2F;&#x2F; å¢åŠ è¿™è¡Œ @see https:&#x2F;&#x2F;developer.mozilla.org&#x2F;zh-CN&#x2F;docs&#x2F;Web&#x2F;JavaScript&#x2F;Reference&#x2F;Statements&#x2F;import.meta\nconst __dirname &#x3D; path.dirname(__filename); &#x2F;&#x2F; å¢åŠ è¿™è¡Œ\n\nfunction pipeFileToResponse(res, file, type) &#123;\n  if (type) &#123;\n    res.writeHead(200, &#123;\n      &quot;Content-Type&quot;: type,\n    &#125;);\n  &#125;\n\n  fs.createReadStream(path.join(__dirname, file)).pipe(res);\n&#125;</code></pre>\n\n<img src=\"http://t-blog-images.aijs.top/img/20220623162402.webp\" />\n\n<h2 id=\"core-ç›®å½•\"><a href=\"#core-ç›®å½•\" class=\"headerlink\" title=\"core ç›®å½•\"></a>core ç›®å½•</h2><h2 id=\"axios-æ‰§è¡Œæµç¨‹\"><a href=\"#axios-æ‰§è¡Œæµç¨‹\" class=\"headerlink\" title=\"axios æ‰§è¡Œæµç¨‹\"></a>axios æ‰§è¡Œæµç¨‹</h2><p>æ‰§è¡Œæµç¨‹</p>\n<p>å…ˆçœ‹çœ‹æ•´ä½“æ‰§è¡Œæµç¨‹ï¼Œæœ‰å¤§ä½“çš„æ¦‚å¿µï¼Œåé¢ä¼šç»†è¯´æ•´ä½“æµç¨‹æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p>\n<ol>\n<li>axios.create åˆ›å»ºå•ç‹¬å®ä¾‹ï¼Œæˆ–ç›´æ¥ä½¿ç”¨ axios å®ä¾‹(axios&#x2F;axios.getâ€¦)</li>\n<li>request æ–¹æ³•æ˜¯å…¥å£ï¼Œaxios&#x2F;axios.get ç­‰è°ƒç”¨éƒ½ä¼šèµ°è¿› request è¿›è¡Œå¤„ç†</li>\n<li>è¯·æ±‚æ‹¦æˆªå™¨</li>\n<li>è¯·æ±‚æ•°æ®è½¬æ¢å™¨ï¼Œå¯¹ä¼ å…¥çš„å‚æ•° data å’Œ header åšæ•°æ®å¤„ç†ï¼Œæ¯”å¦‚ JSON.stringify(data)</li>\n<li>é€‚é…å™¨ï¼Œåˆ¤æ–­æ˜¯æµè§ˆå™¨ç«¯è¿˜æ˜¯ node ç«¯ï¼Œæ‰§è¡Œä¸åŒçš„æ–¹æ³•</li>\n<li>å“åº”æ•°æ®è½¬æ¢å™¨ï¼Œå¯¹æœåŠ¡ç«¯çš„æ•°æ®è¿›è¡Œå¤„ç†ï¼Œæ¯”å¦‚ JSON.parse(data)</li>\n<li>å“åº”æ‹¦æˆªå™¨ï¼Œå¯¹æœåŠ¡ç«¯æ•°æ®åšå¤„ç†ï¼Œæ¯”å¦‚ token å¤±æ•ˆé€€å‡ºç™»é™†ï¼ŒæŠ¥é”™ dialog æç¤º</li>\n<li>è¿”å›æ•°æ®ç»™å¼€å‘è€…</li>\n</ol>\n<img src=\"http://t-blog-images.aijs.top/img/20220623165311.webp\"/>\n\n<h2 id=\"å…¥å£æ–‡ä»¶\"><a href=\"#å…¥å£æ–‡ä»¶\" class=\"headerlink\" title=\"å…¥å£æ–‡ä»¶\"></a>å…¥å£æ–‡ä»¶</h2><p><code>file:lib/axios.js</code></p>\n<p>ä»ä¸‹é¢è¿™æ®µä»£ç å¯ä»¥å¾—å‡ºï¼Œå¯¼å‡ºçš„ axios å°±æ˜¯å®ä¾‹åŒ–åçš„å¯¹è±¡ï¼Œè¿˜åœ¨å…¶ä¸ŠæŒ‚è½½ create æ–¹æ³•ï¼Œä»¥ä¾›åˆ›å»ºç‹¬ç«‹å®ä¾‹ï¼Œä»è€Œè¾¾åˆ°å®ä¾‹ä¹‹é—´äº’ä¸å½±å“ï¼Œäº’ç›¸éš”ç¦»ã€‚</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">...\n&#x2F;&#x2F; åˆ›å»ºå®ä¾‹è¿‡ç¨‹çš„æ–¹æ³•\nfunctioncreateInstance(defaultConfig) &#123;return instance;&#125;&#x2F;&#x2F; å®ä¾‹åŒ–\nvar axios &#x3D; createInstance(defaults);&#x2F;&#x2F; åˆ›å»ºç‹¬ç«‹çš„å®ä¾‹ï¼Œéš”ç¦»ä½œç”¨åŸŸ\naxios.create &#x3D; functioncreate(instanceConfig) &#123;return createInstance(mergeConfig(axios.defaults, instanceConfig));&#125;;...\n&#x2F;&#x2F; å¯¼å‡ºå®ä¾‹\nmodule.exports &#x3D; axios; &#x2F;&#x2F; å¯èƒ½å¤§å®¶å¯¹ createInstance æ–¹æ³•æ„Ÿåˆ°å¥½å¥‡ï¼Œä¸‹é¢ä¸€æ¢ç©¶ç«Ÿã€‚\n\nfunctioncreateInstance(defaultConfig) &#123;\n  &#x2F;&#x2F; å®ä¾‹åŒ–ï¼Œåˆ›å»ºä¸€ä¸ªä¸Šä¸‹æ–‡\nvar context &#x3D; new Axios(defaultConfig);\n&#x2F;&#x2F; å¹³æ—¶è°ƒç”¨çš„ get&#x2F;post ç­‰ç­‰è¯·æ±‚ï¼Œåº•å±‚éƒ½æ˜¯è°ƒç”¨ request æ–¹æ³•\n&#x2F;&#x2F; å°† request æ–¹æ³•çš„ this æŒ‡å‘ context(ä¸Šä¸‹æ–‡)ï¼Œå½¢æˆæ–°çš„å®ä¾‹\nvar instance &#x3D; bind(Axios.prototype.request, context);\n&#x2F;&#x2F; Axios.prototype ä¸Šçš„æ–¹æ³• (get&#x2F;post...)æŒ‚è½½åˆ°æ–°çš„å®ä¾‹ instance ä¸Šï¼Œ\n&#x2F;&#x2F; å¹¶ä¸”å°†åŸå‹æ–¹æ³•ä¸­ this æŒ‡å‘\ncontext utils.extend(instance, Axios.prototype, context);\n&#x2F;&#x2F; Axios å±æ€§å€¼æŒ‚è½½åˆ°æ–°çš„å®ä¾‹ instance ä¸Š\n&#x2F;&#x2F; å¼€å‘ä¸­æ‰èƒ½ä½¿ç”¨ axios.default&#x2F;interceptors\nutils.extend(instance, context);return instance;&#125;\n&#x2F;&#x2F; ä»ä¸Šé¢ä»£ç å¯ä»¥çœ‹å¾—å‡ºï¼ŒAxios ä¸æ˜¯ç®€å•çš„åˆ›å»ºå®ä¾‹ contextï¼Œè€Œä¸”è¿›è¡Œä¸€ç³»åˆ—çš„ä¸Šä¸‹æ–‡ç»‘å®šå’Œå±æ€§æ–¹æ³•æŒ‚è½½ï¼Œä»è€Œå»æ”¯æŒ axios()ï¼Œä¹Ÿæ”¯æŒ axios.get() ç­‰ç­‰ç”¨æ³•ï¼›</code></pre>\n\n<p>createInstance å‡½æ•°æ˜¯ä¸€ä¸ªæ ¸å¿ƒå…¥å£ï¼Œæˆ‘ä»¬åœ¨æŠŠä¸Šé¢æµç¨‹æ¢³ç†ä¸€ä¸‹ï¼š</p>\n<ol>\n<li>é€šè¿‡æ„é€ å‡½æ•° Axios åˆ›å»ºå®ä¾‹ contextï¼Œä½œä¸ºä¸‹é¢ request æ–¹æ³•çš„ä¸Šä¸‹æ–‡ï¼ˆthis æŒ‡å‘ï¼‰</li>\n<li>å°† Axios.prototype.request æ–¹æ³•ä½œä¸ºå®ä¾‹ä½¿ç”¨ï¼Œå¹¶æŠŠ this æŒ‡å‘ contextï¼Œå½¢æˆæ–°çš„å®ä¾‹ instance</li>\n<li>å°†æ„é€ å‡½æ•° Axios.prototype ä¸Šçš„æ–¹æ³•æŒ‚è½½åˆ°æ–°çš„å®ä¾‹ instance ä¸Šï¼Œç„¶åå°†åŸå‹å„ä¸ªæ–¹æ³•ä¸­çš„ this æŒ‡å‘ contextï¼Œå¼€å‘ä¸­æ‰èƒ½ä½¿ç”¨ axios.get&#x2F;postâ€¦ ç­‰ç­‰</li>\n<li>å°†æ„é€ å‡½æ•° Axios çš„å®ä¾‹å±æ€§æŒ‚è½½åˆ°æ–°çš„å®ä¾‹ instance ä¸Šï¼Œæˆ‘ä»¬å¼€å‘ä¸­æ‰èƒ½ä½¿ç”¨ä¸‹é¢å±æ€§ axios.default.baseUrl &#x3D; â€˜https:&#x2F;&#x2F;â€¦â€™axios.interceptors.request.use(resolve,reject)<br>å¤§å®¶å¯èƒ½å¯¹ä¸Šé¢ç¬¬ 2 ç‚¹ request æ–¹æ³•æ„Ÿåˆ°å¥½å¥‡ï¼ŒcreateInstance æ–¹æ³•æ˜æ˜å¯ä»¥å†™ä¸€è¡Œä»£ç  return new Axios() å³å¯ï¼Œä¸ºä»€ä¹ˆå¤§è´¹å‘¨ç« ä½¿ç”¨ request æ–¹æ³•ç»‘å®šæ–°å®ä¾‹ï¼Œå…¶å®å°±åªæ˜¯ä¸ºäº†æ”¯æŒ axios() å†™æ³•ï¼Œå¼€å‘è€…å¯ä»¥å†™å°‘å‡ è¡Œä»£ç ã€‚ã€‚ã€‚</li>\n</ol>\n<h2 id=\"é»˜è®¤é…ç½®\"><a href=\"#é»˜è®¤é…ç½®\" class=\"headerlink\" title=\"é»˜è®¤é…ç½®\"></a>é»˜è®¤é…ç½®</h2><p><code>file:lib/defaults.js</code></p>\n<p>ä» createInstance æ–¹æ³•è°ƒç”¨å‘ç°æœ‰ä¸ªé»˜è®¤é…ç½®ï¼Œä¸»è¦æ˜¯å†…ç½®çš„å±æ€§å’Œæ–¹æ³•ï¼Œå¯å¯¹å…¶è¿›è¡Œè¦†ç›–</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">var defaults &#x3D; &#123;\n  ...\n  &#x2F;&#x2F; è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤ä¸è¶…æ—¶\n  timeout: 0,\n   &#x2F;&#x2F; è¯·æ±‚æ•°æ®è½¬æ¢å™¨\n  transformRequest: [functiontransformRequest(data, headers) &#123;...&#125;],\n  &#x2F;&#x2F; å“åº”æ•°æ®è½¬æ¢å™¨\n  transformResponse: [functiontransformResponse(data) &#123;...&#125;], ...&#125;;\n  ...</code></pre>\n\n<p>ä¸»è¦æœ‰ä¸¤ç‚¹ï¼š</p>\n<ol>\n<li>é…ç½®ï¼šå¤–éƒ¨ä¼ å…¥ï¼Œå¯è¦†ç›–å†…éƒ¨é»˜è®¤é…ç½®</li>\n<li>æ‹¦æˆªå™¨ï¼šå®ä¾‹åï¼Œå¼€å‘è€…å¯é€šè¿‡ use æ–¹æ³•æ³¨å†ŒæˆåŠŸå’Œå¤±è´¥çš„é’©å­å‡½æ•°ï¼Œæ¯”å¦‚</li>\n</ol>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">axios.interceptors.request.use((config)&#x3D;&gt;config,(error)&#x3D;&gt;error);\nfunctionAxios(instanceConfig) &#123;\n  &#x2F;&#x2F; é…ç½®\n  this.defaults &#x3D; instanceConfig;\n  &#x2F;&#x2F; æ‹¦æˆªå™¨å®ä¾‹\n  this.interceptors &#x3D; &#123;request: new InterceptorManager(),response: new InterceptorManager() &#125;;&#125;</code></pre>\n\n<p>åœ¨çœ‹çœ‹åŸå‹æ–¹æ³• request åšäº†ä»€ä¹ˆ</p>\n<p>æ”¯æŒå¤šç±»å‹ä¼ å‚<br>é…ç½®ä¼˜å…ˆçº§å®šä¹‰<br>é€šè¿‡ promise é“¾å¼è°ƒç”¨ï¼Œä¾æ¬¡é¡ºåºæ‰§è¡Œ</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">&#x2F;&#x2F; ä¼ªä»£ç \nAxios.prototype.request &#x3D; functionrequest(config) &#123;\n  &#x2F;&#x2F; ä¸ºäº†æ”¯æŒ\n  request(url, &#123;...&#125;), request(&#123;url, ...&#125;)if (typeof config &#x3D;&#x3D;&#x3D; &#39;string&#39;) &#123; config &#x3D; arguments[1] || &#123;&#125;; config.url &#x3D; arguments[0]; &#125; else &#123; config &#x3D; config || &#123;&#125;; &#125;\n  &#x2F;&#x2F; é…ç½®ä¼˜å…ˆçº§ï¼š è°ƒç”¨æ–¹æ³•çš„é…ç½® &gt; å®ä¾‹åŒ– axios çš„é…ç½® &gt; é»˜è®¤é…ç½®\n  &#x2F;&#x2F; ä¸¾ä¸ªä¾‹å­ï¼Œç±»ä¼¼ï¼š\n  axios.get(url, &#123;&#125;) &gt; axios.create(url, &#123;&#125;) &gt; å†…éƒ¨é»˜è®¤è®¾ç½® config &#x3D; mergeConfig(this.defaults, config);\n  &#x2F;&#x2F; æ‹¦æˆªå™¨ï¼ˆè¯·æ±‚å’Œå“åº”ï¼‰\n  var requestInterceptorChain &#x3D; [&#123;fulfilled: interceptor.request.fulfilled,rejected: interceptor.request.rejected &#125;];\n  var responseInterceptorChain &#x3D; [&#123;fulfilled: interceptor.response.fulfilled,rejected: interceptor.response.rejected &#125;];\n  var promise;&#x2F;&#x2F; å½¢æˆä¸€ä¸ª promise é“¾æ¡çš„æ•°ç»„\n  var chain &#x3D; [].concat(requestInterceptorChain, chain, responseInterceptorChain);\n  &#x2F;&#x2F; ä¼ å…¥é…ç½®\n  promise &#x3D; Promise.resolve(config);\n  &#x2F;&#x2F; å½¢æˆ promise é“¾æ¡è°ƒç”¨\n   while (chain.length) &#123; promise &#x3D; promise.then(chain.shift(), chain.shift()); &#125; ... return promise;&#125;;</code></pre>\n\n<p>é€šè¿‡å¯¹æ•°ç»„çš„éå†ï¼Œå½¢æˆä¸€æ¡å¼‚æ­¥çš„ promise è°ƒç”¨é“¾ï¼Œæ˜¯ axios å¯¹ promise çš„å·§å¦™è¿ç”¨ï¼Œç”¨ä¸€å¼ å›¾è¡¨ç¤º</p>\n<img src=\"http://t-blog-images.aijs.top/img/20220623165416.webp\" />\n\n<h2 id=\"æ‹¦æˆªå™¨\"><a href=\"#æ‹¦æˆªå™¨\" class=\"headerlink\" title=\"æ‹¦æˆªå™¨\"></a>æ‹¦æˆªå™¨</h2><p><code>file:lib/core/InterceptorManager.js</code></p>\n<p>ä¸Šé¢è¯´åˆ°çš„ promise è°ƒç”¨é“¾ï¼Œé‡Œé¢æ¶‰åŠåˆ°æ‹¦æˆªå™¨ï¼Œæ‹¦æˆªå™¨æ¯”è¾ƒç®€å•ï¼ŒæŒ‚è½½ä¸€ä¸ªå±æ€§å’Œä¸‰ä¸ªåŸå‹æ–¹æ³•</p>\n<ul>\n<li>handler: å­˜æ”¾ use æ³¨å†Œçš„å›è°ƒå‡½æ•°</li>\n<li>use: æ³¨å†ŒæˆåŠŸå’Œå¤±è´¥çš„å›è°ƒå‡½æ•°</li>\n<li>eject: åˆ é™¤æ³¨å†Œè¿‡çš„å‡½æ•°</li>\n<li>forEach: éå†å›è°ƒå‡½æ•°ï¼Œä¸€èˆ¬å†…éƒ¨ä½¿ç”¨å¤šï¼Œæ¯”å¦‚ï¼špromise è°ƒç”¨é“¾é‚£ä¸ªæ–¹æ³•é‡Œï¼Œå¾ªç¯éå†å›è°ƒå‡½æ•°ï¼Œå­˜æ”¾åˆ° promise è°ƒç”¨é“¾çš„æ•°ç»„ä¸­</li>\n</ul>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">class InterceptorManager &#123;\n  constructor() &#123;\n    this.handlers &#x3D; [];\n  &#125;\n\n  &#x2F;**\n   * Add a new interceptor to the stack\n   * &#x2F;&#x2F; æ³¨å†ŒæˆåŠŸå’Œå¤±è´¥çš„å›è°ƒå‡½æ•°\n   * @param &#123;Function&#125; fulfilled The function to handle &#96;then&#96; for a &#96;Promise&#96;\n   * @param &#123;Function&#125; rejected The function to handle &#96;reject&#96; for a &#96;Promise&#96;\n   *\n   * @return &#123;Number&#125; An ID used to remove interceptor later\n   *&#x2F;\n  use(fulfilled, rejected, options) &#123;\n    this.handlers.push(&#123;\n      fulfilled,\n      rejected,\n      synchronous: options ? options.synchronous : false,\n      runWhen: options ? options.runWhen : null,\n    &#125;);\n    return this.handlers.length - 1;\n  &#125;\n\n  &#x2F;**\n   * Remove an interceptor from the stack\n   * &#x2F;&#x2F; åˆ é™¤æ³¨å†Œè¿‡çš„å‡½æ•°\n   * @param &#123;Number&#125; id The ID that was returned by &#96;use&#96;\n   *\n   * @returns &#123;Boolean&#125; &#96;true&#96; if the interceptor was removed, &#96;false&#96; otherwise\n   *&#x2F;\n  eject(id) &#123;\n    if (this.handlers[id]) &#123;\n      this.handlers[id] &#x3D; null;\n    &#125;\n  &#125;\n\n  &#x2F;**\n   * Clear all interceptors from the stack\n   * è°ƒç”¨æ ˆæ¸…ç©ºæ‰€æœ‰æ‹¦æˆªå™¨\n   * @returns &#123;void&#125;\n   *&#x2F;\n  clear() &#123;\n    if (this.handlers) &#123;\n      this.handlers &#x3D; [];\n    &#125;\n  &#125;\n\n  &#x2F;**\n   * Iterate over all the registered interceptors\n   *\n   * This method is particularly useful for skipping over any\n   * interceptors that may have become &#96;null&#96; calling &#96;eject&#96;.\n   * &#x2F;&#x2F; éå†å›è°ƒå‡½æ•°ï¼Œä¸€èˆ¬å†…éƒ¨ä½¿ç”¨å¤š\n   * @param &#123;Function&#125; fn The function to call for each interceptor\n   *\n   * @returns &#123;void&#125;\n   *&#x2F;\n  forEach(fn) &#123;\n    utils.forEach(this.handlers, function forEachHandler(h) &#123;\n      if (h !&#x3D;&#x3D; null) &#123;\n        fn(h);\n      &#125;\n    &#125;);\n  &#125;\n&#125;\n\nexport default InterceptorManager;</code></pre>\n\n<h2 id=\"dispatchRequest\"><a href=\"#dispatchRequest\" class=\"headerlink\" title=\"dispatchRequest\"></a>dispatchRequest</h2><p><code>file: lib/core/dispatchRequest.js</code></p>\n<p>ä¸Šé¢è¯´åˆ°çš„ promise è°ƒç”¨é“¾ä¸­çš„ dispatchRequest æ–¹æ³•ï¼Œä¸»è¦åšäº†ä»¥ä¸‹æ“ä½œï¼š<br>ä»¥ <code>transformData.call</code>æ–¹å¼è°ƒç”¨</p>\n<ul>\n<li>transformRequest: å¯¹ config ä¸­çš„ data è¿›è¡ŒåŠ å·¥ï¼Œæ¯”å¦‚å¯¹ post è¯·æ±‚çš„ data è¿›è¡Œå­—ç¬¦ä¸²åŒ– ï¼ˆJSON.stringify(data)ï¼‰</li>\n<li>adapterï¼šé€‚é…å™¨ï¼ŒåŒ…å«æµè§ˆå™¨ç«¯ xhr å’Œ node ç«¯çš„ http</li>\n<li>transformResponse: å¯¹æœåŠ¡ç«¯å“åº”çš„æ•°æ®è¿›è¡ŒåŠ å·¥ï¼Œæ¯”å¦‚ JSON.parse(data)</li>\n</ul>\n<p>dispatchRequest å±€éƒ¨å›¾</p>\n<img src=\"http://t-blog-images.aijs.top/img/20220623165506.webp\" width=300 height=/>\n\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">module.exports &#x3D; functiondispatchRequest(config) &#123;\n  ...\n  &#x2F;&#x2F; transformRequest æ–¹æ³•ï¼Œä¸Šä¸‹æ–‡ç»‘å®š configï¼Œå¯¹ data å’Œ headers è¿›è¡ŒåŠ å·¥\n  config.data &#x3D; transformData.call( config,\n  &#x2F;&#x2F; ä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œå³ this æŒ‡å‘ config.data,\n  &#x2F;&#x2F; è¯·æ±‚ body å‚æ•° config.headers,\n  &#x2F;&#x2F; è¯·æ±‚å¤´ config.transformRequest\n  &#x2F;&#x2F; è½¬æ¢æ•°æ®æ–¹æ³•\n  );\n  &#x2F;&#x2F; adapter æ˜¯ä¸€ä¸ªé€‚é…å™¨ï¼ŒåŒ…å«æµè§ˆå™¨ç«¯ xhr å’Œ node ç«¯çš„ http\n  &#x2F;&#x2F; å†…ç½®æœ‰ adapterï¼Œä¹Ÿå¯å¤–éƒ¨è‡ªå®šä¹‰å»å‘èµ· ajax è¯·æ±‚\n  var adapter &#x3D; config.adapter || defaults.adapter;return adapter(config).then(\n    functiononAdapterResolution(response) &#123;\n    &#x2F;&#x2F; transformResponse æ–¹æ³•ï¼Œä¸Šä¸‹æ–‡ç»‘å®š configï¼Œå¯¹ data å’Œ headers è¿›è¡ŒåŠ å·¥\n      response.data &#x3D; transformData.call( config,\n      &#x2F;&#x2F; ä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œå³ this æŒ‡å‘\n      response.data, &#x2F;&#x2F; æœåŠ¡ç«¯å“åº”çš„ data\n      config.transformResponse &#x2F;&#x2F; è½¬æ¢æ•°æ®æ–¹æ³•\n      );\n\n      response.headers, &#x2F;&#x2F; æœåŠ¡ç«¯å“åº”çš„ headers\n\n      return response;\n     &#125;,\n    functiononAdapterRejection(reason) &#123;\n     ...\n     return Promise.reject(reason);\n    &#125;);\n  &#125;;</code></pre>\n\n<h2 id=\"æ•°æ®è½¬æ¢å™¨\"><a href=\"#æ•°æ®è½¬æ¢å™¨\" class=\"headerlink\" title=\"æ•°æ®è½¬æ¢å™¨\"></a>æ•°æ®è½¬æ¢å™¨</h2><p><code>file:lib/core/transformData.js</code></p>\n<p>ä¸Šé¢è¯´åˆ°çš„æ•°æ®è½¬æ¢å™¨ï¼Œæ¯”è¾ƒå¥½ç†è§£ï¼Œæºç å¦‚ä¸‹</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">&#x2F;&#x2F; fns æ–¹æ³•å³ï¼ˆè¯·æ±‚æˆ–å“åº”ï¼‰æ•°æ®è½¬æ¢å™¨æ–¹æ³•ï¼Œåœ¨åˆšå¼€å§‹ defaults æ–‡ä»¶é‡Œå®šä¹‰çš„é»˜è®¤é…ç½®ï¼Œä¹Ÿå¯å¤–éƒ¨è‡ªå®šä¹‰æ–¹æ³•ï¼Œæºç å¦‚ä¸‹ï¼š\n\n&#x2F;**\n * Transform the data for a request or a response\n * è½¬æ¢è¯·æ±‚æˆ–å“åº”çš„æ•°æ®\n * @param &#123;Array|Function&#125; fns ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªæ–¹æ³•è½¬æ¢å™¨æ–¹æ³•\n * @param &#123;?Object&#125; response The response object\n *\n * @returns &#123;*&#125; The resulting transformed data\n *&#x2F;\nexport default function transformData(fns, response) &#123;\n  const config &#x3D; this || defaults;\n  const context &#x3D; response || config;\n  const headers &#x3D; AxiosHeaders.from(context.headers);\n  let data &#x3D; context.data;\n\n  utils.forEach(fns, function transform(fn) &#123;\n    data &#x3D; fn.call(\n      config,\n      data,\n      headers.normalize(),\n      response ? response.status : undefined\n    );\n  &#125;);\n\n  headers.normalize();\n\n  return data;\n&#125;</code></pre>\n\n<h2 id=\"Axios\"><a href=\"#Axios\" class=\"headerlink\" title=\"Axios\"></a>Axios</h2><p><code>file: lib/defaults.js</code></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">\nconst defaults &#x3D; &#123;\n  ...\n  &#x2F;&#x2F; è¿”å›è½¬åŒ–åçš„è¯·æ±‚å‚æ•°\n  transformRequest: [function transformRequest(data, headers) &#123;\n    const contentType &#x3D; headers.getContentType() || &#39;&#39;;\n    const hasJSONContentType &#x3D; contentType.indexOf(&#39;application&#x2F;json&#39;) &gt; -1;\n    const isObjectPayload &#x3D; utils.isObject(data);\n\n    if (isObjectPayload &amp;&amp; utils.isHTMLForm(data)) &#123;\n      data &#x3D; new FormData(data);\n    &#125;\n\n    const isFormData &#x3D; utils.isFormData(data);\n\n    if (isFormData) &#123;\n      if (!hasJSONContentType) &#123;\n        return data;\n      &#125;\n      return hasJSONContentType ? JSON.stringify(formDataToJSON(data)) : data;\n    &#125;\n\n    if (utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) &#123;\n      return data;\n    &#125;\n    if (utils.isArrayBufferView(data)) &#123;\n      return data.buffer;\n    &#125;\n    if (utils.isURLSearchParams(data)) &#123;\n      headers.setContentType(&#39;application&#x2F;x-www-form-urlencoded;charset&#x3D;utf-8&#39;, false);\n      return data.toString();\n    &#125;\n\n    let isFileList;\n\n    if (isObjectPayload) &#123;\n      if (contentType.indexOf(&#39;application&#x2F;x-www-form-urlencoded&#39;) &gt; -1) &#123;\n        return toURLEncodedForm(data, this.formSerializer).toString();\n      &#125;\n\n      if ((isFileList &#x3D; utils.isFileList(data)) || contentType.indexOf(&#39;multipart&#x2F;form-data&#39;) &gt; -1) &#123;\n        const _FormData &#x3D; this.env &amp;&amp; this.env.FormData;\n\n        return toFormData(\n          isFileList ? &#123;&#39;files[]&#39;: data&#125; : data,\n          _FormData &amp;&amp; new _FormData(),\n          this.formSerializer\n        );\n      &#125;\n    &#125;\n\n    if (isObjectPayload || hasJSONContentType ) &#123;\n      headers.setContentType(&#39;application&#x2F;json&#39;, false);\n      return stringifySafely(data);\n    &#125;\n\n    return data;\n  &#125;],\n  &#x2F;&#x2F; è¿”å›è½¬åŒ–åçš„å“åº”æ•°æ®\n  transformResponse: [function transformResponse(data) &#123;\n    const transitional &#x3D; this.transitional || defaults.transitional;\n    const forcedJSONParsing &#x3D; transitional &amp;&amp; transitional.forcedJSONParsing;\n    const JSONRequested &#x3D; this.responseType &#x3D;&#x3D;&#x3D; &#39;json&#39;;\n\n    if (data &amp;&amp; utils.isString(data) &amp;&amp; ((forcedJSONParsing &amp;&amp; !this.responseType) || JSONRequested)) &#123;\n      const silentJSONParsing &#x3D; transitional &amp;&amp; transitional.silentJSONParsing;\n      const strictJSONParsing &#x3D; !silentJSONParsing &amp;&amp; JSONRequested;\n\n      try &#123;\n        return JSON.parse(data); &#x2F;&#x2F; è§£ææ•°æ®\n      &#125; catch (e) &#123;\n        if (strictJSONParsing) &#123;\n          if (e.name &#x3D;&#x3D;&#x3D; &#39;SyntaxError&#39;) &#123;\n            throw AxiosError.from(e, AxiosError.ERR_BAD_RESPONSE, this, null, this.response);\n          &#125;\n          throw e;\n        &#125;\n      &#125;\n    &#125;\n\n    return data;\n  &#125;],\n\n\n&#125;;</code></pre>\n\n<h2 id=\"é€‚é…å™¨\"><a href=\"#é€‚é…å™¨\" class=\"headerlink\" title=\"é€‚é…å™¨\"></a>é€‚é…å™¨</h2><p><code>file:lib/defaults.js</code></p>\n<p>ä¸»è¦åŒ…å«ä¸¤éƒ¨åˆ†æºç ï¼Œå³æµè§ˆå™¨ç«¯ xhr å’Œ node ç«¯çš„ http è¯·æ±‚ï¼Œé€šè¿‡åˆ¤æ–­ç¯å¢ƒï¼Œæ‰§è¡Œä¸åŒç«¯çš„ apiã€‚</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">import utils from &quot;..&#x2F;utils.js&quot;;\nimport httpAdapter from &quot;.&#x2F;http.js&quot;;\nimport xhrAdapter from &quot;.&#x2F;xhr.js&quot;;\n\nconst adapters &#x3D; &#123;\n  http: httpAdapter,\n  xhr: xhrAdapter,\n&#125;;\n\nexport default &#123;\n  getAdapter: (nameOrAdapter) &#x3D;&gt; &#123;\n    if (utils.isString(nameOrAdapter)) &#123;\n      const adapter &#x3D; adapters[nameOrAdapter];\n\n      if (!nameOrAdapter) &#123;\n        throw Error(\n          utils.hasOwnProp(nameOrAdapter)\n            ? &#96;Adapter &#39;$&#123;nameOrAdapter&#125;&#39; is not available in the build&#96;\n            : &#96;Can not resolve adapter &#39;$&#123;nameOrAdapter&#125;&#39;&#96;\n        );\n      &#125;\n\n      return adapter;\n    &#125;\n\n    if (!utils.isFunction(nameOrAdapter)) &#123;\n      throw new TypeError(&quot;adapter is not a function&quot;);\n    &#125;\n\n    return nameOrAdapter;\n  &#125;,\n  adapters,\n&#125;;\n\n&#x2F;&#x2F; æ³¨ï¼š&#x2F;axios&#x2F;lib&#x2F;core&#x2F;dispatchRequest.js\n&#x2F;&#x2F; const adapter &#x3D; config.adapter || defaults.adapter; ä¸­è°ƒç”¨ defaults.adapter\n&#x2F;&#x2F; file: &#x2F;axios&#x2F;lib&#x2F;defaults&#x2F;index.js\n&#x2F;&#x2F; export const default &#x3D; &#123;\n&#x2F;&#x2F;   adapter: getDefaultAdapter(),\n&#x2F;&#x2F; &#125;</code></pre>\n\n<p>å¯¹å¤–æä¾›ç»Ÿä¸€ apiï¼Œä½†åº•å±‚å…¼å®¹æµè§ˆå™¨ç«¯å’Œ node ç«¯ï¼Œç±»ä¼¼ sdkï¼Œåº•å±‚æ›´æ”¹ä¸å½±å“ä¸Šå±‚ apiï¼Œä¿æŒå‘åå…¼å®¹</p>\n<h2 id=\"å‘èµ·è¯·æ±‚\"><a href=\"#å‘èµ·è¯·æ±‚\" class=\"headerlink\" title=\"å‘èµ·è¯·æ±‚\"></a>å‘èµ·è¯·æ±‚</h2><p><code>file: lib/adapters/xhr.js</code><br>å¹³æ—¶ç”¨å¾—æ¯”è¾ƒå¤šçš„æ˜¯æµè§ˆå™¨ç«¯ï¼Œè¿™é‡Œåªè®² XMLHttpRequest çš„å°è£…ï¼Œnode ç«¯æœ‰å…´è¶£çš„åŒå­¦è‡ªè¡ŒæŸ¥çœ‹æºç (lib&#x2F;adapters&#x2F;http.js)</p>\n<p>ç®€æ˜“ç‰ˆæµç¨‹å›¾è¡¨ç¤ºå¤§è‡´å†…å®¹ï¼š</p>\n<p><a href=\"http://t-blog-images.aijs.top/img/20220623172736.webp\" target=\"_blank\" ></a></p>\n<p>æ³¨æ„ï¼šæ–°ç‰ˆæœ¬æœ‰æ”¹åŠ¨</p>\n<ul>\n<li>setCancelToken æ²¡å•¦ï¼Œæœ‰ cancelToken å’Œ signal</li>\n<li>isSetCookie æ²¡æœ‰è¿™ä¸ª</li>\n<li><code>onreadystatechange</code> ä¸ä¸€å®šæœ‰, <code>onloadend</code>æ–¹æ³•ä¸€å®šä¼šè¢«è°ƒç”¨</li>\n</ul>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">if (&quot;onloadend&quot; in request) &#123;\n  &#x2F;&#x2F; Use onloadend if available\n  request.onloadend &#x3D; onloadend;\n&#125; else &#123;\n  &#x2F;&#x2F; Listen for ready state to emulate onloadend\n  request.onreadystatechange &#x3D; function handleLoad() &#123;\n    if (!request || request.readyState !&#x3D;&#x3D; 4) &#123;\n      return;\n    &#125;\n\n    &#x2F;&#x2F; The request errored out and we didn&#39;t get a response, this will be\n    &#x2F;&#x2F; handled by onerror instead\n    &#x2F;&#x2F; With one exception: request that using file: protocol, most browsers\n    &#x2F;&#x2F; will return status as 0 even though it&#39;s a successful request\n    if (\n      request.status &#x3D;&#x3D;&#x3D; 0 &amp;&amp;\n      !(request.responseURL &amp;&amp; request.responseURL.indexOf(&quot;file:&quot;) &#x3D;&#x3D;&#x3D; 0)\n    ) &#123;\n      return;\n    &#125;\n    &#x2F;&#x2F; readystate handler is calling before onerror or ontimeout handlers,\n    &#x2F;&#x2F; so we should call onloadend on the next &#39;tick&#39;\n    setTimeout(onloadend);\n  &#125;;\n&#125;</code></pre>\n\n<h2 id=\"å‚è€ƒé“¾æ¥\"><a href=\"#å‚è€ƒé“¾æ¥\" class=\"headerlink\" title=\"å‚è€ƒé“¾æ¥\"></a>å‚è€ƒé“¾æ¥</h2><p><a href=\"https://baijiahao.baidu.com/s?id=1704404768648603231&wfr=spider&for=pc&searchword=axios%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90\" target=\"_blank\" >Axios æºç è§£æ-å®Œæ•´ç¯‡</a></p>\n<p><a href=\"https://blog.csdn.net/qq_27053493/article/details/97462300\" target=\"_blank\" >ä¸€æ­¥ä¸€æ­¥è§£æ Axios æºç ï¼Œä»å…¥é—¨åˆ°åŸç†</a></p>\n<p><a href=\"https://www.codingsky.com/doc/2022/4/2/433.html\" target=\"_blank\" >axiosæºç ä¸­çš„10å¤šä¸ªå·¥å…·å‡½æ•°ï¼Œå€¼å¾—ä¸€å­¦~</a></p>\n","text":"å®˜ç½‘å®˜ç½‘é¦–é¡µå®˜æ–¹æ–‡æ¡£ä»‹ç»ä¸­æ–‡æ–‡æ¡£ Promise based HTTP client for the browser and node.jsåŸºäº promise å¯ä»¥ç”¨äºæµè§ˆå™¨å’Œ node.js çš„ç½‘ç»œè¯·æ±‚åº“ Axios is a promise-based HTTP Clien...","link":"","photos":[],"count_time":{"symbolsCount":"33k","symbolsTime":"30 mins."},"categories":[{"name":"Http","slug":"Http","count":1,"path":"api/categories/Http.json"}],"tags":[{"name":"æºç ","slug":"æºç ","count":14,"path":"api/tags/æºç .json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AE%98%E7%BD%91\"><span class=\"toc-text\">å®˜ç½‘</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%89%B9%E6%80%A7\"><span class=\"toc-text\">ç‰¹æ€§</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BD%BF%E7%94%A8%E5%8F%8A-Axios-API\"><span class=\"toc-text\">ä½¿ç”¨åŠ Axios API</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%B3%A8%E6%84%8F%E7%82%B9\"><span class=\"toc-text\">æ³¨æ„ç‚¹</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%81%87%E8%AE%BE\"><span class=\"toc-text\">å‡è®¾</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%BA%90%E7%A0%81\"><span class=\"toc-text\">æºç </span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#gulpfile-js\"><span class=\"toc-text\">gulpfile.js</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#bower-json\"><span class=\"toc-text\">bower.json</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#package-json\"><span class=\"toc-text\">package.json</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#rollup-config-js\"><span class=\"toc-text\">rollup.config.js</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%B3%A8%E6%84%8F\"><span class=\"toc-text\">æ³¨æ„</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%89%93%E5%8C%85%E4%BA%A7%E7%89%A9\"><span class=\"toc-text\">æ‰“åŒ…äº§ç‰©</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#axios-js\"><span class=\"toc-text\">axios.js</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%BF%90%E8%A1%8C-sandbox\"><span class=\"toc-text\">è¿è¡Œ sandbox</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#core-%E7%9B%AE%E5%BD%95\"><span class=\"toc-text\">core ç›®å½•</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#axios-%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B\"><span class=\"toc-text\">axios æ‰§è¡Œæµç¨‹</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%85%A5%E5%8F%A3%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">å…¥å£æ–‡ä»¶</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%BB%98%E8%AE%A4%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">é»˜è®¤é…ç½®</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%8B%A6%E6%88%AA%E5%99%A8\"><span class=\"toc-text\">æ‹¦æˆªå™¨</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#dispatchRequest\"><span class=\"toc-text\">dispatchRequest</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%95%B0%E6%8D%AE%E8%BD%AC%E6%8D%A2%E5%99%A8\"><span class=\"toc-text\">æ•°æ®è½¬æ¢å™¨</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Axios\"><span class=\"toc-text\">Axios</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%80%82%E9%85%8D%E5%99%A8\"><span class=\"toc-text\">é€‚é…å™¨</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8F%91%E8%B5%B7%E8%AF%B7%E6%B1%82\"><span class=\"toc-text\">å‘èµ·è¯·æ±‚</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5\"><span class=\"toc-text\">å‚è€ƒé“¾æ¥</span></a></li></ol>","author":{"name":"ä¸¾æ‰‹æ‘˜æœˆäº®","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"ç”Ÿæ´»ä¸æ­¢çœ¼å‰çš„è‹Ÿä¸”ï¼Œè¿˜æœ‰è¯—å’Œè¿œæ–¹","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"ç‚¹","uid":"e9a180d03e63743825beabe89becedc8","slug":"2022-06-23ç‚¹","date":"2022-06-23T09:53:22.000Z","updated":"2022-09-16T13:54:56.153Z","comments":true,"path":"api/articles/2022-06-23ç‚¹.json","keywords":null,"cover":[],"text":" è®°å¾—ä¹‹å‰åœ¨å“ªçœ‹åˆ°è¿‡æ˜¯jsè§£ææ—¶å€™çš„é—®é¢˜ &#x2F;&#x2F; æ¯”å¦‚ 1.toString() &#x2F;&#x2F; ä¼šè¢«è§£æè®¤ä¸ºè¿™ä¸ª.æ˜¯æ•°å­—1çš„ç‚¹ï¼Œå³ï¼š1. è¿™ä¸ªå«å°æ•°çš„æ•° Number(1).toString() &#x2F;&#x2F; ok 1 .toString...","link":"","photos":[],"count_time":{"symbolsCount":295,"symbolsTime":"1 mins."},"categories":[{"name":"javaScript","slug":"javaScript","count":1,"path":"api/categories/javaScript.json"}],"tags":[{"name":"javaScript","slug":"javaScript","count":1,"path":"api/tags/javaScript.json"}],"author":{"name":"ä¸¾æ‰‹æ‘˜æœˆäº®","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"ç”Ÿæ´»ä¸æ­¢çœ¼å‰çš„è‹Ÿä¸”ï¼Œè¿˜æœ‰è¯—å’Œè¿œæ–¹","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}},"next_post":{"title":"react-router v0.6.4 ä¾èµ– history 5.0.0-beta.5æºç ","uid":"a154738b9ff4f1409237a2b3abef8f87","slug":"2022-06-22.history","date":"2022-06-22T10:40:45.000Z","updated":"2022-09-16T15:00:17.131Z","comments":true,"path":"api/articles/2022-06-22.history.json","keywords":null,"cover":null,"text":"ä»‹ç»Documentation for version 5 can be found in the docs directory. This is the current stable release. Version 5 is used in React Router vers...","link":"","photos":[],"count_time":{"symbolsCount":"22k","symbolsTime":"20 mins."},"categories":[{"name":"React","slug":"React","count":26,"path":"api/categories/React.json"}],"tags":[{"name":"React","slug":"React","count":20,"path":"api/tags/React.json"},{"name":"æºç ","slug":"æºç ","count":14,"path":"api/tags/æºç .json"},{"name":"react-router","slug":"react-router","count":3,"path":"api/tags/react-router.json"}],"author":{"name":"ä¸¾æ‰‹æ‘˜æœˆäº®","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"ç”Ÿæ´»ä¸æ­¢çœ¼å‰çš„è‹Ÿä¸”ï¼Œè¿˜æœ‰è¯—å’Œè¿œæ–¹","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}}}