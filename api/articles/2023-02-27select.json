{"title":"记一个老古董项目代码","uid":"e00426eb8e20267d75c9bea1f431c2ca","slug":"2023-02-27select","date":"2023-02-27T02:56:48.000Z","updated":"2023-02-27T12:46:06.495Z","comments":true,"path":"api/articles/2023-02-27select.json","keywords":null,"cover":[],"content":"<h2 id=\"背景\"><a href=\"#背景\" class=\"headerlink\" title=\"背景\"></a>背景</h2><p>周五晚上去上海，周末在上海加了两天班， 做公司项目，周日晚上 9 点回到杭州帮媳妇写老古董 demo（贼充实 😭）</p>\n<img src=\"http://t-blog-images.aijs.top/img/202302271059156.webp\" style=\"width:500px;max-width:100%\" />\n\n<p><strong>事情经过</strong></p>\n<ol>\n<li>媳妇公司的另一个银行项目组业务，要在原有的 java web 项目给下拉选择功能， 增加是否可选的控制，很费劲的哦：不给你看代码，只是说用的 jquery1.11.2,要你实现。哎呦我去～</li>\n<li>原有项目要扩展功能总要给看看吧</li>\n<li>重新给你实现，总要能对应的上吧</li>\n<li>没得办法，先帮实现几种可能，剩下的，您哎，自个改～</li>\n<li>。。。。。一系列操作之后，在原有的基础上扩展</li>\n</ol>\n<h2 id=\"原项目实现方案推测\"><a href=\"#原项目实现方案推测\" class=\"headerlink\" title=\"原项目实现方案推测\"></a>原项目实现方案推测</h2><ol>\n<li>原生实现 js</li>\n<li>jquery 实现 jquery</li>\n<li>使用了插件 jquery + select2</li>\n</ol>\n<h2 id=\"原生方式-or-jquery\"><a href=\"#原生方式-or-jquery\" class=\"headerlink\" title=\"原生方式 or jquery\"></a>原生方式 or jquery</h2><pre class=\"line-numbers language-markup\" data-language=\"markup\"><code class=\"language-markup\">&lt;!DOCTYPE html&gt;\n&lt;html lang&#x3D;&quot;en&quot;&gt;\n  &lt;head&gt;\n    &lt;meta charset&#x3D;&quot;UTF-8&quot; &#x2F;&gt;\n    &lt;meta http-equiv&#x3D;&quot;X-UA-Compatible&quot; content&#x3D;&quot;IE&#x3D;edge&quot; &#x2F;&gt;\n    &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1.0&quot; &#x2F;&gt;\n    &lt;title&gt;Document&lt;&#x2F;title&gt;\n  &lt;&#x2F;head&gt;\n\n  &lt;body&gt;\n    &lt;select name&#x3D;&quot;tech&quot; id&#x3D;&quot;selector&quot;&gt;&lt;&#x2F;select&gt;\n    &lt;!-- jquery --&gt;\n    &lt;!-- &lt;script src&#x3D;&quot;.&#x2F;jquery1.11.2.min.js&quot;&gt;&lt;&#x2F;script&gt; --&gt;\n    &lt;!-- &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.bootcdn.net&#x2F;ajax&#x2F;libs&#x2F;jquery&#x2F;1.11.2&#x2F;jquery.js&quot;&gt;&lt;&#x2F;script&gt; --&gt;\n\n    &lt;script&gt;\n      &#x2F;&#x2F; 1. 模拟数据\n      var data &#x3D; [\n        &#123; id: 0, text: &quot;H5&quot; &#125;,\n        &#123; id: 1, text: &quot;JS&quot; &#125;,\n        &#123; id: 2, text: &quot;JAVA&quot; &#125;,\n        &#123; id: 3, text: &quot;Vue&quot;, remark: &quot;这是一个remark&quot; &#125;,\n        &#123; id: 4, text: &quot;React&quot; &#125;,\n      ];\n      &#x2F;&#x2F; 2. 拼接remark处理函数\n      function pinRemark(item) &#123;\n        return item.remark ? &quot;(&quot; + item.remark + &quot;)&quot; : &quot;&quot;;\n      &#125;\n      &#x2F;&#x2F; 3. 动态生成 options\n      for (var i &#x3D; 0; i &lt; data.length; i++) &#123;\n        var option &#x3D; document.createElement(&quot;option&quot;);\n        var item &#x3D; data[i];\n        option.value &#x3D; item.id;\n        &#x2F;&#x2F; 4. 动态拼接remark\n        option.innerHTML &#x3D; &#x2F;*之前的option展示的内容*&#x2F; item.text + &#x2F;*拼接的remark*&#x2F; pinRemark(item);\n        &#x2F;&#x2F; 5. 判断有remark，添加disabled属性\n        if (item.remark) &#123;\n          option.disabled &#x3D; true;\n        &#125;\n        &#x2F;&#x2F; 6. 挂载节点\n        &#x2F;&#x2F; $(&#39;#selector&#39;).append(option); &#x2F;&#x2F; jquery\n        document.getElementById(&quot;selector&quot;).append(option);\n      &#125;\n    &lt;&#x2F;script&gt;\n  &lt;&#x2F;body&gt;\n&lt;&#x2F;html&gt;</code></pre>\n\n<h2 id=\"jquery-select2\"><a href=\"#jquery-select2\" class=\"headerlink\" title=\"jquery + select2\"></a>jquery + select2</h2><pre class=\"line-numbers language-markup\" data-language=\"markup\"><code class=\"language-markup\">&lt;!DOCTYPE html&gt;\n&lt;html lang&#x3D;&quot;en&quot;&gt;\n  &lt;head&gt;\n    &lt;meta charset&#x3D;&quot;UTF-8&quot; &#x2F;&gt;\n    &lt;meta http-equiv&#x3D;&quot;X-UA-Compatible&quot; content&#x3D;&quot;IE&#x3D;edge&quot; &#x2F;&gt;\n    &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1.0&quot; &#x2F;&gt;\n    &lt;title&gt;Document&lt;&#x2F;title&gt;\n    &lt;!-- &lt;link rel&#x3D;&quot;stylesheet&quot; href&#x3D;&quot;.&#x2F;dist&#x2F;css&#x2F;select2.css&quot; &#x2F;&gt; --&gt;\n    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;cdn.bootcdn.net&#x2F;ajax&#x2F;libs&#x2F;select2&#x2F;4.0.13&#x2F;css&#x2F;select2.css&quot; rel&#x3D;&quot;stylesheet&quot; &#x2F;&gt;\n    &lt;style&gt;\n      .js-example-data-array &#123;\n        width: 200px;\n      &#125;\n    &lt;&#x2F;style&gt;\n  &lt;&#x2F;head&gt;\n\n  &lt;body&gt;\n    &lt;select class&#x3D;&quot;js-example-data-array&quot;&gt;&lt;&#x2F;select&gt;\n\n    &lt;!-- &lt;script src&#x3D;&quot;.&#x2F;jquery1.11.2.min.js&quot;&gt;&lt;&#x2F;script&gt; --&gt;\n    &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.bootcdn.net&#x2F;ajax&#x2F;libs&#x2F;jquery&#x2F;1.11.2&#x2F;jquery.js&quot;&gt;&lt;&#x2F;script&gt;\n    &lt;!-- &lt;script src&#x3D;&quot;.&#x2F;dist&#x2F;js&#x2F;select2.full.js&quot;&gt;&lt;&#x2F;script&gt; --&gt;\n    &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.bootcdn.net&#x2F;ajax&#x2F;libs&#x2F;select2&#x2F;4.0.13&#x2F;js&#x2F;select2.full.js&quot;&gt;&lt;&#x2F;script&gt;\n    &lt;script&gt;\n      &#x2F;&#x2F; 模拟数据\n      var data &#x3D; [\n        &#123; id: 0, text: &quot;H5&quot; &#125;,\n        &#123; id: 1, text: &quot;JS&quot; &#125;,\n        &#123; id: 2, text: &quot;JAVA&quot; &#125;,\n        &#123; id: 3, text: &quot;Vue&quot;, remark: &quot;这是一个remark&quot; &#125;,\n        &#123; id: 4, text: &quot;React&quot; &#125;,\n      ];\n      &#x2F;&#x2F;  整理后的新数据\n      var list &#x3D; [];\n\n      for (var i &#x3D; 0; i &lt; data.length; i++) &#123;\n        var element &#x3D; data[i];\n        &#x2F;&#x2F; 有remark的数据，增加disabled属性，并对text进行整理\n        if (element.remark) &#123;\n          list.push(&#123;\n            id: element.id,\n            disabled: true,\n            text: element.text + &quot;(&quot; + element.remark + &quot;)&quot;,\n          &#125;);\n        &#125; else &#123;\n          list.push(element);\n        &#125;\n      &#125;\n      &#x2F;&#x2F; 初始化select2数据\n      $(&quot;.js-example-data-array&quot;).select2(&#123;\n        data: list,\n      &#125;);\n    &lt;&#x2F;script&gt;\n  &lt;&#x2F;body&gt;\n&lt;&#x2F;html&gt;</code></pre>\n\n<h2 id=\"jquery-select2-进行抽取方法\"><a href=\"#jquery-select2-进行抽取方法\" class=\"headerlink\" title=\"jquery + select2 进行抽取方法\"></a>jquery + select2 进行抽取方法</h2><pre class=\"line-numbers language-markup\" data-language=\"markup\"><code class=\"language-markup\">&lt;!DOCTYPE html&gt;\n&lt;html lang&#x3D;&quot;en&quot;&gt;\n  &lt;head&gt;\n    &lt;meta charset&#x3D;&quot;UTF-8&quot; &#x2F;&gt;\n    &lt;meta http-equiv&#x3D;&quot;X-UA-Compatible&quot; content&#x3D;&quot;IE&#x3D;edge&quot; &#x2F;&gt;\n    &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1.0&quot; &#x2F;&gt;\n    &lt;title&gt;Document&lt;&#x2F;title&gt;\n    &lt;!-- &lt;link rel&#x3D;&quot;stylesheet&quot; href&#x3D;&quot;.&#x2F;dist&#x2F;css&#x2F;select2.css&quot; &#x2F;&gt; --&gt;\n    &lt;link href&#x3D;&quot;https:&#x2F;&#x2F;cdn.bootcdn.net&#x2F;ajax&#x2F;libs&#x2F;select2&#x2F;4.0.13&#x2F;css&#x2F;select2.css&quot; rel&#x3D;&quot;stylesheet&quot; &#x2F;&gt;\n    &lt;style&gt;\n      .js-example-data-array &#123;\n        width: 200px;\n      &#125;\n    &lt;&#x2F;style&gt;\n  &lt;&#x2F;head&gt;\n\n  &lt;body&gt;\n    &lt;select class&#x3D;&quot;js-example-data-array&quot;&gt;&lt;&#x2F;select&gt;\n\n    &lt;!-- &lt;script src&#x3D;&quot;.&#x2F;jquery1.11.2.min.js&quot;&gt;&lt;&#x2F;script&gt; --&gt;\n    &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.bootcdn.net&#x2F;ajax&#x2F;libs&#x2F;jquery&#x2F;1.11.2&#x2F;jquery.js&quot;&gt;&lt;&#x2F;script&gt;\n    &lt;!-- &lt;script src&#x3D;&quot;.&#x2F;dist&#x2F;js&#x2F;select2.full.js&quot;&gt;&lt;&#x2F;script&gt; --&gt;\n    &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.bootcdn.net&#x2F;ajax&#x2F;libs&#x2F;select2&#x2F;4.0.13&#x2F;js&#x2F;select2.full.js&quot;&gt;&lt;&#x2F;script&gt;\n    &lt;script&gt;\n      &#x2F;&#x2F; 格式化数据\n      function formatDisabledRemarkDatas(data) &#123;\n        var list &#x3D; [];\n        for (var i &#x3D; 0; i &lt; data.length; i++) &#123;\n          var element &#x3D; data[i];\n          &#x2F;&#x2F; 有remark的数据，增加disabled属性，并对text进行整理\n          if (element.remark) &#123;\n            list.push(&#123;\n              id: element.id,\n              disabled: true,\n              text: element.text + &quot;(&quot; + element.remark + &quot;)&quot;,\n            &#125;);\n          &#125; else &#123;\n            list.push(element);\n          &#125;\n        &#125;\n        return list;\n      &#125;\n    &lt;&#x2F;script&gt;\n    &lt;script&gt;\n      &#x2F;&#x2F; 模拟数据\n      var data &#x3D; [\n        &#123; id: 0, text: &quot;H5&quot; &#125;,\n        &#123; id: 1, text: &quot;JS&quot; &#125;,\n        &#123; id: 2, text: &quot;JAVA&quot; &#125;,\n        &#123; id: 3, text: &quot;Vue&quot;, remark: &quot;这是一个remark&quot; &#125;,\n        &#123; id: 4, text: &quot;React&quot; &#125;,\n      ];\n\n      &#x2F;&#x2F; 初始化select2数据\n      $(&quot;.js-example-data-array&quot;).select2(&#123;\n        &#x2F;&#x2F;  整理后的新数据\n        data: formatDisabledRemarkDatas(data),\n      &#125;);\n    &lt;&#x2F;script&gt;\n  &lt;&#x2F;body&gt;\n&lt;&#x2F;html&gt;</code></pre>\n\n<h2 id=\"ul-li\"><a href=\"#ul-li\" class=\"headerlink\" title=\"ul+li\"></a>ul+li</h2><p>我猜之前的人不可能这么干～</p>\n<h2 id=\"demo-写完\"><a href=\"#demo-写完\" class=\"headerlink\" title=\"demo 写完\"></a>demo 写完</h2><p>媳妇说这你怎么也会写呢（我：我前些年花的时间你想象不到）</p>\n<h2 id=\"“大爷”搞不定了\"><a href=\"#“大爷”搞不定了\" class=\"headerlink\" title=\"“大爷”搞不定了\"></a>“大爷”搞不定了</h2><p>demo 给到“大爷”， 最后还是给了仓库地址，本地运行 java web 进行开发, 早这样，早就完事了</p>\n<p>项目中 select2，使用第二个方案处理下</p>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><ol>\n<li>java web 项目很少见，基本上要么重构，要么是古板的公司成品基本上不需要维护（ 这项目还当成宝，丢在大街上，看都不看）</li>\n<li>刚毕业时候的第一家公司用的 query+angularjs</li>\n<li>现在基本上见不到这种项目了</li>\n</ol>\n","text":"背景周五晚上去上海，周末在上海加了两天班， 做公司项目，周日晚上 9 点回到杭州帮媳妇写老古董 demo（贼充实 😭） 事情经过 媳妇公司的另一个银行项目组业务，要在原有的 java web 项目给下拉选择功能， 增加是否可选的控制，很费劲的哦：不给你看代码，只是说用的 jque...","link":"","photos":[],"count_time":{"symbolsCount":"8.1k","symbolsTime":"7 mins."},"categories":[{"name":"jQuery","slug":"jQuery","count":1,"path":"api/categories/jQuery.json"}],"tags":[{"name":"jQuery","slug":"jQuery","count":1,"path":"api/tags/jQuery.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%83%8C%E6%99%AF\"><span class=\"toc-text\">背景</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8E%9F%E9%A1%B9%E7%9B%AE%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%A1%88%E6%8E%A8%E6%B5%8B\"><span class=\"toc-text\">原项目实现方案推测</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8E%9F%E7%94%9F%E6%96%B9%E5%BC%8F-or-jquery\"><span class=\"toc-text\">原生方式 or jquery</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#jquery-select2\"><span class=\"toc-text\">jquery + select2</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#jquery-select2-%E8%BF%9B%E8%A1%8C%E6%8A%BD%E5%8F%96%E6%96%B9%E6%B3%95\"><span class=\"toc-text\">jquery + select2 进行抽取方法</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#ul-li\"><span class=\"toc-text\">ul+li</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#demo-%E5%86%99%E5%AE%8C\"><span class=\"toc-text\">demo 写完</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E2%80%9C%E5%A4%A7%E7%88%B7%E2%80%9D%E6%90%9E%E4%B8%8D%E5%AE%9A%E4%BA%86\"><span class=\"toc-text\">“大爷”搞不定了</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%80%BB%E7%BB%93\"><span class=\"toc-text\">总结</span></a></li></ol>","author":{"name":"举手摘月亮","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/202303171118970.webp","link":"/","description":"<div><p>举手向苍穹，并非一定要摘到星月</p><p>眼中有光，心中有梦，脚下有路</p><div>","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"重新认识下 JSON.stringify","uid":"efb0473bb840c16eda737ab9fe4eecb0","slug":"2023-02-27json","date":"2023-02-27T05:32:04.000Z","updated":"2023-02-27T12:46:06.494Z","comments":true,"path":"api/articles/2023-02-27json.json","keywords":null,"cover":null,"text":"JSON.stringify 是什么JSON.stringify(value[, replacer [, space]]) 将一个 JavaScript 对象或值转换为 JSON 字符串 replacer该字段决定处理哪些属性 如果 replacer 是函数，则在序列化过程中，被...","link":"","photos":[],"count_time":{"symbolsCount":"4.8k","symbolsTime":"4 mins."},"categories":[{"name":"前端基础","slug":"前端基础","count":54,"path":"api/categories/前端基础.json"}],"tags":[{"name":"前端基础","slug":"前端基础","count":56,"path":"api/tags/前端基础.json"}],"author":{"name":"举手摘月亮","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/202303171118970.webp","link":"/","description":"<div><p>举手向苍穹，并非一定要摘到星月</p><p>眼中有光，心中有梦，脚下有路</p><div>","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}},"next_post":{"title":"移动端适配 - viewport","uid":"7f7a9ab6a798a1698e4fe0da6545ff5a","slug":"2023-2-23viewport","date":"2023-02-23T09:27:13.000Z","updated":"2023-02-23T13:26:54.134Z","comments":true,"path":"api/articles/2023-2-23viewport.json","keywords":null,"cover":[],"text":"postcss-px-to-viewport5W2H 法则进行复利 为什么amfe-flexible 作者： 由于 viewport 单位得到众多浏览器的兼容，lib-flexible 这个过渡方案已经可以放弃使用，不管是现在的版本还是以前的版本，都存有一定的问题。建议大家开始使...","link":"","photos":[],"count_time":{"symbolsCount":853,"symbolsTime":"1 mins."},"categories":[{"name":"移动端适配","slug":"移动端适配","count":4,"path":"api/categories/移动端适配.json"}],"tags":[{"name":"源码","slug":"源码","count":16,"path":"api/tags/源码.json"},{"name":"移动端适配","slug":"移动端适配","count":4,"path":"api/tags/移动端适配.json"}],"author":{"name":"举手摘月亮","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/202303171118970.webp","link":"/","description":"<div><p>举手向苍穹，并非一定要摘到星月</p><p>眼中有光，心中有梦，脚下有路</p><div>","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}}}