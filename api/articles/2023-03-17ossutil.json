{"title":"ossutil","uid":"a48730f893eb3d8564a6e41f516078f2","slug":"2023-03-17ossutil","date":"2023-03-17T01:12:02.000Z","updated":"2023-05-15T13:17:32.987Z","comments":true,"path":"api/articles/2023-03-17ossutil.json","keywords":null,"cover":[],"content":"<h2 id=\"动机\"><a href=\"#动机\" class=\"headerlink\" title=\"动机\"></a>动机</h2><ol>\n<li>之前单张图使用 PicGo 进行上传，这次需要批量多目录处理</li>\n<li>阿里云 OSS 网页上传，会丢失目录层级关系</li>\n<li>批量将目录下的图片，及文件对应关系上传到阿里云 OSS,博客在线资源使用</li>\n<li>批量图片压缩，保留文件关系</li>\n</ol>\n<h2 id=\"批量图片压缩\"><a href=\"#批量图片压缩\" class=\"headerlink\" title=\"批量图片压缩\"></a>批量图片压缩</h2><h3 id=\"ChatGPT-生成\"><a href=\"#ChatGPT-生成\" class=\"headerlink\" title=\"ChatGPT 生成\"></a>ChatGPT 生成</h3><img src=\"http://t-blog-images.aijs.top/img/202303170935061.webp\" />\n\n<h3 id=\"pngquant-压缩工具\"><a href=\"#pngquant-压缩工具\" class=\"headerlink\" title=\"pngquant 压缩工具\"></a>pngquant 压缩工具</h3><p><a href=\"https://pngquant.org/\" target=\"_blank\" >pngquant</a></p>\n<p>我觉得吧，</p>\n<ol>\n<li>这个比 picGo，压缩效果要好，</li>\n<li>可以看效果是不是想要的，然后再进行上传</li>\n</ol>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">brew install pngquant</code></pre>\n\n<h3 id=\"压缩脚本\"><a href=\"#压缩脚本\" class=\"headerlink\" title=\"压缩脚本\"></a>压缩脚本</h3><img src=\"http://t-blog-images.aijs.top/img/202303170919894.webp\" />\n\n<img src=\"http://t-blog-images.aijs.top/img/202303170920785.webp\" />\n\n<p>脚本经过 ChatGPT 生成，加手动修正</p>\n<h3 id=\"手动修正\"><a href=\"#手动修正\" class=\"headerlink\" title=\"手动修正\"></a>手动修正</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">#!&#x2F;bin&#x2F;bash\n\n# 创建保存压缩结果的文件夹\nmkdir compressed_pngs\n\n# 遍历当前文件夹及其子文件夹中的所有.png文件并进行压缩\nfind . -name &quot;*.png&quot; -type f -print0 | while read -d $&#39;\\0&#39; file\ndo\n  # 获取文件所在目录相对于当前文件夹的路径，用于在输出文件夹中创建对应的文件夹\n  dir&#x3D;$(dirname &quot;$file&quot;)\n  relative_dir&#x3D;$&#123;dir#*&#x2F;&#125;\n  mkdir -p &quot;compressed_pngs&#x2F;$relative_dir&quot;\n\n  # 执行压缩命令，将压缩结果输出到新文件夹中对应的位置\n  # pngquant --quality&#x3D;70 --force &quot;$file&quot; --output &quot;compressed_pngs&#x2F;$relative_dir&#x2F;$(basename &quot;$file&quot;)&quot;\n\n\n  # 获取文件大小\n    size&#x3D;$(stat -f%z &quot;$file&quot;)\n    if ((size &gt; 61440)); then\n        # 文件大小大于60kb，进行压缩处理\n        echo &quot;Compressing $file...&quot;\n        pngquant --quality&#x3D;70 &quot;$file&quot; -o &quot;compressed_pngs&#x2F;$relative_dir&#x2F;$(basename &quot;$file&quot;)&quot;\n    else\n        # 文件大小小于等于60kb，直接复制到新文件夹\n        echo &quot;Copying $file...&quot;\n        cp &quot;$file&quot; &quot;compressed_pngs&#x2F;$relative_dir&#x2F;$(basename &quot;$file&quot;)&quot;\n    fi\ndone</code></pre>\n\n<h2 id=\"ossutil\"><a href=\"#ossutil\" class=\"headerlink\" title=\"ossutil\"></a>ossutil</h2><h3 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h3><p><a href=\"https://help.aliyun.com/document_detail/120075.html\" target=\"_blank\" >安装</a></p>\n<h3 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h3><ol>\n<li><a href=\"https://help.aliyun.com/document_detail/474474.html\" target=\"_blank\" >配置</a></li>\n<li><a href=\"https://ram.console.aliyun.com/users/detail?userId=213472804632423833\" target=\"_blank\" >RAM 访问控制</a></li>\n<li><a href=\"https://help.aliyun.com/document_detail/31837.htm?spm=a2c4g.11186623.0.0.354c60ae9mik14#concept-zt4-cvy-5db\" target=\"_blank\" >访问域名和数据中心</a></li>\n</ol>\n<img src=\"http://t-blog-images.aijs.top/img/202303170924268.webp\" />\n\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">👑 ~&#x2F;Desktop $ ossutil config\n该命令创建将一个配置文件，在其中存储配置信息。\n\n请输入配置文件名,文件名可以带路径(默认为：&#x2F;Users&#x2F;haotian&#x2F;.ossutilconfig，回车将使用默认配置文件。如果用户设置为其它文件，在使用命令时需要将--config-file选项设置为该文件）：\n未输入配置文件，将使用默认配置文件：&#x2F;Users&#x2F;haotian&#x2F;.ossutilconfig。\n\n对于下述配置，回车将跳过相关配置项的设置，配置项的具体含义，请使用&quot;help config&quot;命令查看。\n请输入语言(CH&#x2F;EN，默认为：CH，该配置项将在此次config命令成功结束后生效)：\n请输入stsToken：\n请输入endpoint：   &#x2F;&#x2F; 文档：访问域名和数据中心\n请输入accessKeyID： &#x2F;&#x2F; 控制台：RAM 访问控制\n请输入accessKeySecret： &#x2F;&#x2F; 控制台：RAM 访问控制\n👑 ~&#x2F;Desktop $ code &#x2F;Users&#x2F;haotian&#x2F;.ossutilconfig\n👑 ~&#x2F;Desktop $ ossutil config\n该命令创建将一个配置文件，在其中存储配置信息。\n\n请输入配置文件名,文件名可以带路径(默认为：&#x2F;Users&#x2F;haotian&#x2F;.ossutilconfig，回车将使用默认配置文件。如果用户设置为其它文件，在使用命令时需要将--config-file选项设置为该文件）：\n未输入配置文件，将使用默认配置文件：&#x2F;Users&#x2F;haotian&#x2F;.ossutilconfig。\n\n对于下述配置，回车将跳过相关配置项的设置，配置项的具体含义，请使用&quot;help config&quot;命令查看。\n请输入endpoint：oss-cn-hangzhou.aliyuncs.com &#x2F;&#x2F; 这个查文档\n请输入accessKeyID：\n请输入accessKeySecret：\n请输入stsToken：</code></pre>\n\n<h3 id=\"批量上传\"><a href=\"#批量上传\" class=\"headerlink\" title=\"批量上传\"></a>批量上传</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">👑 ~&#x2F;Desktop $ ossutil cp -r snapshots  oss:&#x2F;&#x2F;t-blog-images&#x2F;snapshots --update --recursive\nSucceed: Total num: 377, size: 18,455,467. OK num: 377(upload 332 files, 45 directories).\n\naverage speed 1197000(byte&#x2F;s)\n\n15.422068(s) elapsed\n👑 ~&#x2F;Desktop $\n\n</code></pre>\n\n<h2 id=\"可视化大屏资源\"><a href=\"#可视化大屏资源\" class=\"headerlink\" title=\"可视化大屏资源\"></a>可视化大屏资源</h2><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">👑 ~&#x2F;Desktop $ ossutil cp -r demo-html  oss:&#x2F;&#x2F;wrong --update --recursive</code></pre>\n\n<h2 id=\"其他图片压缩命令行\"><a href=\"#其他图片压缩命令行\" class=\"headerlink\" title=\"其他图片压缩命令行\"></a>其他图片压缩命令行</h2><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">pngquant --quality&#x3D;30 *.png</code></pre>\n","text":"动机 之前单张图使用 PicGo 进行上传，这次需要批量多目录处理 阿里云 OSS 网页上传，会丢失目录层级关系 批量将目录下的图片，及文件对应关系上传到阿里云 OSS,博客在线资源使用 批量图片压缩，保留文件关系 批量图片压缩ChatGPT 生成 pngquant 压缩工具pn...","link":"","photos":[],"count_time":{"symbolsCount":"2.8k","symbolsTime":"3 mins."},"categories":[{"name":"阿里云","slug":"阿里云","count":1,"path":"api/categories/阿里云.json"}],"tags":[{"name":"阿里云","slug":"阿里云","count":1,"path":"api/tags/阿里云.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8A%A8%E6%9C%BA\"><span class=\"toc-text\">动机</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%89%B9%E9%87%8F%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9\"><span class=\"toc-text\">批量图片压缩</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#ChatGPT-%E7%94%9F%E6%88%90\"><span class=\"toc-text\">ChatGPT 生成</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#pngquant-%E5%8E%8B%E7%BC%A9%E5%B7%A5%E5%85%B7\"><span class=\"toc-text\">pngquant 压缩工具</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%8E%8B%E7%BC%A9%E8%84%9A%E6%9C%AC\"><span class=\"toc-text\">压缩脚本</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%89%8B%E5%8A%A8%E4%BF%AE%E6%AD%A3\"><span class=\"toc-text\">手动修正</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#ossutil\"><span class=\"toc-text\">ossutil</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85\"><span class=\"toc-text\">安装</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">配置</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%89%B9%E9%87%8F%E4%B8%8A%E4%BC%A0\"><span class=\"toc-text\">批量上传</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%A7%E5%B1%8F%E8%B5%84%E6%BA%90\"><span class=\"toc-text\">可视化大屏资源</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%85%B6%E4%BB%96%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9%E5%91%BD%E4%BB%A4%E8%A1%8C\"><span class=\"toc-text\">其他图片压缩命令行</span></a></li></ol>","author":{"name":"举手摘月亮","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/202303171118970.webp","link":"/","description":"<div><p>眼中有光，心中有梦，脚下有路</p><div>","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"rn适配","uid":"6c73e119803e50b56fae60b4dcf06443","slug":"2023-04-06rn","date":"2023-04-06T05:55:25.000Z","updated":"2023-07-08T01:06:25.352Z","comments":true,"path":"api/articles/2023-04-06rn.json","keywords":null,"cover":[],"text":"动机之前有了解过 rn 适配，也有做过适配。最近在帮面板部门开发 RN，看到了相关库是开源的，这次来看看大公司是如何做适配的，学习～ rem 适配方案ty-panel-kitty-panel-kit 是公司面板部门开源的 RN 工具库及 UI 包，主要用于面板开发 适配工具con...","link":"","photos":[],"count_time":{"symbolsCount":"6.7k","symbolsTime":"6 mins."},"categories":[{"name":"react-native","slug":"react-native","count":8,"path":"api/categories/react-native.json"}],"tags":[{"name":"react-native","slug":"react-native","count":8,"path":"api/tags/react-native.json"}],"author":{"name":"举手摘月亮","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/202303171118970.webp","link":"/","description":"<div><p>眼中有光，心中有梦，脚下有路</p><div>","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}},"next_post":{"title":"React jsx -> fiber -> dom 的转化","uid":"1a2c0f92af01c15fc4932e397caca413","slug":"2023-03-31createElement","date":"2023-03-13T05:57:13.000Z","updated":"2023-04-18T15:54:59.596Z","comments":true,"path":"api/articles/2023-03-31createElement.json","keywords":null,"cover":[],"text":"读源码基础 位运算 call、apply、bind 原理 链表相关知识(单链表、双链表、循环链表) 节流、防抖原理 ensureRootIsScheduled: if (existingCallbackNode !== null) &#123; 设计模式相关知识 安全相关知识 栈...","link":"","photos":[],"count_time":{"symbolsCount":"9.4k","symbolsTime":"9 mins."},"categories":[{"name":"React","slug":"React","count":38,"path":"api/categories/React.json"}],"tags":[{"name":"React","slug":"React","count":32,"path":"api/tags/React.json"}],"author":{"name":"举手摘月亮","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/202303171118970.webp","link":"/","description":"<div><p>眼中有光，心中有梦，脚下有路</p><div>","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}}}