{"title":"python3 å¹²å°±å®Œäº†ï½","uid":"1ff7bc15a19101d81a6f563025053eaf","slug":"2022-09-24python","date":"2022-09-24T10:21:22.000Z","updated":"2022-09-25T11:28:05.452Z","comments":true,"path":"api/articles/2022-09-24python.json","keywords":null,"cover":[],"content":"<h1 id=\"Python3-å‡çº§\"><a href=\"#Python3-å‡çº§\" class=\"headerlink\" title=\"Python3 å‡çº§\"></a>Python3 å‡çº§</h1><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">$ python --version\nPython 2.7.15\n$ python3 --version\nPython 3.7.2\n$ brew upgrade python@3.10</code></pre>\n\n<p>å¤§æ¦‚æ˜¯2019å¹´å®‰è£…çš„python 3.7.2ç‰ˆæœ¬ï¼Œçœ‹äº†ä¸‹æ–‡æ¡£ï¼Œæœ‰å°‘æ•°å†…å®¹æ˜¯éœ€è¦3.8ç‰ˆæœ¬æ‰å¯ä»¥ä½¿ç”¨ï¼Œæ‰€ä»¥å‡çº§ä¸‹</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">&#x2F;&#x2F; å°è¯•çš„æ–¹æ¡ˆå°±ä¸æäº†ï¼Œæœ€åæ˜¯ä½¿ç”¨brewæ›´æ–°çš„ï¼Œæˆ‘å°è±¡ä¸­ä¹Ÿæ˜¯ä½¿ç”¨brewè¿›è¡Œå®‰è£…çš„ Python 3.7.2\n\n&#x2F;&#x2F;  1. brewå‡çº§é—®é¢˜\n$ brew update                     \nError: \n  homebrew-core is a shallow clone.\n  homebrew-cask is a shallow clone.\nTo &#96;brew update&#96;, first run:\n&#x2F;&#x2F; æç¤ºæ›´æ–° homebrew-core ã€ homebrew-cask\n  git -C &#x2F;usr&#x2F;local&#x2F;Homebrew&#x2F;Library&#x2F;Taps&#x2F;homebrew&#x2F;homebrew-core fetch --unshallow\n  git -C &#x2F;usr&#x2F;local&#x2F;Homebrew&#x2F;Library&#x2F;Taps&#x2F;homebrew&#x2F;homebrew-cask fetch --unshallow\nThese commands may take a few minutes to run due to the large size of the repositories.\nThis restriction has been made on GitHub&#39;s request because updating shallow\nclones is an extremely expensive operation due to the tree layout and traffic of\nHomebrew&#x2F;homebrew-core and Homebrew&#x2F;homebrew-cask. We don&#39;t do this for you\nautomatically to avoid repeatedly performing an expensive unshallow operation in\nCI systems (which should instead be fixed to not use shallow clones). Sorry for\nthe inconvenience!\n\n$  git -C &#x2F;usr&#x2F;local&#x2F;Homebrew&#x2F;Library&#x2F;Taps&#x2F;homebrew&#x2F;homebrew-core fetch --unshallow\nremote: Enumerating objects: 554589, done.\nremote: Counting objects: 100% (554579&#x2F;554579), done.\nremote: Compressing objects: 100% (203589&#x2F;203589), done.\nremote: Total 545216 (delta 349940), reused 533974 (delta 338772), pack-reused 0\nReceiving objects: 100% (545216&#x2F;545216), 185.96 MiB | 3.35 MiB&#x2F;s, done.\nResolving deltas: 100% (349940&#x2F;349940), completed with 7224 local objects.\nFrom https:&#x2F;&#x2F;github.com&#x2F;Homebrew&#x2F;homebrew-core\n   ec1cfdae42e..44f9ecb1cc9  master     -&gt; origin&#x2F;master\n\n$ git -C &#x2F;usr&#x2F;local&#x2F;Homebrew&#x2F;Library&#x2F;Taps&#x2F;homebrew&#x2F;homebrew-cask fetch --unshallow\n\nremote: Enumerating objects: 183139, done.\nremote: Counting objects: 100% (170633&#x2F;170633), done.\nremote: Compressing objects: 100% (52991&#x2F;52991), done.\nremote: Total 157830 (delta 118189), reused 144193 (delta 104700), pack-reused 0\nReceiving objects: 100% (157830&#x2F;157830), 74.85 MiB | 3.34 MiB&#x2F;s, done.\nResolving deltas: 100% (118189&#x2F;118189), completed with 6886 local objects.\nFrom https:&#x2F;&#x2F;github.com&#x2F;Homebrew&#x2F;homebrew-cask\n   372fbf30e9..91f5fb626d  master     -&gt; origin&#x2F;master\n\n&#x2F;&#x2F; python3.10å®‰è£…\n\n$ brew upgrade python@3.10\n\nRunning &#96;brew update --preinstall&#96;...\n\n&#x3D;&#x3D;&gt; Upgrading 1 outdated package:\npython@3.10 3.10.2 -&gt; 3.10.6_2\nError: python@3.10: the bottle needs the Apple Command Line Tools to be installed.\n  You can install them, if desired, with:\n    xcode-select --install\nYou can try to install from source with:\n  brew install --build-from-source python@3.10\nPlease note building from source is unsupported. You will encounter build\nfailures with some formulae. If you experience any issues please create pull\nrequests instead of asking for help on Homebrew&#39;s GitHub, Twitter or any other\nofficial channels.\n\n&#x2F;&#x2F; å¤±è´¥æç¤º\n\n$ xcode-select --install\nxcode-select: note: install requested for command line developer tools\n\n&#x2F;&#x2F; ä»sourceå®‰è£…\n$  brew install --build-from-source python@3.10\n...\n\n&#x2F;&#x2F; å®‰è£… 98.4% å¤±è´¥\n######################################################################    98.4%curl: (56) LibreSSL SSL_read: error:02FFF03C:system library:func(4095):Operation timed out, errno 60\n\nError: python@3.10: Failed to download resource &quot;python@3.10&quot;\nDownload failed: https:&#x2F;&#x2F;www.python.org&#x2F;ftp&#x2F;python&#x2F;3.10.6&#x2F;Python-3.10.6.tgz\n\n&#x2F;&#x2F; é‡æ–°æ‰§è¡Œå‘½ä»¤å†æ¬¡å®‰è£…\n\n$  brew install --build-from-source python@3.10\nRunning &#96;brew update --auto-update&#96;...\npython@3.10 3.7.2_2 is already installed but outdated (so it will be upgraded).\n\n\n&#x3D;&#x3D;&gt; Downloading https:&#x2F;&#x2F;www.python.org&#x2F;ftp&#x2F;python&#x2F;3.10.6&#x2F;Python-3.10.6.tgz\n######################################################################## 100.0%\n&#x3D;&#x3D;&gt; Upgrading python@3.10\n  3.10.2 -&gt; 3.10.6_2 \n\n\n\n&#x2F;&#x2F; æ•´ä¸ªè¿‡ç¨‹å¾ˆé•¿ï¼Œè¿˜éœ€è¦vpnåŠ æŒ\n\nLast login: Sat Sep 24 17:31:07 on ttys008\n $ python3 --version\nPython 3.10.6\n $ python           \nzsh: command not found: python &#x2F;&#x2F; æ˜¯çœŸçš„ç‹—å•Š\n $ \n\n&#x2F;&#x2F; å‘ç°åˆåœ¨ä¸‹è½½äº†ï¼Œæˆ‘ç¡®è®¤äº†ä¸‹å®‰è£…æ—¥å¿—ï¼Œä¹‹å‰æ˜¯æœ‰2.7.15çš„\n&#x3D;&#x3D;&gt; Downloading https:&#x2F;&#x2F;www.python.org&#x2F;ftp&#x2F;python&#x2F;2.7.15&#x2F;Python-2.7.15.tar.xz\n######                                                                     8.6%\n\n\n\n$ brew install --build-from-source python@2.7.15\nWarning: No available formula with the name &quot;python@2.7.15&quot;. Did you mean python@3.7?\n&#x3D;&#x3D;&gt; Searching for similarly named formulae...\nThis similarly named formula was found:\npython@3.7\nTo install it, run:\n  brew install python@3.7\n&#x3D;&#x3D;&gt; Searching for a previously deleted formula (in the last month)...\nError: No previously deleted formula found.\n&#x3D;&#x3D;&gt; Searching taps on GitHub...\nError: No formulae found in taps.\n$ brew install --build-from-source python@2.7   \nWarning: No available formula with the name &quot;python@2.7&quot;. Did you mean python@3.7, python@3.9, python@3.8, python@3.10 or python-yq?\n&#x3D;&#x3D;&gt; Searching for similarly named formulae...\nThese similarly named formulae were found:\npython@3.7                   python@3.9                   python@3.8                   python@3.10 âœ”                python-yq\nTo install one of them, run (for example):\n  brew install python@3.7\n&#x3D;&#x3D;&gt; Searching for a previously deleted formula (in the last month)...\nError: No previously deleted formula found.\n&#x3D;&#x3D;&gt; Searching taps on GitHub...\nError: No formulae found in taps.\n$ brew link --overwrite python@2\n\nLinking &#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;python@2&#x2F;2.7.15... 33 symlinks created.\n$ brew link --overwrite python@2\nWarning: Already linked: &#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;python@2&#x2F;2.7.15\nTo relink, run:\n  brew unlink python@2 &amp;&amp; brew link python@2\n\n&#x2F;&#x2F; unlinkã€link  \n$ brew unlink python@2 &amp;&amp; brew link python@2\nUnlinking &#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;python@2&#x2F;2.7.15... 33 symlinks removed.\nLinking &#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;python@2&#x2F;2.7.15... 33 symlinks created.\n\n&#x2F;&#x2F; ç»ˆäºå¥½äº†\n$ python --version\nPython 2.7.15\n$ python3 --version\nPython 3.10.6\n$ \n</code></pre>\n\n<h1 id=\"pythonå®˜ç½‘\"><a href=\"#pythonå®˜ç½‘\" class=\"headerlink\" title=\"pythonå®˜ç½‘\"></a>pythonå®˜ç½‘</h1><p>å¯¹äºpythonå®˜ç½‘ï¼Œæˆ‘ç‰¹æ„å’Œjavaã€goã€rustã€nodejsåšäº†ä¸‹æ¯”è¾ƒï¼Œè™½ç„¶pythonçš„å®˜ç½‘ä¹Ÿæ˜¾å¾—è€æ—§ï¼Œæˆ‘ç”šè‡³ä¸€åº¦æ€€ç–‘æˆ‘çœ‹çš„æ˜¯ä¸æ˜¯pythonæ–‡æ¡£ã€‚æ²¡goå®˜ç½‘çœ‹çš„é‚£ä¹ˆèˆ’æœã€‚å¯æ¯•ç«Ÿäººå®¶æ˜¯ç¼–ç¨‹è¯­è¨€æ’åç¬¬ä¸€ã€‚å—¯ï½ï¼Œå°±è¿™ä¸€ç‚¹ï¼Œéƒ½å¯ä»¥å¿ã€‚å­¦ï½</p>\n<p><a href=\"https://docs.python.org/zh-cn/3/tutorial/index.html\" target=\"_blank\" >è§ python</a></p>\n<p><a href=\"https://www.runoob.com/python3/python3-tutorial.html\" target=\"_blank\" >è§ runoob</a></p>\n<div class=\"custom-quote tip\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12.01 15C12.01 14.5 12.01 14.5 12.01 14.5C12.04 13.75 13 13.46 14.04 12.2C14.41 11.74 14.69 11.41 14.86 10.85C15.15 9.95 14.92 9.18 14.86 9.02C14.8 8.79 14.52 8 13.72 7.46C13.06 7.02 12.42 7 12.14 7C11.9 7 11.36 7 10.78 7.3C10.28 7.56 9.98 7.9 9.83 8.1C9.24 8.82 9.06 9.63 9 10.06\"></path>\n<path stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 18H12.01\"></path>\n</svg></span>\n<p class=\"custom-quote-title\">TIP</p>\n<p>å¯¹äºèœé¸Ÿæ•™ç¨‹ä¸Šçš„ä¾‹å­ï¼Œå¯ä»¥é€‰æ‹©æ›´æ”¹é¡µé¢æ ·å¼<code>img &#123;display: none&#125;</code>æ¥æŸ¥çœ‹ï¼Œgifæ–‡ä»¶è·³æ¥è·³å»ï¼Œçœ‹çš„çœ¼èŠ±ï¼Œè€Œä¸”æ¯ä¸ªå›¾å æ®é‚£ä¹ˆå¤§çš„ç©ºé—´ï¼Œæ–‡ç« ç»“æ„æ„Ÿè¢«ç ´åäº†</p>\n</div>\n<h1 id=\"python-webæ¡†æ¶é€‰æ‹©\"><a href=\"#python-webæ¡†æ¶é€‰æ‹©\" class=\"headerlink\" title=\"python webæ¡†æ¶é€‰æ‹©\"></a>python webæ¡†æ¶é€‰æ‹©</h1><p>å»bossæœäº†ä¸‹ï¼Œä¸»è¦æ˜¯ django å’Œ Flask</p>\n<p><a href=\"https://zhuanlan.zhihu.com/p/359280800\" target=\"_blank\" >Django vs Flask: åˆ°åº•åº”è¯¥é€‰å“ªä¸ª?</a></p>\n<p>æˆ‘é€‰äº† django ,åŸå› </p>\n<ul>\n<li>django starå¤šä¸€ç‚¹</li>\n<li>Django vs Flask: åˆ°åº•åº”è¯¥é€‰å“ªä¸ª? è®©æˆ‘è§‰å¾—ï¼Œdjangoæ›´ç¨³</li>\n<li>Djangoå®˜ç½‘æ¯”Flaskçœ‹ç€èˆ’æœ</li>\n</ul>\n<p><a href=\"https://pythondjango.cn/django/basic-tutorials\" target=\"_blank\" >è§ pythondjango</a><br><a href=\"https://zhuanlan.zhihu.com/p/110479564\" target=\"_blank\" >Django çš„ç”±æ¥åŠåå­—å¦‚ä½•å‘éŸ³å¦‚ä½•è¯»</a><br><a href=\"https://zhuanlan.zhihu.com/p/110479564\" target=\"_blank\" >Django ç”±æ¥</a></p>\n<h1 id=\"æˆ‘çš„æ„Ÿå—\"><a href=\"#æˆ‘çš„æ„Ÿå—\" class=\"headerlink\" title=\"æˆ‘çš„æ„Ÿå—\"></a>æˆ‘çš„æ„Ÿå—</h1><p>åœ¨æ„Ÿå—äº† pythonï¼Œ django å’Œ Flaskã€‚ æˆ‘è§‰å¾—ï¼Œè¿™æ¯”javaç®€å•å¤šäº†ï¼Œå’Œjsæ¯”è¾ƒï¼Œpython apiä¹Ÿæ›´å¤šï¼Œè™½ç„¶ï¼Œä¸€å¼€å§‹æœ‰ç‚¹æŠµè§¦è¯­æ³•ï¼Œä¹ æƒ¯å°±å¥½ï½</p>\n<p>javaè¿™ç©æ„ï¼Œç”Ÿæ€å†å¥½ï¼Œæˆ‘éƒ½ä¸æƒ³ä¸‹æ‰‹ï¼ˆè™½ç„¶ä¹‹å‰ä¹Ÿæœ‰å­¦è¿‡ğŸ˜“ï¼Œè¿·é€”å°ä¹¦ç«¥ï¼‰</p>\n<h1 id=\"pip\"><a href=\"#pip\" class=\"headerlink\" title=\"pip\"></a>pip</h1><p>Last login: Sat Sep 24 18:45:11 on ttys009<br>$ pip install Django&#x3D;&#x3D;4.1.1<br>zsh: command not found: pip<br>$ brew install pip<br>Running <code>brew update --auto-update</code>â€¦<br>&#x3D;&#x3D;&gt; Auto-updated Homebrew!<br>Updated 1 tap (homebrew&#x2F;core).</p>\n<p>You have 22 outdated formulae installed.<br>You can upgrade them with brew upgrade<br>or list them with brew outdated.</p>\n<p>Warning: No available formula with the name â€œpipâ€. Did you mean pipx, pig, pit, php, pcp, pup, zip, sip or vip?<br>&#x3D;&#x3D;&gt; Searching for similarly named formulaeâ€¦<br>These similarly named formulae were found:<br>aespipe              libpipeline          pipe-rename          pipes-sh             pyenv-pip-migrate    pit                  zip<br>brew-pip             pip-audit            pipebench            pipeviewer           spiped               php                  sip<br>grepip               pip-completion       pipemeter            pipgrip              xpipe                pcp                  vip<br>lesspipe             pip-tools            pipenv               pipx                 pig                  pup<br>To install one of them, run (for example):<br>  brew install aespipe<br>pip is part of the python formula:<br>  brew install python</p>\n<h1 id=\"å®‰è£…-Django\"><a href=\"#å®‰è£…-Django\" class=\"headerlink\" title=\"å®‰è£… Django\"></a>å®‰è£… Django</h1><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">$ python3 -m pip install Django\nCollecting Django\n  Downloading Django-4.1.1-python-none-any.whl (8.1 MB)\n     â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 8.1&#x2F;8.1 MB 2.0 MB&#x2F;s eta 0:00:00\nCollecting sqlparse&gt;&#x3D;0.2.2\n  Downloading sqlparse-0.4.3-python-none-any.whl (42 kB)\n     â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 42.8&#x2F;42.8 kB 238.6 kB&#x2F;s eta 0:00:00\nCollecting asgiref&lt;4,&gt;&#x3D;3.5.2\n  Downloading asgiref-3.5.2-python-none-any.whl (22 kB)\nInstalling collected packages: sqlparse, asgiref, Django\nSuccessfully installed Django-4.1.1 asgiref-3.5.2 sqlparse-0.4.3</code></pre>\n\n<p><a href=\"https://www.runoob.com/django/django-intro.html\" target=\"_blank\" >runoob</a></p>\n<h1 id=\"äº‹ä¾‹\"><a href=\"#äº‹ä¾‹\" class=\"headerlink\" title=\"äº‹ä¾‹\"></a>äº‹ä¾‹</h1><h1 id=\"Django-ORM\"><a href=\"#Django-ORM\" class=\"headerlink\" title=\"Django ORM\"></a>Django ORM</h1><h2 id=\"Models\"><a href=\"#Models\" class=\"headerlink\" title=\"Models\"></a>Models</h2><ul>\n<li>æ­£åå‘åŒºåˆ«</li>\n<li>ä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹å¤šåŒºåˆ«</li>\n<li>å•åˆ’çº¿ã€åŒåˆ’çº¿åŒºåˆ«</li>\n</ul>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">class Book(models.Model):\n    title &#x3D; models.CharField(max_length&#x3D;32)\n    price &#x3D; models.DecimalField(max_digits&#x3D;5, decimal_places&#x3D;2)\n    pub_date &#x3D; models.DateField()\n    # æš‚ä¸”ç†è§£ å…³è”\n    publish &#x3D; models.ForeignKey(&quot;Publish&quot;, on_delete&#x3D;models.CASCADE)\n    # å¤šå¯¹å¤šï¼Œ \n    # ä»Bookå¾€Authorçœ‹ï¼Œä¸ºæ­£å‘ï¼Œ\n    # ä»Authorå¾€Bookçœ‹ï¼Œä¸ºåå‘\n    authors &#x3D; models.ManyToManyField(&quot;Author&quot;)\n\n\nclass Publish(models.Model):\n    name &#x3D; models.CharField(max_length&#x3D;32)\n    city &#x3D; models.CharField(max_length&#x3D;64)\n    email &#x3D; models.EmailField()\n\n\nclass Author(models.Model):\n    name &#x3D; models.CharField(max_length&#x3D;32)\n    age &#x3D; models.SmallIntegerField()\n    # ä¸€å¯¹ä¸€\n    au_detail &#x3D; models.OneToOneField(&quot;AuthorDetail&quot;, on_delete&#x3D;models.CASCADE)\n\n\nclass AuthorDetail(models.Model):\n    gender_choices &#x3D; (\n        (0, &quot;å¥³&quot;),\n        (1, &quot;ç”·&quot;),\n        (2, &quot;ä¿å¯†&quot;),\n    )\n    gender &#x3D; models.SmallIntegerField(choices&#x3D;gender_choices)\n    tel &#x3D; models.CharField(max_length&#x3D;32)\n    addr &#x3D; models.CharField(max_length&#x3D;64)\n    birthday &#x3D; models.DateField()</code></pre>\n\n<p>è¯´æ˜ï¼š</p>\n<p>1ã€EmailField æ•°æ®ç±»å‹æ˜¯é‚®ç®±æ ¼å¼ï¼Œåº•å±‚ç»§æ‰¿ CharFieldï¼Œè¿›è¡Œäº†å°è£…ï¼Œç›¸å½“äº MySQL ä¸­çš„ varcharã€‚</p>\n<p>2ã€Django1.1 ç‰ˆæœ¬ä¸éœ€è¦è”çº§åˆ é™¤ï¼šon_delete&#x3D;models.CASCADEï¼ŒDjango2.2 éœ€è¦ã€‚</p>\n<p>3ã€ä¸€èˆ¬ä¸éœ€è¦è®¾ç½®è”çº§æ›´æ–°.</p>\n<p>4ã€å¤–é”®åœ¨ä¸€å¯¹å¤šçš„å¤šä¸­è®¾ç½®ï¼šmodels.ForeignKey(â€œå…³è”ç±»åâ€, on_delete&#x3D;models.CASCADE)ã€‚</p>\n<p>5ã€OneToOneField &#x3D; ForeignKey(â€¦ï¼Œunique&#x3D;True)è®¾ç½®ä¸€å¯¹ä¸€ã€‚</p>\n<p>6ã€è‹¥æœ‰æ¨¡å‹ç±»å­˜åœ¨å¤–é”®ï¼Œåˆ›å»ºæ•°æ®æ—¶ï¼Œè¦å…ˆåˆ›å»ºå¤–é”®å…³è”çš„æ¨¡å‹ç±»çš„æ•°æ®ï¼Œä¸ç„¶åˆ›å»ºåŒ…å«å¤–é”®çš„æ¨¡å‹ç±»çš„æ•°æ®æ—¶ï¼Œå¤–é”®çš„å…³è”æ¨¡å‹ç±»çš„æ•°æ®ä¼šæ‰¾ä¸åˆ°ã€‚</p>\n<h2 id=\"è¡¨ç»“æ„\"><a href=\"#è¡¨ç»“æ„\" class=\"headerlink\" title=\"è¡¨ç»“æ„\"></a>è¡¨ç»“æ„</h2><p><strong>ä¹¦ç±è¡¨ Book</strong>ï¼štitle ã€ price ã€ pub_date ã€ publishï¼ˆå¤–é”®ï¼Œå¤šå¯¹ä¸€ï¼‰ ã€ authorsï¼ˆå¤šå¯¹å¤šï¼‰</p>\n<p><strong>å‡ºç‰ˆç¤¾è¡¨ Publish</strong>ï¼šname ã€ city ã€ email</p>\n<p><strong>ä½œè€…è¡¨ Author</strong>ï¼šname ã€ age ã€ au_detailï¼ˆä¸€å¯¹ä¸€ï¼‰</p>\n<p><strong>ä½œè€…è¯¦æƒ…è¡¨ AuthorDetail</strong>ï¼šgender ã€ tel ã€ addr ã€ birthday</p>\n<h2 id=\"è¡¨å…³ç³»\"><a href=\"#è¡¨å…³ç³»\" class=\"headerlink\" title=\"è¡¨å…³ç³»\"></a>è¡¨å…³ç³»</h2><img src=\"http://t-blog-images.aijs.top/img/202209251553634.png\" />\n\n<h3 id=\"æ’å…¥æ•°æ®\"><a href=\"#æ’å…¥æ•°æ®\" class=\"headerlink\" title=\"æ’å…¥æ•°æ®\"></a>æ’å…¥æ•°æ®</h3><pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">INSERT INTO app01_publish ( name, city, email )\nVALUES\n ( &quot;åå±±å‡ºç‰ˆç¤¾&quot;, &quot;åå±±&quot;, &quot;hs@163.com&quot; ),\n ( &quot;æ˜æ•™å‡ºç‰ˆç¤¾&quot;, &quot;é»‘æœ¨å´–&quot;, &quot;mj@163.com&quot; )\n \n# å…ˆæ’å…¥ authordetail è¡¨ä¸­å¤šæ•°æ®\nINSERT INTO app01_authordetail ( gender, tel, addr, birthday )\nVALUES\n ( 1, 13432335433, &quot;åå±±&quot;, &quot;1994-5-23&quot; ),\n ( 1, 13943454554, &quot;é»‘æœ¨å´–&quot;, &quot;1961-8-13&quot; ),\n ( 0, 13878934322, &quot;é»‘æœ¨å´–&quot;, &quot;1996-5-20&quot; )\n\n# å†å°†æ•°æ®æ’å…¥ authorï¼Œè¿™æ · author æ‰èƒ½æ‰¾åˆ° authordetail \nINSERT INTO app01_author ( name, age, au_detail_id )\nVALUES\n ( &quot;ä»¤ç‹å†²&quot;, 25, 1 ),\n ( &quot;ä»»æˆ‘è¡Œ&quot;, 58, 2 ),\n ( &quot;ä»»ç›ˆç›ˆ&quot;, 23, 3 )</code></pre>\n\n<p>åœ¨ MySQL ä¸­æ‰§è¡Œä»¥ä¸‹ SQL æ’å…¥æ“ä½œï¼š</p>\n<h2 id=\"ORM-æ·»åŠ æ•°æ®\"><a href=\"#ORM-æ·»åŠ æ•°æ®\" class=\"headerlink\" title=\"ORM - æ·»åŠ æ•°æ®\"></a>ORM - æ·»åŠ æ•°æ®</h2><h3 id=\"ä¸€å¯¹å¤š-å¤–é”®-ForeignKey\"><a href=\"#ä¸€å¯¹å¤š-å¤–é”®-ForeignKey\" class=\"headerlink\" title=\"ä¸€å¯¹å¤š(å¤–é”® ForeignKey)\"></a>ä¸€å¯¹å¤š(å¤–é”® ForeignKey)</h3><p><strong>æ–¹å¼ä¸€:</strong> ä¼ å¯¹è±¡çš„å½¢å¼ï¼Œè¿”å›å€¼çš„æ•°æ®ç±»å‹æ˜¯å¯¹è±¡ï¼Œä¹¦ç±å¯¹è±¡ã€‚</p>\n<p>æ­¥éª¤ï¼š</p>\n<p>a. è·å–å‡ºç‰ˆç¤¾å¯¹è±¡<br>b. ç»™ä¹¦ç±çš„å‡ºç‰ˆç¤¾å±æ€§ pulish ä¼ å‡ºç‰ˆç¤¾å¯¹è±¡</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"># app01&#x2F;views.py æ–‡ä»¶ä»£ç ï¼š\ndef add_book(request):\n    #  è·å–å‡ºç‰ˆç¤¾å¯¹è±¡\n    pub_obj &#x3D; models.Publish.objects.filter(pk&#x3D;1).first() # pk ç¼©å†™ primary key\n    #  ç»™ä¹¦ç±çš„å‡ºç‰ˆç¤¾å±æ€§publishä¼ å‡ºç‰ˆç¤¾å¯¹è±¡\n    book &#x3D; models.Book.objects.create(title&#x3D;&quot;èœé¸Ÿæ•™ç¨‹&quot;, price&#x3D;200, pub_date&#x3D;&quot;2010-10-10&quot;, publish&#x3D;pub_obj)\n    print(book, type(book))\n    return HttpResponse(book)</code></pre>\n\n<p><strong>æ–¹å¼äºŒ:</strong> ä¼ å¯¹è±¡IDçš„å½¢å¼ï¼ˆä¼ å¯¹è±¡idå¸¸ç”¨ï¼‰</p>\n<p>ä¸€å¯¹å¤šä¸­ï¼Œè®¾ç½®å¤–é”®å±æ€§çš„ç±»(å¤šçš„è¡¨)ä¸­ï¼ŒMySQL ä¸­æ˜¾ç¤ºçš„å­—æ®µåæ˜¯:å¤–é”®å±æ€§å_idã€‚</p>\n<p>è¿”å›å€¼çš„æ•°æ®ç±»å‹æ˜¯å¯¹è±¡ï¼Œä¹¦ç±å¯¹è±¡ã€‚</p>\n<p>æ­¥éª¤ï¼š</p>\n<p>a. è·å–å‡ºç‰ˆç¤¾å¯¹è±¡çš„ id<br>b. ç»™ä¹¦ç±çš„å…³è”å‡ºç‰ˆç¤¾å­—æ®µ pulish_id ä¼ å‡ºç‰ˆç¤¾å¯¹è±¡çš„ id</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"># app01&#x2F;views.py æ–‡ä»¶ä»£ç ï¼š\ndef add_book(request):\n    #  è·å–å‡ºç‰ˆç¤¾å¯¹è±¡\n    pub_obj &#x3D; models.Publish.objects.filter(pk&#x3D;1).first()\n    #  è·å–å‡ºç‰ˆç¤¾å¯¹è±¡çš„id\n    pk &#x3D; pub_obj.pk\n    #  ç»™ä¹¦ç±çš„å…³è”å‡ºç‰ˆç¤¾å­—æ®µ publish_id ä¼ å‡ºç‰ˆç¤¾å¯¹è±¡çš„id\n    book &#x3D; models.Book.objects.create(title&#x3D;&quot;å†²çµå‰‘æ³•&quot;, price&#x3D;100, pub_date&#x3D;&quot;2004-04-04&quot;, publish_id&#x3D;pk)\n    print(book, type(book))\n    return HttpResponse(book)</code></pre>\n\n<h3 id=\"å¤šå¯¹å¤š-ManyToManyField-ï¼šåœ¨ç¬¬ä¸‰å¼ å…³ç³»è¡¨ä¸­æ–°å¢æ•°æ®\"><a href=\"#å¤šå¯¹å¤š-ManyToManyField-ï¼šåœ¨ç¬¬ä¸‰å¼ å…³ç³»è¡¨ä¸­æ–°å¢æ•°æ®\" class=\"headerlink\" title=\"å¤šå¯¹å¤š(ManyToManyField)ï¼šåœ¨ç¬¬ä¸‰å¼ å…³ç³»è¡¨ä¸­æ–°å¢æ•°æ®\"></a>å¤šå¯¹å¤š(ManyToManyField)ï¼šåœ¨ç¬¬ä¸‰å¼ å…³ç³»è¡¨ä¸­æ–°å¢æ•°æ®</h3><p><strong>æ–¹å¼ä¸€:</strong> ä¼ å¯¹è±¡å½¢å¼ï¼Œæ— è¿”å›å€¼ã€‚</p>\n<p>æ­¥éª¤ï¼š</p>\n<p>a. è·å–ä½œè€…å¯¹è±¡<br>b. è·å–ä¹¦ç±å¯¹è±¡<br>c. ç»™ä¹¦ç±å¯¹è±¡çš„ authors å±æ€§ç”¨ add æ–¹æ³•ä¼ ä½œè€…å¯¹è±¡</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"># app01&#x2F;views.py æ–‡ä»¶ä»£ç ï¼š\ndef add_book(request):\n    #  è·å–ä½œè€…å¯¹è±¡\n    chong &#x3D; models.Author.objects.filter(name&#x3D;&quot;ä»¤ç‹å†²&quot;).first()\n    ying &#x3D; models.Author.objects.filter(name&#x3D;&quot;ä»»ç›ˆç›ˆ&quot;).first()\n    #  è·å–ä¹¦ç±å¯¹è±¡\n    book &#x3D; models.Book.objects.filter(title&#x3D;&quot;èœé¸Ÿæ•™ç¨‹&quot;).first()\n    #  ç»™ä¹¦ç±å¯¹è±¡çš„ authors å±æ€§ç”¨ add æ–¹æ³•ä¼ ä½œè€…å¯¹è±¡\n    book.authors.add(chong, ying)\n    return HttpResponse(book)</code></pre>\n\n<p><strong>æ–¹å¼äºŒ:</strong> ä¼ å¯¹è±¡idå½¢å¼ï¼Œæ— è¿”å›å€¼ã€‚</p>\n<p>æ­¥éª¤ï¼š</p>\n<p>a. è·å–ä½œè€…å¯¹è±¡çš„ id<br>b. è·å–ä¹¦ç±å¯¹è±¡<br>c. ç»™ä¹¦ç±å¯¹è±¡çš„ authors å±æ€§ç”¨ add æ–¹æ³•ä¼ ä½œè€…å¯¹è±¡çš„ id</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"># app01&#x2F;views.py æ–‡ä»¶ä»£ç ï¼š\ndef add_book(request):\n    #  è·å–ä½œè€…å¯¹è±¡\n    chong &#x3D; models.Author.objects.filter(name&#x3D;&quot;ä»¤ç‹å†²&quot;).first()\n    #  è·å–ä½œè€…å¯¹è±¡çš„id\n    pk &#x3D; chong.pk\n    #  è·å–ä¹¦ç±å¯¹è±¡\n    book &#x3D; models.Book.objects.filter(title&#x3D;&quot;å†²çµå‰‘æ³•&quot;).first()\n    #  ç»™ä¹¦ç±å¯¹è±¡çš„ authors å±æ€§ç”¨ add æ–¹æ³•ä¼ ä½œè€…å¯¹è±¡çš„id\n    book.authors.add(pk) # è¿™ä¸ªä¸èƒ½ç†è§£äº†ï¼Œauthorsè¿™ä¸ªå­—æ®µæ¥å—äº†pk</code></pre>\n\n<h2 id=\"å…³è”ç®¡ç†å™¨-å¯¹è±¡è°ƒç”¨\"><a href=\"#å…³è”ç®¡ç†å™¨-å¯¹è±¡è°ƒç”¨\" class=\"headerlink\" title=\"å…³è”ç®¡ç†å™¨(å¯¹è±¡è°ƒç”¨)\"></a>å…³è”ç®¡ç†å™¨(å¯¹è±¡è°ƒç”¨)</h2><p>å‰æï¼š</p>\n<h3 id=\"å¤šå¯¹å¤šï¼ˆåŒå‘å‡æœ‰å…³è”ç®¡ç†å™¨ï¼‰\"><a href=\"#å¤šå¯¹å¤šï¼ˆåŒå‘å‡æœ‰å…³è”ç®¡ç†å™¨ï¼‰\" class=\"headerlink\" title=\"å¤šå¯¹å¤šï¼ˆåŒå‘å‡æœ‰å…³è”ç®¡ç†å™¨ï¼‰\"></a>å¤šå¯¹å¤šï¼ˆåŒå‘å‡æœ‰å…³è”ç®¡ç†å™¨ï¼‰</h3><h3 id=\"ä¸€å¯¹å¤šï¼ˆåªæœ‰å¤šçš„é‚£ä¸ªç±»çš„å¯¹è±¡æœ‰å…³è”ç®¡ç†å™¨ï¼Œå³åå‘æ‰æœ‰ï¼‰\"><a href=\"#ä¸€å¯¹å¤šï¼ˆåªæœ‰å¤šçš„é‚£ä¸ªç±»çš„å¯¹è±¡æœ‰å…³è”ç®¡ç†å™¨ï¼Œå³åå‘æ‰æœ‰ï¼‰\" class=\"headerlink\" title=\"ä¸€å¯¹å¤šï¼ˆåªæœ‰å¤šçš„é‚£ä¸ªç±»çš„å¯¹è±¡æœ‰å…³è”ç®¡ç†å™¨ï¼Œå³åå‘æ‰æœ‰ï¼‰\"></a>ä¸€å¯¹å¤šï¼ˆåªæœ‰å¤šçš„é‚£ä¸ªç±»çš„å¯¹è±¡æœ‰å…³è”ç®¡ç†å™¨ï¼Œå³åå‘æ‰æœ‰ï¼‰</h3><p>è¯­æ³•æ ¼å¼ï¼š</p>\n<p>æ­£å‘ï¼šå±æ€§å<br>åå‘ï¼šå°å†™ç±»ååŠ  _set</p>\n<p><strong>æ³¨æ„ï¼šä¸€å¯¹å¤šåªèƒ½åå‘</strong></p>\n<p>å¸¸ç”¨æ–¹æ³•ï¼š</p>\n<p>add()ï¼šç”¨äºå¤šå¯¹å¤šï¼ŒæŠŠæŒ‡å®šçš„æ¨¡å‹å¯¹è±¡æ·»åŠ åˆ°å…³è”å¯¹è±¡é›†ï¼ˆå…³ç³»è¡¨ï¼‰ä¸­ã€‚</p>\n<p>æ³¨æ„ï¼šadd() åœ¨ä¸€å¯¹å¤š(å³å¤–é”®)ä¸­ï¼Œåªèƒ½ä¼ å¯¹è±¡ï¼ˆ <em>QuerySetæ•°æ®ç±»å‹ï¼‰ï¼Œä¸èƒ½ä¼  idï¼ˆ</em>[idè¡¨]ï¼‰ã€‚</p>\n<p>*[ ] çš„ä½¿ç”¨:</p>\n<h3 id=\"æ–¹å¼ä¸€ï¼šä¼ å¯¹è±¡\"><a href=\"#æ–¹å¼ä¸€ï¼šä¼ å¯¹è±¡\" class=\"headerlink\" title=\"æ–¹å¼ä¸€ï¼šä¼ å¯¹è±¡\"></a>æ–¹å¼ä¸€ï¼šä¼ å¯¹è±¡</h3><pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">book_obj &#x3D; models.Book.objects.get(id&#x3D;10)\nauthor_list &#x3D; models.Author.objects.filter(id__gt&#x3D;2)\nbook_obj.authors.add(*author_list)  # å°† id å¤§äº2çš„ä½œè€…å¯¹è±¡æ·»åŠ åˆ°è¿™æœ¬ä¹¦çš„ä½œè€…é›†åˆä¸­</code></pre>\n\n<h3 id=\"æ–¹å¼äºŒï¼šä¼ å¯¹è±¡-id\"><a href=\"#æ–¹å¼äºŒï¼šä¼ å¯¹è±¡-id\" class=\"headerlink\" title=\"æ–¹å¼äºŒï¼šä¼ å¯¹è±¡ id\"></a>æ–¹å¼äºŒï¼šä¼ å¯¹è±¡ id</h3><pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">book_obj.authors.add(*[1,3]) # å°† id&#x3D;1 å’Œ id&#x3D;3 çš„ä½œè€…å¯¹è±¡æ·»åŠ åˆ°è¿™æœ¬ä¹¦çš„ä½œè€…é›†åˆä¸­\nreturn HttpResponse(&quot;ok&quot;)</code></pre>\n\n<p>åå‘ï¼šå°å†™è¡¨å_set</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">ying &#x3D; models.Author.objects.filter(name&#x3D;&quot;ä»»ç›ˆç›ˆ&quot;).first()\nbook &#x3D; models.Book.objects.filter(title&#x3D;&quot;å†²çµå‰‘æ³•&quot;).first()\nying.book_set.add(book)\nreturn HttpResponse(&quot;ok&quot;)</code></pre>\n\n<p>create()ï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå¹¶åŒæ—¶å°†å®ƒæ·»åŠ åˆ°å…³è”å¯¹è±¡é›†ä¹‹ä¸­ã€‚</p>\n<p>è¿”å›æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">pub &#x3D; models.Publish.objects.filter(name&#x3D;&quot;æ˜æ•™å‡ºç‰ˆç¤¾&quot;).first()\nwo &#x3D; models.Author.objects.filter(name&#x3D;&quot;ä»»æˆ‘è¡Œ&quot;).first()\nbook &#x3D; wo.book_set.create(title&#x3D;&quot;å¸æ˜Ÿå¤§æ³•&quot;, price&#x3D;300, pub_date&#x3D;&quot;1999-9-19&quot;, publish&#x3D;pub)\nprint(book, type(book))\nreturn HttpResponse(&quot;ok&quot;)</code></pre>\n\n<p>remove()ï¼šä»å…³è”å¯¹è±¡é›†ä¸­ç§»é™¤æ‰§è¡Œçš„æ¨¡å‹å¯¹è±¡ã€‚</p>\n<p>å¯¹äº ForeignKey å¯¹è±¡ï¼Œè¿™ä¸ªæ–¹æ³•ä»…åœ¨ null&#x3D;Trueï¼ˆå¯ä»¥ä¸ºç©ºï¼‰æ—¶å­˜åœ¨ï¼Œæ— è¿”å›å€¼ã€‚</p>\n<p>å®ä¾‹</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">author_obj &#x3D;models.Author.objects.get(id&#x3D;1)\nbook_obj &#x3D; models.Book.objects.get(id&#x3D;11)\nauthor_obj.book_set.remove(book_obj)\nreturn HttpResponse(&quot;ok&quot;)</code></pre>\n\n<p>clear()ï¼šä»å…³è”å¯¹è±¡é›†ä¸­ç§»é™¤ä¸€åˆ‡å¯¹è±¡ï¼Œåˆ é™¤å…³è”ï¼Œä¸ä¼šåˆ é™¤å¯¹è±¡ã€‚</p>\n<p>å¯¹äº ForeignKey å¯¹è±¡ï¼Œè¿™ä¸ªæ–¹æ³•ä»…åœ¨ null&#x3D;Trueï¼ˆå¯ä»¥ä¸ºç©ºï¼‰æ—¶å­˜åœ¨ã€‚</p>\n<p>æ— è¿”å›å€¼ã€‚</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"># æ¸…ç©ºç‹¬å­¤ä¹å‰‘å…³è”çš„æ‰€æœ‰ä½œè€…\nbook &#x3D; models.Book.objects.filter(title&#x3D;&quot;èœé¸Ÿæ•™ç¨‹&quot;).first()\nbook.authors.clear()</code></pre>\n\n<h2 id=\"ORM-æŸ¥è¯¢-setè¯­æ³•\"><a href=\"#ORM-æŸ¥è¯¢-setè¯­æ³•\" class=\"headerlink\" title=\"ORM æŸ¥è¯¢ _setè¯­æ³•\"></a>ORM æŸ¥è¯¢ _setè¯­æ³•</h2><p>åŸºäºå¯¹è±¡çš„è·¨è¡¨æŸ¥è¯¢ã€‚</p>\n<p>æ­£å‘ï¼šå±æ€§åç§°<br>åå‘ï¼šå°å†™ç±»å_set</p>\n<h3 id=\"ä¸€å¯¹å¤š\"><a href=\"#ä¸€å¯¹å¤š\" class=\"headerlink\" title=\"ä¸€å¯¹å¤š\"></a>ä¸€å¯¹å¤š</h3><h4 id=\"æ­£å‘\"><a href=\"#æ­£å‘\" class=\"headerlink\" title=\"æ­£å‘\"></a>æ­£å‘</h4><p>æŸ¥è¯¢ä¸»é”®ä¸º 1 çš„ä¹¦ç±çš„å‡ºç‰ˆç¤¾æ‰€åœ¨çš„åŸå¸‚ï¼ˆæ­£å‘ï¼‰ã€‚</p>\n<p>å®ä¾‹</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">book &#x3D; models.Book.objects.filter(pk&#x3D;1).first()\nres &#x3D; book.publish.city\nprint(res, type(res))\nreturn HttpResponse(&quot;ok&quot;)</code></pre>\n\n<h4 id=\"åå‘\"><a href=\"#åå‘\" class=\"headerlink\" title=\"åå‘\"></a>åå‘</h4><p>æŸ¥è¯¢æ˜æ•™å‡ºç‰ˆç¤¾å‡ºç‰ˆçš„ä¹¦ç±åï¼ˆåå‘ï¼‰ã€‚</p>\n<p>åå‘ï¼šå¯¹è±¡.å°å†™ç±»å_set(pub.book_set) å¯ä»¥è·³è½¬åˆ°å…³è”çš„è¡¨(ä¹¦ç±è¡¨)ã€‚</p>\n<p>pub.book_set.all()ï¼šå–å‡ºä¹¦ç±è¡¨çš„æ‰€æœ‰ä¹¦ç±å¯¹è±¡ï¼Œåœ¨ä¸€ä¸ª QuerySet é‡Œï¼Œéå†å–å‡ºä¸€ä¸ªä¸ªä¹¦ç±å¯¹è±¡ã€‚</p>\n<p>å®ä¾‹</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">pub &#x3D; models.Publish.objects.filter(name&#x3D;&quot;æ˜æ•™å‡ºç‰ˆç¤¾&quot;).first()\nres &#x3D; pub.book_set.all()\nfor i in res:\n    print(i.title)\nreturn HttpResponse(&quot;ok&quot;)\n</code></pre>\n\n<h3 id=\"ä¸€å¯¹ä¸€\"><a href=\"#ä¸€å¯¹ä¸€\" class=\"headerlink\" title=\"ä¸€å¯¹ä¸€\"></a>ä¸€å¯¹ä¸€</h3><p>æŸ¥è¯¢ä»¤ç‹å†²çš„ç”µè¯ï¼ˆæ­£å‘ï¼‰</p>\n<h4 id=\"æ­£å‘-1\"><a href=\"#æ­£å‘-1\" class=\"headerlink\" title=\"æ­£å‘\"></a>æ­£å‘</h4><p>æ­£å‘ï¼šå¯¹è±¡.å±æ€§ (author.au_detail) å¯ä»¥è·³è½¬åˆ°å…³è”çš„è¡¨(ä½œè€…è¯¦æƒ…è¡¨)</p>\n<p>å®ä¾‹</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">author &#x3D; models.Author.objects.filter(name&#x3D;&quot;ä»¤ç‹å†²&quot;).first()\nres &#x3D; author.au_detail.tel\nprint(res, type(res))\nreturn HttpResponse(&quot;ok&quot;)</code></pre>\n\n<h4 id=\"åå‘-1\"><a href=\"#åå‘-1\" class=\"headerlink\" title=\"åå‘\"></a>åå‘</h4><p>æŸ¥è¯¢æ‰€æœ‰ä½å€åœ¨é»‘æœ¨å´–çš„ä½œè€…çš„å§“åï¼ˆåå‘ï¼‰ã€‚</p>\n<p>ä¸€å¯¹ä¸€çš„åå‘ï¼Œç”¨ å¯¹è±¡.å°å†™ç±»å å³å¯ï¼Œä¸ç”¨åŠ  _setã€‚ï¼ˆè¿™ä¸ªæ¯”è¾ƒç‰¹åˆ«ï¼‰</p>\n<p>åå‘ï¼šå¯¹è±¡.å°å†™ç±»å(addr.author)å¯ä»¥è·³è½¬åˆ°å…³è”çš„è¡¨(ä½œè€…è¡¨)ã€‚</p>\n<p>å®ä¾‹</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">addr &#x3D; models.AuthorDetail.objects.filter(addr&#x3D;&quot;é»‘æœ¨å´–&quot;).first()\nres &#x3D; addr.author.name\nprint(res, type(res))\nreturn HttpResponse(&quot;ok&quot;)</code></pre>\n\n<h3 id=\"å¤šå¯¹å¤š\"><a href=\"#å¤šå¯¹å¤š\" class=\"headerlink\" title=\"å¤šå¯¹å¤š\"></a>å¤šå¯¹å¤š</h3><p>èœé¸Ÿæ•™ç¨‹æ‰€æœ‰ä½œè€…çš„åå­—ä»¥åŠæ‰‹æœºå·ï¼ˆæ­£å‘ï¼‰ã€‚</p>\n<h4 id=\"æ­£å‘-2\"><a href=\"#æ­£å‘-2\" class=\"headerlink\" title=\"æ­£å‘\"></a>æ­£å‘</h4><p>æ­£å‘ï¼šå¯¹è±¡.å±æ€§(book.authors)å¯ä»¥è·³è½¬åˆ°å…³è”çš„è¡¨(ä½œè€…è¡¨)ã€‚</p>\n<p>ä½œè€…è¡¨é‡Œæ²¡æœ‰ä½œè€…ç”µè¯ï¼Œå› æ­¤å†æ¬¡é€šè¿‡å¯¹è±¡.å±æ€§(i.au_detail)è·³è½¬åˆ°å…³è”çš„è¡¨ï¼ˆä½œè€…è¯¦æƒ…è¡¨ï¼‰ã€‚</p>\n<p><strong>å®ä¾‹</strong></p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">book &#x3D; models.Book.objects.filter(title&#x3D;&quot;èœé¸Ÿæ•™ç¨‹&quot;).first()\nres &#x3D; book.authors.all()\nfor i in res:\n    print(i.name, i.au_detail.tel) # au_detail ä¸ºauthorç±»çš„ä¸€ä¸ªå­—æ®µ\nreturn HttpResponse(&quot;ok&quot;)</code></pre>\n\n<h4 id=\"åå‘-2\"><a href=\"#åå‘-2\" class=\"headerlink\" title=\"åå‘\"></a>åå‘</h4><p>æŸ¥è¯¢ä»»æˆ‘è¡Œå‡ºè¿‡çš„æ‰€æœ‰ä¹¦ç±çš„åå­—ï¼ˆåå‘ï¼‰ã€‚</p>\n<p><strong>å®ä¾‹</strong></p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">author &#x3D; models.Author.objects.filter(name&#x3D;&quot;ä»»æˆ‘è¡Œ&quot;).first()\nres &#x3D; author.book_set.all()\nfor i in res:\n    print(i.title)\nreturn HttpResponse(&quot;ok&quot;)</code></pre>\n\n<h2 id=\"ORMæŸ¥è¯¢-åŸºäºåŒä¸‹åˆ’çº¿çš„è·¨è¡¨æŸ¥è¯¢-è¯­æ³•\"><a href=\"#ORMæŸ¥è¯¢-åŸºäºåŒä¸‹åˆ’çº¿çš„è·¨è¡¨æŸ¥è¯¢-è¯­æ³•\" class=\"headerlink\" title=\"ORMæŸ¥è¯¢ åŸºäºåŒä¸‹åˆ’çº¿çš„è·¨è¡¨æŸ¥è¯¢ è¯­æ³•\"></a>ORMæŸ¥è¯¢ åŸºäºåŒä¸‹åˆ’çº¿çš„è·¨è¡¨æŸ¥è¯¢ è¯­æ³•</h2><p><strong>æ­£å‘ï¼š</strong>å±æ€§åç§°__è·¨è¡¨çš„å±æ€§åç§°<br><strong>åå‘ï¼š</strong>å°å†™ç±»å__è·¨è¡¨çš„å±æ€§åç§°ï¼ˆæœ‰ä¸ªé—®é¢˜ï¼Œå¦‚æœç±»åå’Œå±æ€§åä¸€æ ·ï¼Œå‘ƒå‘ƒå‘ƒï½ï½ï½ï¼Ÿï¼‰</p>\n<h3 id=\"ä¸€å¯¹å¤š-1\"><a href=\"#ä¸€å¯¹å¤š-1\" class=\"headerlink\" title=\"ä¸€å¯¹å¤š\"></a>ä¸€å¯¹å¤š</h3><p>æŸ¥è¯¢èœé¸Ÿå‡ºç‰ˆç¤¾å‡ºç‰ˆè¿‡çš„æ‰€æœ‰ä¹¦ç±çš„åå­—ä¸ä»·æ ¼ã€‚</p>\n<h4 id=\"æ­£å‘-3\"><a href=\"#æ­£å‘-3\" class=\"headerlink\" title=\"æ­£å‘\"></a>æ­£å‘</h4><pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">res &#x3D; models.Book.objects.filter(publish__name&#x3D;&quot;èœé¸Ÿå‡ºç‰ˆç¤¾&quot;).values_list(&quot;title&quot;, &quot;price&quot;)</code></pre>\n\n<h4 id=\"åå‘-3\"><a href=\"#åå‘-3\" class=\"headerlink\" title=\"åå‘\"></a>åå‘</h4><p>åå‘ï¼šé€šè¿‡ å°å†™ç±»å__è·¨è¡¨çš„å±æ€§åç§°ï¼ˆbook__titleï¼Œbook__priceï¼‰ è·¨è¡¨è·å–æ•°æ®ã€‚</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">res &#x3D; models.Publish.objects.filter(name&#x3D;&quot;èœé¸Ÿå‡ºç‰ˆç¤¾&quot;).\n# Book ä¸­æœ‰publishï¼Œä»Publish æ‰¾Bookä¸ºåå‘æŸ¥æ‰¾\nvalues_list(&quot;book__title&quot;,&quot;book__price&quot;) # æ¨¡å‹ä¸è¡¨ï¼šåªè¦å­˜åœ¨æ¨¡å‹å…³ç³»ï¼Œå°±å¯ä»¥è·å–ç›¸å…³è¡¨ä¸­æ•°æ®\nreturn HttpResponse(&quot;ok&quot;)</code></pre>\n\n<h3 id=\"å¤šå¯¹å¤š-1\"><a href=\"#å¤šå¯¹å¤š-1\" class=\"headerlink\" title=\"å¤šå¯¹å¤š\"></a>å¤šå¯¹å¤š</h3><p>æŸ¥è¯¢ä»»æˆ‘è¡Œå‡ºè¿‡çš„æ‰€æœ‰ä¹¦ç±çš„åå­—ã€‚</p>\n<h4 id=\"æ­£å‘-4\"><a href=\"#æ­£å‘-4\" class=\"headerlink\" title=\"æ­£å‘\"></a>æ­£å‘</h4><p>æ­£å‘ï¼šé€šè¿‡ å±æ€§åç§°__è·¨è¡¨çš„å±æ€§åç§°(authors__name) è·¨è¡¨è·å–æ•°æ®ï¼š</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">res &#x3D; models.Book.objects.filter(authors__name&#x3D;&quot;ä»»æˆ‘è¡Œ&quot;).values_list(&quot;title&quot;)</code></pre>\n\n<h4 id=\"åå‘-4\"><a href=\"#åå‘-4\" class=\"headerlink\" title=\"åå‘\"></a>åå‘</h4><p><strong>åå‘ï¼š</strong>é€šè¿‡ å°å†™ç±»å__è·¨è¡¨çš„å±æ€§åç§°ï¼ˆbook__titleï¼‰ è·¨è¡¨è·å–æ•°æ®ï¼š</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">res &#x3D; models.Author.objects.filter(name&#x3D;&quot;ä»»æˆ‘è¡Œ&quot;).values_list(&quot;book__title&quot;)</code></pre>\n\n<h3 id=\"ä¸€å¯¹ä¸€-1\"><a href=\"#ä¸€å¯¹ä¸€-1\" class=\"headerlink\" title=\"ä¸€å¯¹ä¸€\"></a>ä¸€å¯¹ä¸€</h3><p>æŸ¥è¯¢ä»»æˆ‘è¡Œçš„æ‰‹æœºå·ã€‚</p>\n<h4 id=\"æ­£å‘-5\"><a href=\"#æ­£å‘-5\" class=\"headerlink\" title=\"æ­£å‘\"></a>æ­£å‘</h4><p><strong>æ­£å‘ï¼š</strong>é€šè¿‡ å±æ€§åç§°__è·¨è¡¨çš„å±æ€§åç§°(au_detail__tel) è·¨è¡¨è·å–æ•°æ®ã€‚ï¼ˆAuthorä¸­au_detail å­—æ®µï¼‰</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">res &#x3D; models.Author.objects.filter(name&#x3D;&quot;ä»»æˆ‘è¡Œ&quot;).values_list(&quot;au_detail__tel&quot;)</code></pre>\n\n<h4 id=\"åå‘-5\"><a href=\"#åå‘-5\" class=\"headerlink\" title=\"åå‘\"></a>åå‘</h4><p><strong>åå‘ï¼š</strong>é€šè¿‡ å°å†™ç±»å__è·¨è¡¨çš„å±æ€§åç§°ï¼ˆauthor__nameï¼‰ è·¨è¡¨è·å–æ•°æ®ã€‚</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">res &#x3D; models.AuthorDetail.objects.filter(author__name&#x3D;&quot;ä»»æˆ‘è¡Œ&quot;).values_list(&quot;tel&quot;)</code></pre>\n\n<h2 id=\"ORM-â€“-å¤šè¡¨å®ä¾‹ï¼ˆèšåˆä¸åˆ†ç»„æŸ¥è¯¢ï¼‰\"><a href=\"#ORM-â€“-å¤šè¡¨å®ä¾‹ï¼ˆèšåˆä¸åˆ†ç»„æŸ¥è¯¢ï¼‰\" class=\"headerlink\" title=\"ORM â€“ å¤šè¡¨å®ä¾‹ï¼ˆèšåˆä¸åˆ†ç»„æŸ¥è¯¢ï¼‰\"></a>ORM â€“ å¤šè¡¨å®ä¾‹ï¼ˆèšåˆä¸åˆ†ç»„æŸ¥è¯¢ï¼‰</h2><h3 id=\"èšåˆæŸ¥è¯¢ï¼ˆaggregateï¼‰\"><a href=\"#èšåˆæŸ¥è¯¢ï¼ˆaggregateï¼‰\" class=\"headerlink\" title=\"èšåˆæŸ¥è¯¢ï¼ˆaggregateï¼‰\"></a>èšåˆæŸ¥è¯¢ï¼ˆaggregateï¼‰</h3><p>èšåˆæŸ¥è¯¢å‡½æ•°æ˜¯å¯¹ä¸€ç»„å€¼æ‰§è¡Œè®¡ç®—ï¼Œå¹¶è¿”å›å•ä¸ªå€¼ã€‚</p>\n<p>Django ä½¿ç”¨èšåˆæŸ¥è¯¢å‰è¦å…ˆä» django.db.models å¼•å…¥ Avgã€Maxã€Minã€Countã€Sumï¼ˆé¦–å­—æ¯å¤§å†™ï¼‰ã€‚</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">from django.db.models import Avg,Max,Min,Count,Sum  #   å¼•å…¥å‡½æ•°</code></pre>\n\n<div class=\"custom-quote tip\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12.01 15C12.01 14.5 12.01 14.5 12.01 14.5C12.04 13.75 13 13.46 14.04 12.2C14.41 11.74 14.69 11.41 14.86 10.85C15.15 9.95 14.92 9.18 14.86 9.02C14.8 8.79 14.52 8 13.72 7.46C13.06 7.02 12.42 7 12.14 7C11.9 7 11.36 7 10.78 7.3C10.28 7.56 9.98 7.9 9.83 8.1C9.24 8.82 9.06 9.63 9 10.06\"></path>\n<path stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 18H12.01\"></path>\n</svg></span>\n<p class=\"custom-quote-title\">TIP</p>\n<ul>\n<li><p>èšåˆæŸ¥è¯¢è¿”å›å€¼çš„æ•°æ®ç±»å‹æ˜¯å­—å…¸ã€‚</p>\n</li>\n<li><p>èšåˆå‡½æ•° aggregate() æ˜¯ QuerySet çš„ä¸€ä¸ªç»ˆæ­¢å­å¥ï¼Œ ç”Ÿæˆçš„ä¸€ä¸ªæ±‡æ€»å€¼ï¼Œç›¸å½“äº count()ã€‚</p>\n</li>\n<li><p>ä½¿ç”¨ aggregate() åï¼Œæ•°æ®ç±»å‹å°±å˜ä¸ºå­—å…¸ï¼Œä¸èƒ½å†ä½¿ç”¨ QuerySet æ•°æ®ç±»å‹çš„ä¸€äº› API äº†ã€‚</p>\n</li>\n<li><p>æ—¥æœŸæ•°æ®ç±»å‹(DateField)å¯ä»¥ç”¨ Max å’Œ Minã€‚</p>\n</li>\n<li><p>è¿”å›çš„å­—å…¸ä¸­ï¼šé”®çš„åç§°é»˜è®¤æ˜¯ï¼ˆå±æ€§åç§°åŠ ä¸Š__èšåˆå‡½æ•°åï¼‰ï¼Œå€¼æ˜¯è®¡ç®—å‡ºæ¥çš„èšåˆå€¼ã€‚</p>\n</li>\n<li><p>å¦‚æœè¦è‡ªå®šä¹‰è¿”å›å­—å…¸çš„é”®çš„åç§°ï¼Œå¯ä»¥èµ·åˆ«åï¼š</p>\n</li>\n<li><p>aggregate(åˆ«å &#x3D; èšåˆå‡½æ•°å(â€œå±æ€§åç§°â€))\n</div>\n</li>\n</ul>\n<p>è®¡ç®—æ‰€æœ‰å›¾ä¹¦çš„å¹³å‡ä»·æ ¼:</p>\n<p>å®ä¾‹</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">from django.db.models import Avg,Max,Min,Count,Sum  #   å¼•å…¥å‡½æ•°\n...\nres &#x3D; models.Book.objects.aggregate(Avg(&quot;price&quot;))\nprint(res, type(res))\n...</code></pre>\n\n<p>è®¡ç®—æ‰€æœ‰å›¾ä¹¦çš„æ•°é‡ã€æœ€è´µä»·æ ¼å’Œæœ€ä¾¿å®œä»·æ ¼:</p>\n<p>å®ä¾‹</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">res&#x3D;models.Book.objects.aggregate(c&#x3D;Count(&quot;id&quot;),max&#x3D;Max(&quot;price&quot;),min&#x3D;Min(&quot;price&quot;))\nprint(res,type(res)\n</code></pre>\n\n<h3 id=\"åˆ†ç»„æŸ¥è¯¢ï¼ˆannotateï¼‰\"><a href=\"#åˆ†ç»„æŸ¥è¯¢ï¼ˆannotateï¼‰\" class=\"headerlink\" title=\"åˆ†ç»„æŸ¥è¯¢ï¼ˆannotateï¼‰\"></a>åˆ†ç»„æŸ¥è¯¢ï¼ˆannotateï¼‰</h3><p>åˆ†ç»„æŸ¥è¯¢ä¸€èˆ¬ä¼šç”¨åˆ°èšåˆå‡½æ•°ï¼Œæ‰€ä»¥ä½¿ç”¨å‰è¦å…ˆä» django.db.models å¼•å…¥ Avg,Max,Min,Count,Sumï¼ˆé¦–å­—æ¯å¤§å†™ï¼‰ã€‚</p>\n<p>from django.db.models import Avg,Max,Min,Count,Sum  #   å¼•å…¥å‡½æ•°</p>\n<p>è¿”å›å€¼ï¼š</p>\n<p>åˆ†ç»„åï¼Œç”¨ values å–å€¼ï¼Œåˆ™è¿”å›å€¼æ˜¯ QuerySet æ•°æ®ç±»å‹é‡Œé¢ä¸ºä¸€ä¸ªä¸ªå­—å…¸ï¼›<br>åˆ†ç»„åï¼Œç”¨ values_list å–å€¼ï¼Œåˆ™è¿”å›å€¼æ˜¯ QuerySet æ•°æ®ç±»å‹é‡Œé¢ä¸ºä¸€ä¸ªä¸ªå…ƒç»„ã€‚<br>MySQL ä¸­çš„ limit ç›¸å½“äº ORM ä¸­çš„ QuerySet æ•°æ®ç±»å‹çš„åˆ‡ç‰‡ã€‚</p>\n<p>æ³¨æ„ï¼š</p>\n<p>annotate é‡Œé¢æ”¾èšåˆå‡½æ•°ã€‚</p>\n<p>values æˆ–è€… values_list æ”¾åœ¨ annotate å‰é¢ï¼švalues æˆ–è€… values_list æ˜¯å£°æ˜ä»¥ä»€ä¹ˆå­—æ®µåˆ†ç»„ï¼Œannotate æ‰§è¡Œåˆ†ç»„ã€‚</p>\n<p>values æˆ–è€… values_list æ”¾åœ¨annotateåé¢ï¼š annotate è¡¨ç¤ºç›´æ¥ä»¥å½“å‰è¡¨çš„pkæ‰§è¡Œåˆ†ç»„ï¼Œvalues æˆ–è€… values_list è¡¨ç¤ºæŸ¥è¯¢å“ªäº›å­—æ®µï¼Œ å¹¶ä¸”è¦å°† annotate é‡Œçš„èšåˆå‡½æ•°èµ·åˆ«åï¼Œåœ¨ values æˆ–è€… values_list é‡Œå†™å…¶åˆ«åã€‚</p>\n<p>å‡†å¤‡æ•°æ®å’Œåˆ›å»ºæ¨¡å‹</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"># models.py\nclass Emp(models.Model):\n    name &#x3D; models.CharField(max_length&#x3D;32)\n    age &#x3D; models.IntegerField()\n    # å¤–é”®\n    salary &#x3D; models.DecimalField(max_digits&#x3D;8, decimal_places&#x3D;2)\n    dep &#x3D; models.CharField(max_length&#x3D;32)\n    province &#x3D; models.CharField(max_length&#x3D;32)\n\nclass Emps(models.Model):\n    name &#x3D; models.CharField(max_length&#x3D;32)\n    age &#x3D; models.IntegerField()\n    salary &#x3D; models.DecimalField(max_digits&#x3D;8, decimal_places&#x3D;2)\n    # å¤–é”®\n    dep &#x3D; models.ForeignKey(&quot;Dep&quot;, on_delete&#x3D;models.CASCADE)\n    province &#x3D; models.CharField(max_length&#x3D;32)\n\nclass Dep(models.Model):\n    title &#x3D; models.CharField(max_length&#x3D;32)</code></pre>\n\n<p>æ•°æ®:</p>\n<p>åœ¨ MySQL å‘½ä»¤è¡Œä¸­æ‰§è¡Œï¼š</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">-- app01_empæ•°æ®\nINSERT INTO &#96; app01_emp &#96; (&#96; id &#96;, &#96; name &#96;, &#96; age &#96;, &#96; salary &#96;, &#96; dep &#96; , &#96; province &#96;) VALUES (&#39;1&#39;, &#39;ä»¤ç‹å†²&#39;, &#39;24&#39;, &#39;6000.00&#39;, &#39;é”€å”®éƒ¨&#39; , &#39;æ²³å—&#39;);\nINSERT INTO &#96; app01_emp &#96; (&#96; id &#96;, &#96; name &#96;, &#96; age &#96;, &#96; salary &#96;, &#96; dep &#96; , &#96; province &#96;) VALUES (&#39;2&#39;, &#39;ä»»ç›ˆç›ˆ&#39;, &#39;18&#39;, &#39;8000.00&#39;, &#39;å…³å…¬éƒ¨&#39; , &#39;å¹¿ä¸œ&#39;);\nINSERT INTO &#96; app01_emp &#96; (&#96; id &#96;, &#96; name &#96;, &#96; age &#96;, &#96; salary &#96;, &#96; dep &#96; , &#96; province &#96;) VALUES (&#39;3&#39;, &#39;ä»»æˆ‘è¡Œ&#39;, &#39;56&#39;, &#39;10000.00&#39;, &#39;é”€å”®éƒ¨&#39; , &#39;å¹¿ä¸œ&#39;);\nINSERT INTO &#96; app01_emp &#96; (&#96; id &#96;, &#96; name &#96;, &#96; age &#96;, &#96; salary &#96;, &#96; dep &#96; , &#96; province &#96;) VALUES (&#39;4&#39;, &#39;å²³çµçŠ&#39;, &#39;19&#39;, &#39;6000.00&#39;, &#39;å…³å…¬éƒ¨&#39; , &#39;æ²³å—&#39;);\nINSERT INTO &#96; app01_emp &#96; (&#96; id &#96;, &#96; name &#96;, &#96; age &#96;, &#96; salary &#96;, &#96; dep &#96; , &#96; province &#96;) VALUES (&#39;5&#39;, &#39;å°é¾™å¥³&#39;, &#39;20&#39;, &#39;8000.00&#39;, &#39;å…³å…¬éƒ¨&#39; , &#39;æ²³åŒ—&#39;);\n-- app01_depæ•°æ®\nINSERT INTO &#96; app01_dep &#96; (&#96; id &#96;, &#96; title &#96;) VALUES (&#39;1&#39;, &#39;é”€å”®éƒ¨&#39;);\nINSERT INTO &#96; app01_dep &#96; (&#96; id &#96;, &#96; title &#96;) VALUES (&#39;2&#39;, &#39;å…³å…¬éƒ¨&#39;);\n-- app01_emps æ•°æ®\nINSERT INTO &#96; app01_emps &#96; (&#96; id &#96;, &#96; name &#96;, &#96; age &#96;, &#96; salary &#96;, &#96; province &#96; , &#96; dep_id &#96;) VALUES (&#39;2&#39;, &#39;ä»¤ç‹å†²&#39;, &#39;24&#39;, &#39;8000.00&#39;, &#39;æ²³å—&#39; , &#39;1&#39;);\nINSERT INTO &#96; app01_emps &#96; (&#96; id &#96;, &#96; name &#96;, &#96; age &#96;, &#96; salary &#96;, &#96; province &#96; , &#96; dep_id &#96;) VALUES (&#39;3&#39;, &#39;ä»»ç›ˆç›ˆ&#39;, &#39;18&#39;, &#39;9000.00&#39;, &#39;å¹¿ä¸œ&#39; , &#39;2&#39;);\nINSERT INTO &#96; app01_emps &#96; (&#96; id &#96;, &#96; name &#96;, &#96; age &#96;, &#96; salary &#96;, &#96; province &#96; , &#96; dep_id &#96;) VALUES (&#39;4&#39;, &#39;ä»»æˆ‘è¡Œ&#39;, &#39;57&#39;, &#39;10000.00&#39;, &#39;å¹¿ä¸œ&#39; , &#39;1&#39;);\nINSERT INTO &#96; app01_emps &#96; (&#96; id &#96;, &#96; name &#96;, &#96; age &#96;, &#96; salary &#96;, &#96; province &#96; , &#96; dep_id &#96;) VALUES (&#39;5&#39;, &#39;å²³çµçŠ&#39;, &#39;19&#39;, &#39;6000.00&#39;, &#39;æ²³å—&#39; , &#39;2&#39;);\nINSERT INTO &#96; app01_emps &#96; (&#96; id &#96;, &#96; name &#96;, &#96; age &#96;, &#96; salary &#96;, &#96; province &#96; , &#96; dep_id &#96;) VALUES (&#39;6&#39;, &#39;å°é¾™å¥³&#39;, &#39;20&#39;, &#39;8000.00&#39;, &#39;æ²³åŒ—&#39; , &#39;2&#39;);</code></pre>\n\n<p>ç»Ÿè®¡æ¯ä¸€ä¸ªå‡ºç‰ˆç¤¾çš„æœ€ä¾¿å®œçš„ä¹¦çš„ä»·æ ¼ï¼š</p>\n<p>å®ä¾‹</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">res &#x3D; models.Publish.objects.values(&quot;name&quot;).annotate(in_price &#x3D; Min(&quot;book__price&quot;))\nprint(res)</code></pre>\n\n<p>å‘½ä»¤è¡Œä¸­å¯ä»¥çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºï¼š</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">&lt;QuerySet [&#123;&#39;name&#39;: &#39;èœé¸Ÿå‡ºç‰ˆç¤¾&#39;, &#39;in_price&#39;: Decimal(&#39;100.00&#39;)&#125;, &#123;&#39;name&#39;: &#39;æ˜æ•™å‡ºç‰ˆç¤¾&#39;, &#39;in_price&#39;: Decimal(&#39;300.00&#39;)&#125;]&gt;</code></pre>\n\n<p>ç»Ÿè®¡æ¯ä¸€æœ¬ä¹¦çš„ä½œè€…ä¸ªæ•°ï¼š</p>\n<p>å®ä¾‹</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">res &#x3D; models.Book.objects.annotate(c &#x3D; Count(&quot;authors__name&quot;)).values(&quot;title&quot;,&quot;c&quot;)\nprint(res)</code></pre>\n\n<p>å‘½ä»¤è¡Œä¸­å¯ä»¥çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºï¼š</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">&lt;QuerySet [&#123;&#39;title&#39;: &#39;èœé¸Ÿæ•™ç¨‹&#39;, &#39;c&#39;: 1&#125;, &#123;&#39;title&#39;: &#39;å¸æ˜Ÿå¤§æ³•&#39;, &#39;c&#39;: 1&#125;, &#123;&#39;title&#39;: &#39;å†²çµå‰‘æ³•&#39;, &#39;c&#39;: 1&#125;]&gt;</code></pre>\n\n<p>ç»Ÿè®¡æ¯ä¸€æœ¬ä»¥â€èœâ€å¼€å¤´çš„ä¹¦ç±çš„ä½œè€…ä¸ªæ•°ï¼š</p>\n<p>å®ä¾‹</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">res &#x3D; models.Book.objects.filter(title__startswith&#x3D;&quot;èœ&quot;).annotate(c &#x3D; Count(&quot;authors__name&quot;)).values(&quot;title&quot;,&quot;c&quot;)\nprint(res)</code></pre>\n\n<p>ç»Ÿè®¡ä¸æ­¢ä¸€ä¸ªä½œè€…çš„å›¾ä¹¦åç§°ï¼š</p>\n<p>å®ä¾‹</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">res &#x3D; models.Book.objects.annotate(c &#x3D; Count(&quot;authors__name&quot;)).filter(c__gt&#x3D;0).values(&quot;title&quot;,&quot;c&quot;)\nprint(res)</code></pre>\n\n<p>å‘½ä»¤è¡Œä¸­å¯ä»¥çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºï¼š</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">&lt;QuerySet [&#123;&#39;title&#39;: &#39;èœé¸Ÿæ•™ç¨‹&#39;, &#39;c&#39;: 1&#125;, &#123;&#39;title&#39;: &#39;å¸æ˜Ÿå¤§æ³•&#39;, &#39;c&#39;: 1&#125;, &#123;&#39;title&#39;: &#39;å†²çµå‰‘æ³•&#39;, &#39;c&#39;: 1&#125;]&gt;</code></pre>\n\n<p>æ ¹æ®ä¸€æœ¬å›¾ä¹¦ä½œè€…æ•°é‡çš„å¤šå°‘å¯¹æŸ¥è¯¢é›† QuerySet è¿›è¡Œé™åºæ’åº:</p>\n<p>å®ä¾‹</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">res &#x3D; models.Book.objects.annotate(c &#x3D; Count(&quot;authors__name&quot;)).order_by(&quot;-c&quot;).values(&quot;title&quot;,&quot;c&quot;)\nprint(res)</code></pre>\n\n<p>æŸ¥è¯¢å„ä¸ªä½œè€…å‡ºçš„ä¹¦çš„æ€»ä»·æ ¼:</p>\n<p>å®ä¾‹</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">res &#x3D; models.Author.objects.annotate(all &#x3D; Sum(&quot;book__price&quot;)).values(&quot;name&quot;,&quot;all&quot;)\nprint(res)</code></pre>\n\n<h3 id=\"F-æŸ¥è¯¢\"><a href=\"#F-æŸ¥è¯¢\" class=\"headerlink\" title=\"F() æŸ¥è¯¢\"></a>F() æŸ¥è¯¢</h3><p>F() çš„å®ä¾‹å¯ä»¥åœ¨æŸ¥è¯¢ä¸­å¼•ç”¨å­—æ®µï¼Œæ¥æ¯”è¾ƒåŒä¸€ä¸ª model å®ä¾‹ä¸­ä¸¤ä¸ªä¸åŒå­—æ®µçš„å€¼ã€‚</p>\n<p>ä¹‹å‰æ„é€ çš„è¿‡æ»¤å™¨éƒ½åªæ˜¯å°†å­—æ®µå€¼ä¸æŸä¸ªå¸¸é‡åšæ¯”è¾ƒï¼Œå¦‚æœæƒ³è¦å¯¹ä¸¤ä¸ªå­—æ®µçš„å€¼åšæ¯”è¾ƒï¼Œå°±éœ€è¦ç”¨åˆ° F()ã€‚</p>\n<p>ä½¿ç”¨å‰è¦å…ˆä» django.db.models å¼•å…¥ F:</p>\n<p>from django.db.models import F<br>ç”¨æ³•ï¼š</p>\n<p>F(â€œå­—æ®µåç§°â€)<br>F åŠ¨æ€è·å–å¯¹è±¡å­—æ®µçš„å€¼ï¼Œå¯ä»¥è¿›è¡Œè¿ç®—ã€‚</p>\n<p>Django æ”¯æŒ F() å¯¹è±¡ä¹‹é—´ä»¥åŠ F() å¯¹è±¡å’Œå¸¸æ•°ä¹‹é—´çš„åŠ å‡ä¹˜é™¤å’Œå–ä½™çš„æ“ä½œã€‚</p>\n<p>ä¿®æ”¹æ“ä½œï¼ˆupdateï¼‰ä¹Ÿå¯ä»¥ä½¿ç”¨ F() å‡½æ•°ã€‚</p>\n<p>æŸ¥è¯¢å·¥èµ„å¤§äºå¹´é¾„çš„äººï¼š</p>\n<p>å®ä¾‹</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">from django.db.models import F\n...\nbook&#x3D;models.Emp.objects.filter(salary__gt&#x3D;F(&quot;age&quot;)).values(&quot;name&quot;,&quot;age&quot;)\n...</code></pre>\n\n<p>å°†æ¯ä¸€æœ¬ä¹¦çš„ä»·æ ¼æé«˜100å…ƒ:</p>\n<p>å®ä¾‹</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">res &#x3D; models.Book.objects.update(price&#x3D;F(&quot;price&quot;)+100)\nprint(res)</code></pre>\n\n<h3 id=\"Q-æŸ¥è¯¢-ï¼ˆä¸-æˆ–-éï¼‰æ“ä½œç¬¦\"><a href=\"#Q-æŸ¥è¯¢-ï¼ˆä¸-æˆ–-éï¼‰æ“ä½œç¬¦\" class=\"headerlink\" title=\"Q() æŸ¥è¯¢ ï¼ˆä¸ æˆ– éï¼‰æ“ä½œç¬¦\"></a>Q() æŸ¥è¯¢ ï¼ˆä¸ æˆ– éï¼‰æ“ä½œç¬¦</h3><p>ä½¿ç”¨å‰è¦å…ˆä» django.db.models å¼•å…¥ Q:<br>from django.db.models import Q<br>ç”¨æ³•ï¼š</p>\n<p>Q(æ¡ä»¶åˆ¤æ–­)</p>\n<p>ä¾‹å¦‚ï¼š</p>\n<p>Q(title__startswith&#x3D;â€èœâ€)<br>ä¹‹å‰æ„é€ çš„è¿‡æ»¤å™¨é‡Œçš„å¤šä¸ªæ¡ä»¶çš„å…³ç³»éƒ½æ˜¯ andï¼Œå¦‚æœéœ€è¦æ‰§è¡Œæ›´å¤æ‚çš„æŸ¥è¯¢ï¼ˆä¾‹å¦‚ or è¯­å¥ï¼‰ï¼Œå°±å¯ä»¥ä½¿ç”¨ Q ã€‚</p>\n<p>Q å¯¹è±¡å¯ä»¥ä½¿ç”¨ &amp; | ~ ï¼ˆä¸ æˆ– éï¼‰æ“ä½œç¬¦è¿›è¡Œç»„åˆã€‚</p>\n<p>ä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼š~ &amp; |ã€‚</p>\n<p>å¯ä»¥æ··åˆä½¿ç”¨ Q å¯¹è±¡å’Œå…³é”®å­—å‚æ•°ï¼ŒQ å¯¹è±¡å’Œå…³é”®å­—å‚æ•°æ˜¯ç”¨â€andâ€æ‹¼åœ¨ä¸€èµ·çš„ï¼ˆå³å°†é€—å·çœ‹æˆ and ï¼‰ï¼Œä½†æ˜¯ Q å¯¹è±¡å¿…é¡»ä½äºæ‰€æœ‰å…³é”®å­—å‚æ•°çš„å‰é¢ã€‚</p>\n<p>æŸ¥è¯¢ä»·æ ¼å¤§äº 350 æˆ–è€…åç§°ä»¥èœå¼€å¤´çš„ä¹¦ç±çš„åç§°å’Œä»·æ ¼ã€‚</p>\n<p>from django.db.models import Q<br>å®ä¾‹</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">...\nres&#x3D;models.Book.objects.filter(Q(price__gt&#x3D;350)|Q(title__startswith&#x3D;&quot;èœ&quot;)).values(&quot;title&quot;,&quot;price&quot;)\nprint(res)\n...</code></pre>\n\n<p>æŸ¥è¯¢ä»¥â€èœâ€ç»“å°¾æˆ–è€…ä¸æ˜¯ 2010 å¹´ 10 æœˆä»½çš„ä¹¦ç±:</p>\n<p>å®ä¾‹</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">res &#x3D; models.Book.objects.filter(Q(title__endswith&#x3D;&quot;èœ&quot;) | ~Q(Q(pub_date__year&#x3D;2010) &amp; Q(pub_date__month&#x3D;10)))\nprint(res)  </code></pre>\n\n<p>æŸ¥è¯¢å‡ºç‰ˆæ—¥æœŸæ˜¯ 2004 æˆ–è€… 1999 å¹´ï¼Œå¹¶ä¸”ä¹¦åä¸­åŒ…å«æœ‰â€èœâ€çš„ä¹¦ç±ã€‚</p>\n<p>Q å¯¹è±¡å’Œå…³é”®å­—æ··åˆä½¿ç”¨ï¼ŒQ å¯¹è±¡è¦åœ¨æ‰€æœ‰å…³é”®å­—çš„å‰é¢:</p>\n<p>å®ä¾‹</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">res &#x3D; models.Book.objects.filter(Q(pub_date__year&#x3D;2004) | Q(pub_date__year&#x3D;1999), title__contains&#x3D;&quot;èœ&quot;)\nprint(res) </code></pre>\n\n<h2 id=\"åˆ†é¡µæŸ¥è¯¢\"><a href=\"#åˆ†é¡µæŸ¥è¯¢\" class=\"headerlink\" title=\"åˆ†é¡µæŸ¥è¯¢\"></a>åˆ†é¡µæŸ¥è¯¢</h2><p>  <a href=\"https://blog.csdn.net/weixin_34049948/article/details/92688433#:~:text=%E9%83%BD%E6%98%BE%E7%A4%BA%E5%87%BA%E6%9D%A5-,%E8%87%AA%E5%B7%B1%E5%AE%9A%E4%B9%89%E5%88%86%E9%A1%B5,-%E5%88%9B%E5%BB%BA%E8%B7%AF%E7%94%B1\" target=\"_blank\" >è§djangoä¸­ormåˆ†é¡µåŠŸèƒ½ï¼ˆå†…ç½®åˆ†é¡µï¼‰</a></p>\n  <pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">\nfrom django.core.paginator import Paginator,Page#å¯¼å…¥æ¨¡å—\n\n\ndef custom(request):\n  #è·å–å½“å‰é¡µ\n  current_page &#x3D; request.GET.get(&#39;page&#39;)\n  current_page &#x3D; int(current_page)\n  #æ¯é¡µæ˜¾ç¤º10æ¡\n  per_page &#x3D; 10\n  #1,0-10\n  #2ï¼Œ10-20\n  #3,20-30\n  start_page &#x3D; (current_page -1) * per_page\n  end_page &#x3D; current_page * per_page\n  user_list &#x3D; models.Uinfo.objects.all()[start_page:end_page]\n  return render(request,&#39;custom.html&#39;,&#123;&#39;user_list&#39;:user_list&#125;)\n</code></pre>\n\n<h2 id=\"æ¥å£æ–‡æ¡£\"><a href=\"#æ¥å£æ–‡æ¡£\" class=\"headerlink\" title=\"æ¥å£æ–‡æ¡£\"></a>æ¥å£æ–‡æ¡£</h2><ul>\n<li>ä¸æ”¯æŒknif4j</li>\n<li>swaggerä¸ç»´æŠ¤äº†</li>\n<li>drf-yasg ä¸å¥½ç”¨ï¼Œè€Œä¸”è¿˜æœ‰bugï¼ˆä»…ä»…ç‚¹äº†å‡ ä¸‹å°±å‘ç°bug,ä¸èƒ½å¿ï½ï¼‰</li>\n</ul>\n<h2 id=\"ä¸ªäººæ„Ÿå—\"><a href=\"#ä¸ªäººæ„Ÿå—\" class=\"headerlink\" title=\"ä¸ªäººæ„Ÿå—\"></a>ä¸ªäººæ„Ÿå—</h2><p>ç”Ÿæ€ä¸å…¨ï¼šç»è¿‡ä¸¤å¤©å­¦ä¹ ï¼Œè§‰å¾—python ç”Ÿæ€æ²¡æƒ³è±¡ä¸­çš„é‚£ä¹ˆä¼˜ç§€ï¼ŒDjangoä¹Ÿæ²¡æœ‰æƒ³è±¡ä¸­çš„é‚£ä¹ˆå¥½ï¼Œç”Ÿæ€æœ€èµ·ç æ¯”ä¸ä¸Šjavaå’Œnodejs</p>\n<p>è¯­è¨€ç®€åŒ–ï¼šjavaå¼ºè¯­è¨€ï¼Œnodejsæœ‰typesciptå¤¹æŒï¼Œçœ‹èµ·æ¥Djangoä¼˜ç‚¹å¼±é¸¡ï¼Œpythonæ›´åƒæ˜¯è„šæœ¬è¯­è¨€</p>\n<p>ä¸å¥½ç†è§£ï¼šDjango ORMç”¨èµ·æ¥æ²¡æœ‰Typeormæˆ–è€…mybatisé‚£ä¹ˆå¥½ç†è§£ï¼Œæœ‰äº›å•åˆ’çº¿&#x2F;åŒåˆ’çº¿çš„ä¸œè¥¿ï¼Œä¸ºäº†ç®€åŒ–è€Œç®€åŒ–ï¼Œå¤±å»è¯­ä¹‰è¯</p>\n<p><em>æœ‰ä¸ªé—®é¢˜ï¼šæ€ä¹ˆå°±è¯­è¨€æ’è¡Œæ¦œæ’åˆ°ç¬¬ä¸€äº†ï¼Œè´¹è§£ï½</em></p>\n","text":"Python3 å‡çº§$ python --version Python 2.7.15 $ python3 --version Python 3.7.2 $ brew upgrade python@3.10 å¤§æ¦‚æ˜¯2019å¹´å®‰è£…çš„python 3.7.2ç‰ˆæœ¬ï¼Œçœ‹äº†ä¸‹æ–‡æ¡£ï¼Œæœ‰å°‘æ•°å†…å®¹...","link":"","photos":[],"count_time":{"symbolsCount":"27k","symbolsTime":"24 mins."},"categories":[{"name":"Python3","slug":"Python3","count":1,"path":"api/categories/Python3.json"}],"tags":[{"name":"Python3","slug":"Python3","count":1,"path":"api/tags/Python3.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Python3-%E5%8D%87%E7%BA%A7\"><span class=\"toc-text\">Python3 å‡çº§</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#python%E5%AE%98%E7%BD%91\"><span class=\"toc-text\">pythonå®˜ç½‘</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#python-web%E6%A1%86%E6%9E%B6%E9%80%89%E6%8B%A9\"><span class=\"toc-text\">python webæ¡†æ¶é€‰æ‹©</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E6%88%91%E7%9A%84%E6%84%9F%E5%8F%97\"><span class=\"toc-text\">æˆ‘çš„æ„Ÿå—</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#pip\"><span class=\"toc-text\">pip</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85-Django\"><span class=\"toc-text\">å®‰è£… Django</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E4%BA%8B%E4%BE%8B\"><span class=\"toc-text\">äº‹ä¾‹</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Django-ORM\"><span class=\"toc-text\">Django ORM</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Models\"><span class=\"toc-text\">Models</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%A1%A8%E7%BB%93%E6%9E%84\"><span class=\"toc-text\">è¡¨ç»“æ„</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%A1%A8%E5%85%B3%E7%B3%BB\"><span class=\"toc-text\">è¡¨å…³ç³»</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE\"><span class=\"toc-text\">æ’å…¥æ•°æ®</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#ORM-%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE\"><span class=\"toc-text\">ORM - æ·»åŠ æ•°æ®</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%80%E5%AF%B9%E5%A4%9A-%E5%A4%96%E9%94%AE-ForeignKey\"><span class=\"toc-text\">ä¸€å¯¹å¤š(å¤–é”® ForeignKey)</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%A4%9A%E5%AF%B9%E5%A4%9A-ManyToManyField-%EF%BC%9A%E5%9C%A8%E7%AC%AC%E4%B8%89%E5%BC%A0%E5%85%B3%E7%B3%BB%E8%A1%A8%E4%B8%AD%E6%96%B0%E5%A2%9E%E6%95%B0%E6%8D%AE\"><span class=\"toc-text\">å¤šå¯¹å¤š(ManyToManyField)ï¼šåœ¨ç¬¬ä¸‰å¼ å…³ç³»è¡¨ä¸­æ–°å¢æ•°æ®</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%85%B3%E8%81%94%E7%AE%A1%E7%90%86%E5%99%A8-%E5%AF%B9%E8%B1%A1%E8%B0%83%E7%94%A8\"><span class=\"toc-text\">å…³è”ç®¡ç†å™¨(å¯¹è±¡è°ƒç”¨)</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%A4%9A%E5%AF%B9%E5%A4%9A%EF%BC%88%E5%8F%8C%E5%90%91%E5%9D%87%E6%9C%89%E5%85%B3%E8%81%94%E7%AE%A1%E7%90%86%E5%99%A8%EF%BC%89\"><span class=\"toc-text\">å¤šå¯¹å¤šï¼ˆåŒå‘å‡æœ‰å…³è”ç®¡ç†å™¨ï¼‰</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%80%E5%AF%B9%E5%A4%9A%EF%BC%88%E5%8F%AA%E6%9C%89%E5%A4%9A%E7%9A%84%E9%82%A3%E4%B8%AA%E7%B1%BB%E7%9A%84%E5%AF%B9%E8%B1%A1%E6%9C%89%E5%85%B3%E8%81%94%E7%AE%A1%E7%90%86%E5%99%A8%EF%BC%8C%E5%8D%B3%E5%8F%8D%E5%90%91%E6%89%8D%E6%9C%89%EF%BC%89\"><span class=\"toc-text\">ä¸€å¯¹å¤šï¼ˆåªæœ‰å¤šçš„é‚£ä¸ªç±»çš„å¯¹è±¡æœ‰å…³è”ç®¡ç†å™¨ï¼Œå³åå‘æ‰æœ‰ï¼‰</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%96%B9%E5%BC%8F%E4%B8%80%EF%BC%9A%E4%BC%A0%E5%AF%B9%E8%B1%A1\"><span class=\"toc-text\">æ–¹å¼ä¸€ï¼šä¼ å¯¹è±¡</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%96%B9%E5%BC%8F%E4%BA%8C%EF%BC%9A%E4%BC%A0%E5%AF%B9%E8%B1%A1-id\"><span class=\"toc-text\">æ–¹å¼äºŒï¼šä¼ å¯¹è±¡ id</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#ORM-%E6%9F%A5%E8%AF%A2-set%E8%AF%AD%E6%B3%95\"><span class=\"toc-text\">ORM æŸ¥è¯¢ _setè¯­æ³•</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%80%E5%AF%B9%E5%A4%9A\"><span class=\"toc-text\">ä¸€å¯¹å¤š</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%AD%A3%E5%90%91\"><span class=\"toc-text\">æ­£å‘</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%8F%8D%E5%90%91\"><span class=\"toc-text\">åå‘</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%80%E5%AF%B9%E4%B8%80\"><span class=\"toc-text\">ä¸€å¯¹ä¸€</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%AD%A3%E5%90%91-1\"><span class=\"toc-text\">æ­£å‘</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%8F%8D%E5%90%91-1\"><span class=\"toc-text\">åå‘</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%A4%9A%E5%AF%B9%E5%A4%9A\"><span class=\"toc-text\">å¤šå¯¹å¤š</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%AD%A3%E5%90%91-2\"><span class=\"toc-text\">æ­£å‘</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%8F%8D%E5%90%91-2\"><span class=\"toc-text\">åå‘</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#ORM%E6%9F%A5%E8%AF%A2-%E5%9F%BA%E4%BA%8E%E5%8F%8C%E4%B8%8B%E5%88%92%E7%BA%BF%E7%9A%84%E8%B7%A8%E8%A1%A8%E6%9F%A5%E8%AF%A2-%E8%AF%AD%E6%B3%95\"><span class=\"toc-text\">ORMæŸ¥è¯¢ åŸºäºåŒä¸‹åˆ’çº¿çš„è·¨è¡¨æŸ¥è¯¢ è¯­æ³•</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%80%E5%AF%B9%E5%A4%9A-1\"><span class=\"toc-text\">ä¸€å¯¹å¤š</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%AD%A3%E5%90%91-3\"><span class=\"toc-text\">æ­£å‘</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%8F%8D%E5%90%91-3\"><span class=\"toc-text\">åå‘</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%A4%9A%E5%AF%B9%E5%A4%9A-1\"><span class=\"toc-text\">å¤šå¯¹å¤š</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%AD%A3%E5%90%91-4\"><span class=\"toc-text\">æ­£å‘</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%8F%8D%E5%90%91-4\"><span class=\"toc-text\">åå‘</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%80%E5%AF%B9%E4%B8%80-1\"><span class=\"toc-text\">ä¸€å¯¹ä¸€</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%AD%A3%E5%90%91-5\"><span class=\"toc-text\">æ­£å‘</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%8F%8D%E5%90%91-5\"><span class=\"toc-text\">åå‘</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#ORM-%E2%80%93-%E5%A4%9A%E8%A1%A8%E5%AE%9E%E4%BE%8B%EF%BC%88%E8%81%9A%E5%90%88%E4%B8%8E%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2%EF%BC%89\"><span class=\"toc-text\">ORM â€“ å¤šè¡¨å®ä¾‹ï¼ˆèšåˆä¸åˆ†ç»„æŸ¥è¯¢ï¼‰</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%81%9A%E5%90%88%E6%9F%A5%E8%AF%A2%EF%BC%88aggregate%EF%BC%89\"><span class=\"toc-text\">èšåˆæŸ¥è¯¢ï¼ˆaggregateï¼‰</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2%EF%BC%88annotate%EF%BC%89\"><span class=\"toc-text\">åˆ†ç»„æŸ¥è¯¢ï¼ˆannotateï¼‰</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#F-%E6%9F%A5%E8%AF%A2\"><span class=\"toc-text\">F() æŸ¥è¯¢</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Q-%E6%9F%A5%E8%AF%A2-%EF%BC%88%E4%B8%8E-%E6%88%96-%E9%9D%9E%EF%BC%89%E6%93%8D%E4%BD%9C%E7%AC%A6\"><span class=\"toc-text\">Q() æŸ¥è¯¢ ï¼ˆä¸ æˆ– éï¼‰æ“ä½œç¬¦</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2\"><span class=\"toc-text\">åˆ†é¡µæŸ¥è¯¢</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3\"><span class=\"toc-text\">æ¥å£æ–‡æ¡£</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%AA%E4%BA%BA%E6%84%9F%E5%8F%97\"><span class=\"toc-text\">ä¸ªäººæ„Ÿå—</span></a></li></ol></li></ol>","author":{"name":"é™ˆå“ˆå–½","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"æ¯”ä½ ä¼˜ç§€çš„äººï¼Œæ¯”ä½ æ›´åŠªåŠ›ï¼","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"React TS èŒƒå‹ç»„ä»¶","uid":"f3f72853c8b7c10482dbb43fb811bec2","slug":"2022-09-25reactèŒƒå‹","date":"2022-09-25T11:24:31.000Z","updated":"2022-09-25T12:06:21.355Z","comments":true,"path":"api/articles/2022-09-25reactèŒƒå‹.json","keywords":null,"cover":null,"text":"æ³›å‹ç±»å‹TypeScript ä¸­ï¼Œç±»å‹ï¼ˆinterface, typeï¼‰æ˜¯å¯ä»¥å£°æ˜æˆæ³›å‹çš„ï¼Œè¿™å¾ˆå¸¸è§ã€‚ interface Props&lt;T&gt; &#123; content: T; &#125; è¿™è¡¨æ˜ Props æ¥å£å®šä¹‰äº†è¿™ä¹ˆä¸€ç§ç±»å‹ï¼š å®ƒæ˜¯åŒ…å«ä¸€ä¸ª content...","link":"","photos":[],"count_time":{"symbolsCount":"7.2k","symbolsTime":"7 mins."},"categories":[{"name":"React","slug":"React","count":20,"path":"api/categories/React.json"}],"tags":[{"name":"React","slug":"React","count":14,"path":"api/tags/React.json"}],"author":{"name":"é™ˆå“ˆå–½","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"æ¯”ä½ ä¼˜ç§€çš„äººï¼Œæ¯”ä½ æ›´åŠªåŠ›ï¼","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}},"next_post":{"title":"Reactä¸­çš„æœ¯è¯­","uid":"4cfbb91d77b5df4256b735640b2a3f88","slug":"2022-09-19react","date":"2022-09-19T12:42:20.000Z","updated":"2022-09-20T12:57:05.700Z","comments":true,"path":"api/articles/2022-09-19react.json","keywords":null,"cover":null,"text":"æµ…åˆå¹¶this.setState ä¼šè¿›è¡Œæµ…åˆå¹¶ falsyfalsy è¡¨è¾¾å¼ MDN 8 ä¸ª falsy å€¼ &#x2F;&#x2F; | å€¼ | è¯´æ˜ | &#x2F;&#x2F; | :-------- | :---------------------------------...","link":"","photos":[],"count_time":{"symbolsCount":"2.5k","symbolsTime":"2 mins."},"categories":[{"name":"React","slug":"React","count":20,"path":"api/categories/React.json"}],"tags":[{"name":"React","slug":"React","count":14,"path":"api/tags/React.json"}],"author":{"name":"é™ˆå“ˆå–½","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"æ¯”ä½ ä¼˜ç§€çš„äººï¼Œæ¯”ä½ æ›´åŠªåŠ›ï¼","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}}}