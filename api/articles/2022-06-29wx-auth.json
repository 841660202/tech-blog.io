{"title":"ä¼ä¸šå¾®ä¿¡æˆæƒæµç¨‹","uid":"240950b163de231df264068b4d1b9085","slug":"2022-06-29wx-auth","date":"2022-06-29T08:27:52.000Z","updated":"2022-09-15T14:26:10.879Z","comments":true,"path":"api/articles/2022-06-29wx-auth.json","keywords":null,"cover":[],"content":"<h2 id=\"å‡†å¤‡å·¥ä½œ\"><a href=\"#å‡†å¤‡å·¥ä½œ\" class=\"headerlink\" title=\"å‡†å¤‡å·¥ä½œ\"></a>å‡†å¤‡å·¥ä½œ</h2><ul>\n<li>ç¡®ä¿æœ¬åœ°å·²ç»æ­£ç¡®é…ç½®äº† HOSTï¼Œèƒ½å¤Ÿä»å·¥ä½œå°å…¥å£æ‰“å¼€æœ¬åœ°çš„å¼€å‘æœåŠ¡</li>\n<li>ç¡®ä¿å·²è·å–åˆ°å½“å‰ä¼ä¸šçš„å”¯ä¸€ IDï¼šcorp_idï¼Œåœ¨ã€ç®¡ç†åå°ã€‘- ã€æˆ‘çš„ä¼ä¸šã€‘-ã€ä¼ä¸šä¿¡æ¯ã€‘é¡µé¢ï¼Œæœ€ä¸‹é¢æ‰¾åˆ°ã€ä¼ä¸š IDã€‘</li>\n<li>å·²ç»é€šè¿‡æ¥å£è°ƒç”¨è·å–åˆ°å½“å‰åº”ç”¨çš„ access_tokenï¼Œè¯·å‚è€ƒ äºŒï¼š<a href=\"https://developer.work.weixin.qq.com/tutorial/detail/46\" target=\"_blank\" >å¦‚ä½•è·å–åº”ç”¨æ¥å£å‡­è¯</a></li>\n</ul>\n<h2 id=\"é…ç½®å¯ä¿¡åŸŸå\"><a href=\"#é…ç½®å¯ä¿¡åŸŸå\" class=\"headerlink\" title=\"é…ç½®å¯ä¿¡åŸŸå\"></a>é…ç½®å¯ä¿¡åŸŸå</h2><p>ä¼ä¸šå¾®ä¿¡æä¾›äº† OAuth çš„æˆæƒç™»å½•æ–¹å¼ï¼Œå¯ä»¥è®©ä»ä¼ä¸šå¾®ä¿¡ç»ˆç«¯æ‰“å¼€çš„ç½‘é¡µè·å–æˆå‘˜çš„èº«ä»½ä¿¡æ¯ï¼Œä»è€Œå…å»ç™»å½•çš„ç¯èŠ‚ã€‚</p>\n<p>ä¸ºäº†ä¿è¯è®¿é—®æˆæƒçš„å®‰å…¨æ€§ï¼Œéœ€è¦é…ç½®æˆæƒé“¾æ¥ URL æ‰€åœ¨åŸŸåä¸ºå¯ä¿¡åŸŸåã€‚<br>åœ¨ã€åº”ç”¨è¯¦æƒ…ã€‘-ã€å¼€å‘è€…æ¥å£ã€‘-ã€ç½‘é¡µæˆæƒåŠ JS-SDKã€‘ï¼Œç‚¹å‡»ã€è®¾ç½®å¯ä¿¡åŸŸåã€‘</p>\n<img src=\"http://t-blog-images.aijs.top/img/20220629163014.webp\" />\n\n<p>åœ¨ã€è®¾ç½®å¯ä¿¡åŸŸåã€‘å¼¹çª—ï¼Œå¡«å†™ç½‘é¡µæˆæƒåŠŸèƒ½çš„å›è°ƒåŸŸå</p>\n<img src=\"http://t-blog-images.aijs.top/img/20220629163042.webp\" width=300 />\n\n<p>ç½‘é¡µæˆæƒå›è°ƒåŸŸåçš„é…ç½®é¡»ä¸å®é™…è®¿é—®é“¾æ¥çš„åŸŸåå®Œå…¨ä¸€è‡´ï¼Œè¯¦ç»†è¦æ±‚è¯·å‚è€ƒæ–‡æ¡£ <a href=\"https://developer.work.weixin.qq.com/document/path/91335#%E5%85%B3%E4%BA%8E%E7%BD%91%E9%A1%B5%E6%8E%88%E6%9D%83%E7%9A%84%E5%8F%AF%E4%BF%A1%E5%9F%9F%E5%90%8D\" target=\"_blank\" >å…³äºç½‘é¡µæˆæƒçš„å¯ä¿¡åŸŸå</a>ã€‚</p>\n<h2 id=\"æ„é€ ç½‘é¡µæˆæƒé“¾æ¥\"><a href=\"#æ„é€ ç½‘é¡µæˆæƒé“¾æ¥\" class=\"headerlink\" title=\"æ„é€ ç½‘é¡µæˆæƒé“¾æ¥\"></a>æ„é€ ç½‘é¡µæˆæƒé“¾æ¥</h2><p>åœ¨æˆ‘ä»¬å½“å‰çš„æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬æœ‰å‡ ä¸ª URL éœ€è¦æ³¨æ„å’ŒåŒºåˆ†ï¼š</p>\n<ul>\n<li>åº”ç”¨ä¸»é¡µ URL<br>ä»å·¥ä½œå°ç‚¹å‡»æ‰“å¼€çš„é¡µé¢ URL ï¼Œåœ¨åˆ›å»ºåº”ç”¨æ˜¯é…ç½®å¡«å†™çš„ï¼Œç”¨æ¥å‘æˆæƒé“¾æ¥ URL è·³è½¬ã€‚</li>\n<li>é‡å®šå‘ URL<br>å½“ç”¨æˆ·æˆæƒæˆåŠŸåï¼Œä¼šå¸¦ç€æˆå‘˜æˆæƒ code è·³è½¬çš„ URLï¼Œç”¨æ¥æ¥æ”¶ code å¹¶è·å–æˆå‘˜èº«ä»½ã€‚</li>\n<li>æˆæƒé“¾æ¥ URL<br>ä¼ä¸šå¾®ä¿¡åŸŸåä¸‹çš„ URLï¼ŒåŒ…å«äº† suite_idã€é‡å®šå‘ URL ç­‰ä¿¡æ¯ï¼Œå½“ä¼ä¸šå¾®ä¿¡æœåŠ¡å‚æ•°éªŒè¯æˆåŠŸåï¼Œä¼šè·³è½¬åˆ°é‡å®šå‘ URLã€‚</li>\n</ul>\n<p>æˆ‘ä»¬åœ¨ä¸ŠèŠ‚è¯¾ç¨‹ä¸­é…ç½®ä¼ä¸šçš„ä¸»é¡µ URL ä¸º <a href=\"http://myapp.com:300/home%EF%BC%8C%E6%88%91%E4%BB%AC%E5%9C%A8%E8%BF%99%E4%B8%AA\" target=\"_blank\" >http://myapp.com:300/homeï¼Œæˆ‘ä»¬åœ¨è¿™ä¸ª URL</a> è®¿é—®é€»è¾‘é‡Œé¢æ ¹æ®çº¦å®šæ„é€ æˆæƒé“¾æ¥ URLï¼Œå¹¶å‘è¿™ä¸ªé“¾æ¥è·³è½¬ï¼š</p>\n<p>å…³äº OAuth çš„è¯¦ç»†å†…å®¹ï¼Œè¯·å‚è€ƒ <a href=\"https://developer.work.weixin.qq.com/document/path/91119\" target=\"_blank\" >ç½‘é¡µæˆæƒç™»å½•</a>ã€‚å…³äºæˆæƒé“¾æ¥æ›´å¤šçš„å†…å®¹ï¼Œè¯·å‚è€ƒ <a href=\"https://developer.work.weixin.qq.com/document/path/91022\" target=\"_blank\" >æ„é€ ç½‘é¡µæˆæƒé“¾æ¥</a>ã€‚</p>\n<h2 id=\"è§£ææˆå‘˜æˆæƒ-code\"><a href=\"#è§£ææˆå‘˜æˆæƒ-code\" class=\"headerlink\" title=\"è§£ææˆå‘˜æˆæƒ code\"></a>è§£ææˆå‘˜æˆæƒ code</h2><p>ä¼ä¸šæˆå‘˜ä»å·¥ä½œå°ç‚¹å‡»åº”ç”¨ï¼Œæ‰“å¼€åº”ç”¨ä¸»é¡µ URLï¼Œå‘æˆæƒé“¾æ¥ URL è·³è½¬ï¼›ä¼ä¸šå¾®ä¿¡å¯¹æˆæƒé“¾æ¥ä¸Šçš„ä¿¡æ¯è¿›è¡Œæ ¡éªŒä¹‹åï¼Œä¼šé‡å®šå‘ URL è·³è½¬ï¼Œå¹¶ä»¥ query çš„å½¢å¼å¸¦ä¸Šå½“å‰è®¿é—®æˆå‘˜çš„ code ä¿¡æ¯ã€‚</p>\n<p>åœ¨ä¸Šä¸€æ­¥ï¼Œæˆ‘ä»¬å®šä¹‰äº†é‡å®šå‘ URL ä¸º <a href=\"http://myapp.com/app%EF%BC%8C%E5%9C%A8%E8%BF%99%E4%B8%AA\" target=\"_blank\" > http://myapp.com/app</a>ï¼Œåœ¨è¿™ä¸ª URL çš„è®¿é—®é‡Œæˆ‘ä»¬è§£æå‡º code å‚æ•°ã€‚</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">&#x2F;&#x2F; é‡å®šå‘ URL\nrouter.get(&quot;&#x2F;app&quot;, async function (req, res, next) &#123;\n  &#x2F;&#x2F; ä» query å‚æ•°ä¸­è§£æ code\n  let &#123; code &#125; &#x3D; req.query;\n  &#x2F;&#x2F; å±•ç¤ºç™»å½•åçš„é¡µé¢\n  res.render(&quot;home&quot;);\n&#125;);</code></pre>\n\n<h2 id=\"è·å–è®¿é—®ç”¨æˆ·èº«ä»½ä¿¡æ¯\"><a href=\"#è·å–è®¿é—®ç”¨æˆ·èº«ä»½ä¿¡æ¯\" class=\"headerlink\" title=\"è·å–è®¿é—®ç”¨æˆ·èº«ä»½ä¿¡æ¯\"></a>è·å–è®¿é—®ç”¨æˆ·èº«ä»½ä¿¡æ¯</h2><p>åœ¨è§£æå‡ºæˆå‘˜æˆæƒ code ä¹‹åï¼Œä½¿ç”¨ access_token ï¼Œè°ƒç”¨ <a href=\"https://developer.work.weixin.qq.com/document/path/91023\" target=\"_blank\" >è·å–è®¿é—®ç”¨æˆ·èº«ä»½</a> æ¥å£ï¼Œå³å¯å¾—åˆ°è®¿é—®ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯ user_idï¼Œå¦‚æœæƒ³è¦è®¿é—®ç”¨æˆ·æ›´è¯¦ç»†çš„ä¿¡æ¯ï¼Œåˆ™éœ€è¦é€šè¿‡ <a href=\"https://developer.work.weixin.qq.com/document/path/90196\" target=\"_blank\" >è¯»å–æˆå‘˜</a> å¾—åˆ°ç”¨æˆ·çš„å§“åã€å¤´åƒç­‰å®Œæ•´ä¿¡æ¯ã€‚</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">router.get(&quot;&#x2F;app&quot;, async function (req, res, next) &#123;\n  let &#123; code &#125; &#x3D; req.query;\n  &#x2F;&#x2F; ä»ç¼“å­˜ä¸­è¯»å–å‡º access_token\n  let access_token &#x3D; Tool.GetAccessToken();\n  if (access_token) &#123;\n    &#x2F;&#x2F; è·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯\n    let &#123; data: user_data &#125; &#x3D; await axios.get(\n      &#96;https:&#x2F;&#x2F;qyapi.weixin.qq.com&#x2F;cgi-bin&#x2F;user&#x2F;getuserinfo?access_token&#x3D;$&#123;access_token&#125;&amp;code&#x3D;$&#123;code&#125;&#96;\n    );\n    console.log(&quot;è·å– user_data æˆåŠŸ&quot;, user_data);\n    &#x2F;&#x2F; è·å¾—ç”¨æˆ·çš„ user_id\n    let user_id &#x3D; user_data.UserId;\n    &#x2F;&#x2F; è·å–ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯\n    let &#123; data: user_detail_data &#125; &#x3D; await axios.get(\n      &#96;https:&#x2F;&#x2F;qyapi.weixin.qq.com&#x2F;cgi-bin&#x2F;user&#x2F;get?access_token&#x3D;$&#123;access_token&#125;&amp;userid&#x3D;$&#123;user_id&#125;&#96;\n    );\n    console.log(&quot;è·å–æˆå‘˜è¯¦ç»†ä¿¡æ¯æˆåŠŸ&quot;, user_detail_data);\n    &#x2F;&#x2F; å°†ç”¨æˆ·ä¿¡æ¯å±•ç¤ºåœ¨é¡µé¢ä¸Š\n    res.render(&quot;home&quot;, user_detail_data);\n  &#125; else &#123;\n    res.render(&quot;error&quot;);\n  &#125;\n&#125;);</code></pre>\n\n<p>åœ¨å‰ç«¯é¡µé¢ä¸­å±•ç¤ºç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯ï¼š</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;Hello World&lt;&#x2F;title&gt;\n  &lt;&#x2F;head&gt;\n  &lt;body&gt;\n    &lt;h1&gt;Hello World!&lt;&#x2F;h1&gt;\n    &lt;div&gt;\n      &lt;img src&#x3D;&quot;&lt;%&#x3D;avatar %&gt;&quot; &#x2F;&gt;&lt;span&gt;&lt;%&#x3D;name %&gt;(&lt;%&#x3D;english_name %&gt;) &lt;&#x2F;span&gt;\n    &lt;&#x2F;div&gt;\n  &lt;&#x2F;body&gt;\n&lt;&#x2F;html&gt;\n</code></pre>\n\n<h2 id=\"æ•ˆæœå±•ç¤º\"><a href=\"#æ•ˆæœå±•ç¤º\" class=\"headerlink\" title=\"æ•ˆæœå±•ç¤º\"></a>æ•ˆæœå±•ç¤º</h2><img src=\"http://t-blog-images.aijs.top/img/20220629163741.webp\" width=300/>\n\n<p>å…³äºè·å–ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯å†…å®¹ä»¥åŠæ¥å£è¿”å›çš„å®Œæ•´å­—æ®µä¿¡æ¯ï¼Œè¯·å‚è€ƒ <a href=\"https://developer.work.weixin.qq.com/document/path/90196\" target=\"_blank\" >è¯»å–æˆå‘˜</a>ã€‚å¦‚æœæƒ³è¦æˆå‘˜åœ¨ç³»ç»Ÿæµè§ˆå™¨ä¸­æ‰“å¼€åº”ç”¨æ—¶ä¹Ÿèƒ½è¿›è¡Œä¼ä¸šå¾®ä¿¡æˆæƒç™»å½•ï¼Œè¯·å‚è€ƒ <a href=\"https://developer.work.weixin.qq.com/document/path/91025\" target=\"_blank\" >æ„é€ æ‰«ç ç™»å½•</a> ã€‚</p>\n<h2 id=\"æˆæƒæµç¨‹\"><a href=\"#æˆæƒæµç¨‹\" class=\"headerlink\" title=\"æˆæƒæµç¨‹\"></a>æˆæƒæµç¨‹</h2><p>ä¼ä¸šå¾®ä¿¡å®˜ç½‘æœ‰æˆæƒæµç¨‹ï¼Œçœ‹ä¸Šå»æ²¡é‚£ä¹ˆç›´æ¥ï¼Œç»“åˆé¡¹ç›®ç”»ä¸ªè‰å›¾</p>\n<img src=\"http://t-blog-images.aijs.top/img/20220630093816.webp\" />\n\n<p>æœ¬ç¯‡æ–‡ç« é’ˆå¯¹çš„æ˜¯<strong>ä¼ä¸šå¾®ä¿¡æˆæƒ</strong>çš„æƒ…å†µï¼Œå³ï¼š<strong>å›¾ç¬¬ä¸€è¡Œèµ°åˆ°æ²¡æˆæƒï¼Œå¾€ä¸‹èµ°ï¼ˆæ²¡æœ‰ cookie ä¿¡æ¯çš„æƒ…å†µï¼‰</strong></p>\n<h2 id=\"æ›´å¥½çš„æ–¹æ¡ˆ\"><a href=\"#æ›´å¥½çš„æ–¹æ¡ˆ\" class=\"headerlink\" title=\"æ›´å¥½çš„æ–¹æ¡ˆ\"></a>æ›´å¥½çš„æ–¹æ¡ˆ</h2><p><strong>æ–¹æ¡ˆ 1:</strong> å¯¹äºä¼ä¸šå¾®ä¿¡æˆæƒå’Œ SSO æˆæƒï¼Œæœ¬è´¨ä¸Šå¹¶æ— åŒºåˆ«ï¼Œæœ€ç»ˆçš„ç›®çš„æ˜¯æ³¨å…¥ cookie,å¯¹äºæˆ‘å½“å‰æ‰€åœ¨å…¬å¸çš„æƒ…å†µï¼ˆä¼ä¸šå¾®ä¿¡æˆæƒï¼Œå•ç‹¬ç»´æŠ¤åˆ° redies ä¸­ï¼Œç‹¬ç«‹äº SSO,æ˜¯æ²¡æœ‰å¿…è¦çš„ï¼‰ã€‚</p>\n<p><strong>æ–¹æ¡ˆ 2:</strong> å¦‚æœæŠŠä¼ä¸šå¾®ä¿¡æˆæƒçš„è¿”å›ç”¨äºæ¢å– SSO çš„ï¼ˆtokenï¼‰æ³¨å…¥ cookie å®ç°æˆæƒï¼Œæœ€ç»ˆæ¯æ¬¡æ ¡éªŒéƒ½æ˜¯ SSO,ä¼šèŠ‚çœä¸å°‘æˆæœ¬ã€‚</p>\n<p>æˆ‘åœ¨ä¸Šå®¶åš<strong>é’‰é’‰ ISV ç¬¬ä¸‰æ–¹ä¾›åº”å•†å¼€å‘</strong>æ—¶å€™ï¼Œå®ç°æ•ˆæœç±»ä¼¼æ–¹æ¡ˆ 2</p>\n<p><strong>æ›´ä¼˜æ–¹æ¡ˆ 3:</strong> åœ¨æ–¹æ¡ˆ 2 çš„åŸºç¡€ï¼Œå°†è¯·æ±‚å¤´æ ‡è®°å»æ‰ï¼ˆè®©åç«¯è‡ªè¡Œå¤„ç†ï¼‰ã€‚è¯·æ±‚åˆ°åç«¯ï¼Œåç«¯èƒ½æ‹¿åˆ°è¯·æ±‚å¤´<code>userAgent</code>å­—æ®µï¼Œå¯ä»¥çŸ¥é“åˆ°æ­¤è¯·æ±‚æ˜¯ä»å“ªä¸ªåº”ç”¨è¿‡æ¥çš„ï¼Œåç«¯è‡ªå·±åˆ¤æ–­ä¸‹å°±å¥½äº†ï¼ˆå®Œå…¨æ²¡å¿…è¦<code>åŸŸååŠ é…ç½®ï¼Œå°¤å…¶æ˜¯é‚£ç§nginxé…ç½®åï¼Œä»£ç åˆä¹±å†™çš„</code>ï¼‰</p>\n<h2 id=\"å¾®ä¿¡ç¯å¢ƒåˆ¤æ–­\"><a href=\"#å¾®ä¿¡ç¯å¢ƒåˆ¤æ–­\" class=\"headerlink\" title=\"å¾®ä¿¡ç¯å¢ƒåˆ¤æ–­\"></a>å¾®ä¿¡ç¯å¢ƒåˆ¤æ–­</h2><p><strong>å‰ç«¯ä»£ç </strong></p>\n<pre class=\"line-numbers language-typescript\" data-language=\"typescript\"><code class=\"language-typescript\">&#x2F;**\n * ï¼ˆæœåŠ¡ç«¯+å®¢æˆ·ç«¯ï¼‰æ¸²æŸ“ï¼šæ ¹æ®req headersä¸­user-agentåˆ¤æ–­æ˜¯å¦æ¥è‡ªå¾®ä¿¡ç«¯ï¼ˆæ¡Œé¢ç«¯å’Œæ‰‹æœºç«¯ï¼‰\n *&#x2F;\nexport default function getWechatUserAgent(userAgent?: string): boolean &#123;\n  const agent &#x3D;\n    userAgent || (typeof navigator &#x3D;&#x3D;&#x3D; &quot;undefined&quot; ? &quot;&quot; : navigator.userAgent);\n  const user_agent &#x3D; agent ? agent.toLowerCase() : &quot;&quot;;\n  return !!(\n    user_agent &amp;&amp;\n    (user_agent.includes(&quot;wechat&quot;) ||\n      user_agent.includes(&quot;wxwork&quot;) ||\n      user_agent.includes(&quot;windowswechat&quot;))\n  );\n&#125;</code></pre>\n\n<p><strong>ç¯å¢ƒåˆ¤æ–­ä¹Ÿæ”¾åç«¯</strong></p>\n<p>å…¬å¸è®¾è®¡çš„åŠ è¯·æ±‚å¤´æ ‡è®°æ˜¯ä¸æ˜¯ä¼ä¸šå¾®ä¿¡ï¼Œå®Œå…¨æ²¡å¿…è¦ æœåŠ¡ç«¯æ¥åˆ°è¯·æ±‚å¯ä»¥æ‹¿åˆ°<code>user-agent</code></p>\n<h2 id=\"æ³¨æ„\"><a href=\"#æ³¨æ„\" class=\"headerlink\" title=\"æ³¨æ„\"></a>æ³¨æ„</h2><div class=\"custom-quote warning\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12 8V13\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12 15.99V16.01\"></path>\n</svg>\n</span>\n<p class=\"custom-quote-title\">WARNING</p>\n<p><p><code>&lt;a&gt;æ ‡ç­¾ä¸‹è½½</code></p>\n<p>å› ä¸ºåç«¯æ˜¯é€šè¿‡å‰ç«¯ç»™çš„é¢å¤–æ ‡è¯†åˆ¤æ–­ç¯å¢ƒçš„ï¼Œæœ‰ä¸ªå¾ˆè‡´å‘½çš„é—®é¢˜ é€šè¿‡ <code>&lt;a&gt;æ ‡ç­¾ä¸‹è½½</code>çš„æ²¡åŠæ³•åŠ è¯·æ±‚å¤´ï¼Œéœ€è¦å°†<code>&lt;a&gt;æ ‡ç­¾æ–¹å¼çš„ä¸‹è½½</code>æ”¹ä¸º http è¯·æ±‚ä¸‹è½½</p>\n</p>\n</div>\n<h2 id=\"å‚è€ƒé“¾æ¥\"><a href=\"#å‚è€ƒé“¾æ¥\" class=\"headerlink\" title=\"å‚è€ƒé“¾æ¥\"></a>å‚è€ƒé“¾æ¥</h2><p><a href=\"https://developer.work.weixin.qq.com/tutorial/detail/47\" target=\"_blank\" >å¦‚ä½•è·å–ç™»å½•ç”¨æˆ·ä¿¡æ¯</a></p>\n<p><a href=\"https://developer.work.weixin.qq.com/document/path/91022\" target=\"_blank\" >æ„é€ ç½‘é¡µæˆæƒé“¾æ¥</a></p>\n","text":"å‡†å¤‡å·¥ä½œ ç¡®ä¿æœ¬åœ°å·²ç»æ­£ç¡®é…ç½®äº† HOSTï¼Œèƒ½å¤Ÿä»å·¥ä½œå°å…¥å£æ‰“å¼€æœ¬åœ°çš„å¼€å‘æœåŠ¡ ç¡®ä¿å·²è·å–åˆ°å½“å‰ä¼ä¸šçš„å”¯ä¸€ IDï¼šcorp_idï¼Œåœ¨ã€ç®¡ç†åå°ã€‘- ã€æˆ‘çš„ä¼ä¸šã€‘-ã€ä¼ä¸šä¿¡æ¯ã€‘é¡µé¢ï¼Œæœ€ä¸‹é¢æ‰¾åˆ°ã€ä¼ä¸š IDã€‘ å·²ç»é€šè¿‡æ¥å£è°ƒç”¨è·å–åˆ°å½“å‰åº”ç”¨çš„ access_tokenï¼Œè¯·å‚è€ƒ äºŒï¼šå¦‚...","link":"","photos":[],"count_time":{"symbolsCount":"4.1k","symbolsTime":"4 mins."},"categories":[{"name":"ä¼ä¸šå¾®ä¿¡","slug":"ä¼ä¸šå¾®ä¿¡","count":5,"path":"api/categories/ä¼ä¸šå¾®ä¿¡.json"}],"tags":[{"name":"ä¼ä¸šå¾®ä¿¡","slug":"ä¼ä¸šå¾®ä¿¡","count":5,"path":"api/tags/ä¼ä¸šå¾®ä¿¡.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C\"><span class=\"toc-text\">å‡†å¤‡å·¥ä½œ</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE%E5%8F%AF%E4%BF%A1%E5%9F%9F%E5%90%8D\"><span class=\"toc-text\">é…ç½®å¯ä¿¡åŸŸå</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%9E%84%E9%80%A0%E7%BD%91%E9%A1%B5%E6%8E%88%E6%9D%83%E9%93%BE%E6%8E%A5\"><span class=\"toc-text\">æ„é€ ç½‘é¡µæˆæƒé“¾æ¥</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%A7%A3%E6%9E%90%E6%88%90%E5%91%98%E6%8E%88%E6%9D%83-code\"><span class=\"toc-text\">è§£ææˆå‘˜æˆæƒ code</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%8E%B7%E5%8F%96%E8%AE%BF%E9%97%AE%E7%94%A8%E6%88%B7%E8%BA%AB%E4%BB%BD%E4%BF%A1%E6%81%AF\"><span class=\"toc-text\">è·å–è®¿é—®ç”¨æˆ·èº«ä»½ä¿¡æ¯</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%95%88%E6%9E%9C%E5%B1%95%E7%A4%BA\"><span class=\"toc-text\">æ•ˆæœå±•ç¤º</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%8E%88%E6%9D%83%E6%B5%81%E7%A8%8B\"><span class=\"toc-text\">æˆæƒæµç¨‹</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%9B%B4%E5%A5%BD%E7%9A%84%E6%96%B9%E6%A1%88\"><span class=\"toc-text\">æ›´å¥½çš„æ–¹æ¡ˆ</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%BE%AE%E4%BF%A1%E7%8E%AF%E5%A2%83%E5%88%A4%E6%96%AD\"><span class=\"toc-text\">å¾®ä¿¡ç¯å¢ƒåˆ¤æ–­</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%B3%A8%E6%84%8F\"><span class=\"toc-text\">æ³¨æ„</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5\"><span class=\"toc-text\">å‚è€ƒé“¾æ¥</span></a></li></ol>","author":{"name":"é™ˆæµ·é¾™","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"éœ€è¦å°±å­¦å‘—ï¼Œå¤šå¤§ç‚¹äº‹ğŸ˜‚","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"react-native-webviewä¸­å¤„ç†å¤–ç½‘é“¾æ¥","uid":"da1169afdf41f1a24b458b57385fca2d","slug":"2022-06-29rn-web","date":"2022-06-29T09:11:44.000Z","updated":"2022-09-15T14:26:10.879Z","comments":true,"path":"api/articles/2022-06-29rn-web.json","keywords":null,"cover":[],"text":"èƒŒæ™¯ä¹‹å‰å…¬å¸ç§»åŠ¨ç«¯æ˜¯ä½¿ç”¨ vpn è¿æ¥åˆ°å†…ç½‘ï¼Œç”±äºæŸäº›åŸå› ï¼ŒIOS ä¼ä¸šè¯ä¹¦å³å°†åˆ°æœŸï¼Œåº”ç”¨éœ€è¦ä¸Šæ¶ï¼Œvpn ä¸æ»¡è¶³ä¸Šæ¶è¦æ±‚ï¼Œæ‰€ä»¥ï¼š vpn è¦ä» iOS åŒ…ä¸­ç§»é™¤ vpn ç§»é™¤å¯¼è‡´ä¸èƒ½ç›´æ¥è®¿é—®å†…ç½‘ éœ€è¦é€šè¿‡å¤–ç½‘åŸŸåè®¿é—®å†…ç½‘èµ„æº ä¸åŒç¯å¢ƒçš„è¯·æ±‚ åŸç”ŸåŠ RN ä»£ç ï¼Œæ¥å£è®¿é—®èµ° AT...","link":"","photos":[],"count_time":{"symbolsCount":"1.4k","symbolsTime":"1 mins."},"categories":[{"name":"react-native","slug":"react-native","count":2,"path":"api/categories/react-native.json"}],"tags":[{"name":"react-native","slug":"react-native","count":2,"path":"api/tags/react-native.json"}],"author":{"name":"é™ˆæµ·é¾™","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"éœ€è¦å°±å­¦å‘—ï¼Œå¤šå¤§ç‚¹äº‹ğŸ˜‚","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}},"next_post":{"title":"hexo-theme-auroraæºç ä¿®æ”¹","uid":"e1c1013f78e2c9e4246458e52acbd895","slug":"2022-06-24aurora","date":"2022-06-24T03:43:51.000Z","updated":"2022-09-15T14:50:07.545Z","comments":true,"path":"api/articles/2022-06-24aurora.json","keywords":null,"cover":[],"text":"èƒŒæ™¯hexo-theme-auroraæ˜¯ä¸€æ¬¾ä¸é”™çš„ä¸»é¢˜ï¼Œåœ¨ä½¿ç”¨è¿‡ç¨‹æ— ç–‘ä¼šé‡åˆ°ä¸€äº›é—®é¢˜ã€‚é‡åˆ°é—®é¢˜é¦–å…ˆå» github ä¸Šæ‰¾ issue æ¥å¤„ç†ï¼Œæœ‰äº›é—®é¢˜éœ€è¦æ”¹æºç ï¼Œä¹‹å‰ä½¿ç”¨patchè¿›è¡Œç®€å•çš„ä¿®æ”¹ï¼Œè¿™æ¬¡é‡åˆ°äº† tag æŸ¥ä¸åˆ°ï¼Œæœ¬åœ°æ˜¯æœ‰çš„ï¼Œå‘å¸ƒåæ‰¾ä¸åˆ°äº†ï¼Œå¯¼è‡´æ–‡ç« åœ¨tagæƒ…å†µä¸‹ä¸å¯è§...","link":"","photos":[],"count_time":{"symbolsCount":"5.3k","symbolsTime":"5 mins."},"categories":[{"name":"å·¥å…·","slug":"å·¥å…·","count":15,"path":"api/categories/å·¥å…·.json"}],"tags":[{"name":"hexo","slug":"hexo","count":2,"path":"api/tags/hexo.json"}],"author":{"name":"é™ˆæµ·é¾™","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"éœ€è¦å°±å­¦å‘—ï¼Œå¤šå¤§ç‚¹äº‹ğŸ˜‚","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}}}