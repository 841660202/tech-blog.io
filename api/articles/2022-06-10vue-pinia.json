{"title":"Vue Pinia","uid":"77d580d0d304de3429cbd4fdc2ebd7c6","slug":"2022-06-10vue-pinia","date":"2022-06-10T09:21:00.000Z","updated":"2022-09-16T13:54:56.140Z","comments":true,"path":"api/articles/2022-06-10vue-pinia.json","keywords":null,"cover":"http://t-blog-images.aijs.top/img/20220610172420.webp","content":"<h2 id=\"Pinia-ç‰¹ç‚¹\"><a href=\"#Pinia-ç‰¹ç‚¹\" class=\"headerlink\" title=\"Pinia ç‰¹ç‚¹\"></a>Pinia ç‰¹ç‚¹</h2><p><strong>ğŸ’¡ Intuitive</strong><br><code>ç›´è§‚çš„</code><br>Stores are as familiar as components. API designed to let you write well organized stores.<br><code>å­˜å‚¨å’Œç»„ä»¶æ˜¯ä¸€æ ·çš„ã€‚APIè®¾è®¡äº†è®©ä½ å†™å¥½ç»„ç»‡çš„å­˜å‚¨ã€‚</code></p>\n<p><strong>ğŸ”‘ Type Safe</strong><br><code>ç±»å‹å®‰å…¨çš„</code><br>Types are inferred, which means stores provide you with autocompletion even in JavaScript!<br><code>ç±»å‹å¯æ¨æµ‹ï¼Œè¿™æ„å‘³ç€å­˜å‚¨æä¾›äº†ä½ åœ¨JavaScriptä¸­è‡ªåŠ¨å®Œæˆçš„åŠŸèƒ½ï¼</code></p>\n<p><strong>âš™ï¸ Devtools support</strong><br><code>å¼€å‘å·¥å…·æ”¯æŒ</code><br>Pinia hooks into Vue devtools to give you an enhanced development experience in both Vue 2 and Vue 3.<br><code>Piniaé’©å­è¿›å…¥Vueå¼€å‘å·¥å…·ï¼Œè®©ä½ åœ¨Vue 2å’ŒVue 3ä¸­è·å¾—å¼ºåŒ–å¼€å‘ç»éªŒã€‚</code></p>\n<p><strong>ğŸ”Œ Extensible</strong><br><code>å¯æ‰©å±•çš„</code><br>React to store changes to extend Pinia with transactions, local storage synchronization, etc.<br><code>é€šè¿‡äº‹åŠ¡ã€æœ¬åœ°å­˜å‚¨åŒæ­¥ç­‰æ¥å“åº”å­˜å‚¨æ›´æ”¹ä»¥æ‰©å±•Piniaã€‚</code></p>\n<p><strong>ğŸ— Modular by design</strong><br><code>è®¾è®¡æ¨¡å—åŒ–</code><br>Build multiple stores and let your bundler code split them automatically.<br><code>æ„å»ºå¤šä¸ªå­˜å‚¨ï¼Œè®©ä½ çš„bundlerä»£ç åˆ†å¼€å®ƒä»¬è‡ªåŠ¨ã€‚</code></p>\n<p><strong>ğŸ“¦ Extremely light</strong><br><code>éå¸¸è½»é‡çš„</code><br>Pinia weighs around 1kb, you will forget itâ€™s even there!<br><code>Piniaçº¦1kbï¼Œä½ ä¼šå¿˜è®°å®ƒåœ¨é‚£é‡Œï¼</code></p>\n<h2 id=\"Introduction\"><a href=\"#Introduction\" class=\"headerlink\" title=\"Introduction\"></a>Introduction</h2><p><code>ä»‹ç»</code></p>\n<p><VueSchoolLink\n  href=\"https://vueschool.io/lessons/introduction-to-pinia\"\n  title=\"Get started with Pinia\"\n/></p>\n<p>Pinia <a href=\"https://github.com/vuejs/pinia/commit/06aeef54e2cad66696063c62829dac74e15fd19e\">started</a> as an experiment to redesign what a Store for Vue could look like with the <a href=\"https://github.com/vuejs/composition-api\">Composition API</a> around November 2019. Since then, the initial principles are still the same, but Pinia works for both Vue 2 and Vue 3 <strong>and doesnâ€™t require you to use the composition API</strong>. The API is the same for both except for <em>installation</em> and <em>SSR</em>, and these docs are targeted to Vue 3 <strong>with notes about Vue 2</strong> whenever necessary so it can be read by Vue 2 and Vue 3 users!</p>\n<p><em>è¯‘ï¼šPinia ä» 2019 å¹´ 11 æœˆå·¦å³å¼€å§‹å°è¯•é‡æ–°è®¾è®¡ Vue store çš„åˆæˆ APIã€‚ä»é‚£æ—¶èµ·ï¼Œæœ€åˆçš„åŸåˆ™ä»ç„¶æ˜¯ä¸€æ ·çš„ï¼Œä½† Pinia åŒæ—¶é€‚ç”¨äº Vue 2 å’Œ Vue 3ï¼Œä¸éœ€è¦æ‚¨ä½¿ç”¨åˆæˆ APIã€‚é™¤äº†å®‰è£…å’Œ SSR ä¹‹å¤–ï¼Œè¿™ä¸¤ä¸ª API éƒ½æ˜¯ç›¸åŒçš„ï¼Œè¿™äº›æ–‡æ¡£é’ˆå¯¹ Vue 3ï¼Œå¹¶åœ¨å¿…è¦æ—¶æä¾›æœ‰å…³ Vue 2 çš„è¯´æ˜ï¼Œä»¥ä¾¿ Vue 2 å’Œ Vue 3 ç”¨æˆ·å¯ä»¥é˜…è¯»ï¼</em></p>\n<p><strong>Why should I use Pinia?</strong></p>\n<p><code>ä¸ºä»€ä¹ˆæˆ‘åº”è¯¥ä½¿ç”¨Piniaï¼Ÿ</code></p>\n<p>Pinia is a store library for Vue, it allows you to share a state across components&#x2F;pages. If you are familiar with the Composition API, you might be thinking you can already share a global state with a simple <code>export const state = reactive(&#123;&#125;)</code>. This is true for single page applications but <strong>exposes your application to <a href=\"https://vuejs.org/guide/scaling-up/ssr.html#cross-request-state-pollution\">security vulnerabilities</a></strong> if it is server side rendered. But even in small single page applications, you get a lot from using Pinia:</p>\n<p><em>è¯‘ï¼šPinia æ˜¯ä¸€ä¸ª Vue çš„å­˜å‚¨åº“ï¼Œå®ƒå…è®¸ä½ åœ¨ç»„ä»¶&#x2F;é¡µé¢ä¹‹é—´å…±äº«çŠ¶æ€ã€‚å¦‚æœä½ ç†Ÿæ‚‰åˆæˆ APIï¼Œä½ å¯èƒ½ä¼šè®¤ä¸ºä½ å¯ä»¥é€šè¿‡ç®€å•çš„<code>export const state = reactive(&#123;&#125;)</code>å…±äº«å…¨å±€çŠ¶æ€ã€‚è¿™æ˜¯å¯¹äºå•é¡µåº”ç”¨çš„çœŸå®æƒ…å†µï¼Œä½†</em> **å¦‚æœå®ƒæ˜¯æœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼Œå®ƒä¼šæš´éœ²æ‚¨çš„åº”ç”¨ç¨‹åºåˆ°<a href=\"https://vuejs.org/guide/scaling-up/ssr.html#cross-request-state-pollution\">å®‰å…¨æ¼æ´</a>**ã€‚<em>ä½†å³ä½¿æ˜¯å°çš„å•é¡µåº”ç”¨ï¼Œä½¿ç”¨ Pinia ä¹Ÿå¾ˆå¤šï¼š</em></p>\n<ul>\n<li>Devtools support <em>å¼€å‘å·¥å…·æ”¯æŒ</em><ul>\n<li>A timeline to track actions, mutations <em>è¿½è¸ªè¡ŒåŠ¨ã€çªå˜çš„æ—¶é—´è¡¨</em></li>\n<li>Stores appear in components where they are used <em>å­˜å‚¨å‡ºç°åœ¨ä½¿ç”¨å®ƒä»¬çš„ç»„ä»¶ä¸­</em></li>\n<li>Time travel and easier debugging <em>æ—¶é—´æ—…è¡Œå’Œæ›´å®¹æ˜“è°ƒè¯•</em></li>\n</ul>\n</li>\n<li>Hot module replacement <em>å¿«é€Ÿæ›´æ–°</em><ul>\n<li>Modify your stores without reloading your page <em>åœ¨ä¸é‡æ–°åŠ è½½é¡µé¢çš„æƒ…å†µä¸‹ä¿®æ”¹ä½ çš„å­˜å‚¨</em></li>\n<li>Keep any existing state while developing <em>åœ¨å¼€å‘æ—¶ä¿æŒä»»ä½•ç°æœ‰çŠ¶æ€</em></li>\n</ul>\n</li>\n<li>Plugins: extend Pinia features with plugins <em>åŠŸèƒ½æ‰©å±•ï¼šä½¿ç”¨æ’ä»¶æ‰©å±• Pinia åŠŸèƒ½</em></li>\n<li>Proper TypeScript support or <strong>autocompletion</strong> for JS users *å¯¹äº JS ç”¨æˆ·çš„æ­£ç¡®çš„ TypeScript æ”¯æŒæˆ–<strong>è‡ªåŠ¨å®Œæˆ*</strong></li>\n<li>Server Side Rendering Support <em>å®Œç¾çš„æœåŠ¡å™¨ç«¯æ¸²æŸ“æ”¯æŒ</em></li>\n</ul>\n<p><strong>Basic example</strong></p>\n<p><code>åŸºæœ¬ç¤ºä¾‹</code><br>This is what using pinia looks like in terms of API (make sure to check the <a href=\"./getting-started.md\">Getting Started</a> for complete instructions). You start by creating a store:<br><em>è¯‘ï¼šè¿™æ˜¯ä¸ºä»€ä¹ˆä½¿ç”¨ pinia çœ‹èµ·æ¥åƒ APIï¼ˆè¯·æ£€æŸ¥<a href=\"./getting-started.md\">å¼€å§‹</a>ä»¥è·å–å®Œæ•´çš„æŒ‡ä»¤ï¼‰ã€‚ä½ é¦–å…ˆåˆ›å»ºä¸€ä¸ªå­˜å‚¨ï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">&#x2F;&#x2F; stores&#x2F;counter.js\nimport &#123; defineStore &#125; from &quot;pinia&quot;;\n\nexport const useCounterStore &#x3D; defineStore(&quot;counter&quot;, &#123;\n  state: () &#x3D;&gt; &#123;\n    return &#123; count: 0 &#125;;\n  &#125;,\n  &#x2F;&#x2F; could also be defined as\n  &#x2F;&#x2F; state: () &#x3D;&gt; (&#123; count: 0 &#125;)\n  actions: &#123;\n    increment() &#123;\n      this.count++;\n    &#125;,\n  &#125;,\n&#125;);</code></pre>\n\n<p>And then you <em>use</em> it in a component:<br><em>è¯‘ï¼šç„¶åä½ åœ¨ç»„ä»¶ä¸­<code>ä½¿ç”¨</code>å®ƒï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">import &#123; useCounterStore &#125; from &quot;@&#x2F;stores&#x2F;counter&quot;;\n\nexport default &#123;\n  setup() &#123;\n    const counter &#x3D; useCounterStore();\n\n    counter.count++;\n    &#x2F;&#x2F; with autocompletion âœ¨\n    counter.$patch(&#123; count: counter.count + 1 &#125;);\n    &#x2F;&#x2F; or using an action instead\n    counter.increment();\n  &#125;,\n&#125;;</code></pre>\n\n<p>You can even use a function (similar to a component <code>setup()</code>) to define a Store for more advanced use cases:<br><em>è¯‘ï¼šä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å‡½æ•°ï¼ˆä¸ç»„ä»¶<code>setup()</code>ç›¸ä¼¼ï¼‰æ¥å®šä¹‰ä¸€ä¸ªå­˜å‚¨ä»¥æ›´é«˜çº§çš„ä½¿ç”¨æƒ…å†µï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">export const useCounterStore &#x3D; defineStore(&quot;counter&quot;, () &#x3D;&gt; &#123;\n  const count &#x3D; ref(0);\n  function increment() &#123;\n    count.value++;\n  &#125;\n\n  return &#123; count, increment &#125;;\n&#125;);</code></pre>\n\n<p>If you are still not into <code>setup()</code> and Composition API, donâ€™t worry, Pinia also support a similar set of <a href=\"https://vuex.vuejs.org/guide/state.html#the-mapstate-helper\"><em>map helpers</em> like Vuex</a>. You define stores the same way but then use <code>mapStores()</code>, <code>mapState()</code>, or <code>mapActions()</code>:<br><em>è¯‘ï¼šå¦‚æœä½ è¿˜ä¸æ˜¯<code>setup()</code>å’Œ Composition API çš„ç†Ÿæ‚‰ï¼Œä¸ç”¨æ‹…å¿ƒï¼ŒPinia ä¹Ÿæ”¯æŒ<a href=\"https://vuex.vuejs.org/guide/state.html#the-mapstate-helper\">Vuex çš„<em>map helpers</em>ï¼ˆå¦‚ Vuexï¼‰</a>ã€‚ä½ å®šä¹‰å­˜å‚¨çš„æ–¹å¼ç›¸åŒï¼Œç„¶åä½¿ç”¨<code>mapStores()</code>, <code>mapState()</code>,æˆ–<code>mapActions()</code>ï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">const useCounterStore &#x3D; defineStore(&quot;counter&quot;, &#123;\n  state: () &#x3D;&gt; (&#123; count: 0 &#125;),\n  getters: &#123;\n    double: (state) &#x3D;&gt; state.count * 2,\n  &#125;,\n  actions: &#123;\n    increment() &#123;\n      this.count++;\n    &#125;,\n  &#125;,\n&#125;);\n\nconst useUserStore &#x3D; defineStore(&quot;user&quot;, &#123;\n  &#x2F;&#x2F; ...\n&#125;);\n\nexport default &#123;\n  computed: &#123;\n    &#x2F;&#x2F; other computed properties\n    &#x2F;&#x2F; ...\n    &#x2F;&#x2F; gives access to this.counterStore and this.userStore\n    ...mapStores(useCounterStore, useUserStore),\n    &#x2F;&#x2F; gives read access to this.count and this.double\n    ...mapState(useCounterStore, [&quot;count&quot;, &quot;double&quot;]),\n  &#125;,\n  methods: &#123;\n    &#x2F;&#x2F; gives access to this.increment()\n    ...mapActions(useCounterStore, [&quot;increment&quot;]),\n  &#125;,\n&#125;;</code></pre>\n\n<p>You will find more information about each <em>map helper</em> in the core concepts.<br><em>è¯‘ï¼šä½ å°†æ‰¾åˆ°æ›´å¤šå…³äºæ¯ä¸ª<em>map helper</em>çš„ä¿¡æ¯ã€‚</em></p>\n<p><strong>Why <em>Pinia</em></strong></p>\n<p><em>ä¸ºä»€ä¹ˆå« Pinia</em></p>\n<p>Pinia (pronounced <code>/piËnjÊŒ/</code>, like â€œpeenyaâ€ in English) is the closest word to <em>piÃ±a</em> (<em>pineapple</em> in Spanish) that is a valid package name. A pineapple is in reality a group of individual flowers that join together to create a multiple fruit. Similar to stores, each one is born individually, but they are all connected at the end. Itâ€™s also a delicious tropical fruit indigenous to South America.</p>\n<p><em>Pinia å‘éŸ³ <code>/piËnjÊŒ/</code>ï¼Œç±»ä¼¼äºè‹±è¯­ä¸­çš„â€œæŸ æª¬â€ï¼Œå®ƒæ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„åŒ…åã€‚ä¸€ä¸ªæŸ æª¬æ˜¯å®é™…ä¸Šæ˜¯ä¸€ç»„å•ä¸ªèŠ±æœµç»“åˆåœ¨ä¸€èµ·ï¼Œä»¥åˆ›å»ºå¤šä¸ªæ°´æœã€‚ä¸å­˜å‚¨ç›¸ä¼¼ï¼Œæ¯ä¸€ä¸ªéƒ½æ˜¯å•ç‹¬å‡ºç”Ÿçš„ï¼Œä½†æ˜¯ä»–ä»¬éƒ½æ˜¯æœ€ç»ˆè¿æ¥åœ¨ä¸€èµ·çš„ã€‚å®ƒä¹Ÿæ˜¯ä¸€ä¸ªåœ¨å—ç¾æ´²çš„ç¾é£Ÿã€‚</em></p>\n<p><strong>A more realistic example</strong></p>\n<p><em>è¯‘ï¼šæ›´çœŸå®çš„ä¾‹å­</em><br>Here is a more complete example of the API you will be using with Pinia <strong>with types even in JavaScript</strong>. For some people, this might be enough to get started without reading further but we still recommend checking the rest of the documentation or even skipping this example and coming back once you have read about all of the <em>Core Concepts</em>.<br><em>è¯‘ï¼šè¿™æ˜¯ä¸€ä¸ªæ›´å®Œæ•´çš„ä¾‹å­ï¼Œä½ å°†ä½¿ç”¨ Pinia<strong>ç±»å‹åœ¨ JavaScript</strong>ã€‚å¯¹äºä¸€äº›äººï¼Œè¿™å¯èƒ½æ˜¯è¶³å¤Ÿå¼€å§‹è€Œä¸éœ€è¦é˜…è¯»æ›´å¤šï¼Œä½†æˆ‘ä»¬ä»ç„¶å»ºè®®æ£€æŸ¥å…¶ä½™çš„æ–‡æ¡£æˆ–è·³è¿‡è¿™ä¸ªä¾‹å­ï¼Œç„¶åå›æ¥ä¸€æ¬¡ä½ å·²ç»é˜…è¯»äº†æ‰€æœ‰çš„<strong>æ ¸å¿ƒæ¦‚å¿µ</strong>ã€‚</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">import &#123; defineStore &#125; from &quot;pinia&quot;;\n\nexport const todos &#x3D; defineStore(&quot;todos&quot;, &#123;\n  state: () &#x3D;&gt; (&#123;\n    &#x2F;** @type &#123;&#123; text: string, id: number, isFinished: boolean &#125;[]&#125; *&#x2F;\n    todos: [],\n    &#x2F;** @type &#123;&#39;all&#39; | &#39;finished&#39; | &#39;unfinished&#39;&#125; *&#x2F;\n    filter: &quot;all&quot;,\n    &#x2F;&#x2F; type will be automatically inferred to number\n    &#x2F;&#x2F; ç±»å‹å°†è‡ªåŠ¨æ¨æ–­ä¸ºnumber\n    nextId: 0,\n  &#125;),\n  getters: &#123;\n    finishedTodos(state) &#123;\n      &#x2F;&#x2F; autocompletion! âœ¨\n      &#x2F;&#x2F; è‡ªåŠ¨å®Œæˆ\n      return state.todos.filter((todo) &#x3D;&gt; todo.isFinished);\n    &#125;,\n    unfinishedTodos(state) &#123;\n      return state.todos.filter((todo) &#x3D;&gt; !todo.isFinished);\n    &#125;,\n    &#x2F;**\n     * @returns &#123;&#123; text: string, id: number, isFinished: boolean &#125;[]&#125;\n     *&#x2F;\n    filteredTodos(state) &#123;\n      if (this.filter &#x3D;&#x3D;&#x3D; &quot;finished&quot;) &#123;\n        &#x2F;&#x2F; call other getters with autocompletion âœ¨\n        &#x2F;&#x2F; è°ƒç”¨å…¶ä»–gettersè‡ªåŠ¨å®Œæˆ\n        return this.finishedTodos;\n      &#125; else if (this.filter &#x3D;&#x3D;&#x3D; &quot;unfinished&quot;) &#123;\n        return this.unfinishedTodos;\n      &#125;\n      return this.todos;\n    &#125;,\n  &#125;,\n  actions: &#123;\n    &#x2F;&#x2F; any amount of arguments, return a promise or not\n    &#x2F;&#x2F; ä»»æ„æ•°é‡çš„å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªpromiseæˆ–ä¸\n    addTodo(text) &#123;\n      &#x2F;&#x2F; you can directly mutate the state\n      &#x2F;&#x2F; ä½ å¯ä»¥ç›´æ¥ä¿®æ”¹çŠ¶æ€\n      this.todos.push(&#123; text, id: this.nextId++, isFinished: false &#125;);\n    &#125;,\n  &#125;,\n&#125;);</code></pre>\n\n<p><strong>Comparison with Vuex</strong></p>\n<p><em>è¯‘ï¼šä¸ Vuex æ¯”è¾ƒ</em></p>\n<p>Pinia started out as an exploration of what the next iteration of Vuex could look like, incorporating many ideas from core team discussions for Vuex 5. Eventually, we realized that Pinia already implements most of what we wanted in Vuex 5, and decided to make it the new recommendation instead.<br><em>è¯‘ï¼šPinia å¼€å§‹äº†ä¸€ä¸ªæ¢ç´¢ Vuex çš„ä¸‹ä¸€ä¸ªè¿­ä»£ï¼Œå¹¶ä¸”å°†å¤§é‡çš„æƒ³æ³•ä» Vuex 5 çš„æ ¸å¿ƒå›¢é˜Ÿè®¨è®ºä¸­æå–ã€‚æœ€ç»ˆï¼Œæˆ‘ä»¬è®¤ä¸º Pinia å·²ç»å®ç°äº†å¤§éƒ¨åˆ†æˆ‘ä»¬æƒ³è¦çš„ Vuex 5ï¼Œå¹¶ä¸”å†³å®šæ”¹å˜å®ƒçš„æ¨èã€‚</em><br>Compared to Vuex, Pinia provides a simpler API with less ceremony, offers Composition-API-style APIs, and most importantly, has solid type inference support when used with TypeScript.<br><em>è¯‘ï¼šä¸ Vuex æ¯”è¾ƒï¼ŒPinia æä¾›äº†æ›´ç®€å•çš„ APIï¼Œæä¾›äº†ç»„åˆ API çš„ APIï¼Œå¹¶ä¸”åœ¨ä½¿ç”¨ TypeScript æ—¶æœ‰å®ä½“ç±»å‹æ”¯æŒã€‚</em></p>\n<p><strong>RFCs</strong></p>\n<p><em>è¯‘ï¼šRFCs</em></p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>RFCs æ¶µç›–äº† Vue çš„æœ€åŸºæœ¬çš„å››ä¸ªéƒ¨åˆ†ï¼Œæˆªè‡³ç›®å‰ä¸ºæ­¢ï¼Œå·²ç»æœ‰ 38 ä¸ª PR æäº¤ï¼ˆ26 ä¸ªä»åœ¨è®¨è®ºä¸­ï¼‰ï¼Œè¿™äº›æè®®ä¸­æ—¢æœ‰ Vue ä½œè€…è‡ªå·±çš„æè®®ï¼Œä¹Ÿæœ‰å¼€å‘è€…çš„æè®®ã€‚</p>\n<ul>\n<li>Vue core</li>\n<li>Vue Router</li>\n<li>Vuex</li>\n<li>Vue CLI</li>\n</ul></blockquote>\n<p>Initially Pinia didnâ€™t go through any RFC. I tested out ideas based on my experience developing applications, reading other peopleâ€™s code, working for clients who use Pinia, and answering questions on Discord.<br>This allowed me to provide a solution that works and is adapted to a variety of cases and application sizes. I used to publish often and made the library evolve while keeping its core API the same.<br><em>è¯‘ï¼šåˆå§‹ Pinia æ²¡æœ‰é€šè¿‡ä»»ä½• RFCã€‚æˆ‘æµ‹è¯•äº†åŸºäºæˆ‘çš„ç»éªŒå¼€å‘åº”ç”¨ç¨‹åºï¼Œé˜…è¯»å…¶ä»–äººçš„ä»£ç ï¼Œä¸ºä½¿ç”¨ Pinia çš„å®¢æˆ·å·¥ä½œï¼Œå¹¶åœ¨ Discord ä¸Šå›ç­”é—®é¢˜ã€‚è¿™è®©æˆ‘æä¾›äº†ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œå®ƒå·¥ä½œå¹¶é€‚åˆå„ç§æƒ…å†µå’Œåº”ç”¨ç¨‹åºå¤§å°ã€‚æˆ‘ç»å¸¸å‘å¸ƒï¼Œå¹¶åœ¨ä¿æŒæ ¸å¿ƒ API ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œä½¿åº“å‘å±•ã€‚</em><br>Now that Pinia has become the default state management solution, it is subject to the same RFC process as other core libraries in the Vue ecosystem and its API has entered a stable state.<br><em>è¯‘ï¼šç°åœ¨ï¼ŒPinia å·²ç»æˆä¸º Vue çš„æ ¸å¿ƒçŠ¶æ€ç®¡ç†è§£å†³æ–¹æ¡ˆï¼Œå®ƒä¸ Vue ç¤¾åŒºä¸­å…¶ä»–æ ¸å¿ƒåº“çš„ RFC è¿›è¡Œäº†ç›¸åŒçš„å¤„ç†ï¼Œå¹¶ä¸”å®ƒçš„ API å·²ç»è¿›å…¥äº†ä¸€ä¸ªç¨³å®šçŠ¶æ€ã€‚</em></p>\n<p><strong>Comparison with Vuex 3.x&#x2F;4.x</strong></p>\n<p><em>è¯‘ï¼šä¸ Vuex 3.x&#x2F;4.x æ¯”è¾ƒ</em></p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>Vuex 3.x is Vuex for Vue 2 while Vuex 4.x is for Vue 3<br>Vuex 3.x æ˜¯ Vuex 2 çš„ Vuexï¼Œè€Œ Vuex 4.x æ˜¯ Vue 3 çš„ Vuex<br>Pinia API is very different from Vuex â‰¤4, namely:<br><em>è¯‘ï¼šPinia API ä¸ Vuex 3.x&#x2F;4.x æ¯”è¾ƒï¼Œä¸»è¦åŒºåˆ«æ˜¯ï¼š</em></p></blockquote>\n<ul>\n<li><em>mutations</em> no longer exist. They were very often perceived as <strong><em>extremely</em> verbose</strong>. They initially brought devtools integration but that is no longer an issue.<br><code>- mutations ä¸å†å­˜åœ¨ã€‚å®ƒä»¬åˆå§‹ä¸ŠæŠ›äº†å¼€å‘å·¥å…·é›†æˆï¼Œä½†è¿™ä¸å†æ˜¯é—®é¢˜ã€‚</code></li>\n<li>No need to create custom complex wrappers to support TypeScript, everything is typed and the API is designed in a way to leverage TS type inference as much as possible.<br><code>- æ²¡æœ‰éœ€è¦åˆ›å»ºè‡ªå®šä¹‰å¤æ‚çš„åŒ…è£…æ¥æ”¯æŒTypeScriptï¼Œæ‰€æœ‰çš„éƒ½æ˜¯ç±»å‹åŒ–çš„ï¼ŒAPIè®¾è®¡äº†ä¸€ä¸ªè®©ä½ æœ€å¤§é™åº¦åœ°åˆ©ç”¨TSç±»å‹æ¨æ–­çš„æ–¹å¼ã€‚</code></li>\n<li>No more magic strings to inject, import the functions, call them, enjoy autocompletion!<br><code>- æ²¡æœ‰æ›´å¤šçš„é­”æ³•å­—ç¬¦ä¸²æ³¨å…¥ï¼Œå¯¼å…¥å‡½æ•°ï¼Œè°ƒç”¨å®ƒä»¬ï¼Œäº«å—è‡ªåŠ¨å®Œæˆï¼</code></li>\n<li>No need to dynamically add stores, they are all dynamic by default and you wonâ€™t even notice. Note you can still manually use a store to register it whenever you want but because it is automatic you donâ€™t need to worry about it.<br><code>- æ²¡æœ‰éœ€è¦åŠ¨æ€æ·»åŠ å­˜å‚¨ï¼Œå®ƒä»¬éƒ½æ˜¯é»˜è®¤çš„åŠ¨æ€çš„ï¼Œä½ ä¹Ÿä¸ä¼šå‘ç°ã€‚è¯·æ³¨æ„ï¼Œä½ ä»ç„¶å¯ä»¥æ‰‹åŠ¨ä½¿ç”¨å­˜å‚¨æ¥æ³¨å†Œå®ƒï¼Œä½†æ˜¯å› ä¸ºå®ƒæ˜¯è‡ªåŠ¨çš„ï¼Œä½ ä¸éœ€è¦æ‹…å¿ƒå®ƒã€‚</code></li>\n<li>No more nested structuring of <em>modules</em>. You can still nest stores implicitly by importing and <em>using</em> a store inside another but Pinia offers a flat structuring by design while still enabling ways of cross composition among stores. <strong>You can even have circular dependencies of stores</strong>.<br><code>- æ²¡æœ‰æ›´å¤šçš„åµŒå¥—ç»“æ„çš„_æ¨¡å—_ã€‚ä½ ä»ç„¶å¯ä»¥åµŒå¥—å­˜å‚¨é€šè¿‡å¯¼å…¥å¹¶ä½¿ç”¨å­˜å‚¨åœ¨å¦ä¸€ä¸ªå­˜å‚¨ä¸­ï¼Œä½†Piniaæä¾›äº†ä¸€ä¸ªå¹³é¢çš„ç»“æ„ï¼Œè€Œä¸”è¿˜å…è®¸åœ¨å­˜å‚¨ä¹‹é—´è·¨è¶Šç»„åˆã€‚**ä½ è¿˜å¯ä»¥æœ‰åœ†å½¢ä¾èµ–çš„å­˜å‚¨**ã€‚</code></li>\n<li>No <em>namespaced modules</em>. Given the flat architecture of stores, â€œnamespacingâ€ stores is inherent to how they are defined and you could say all stores are namespaced.<br><code>- æ²¡æœ‰_å‘½åç©ºé—´æ¨¡å—_ã€‚ç»™å®šå­˜å‚¨çš„å¹³é¢å»ºæ„ï¼Œâ€œå‘½åç©ºé—´â€å­˜å‚¨æ˜¯å› ä¸ºå®ƒä»¬å®šä¹‰çš„æ–¹å¼è€Œå…·æœ‰çš„ï¼Œä½ å¯ä»¥è¯´æ‰€æœ‰çš„å­˜å‚¨éƒ½æ˜¯å‘½åç©ºé—´ã€‚</code><br>For more detailed instructions on how to convert an existing Vuex â‰¤4 project to use Pinia, see the <a href=\"./cookbook/migration-vuex.md\">Migration from Vuex Guide</a>.<br><em>è¯‘ï¼šä¸ºäº†æ›´åŠ è¯¦ç»†çš„æŒ‡å¯¼å¦‚ä½•å°†ç°æœ‰çš„ Vuex â‰¤4 é¡¹ç›®è½¬æ¢ä¸ºä½¿ç”¨ Piniaï¼Œè¯·å‚é˜…<a href=\"./cookbook/migration-vuex.md\">Migration from Vuex Guide</a>ã€‚</em></li>\n</ul>\n<h2 id=\"èµ·æ­¥\"><a href=\"#èµ·æ­¥\" class=\"headerlink\" title=\"èµ·æ­¥\"></a><a href=\"https://pinia.vuejs.org/getting-started.html#installation\">èµ·æ­¥</a></h2><h3 id=\"Installation\"><a href=\"#Installation\" class=\"headerlink\" title=\"Installation\"></a>Installation</h3><p>Install <code>pinia</code> with your favorite package manager:<br><em>è¯‘ï¼šä½¿ç”¨ä½ å–œæ¬¢çš„åŒ…ç®¡ç†å™¨å®‰è£… <code>pinia</code> ï¼š</em></p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">yarn add pinia\n# or with npm\nnpm install pinia</code></pre>\n\n<div class=\"custom-quote tip\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12.01 15C12.01 14.5 12.01 14.5 12.01 14.5C12.04 13.75 13 13.46 14.04 12.2C14.41 11.74 14.69 11.41 14.86 10.85C15.15 9.95 14.92 9.18 14.86 9.02C14.8 8.79 14.52 8 13.72 7.46C13.06 7.02 12.42 7 12.14 7C11.9 7 11.36 7 10.78 7.3C10.28 7.56 9.98 7.9 9.83 8.1C9.24 8.82 9.06 9.63 9 10.06\"></path>\n<path stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 18H12.01\"></path>\n</svg></span>\n<p class=\"custom-quote-title\">TIP</p>\n<p>If your app is using Vue 2, you also need to install the composition api: <code>@vue/composition-api</code>. If you are using Nuxt, you should follow <a href=\"https://pinia.vuejs.org/ssr/nuxt.html\">these instructions</a>.<br><em>è¯‘ï¼šå¦‚æœä½ çš„åº”ç”¨ä½¿ç”¨ Vue 2ï¼Œä½ è¿˜éœ€è¦å®‰è£…ç»„åˆ apiï¼š<code>@vue/composition-api</code>ã€‚å¦‚æœä½ ä½¿ç”¨ Nuxtï¼Œä½ åº”è¯¥éµå¾ª<a href=\"https://pinia.vuejs.org/ssr/nuxt.html\">è¿™äº›æŒ‡å¯¼</a>ã€‚</em></p>\n</div>\n<p>If you are using the Vue CLI, you can instead give this <a href=\"https://github.com/wobsoriano/vue-cli-plugin-pinia\"><strong>unofficial plugin</strong></a> a try.<br>_è¯‘ï¼šå¦‚æœä½ ä½¿ç”¨ Vue CLIï¼Œä½ å¯ä»¥è¯•è¯•è¿™ä¸ª [<strong>éå®˜æ–¹æ’ä»¶</strong>](</p>\n<p>Create a pinia (the root store) and pass it to the app:<br><em>è¯‘ï¼šåˆ›å»ºä¸€ä¸ª pinia ï¼ˆæ ¹å­˜å‚¨ï¼‰å¹¶å°†å…¶ä¼ é€’ç»™åº”ç”¨ï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">import &#123; createPinia &#125; from &quot;pinia&quot;;\n\napp.use(createPinia());</code></pre>\n\n<p>If you are using Vue 2, you also need to install a plugin and inject the created <code>pinia</code> at the root of the app:<br><em>è¯‘ï¼šå¦‚æœä½ ä½¿ç”¨ Vue 2ï¼Œä½ è¿˜éœ€è¦å®‰è£…ä¸€ä¸ªæ’ä»¶å¹¶å°†åˆ›å»ºçš„ <code>pinia</code> æ³¨å…¥åˆ°åº”ç”¨çš„æ ¹ä¸­ï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">import &#123; createPinia, PiniaVuePlugin &#125; from &quot;pinia&quot;;\n\nVue.use(PiniaVuePlugin);\nconst pinia &#x3D; createPinia();\n\nnew Vue(&#123;\n  el: &quot;#app&quot;,\n  &#x2F;&#x2F; other options...\n  &#x2F;&#x2F; ...\n  &#x2F;&#x2F; note the same &#96;pinia&#96; instance can be used across multiple Vue apps on the same page\n  &#x2F;&#x2F; æ³¨æ„ï¼ŒåŒä¸€ä¸ª &#96;pinia&#96; å®ä¾‹å¯ä»¥åœ¨åŒä¸€ä¸ªé¡µé¢ä¸Šçš„å¤šä¸ª Vue åº”ç”¨ä¸­ä½¿ç”¨\n  pinia,\n&#125;);</code></pre>\n\n<p>This will also add devtools support. In Vue 3, some features like time traveling and editing are still not supported because vue-devtools doesnâ€™t expose the necessary APIs yet but the devtools have way more features and the developer experience as a whole is far superior. In Vue 2, Pinia uses the existing interface for Vuex (and can therefore not be used alongside it).<br><em>è¯‘ï¼šè¿™ä¹Ÿä¼šæ·»åŠ  devtools æ”¯æŒã€‚åœ¨ Vue 3 ä¸­ï¼ŒæŸäº›åŠŸèƒ½ï¼ˆä¾‹å¦‚æ—¶é—´æ—…è¡Œå’Œç¼–è¾‘ï¼‰ä»ç„¶ä¸æ”¯æŒï¼Œå› ä¸º vue-devtools ä¸æš´éœ²äº†å¿…è¦çš„ APIï¼Œä½†æ˜¯ devtools æœ‰æ›´å¤šçš„åŠŸèƒ½ï¼Œå¼€å‘è€…ä½“éªŒæ•´ä½“æ›´ä¼˜ã€‚åœ¨ Vue 2 ä¸­ï¼ŒPinia ä½¿ç”¨ç°æœ‰çš„ Vuex æ¥å£ï¼ˆå› æ­¤ä¸èƒ½ä¸å®ƒä¸€èµ·ä½¿ç”¨ï¼‰ã€‚</em></p>\n<h3 id=\"What-is-a-Store\"><a href=\"#What-is-a-Store\" class=\"headerlink\" title=\"What is a Store?\"></a>What is a Store?</h3><p>A Store (like Pinia) is an entity holding state and business logic that isnâ€™t bound to your Component tree. In other words, <strong>it hosts global state</strong>. Itâ€™s a bit like a component that is always there and that everybody can read off and write to. It has <strong>three concepts</strong>, the <a href=\"./core-concepts/state.md\">state</a>, <a href=\"./core-concepts/getters.md\">getters</a> and <a href=\"./core-concepts/actions.md\">actions</a> and itâ€™s safe to assume these concepts are the equivalent of <code>data</code>, <code>computed</code> and <code>methods</code> in components.<br><em>è¯‘ï¼šä¸€ä¸ªå­˜å‚¨ï¼ˆåƒ Piniaï¼‰æ˜¯ä¸€ä¸ªæŒæœ‰çŠ¶æ€å’Œä¸šåŠ¡é€»è¾‘çš„å®ä½“ï¼Œå®ƒä¸æ˜¯ç»‘å®šåˆ°ä½ çš„ç»„ä»¶æ ‘ä¸Šçš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>å®ƒæŒæœ‰å…¨å±€çŠ¶æ€</strong>ã€‚å®ƒæ˜¯ä¸€ä¸ªæ€»æ˜¯å­˜åœ¨çš„ç»„ä»¶ï¼Œæ¯ä¸ªäººéƒ½å¯ä»¥è¯»å–å¹¶å†™å…¥ã€‚å®ƒæœ‰ <strong>ä¸‰ä¸ªæ¦‚å¿µ</strong>ï¼Œ<a href=\"./core-concepts/state.md\">state</a>ï¼Œ<a href=\"./core-concepts/getters.md\">getters</a> å’Œ <a href=\"./core-concepts/actions.md\">actions</a>ï¼Œå¹¶ä¸”æˆ‘ä»¬å‡è®¾è¿™ä¸‰ä¸ªæ¦‚å¿µæ˜¯ç»„ä»¶çš„ <code>data</code>ï¼Œ<code>computed</code> å’Œ <code>methods</code> çš„ç­‰ä»·ã€‚</em></p>\n<h3 id=\"When-should-I-use-a-Store\"><a href=\"#When-should-I-use-a-Store\" class=\"headerlink\" title=\"When should I use a Store\"></a>When should I use a Store</h3><p>A store should contain data that can be accessed throughout your application. This includes data that is used in many places, e.g. User information that is displayed in the navbar, as well as data that needs to be preserved through pages, e.g. a very complicated multi-step form.<br><em>è¯‘ï¼šä¸€ä¸ªå­˜å‚¨åº”è¯¥åŒ…å«å¯ä»¥åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­è®¿é—®çš„æ•°æ®ã€‚è¿™åŒ…æ‹¬åœ¨å¤šä¸ªåœ°æ–¹ä½¿ç”¨çš„æ•°æ®ï¼Œä¾‹å¦‚åœ¨å¯¼èˆªæ ä¸­æ˜¾ç¤ºçš„ç”¨æˆ·ä¿¡æ¯ï¼Œä»¥åŠéœ€è¦åœ¨é¡µé¢ä¸­ä¿ç•™çš„æ•°æ®ï¼Œä¾‹å¦‚ä¸€ä¸ªå¤æ‚çš„å¤šæ­¥éª¤è¡¨å•ã€‚</em><br>On the other hand, you should avoid including in the store local data that could be hosted in a component instead, e.g. the visibility of an element local to a page.<br><em>è¯‘ï¼šå¦ä¸€æ–¹é¢ï¼Œä½ åº”è¯¥é¿å…åœ¨å­˜å‚¨ä¸­åŒ…å«åœ¨ç»„ä»¶ä¸­å­˜å‚¨çš„æœ¬åœ°æ•°æ®ï¼Œä¾‹å¦‚é¡µé¢ä¸­çš„ä¸€ä¸ªå…ƒç´ çš„å¯è§æ€§ã€‚</em><br>Not all applications need access to a global state, but if yours need one, Pinia will make your life easier.<br><em>è¯‘ï¼šä¸æ˜¯æ‰€æœ‰åº”ç”¨éƒ½éœ€è¦è®¿é—®å…¨å±€çŠ¶æ€ï¼Œä½†å¦‚æœä½ çš„åº”ç”¨éœ€è¦ä¸€ä¸ªï¼ŒPinia å°†ä½¿ä½ çš„ç”Ÿæ´»æ›´åŠ æ–¹ä¾¿ã€‚</em></p>\n<h2 id=\"æ ¸å¿ƒæ¦‚å¿µ\"><a href=\"#æ ¸å¿ƒæ¦‚å¿µ\" class=\"headerlink\" title=\"æ ¸å¿ƒæ¦‚å¿µ\"></a>æ ¸å¿ƒæ¦‚å¿µ</h2><h3 id=\"Store\"><a href=\"#Store\" class=\"headerlink\" title=\"Store\"></a>Store</h3><p><strong>Defining a Store</strong></p>\n<p><VueSchoolLink\n  href=\"https://vueschool.io/lessons/define-your-first-pinia-store\"\n  title=\"Learn how to define and use stores in Pinia\"\n/></p>\n<p>Before diving into core concepts, we need to know that a store is defined using <code>defineStore()</code> and that it requires a <strong>unique</strong> name, passed as the first argument:<br><em>è¯‘ï¼šåœ¨æ·±å…¥æ ¸å¿ƒæ¦‚å¿µä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ä¸€ä¸ªå­˜å‚¨ç”± <code>defineStore()</code> å®šä¹‰å¹¶ä¸”éœ€è¦ä¸€ä¸ª <strong>å”¯ä¸€çš„</strong> åç§°ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">import &#123; defineStore &#125; from &quot;pinia&quot;;\n\n&#x2F;&#x2F; useStore could be anything like useUser, useCart\n&#x2F;&#x2F; the first argument is a unique id of the store across your application\nexport const useStore &#x3D; defineStore(&quot;main&quot;, &#123;\n  &#x2F;&#x2F; other options...\n&#125;);</code></pre>\n\n<p>This <em>name</em>, also referred as <em>id</em>, is necessary and is used by Pinia to connect the store to the devtools. Naming the returned function <em>useâ€¦</em> is a convention across composables to make its usage idiomatic.<br>_è¯‘ï¼šè¿™ä¸ªåç§°ï¼Œä¹Ÿç§°ä¸º <em>id_ï¼Œæ˜¯å¿…éœ€çš„å¹¶ä¸”ç”¨äºè¿æ¥å­˜å‚¨åˆ° devtoolsã€‚å‘½åè¿”å›çš„å‡½æ•° <em>useâ€¦</em> æ˜¯ä¸€ä¸ªç»„åˆä½¿ç”¨çš„æƒ¯ä¾‹ï¼Œä½¿ç”¨å®ƒçš„ç”¨æ³•ç®€å•æ˜“æ‡‚ã€‚</em><br><strong>Using the store</strong></p>\n<p>We are <em>defining</em> a store because the store wonâ€™t be created until <code>useStore()</code> is called inside of <code>setup()</code>:<br><em>è¯‘ï¼šæˆ‘ä»¬æ­£åœ¨å®šä¹‰ä¸€ä¸ªå­˜å‚¨ï¼Œå› ä¸ºåªæœ‰åœ¨<code>setupï¼ˆï¼‰</code>å†…éƒ¨è°ƒç”¨<code>useStoreï¼ˆï¼‰</code>æ‰èƒ½åˆ›å»ºè¯¥å­˜å‚¨</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">import &#123; useStore &#125; from &quot;@&#x2F;stores&#x2F;counter&quot;;\n\nexport default &#123;\n  setup() &#123;\n    const store &#x3D; useStore();\n\n    return &#123;\n      &#x2F;&#x2F; you can return the whole store instance to use it in the template\n      &#x2F;&#x2F; ä½ å¯ä»¥åœ¨æ¨¡æ¿ä¸­è¿”å›æ•´ä¸ªå­˜å‚¨å®ä¾‹æ¥ä½¿ç”¨å®ƒ\n      store,\n    &#125;;\n  &#125;,\n&#125;;</code></pre>\n\n<p>You can define as many stores as you want and <strong>you should define each store in a different file</strong> to get the most out of pinia (like automatically allow your bundle to code split and TypeScript inference).<br><em>è¯‘ ï¼šä½ å¯ä»¥å®šä¹‰å¤šä¸ªå­˜å‚¨ï¼Œä½ åº”è¯¥åœ¨ä¸åŒçš„æ–‡ä»¶ä¸­å®šä¹‰æ¯ä¸ªå­˜å‚¨æ¥è·å¾— pinia çš„æœ€å¤§æ•ˆç”¨ï¼ˆä¾‹å¦‚è‡ªåŠ¨å…è®¸ä½ çš„ bundle åˆ†å‰²å’Œ TypeScript æ¨æ–­ï¼‰ã€‚</em><br>If you are not using <code>setup</code> components yet, <a href=\"https://pinia.vuejs.org/cookbook/options-api.html\">you can still use Pinia with <em>map helpers</em></a>.<br><em>è¯‘ï¼šå¦‚æœä½ è¿˜æ²¡æœ‰ä½¿ç”¨ <code>setup</code> ç»„ä»¶ï¼Œä½ ä»ç„¶å¯ä»¥ä½¿ç”¨ Pinia ä¸ [map åŠ©æ‰‹]ï¼ˆ<a href=\"https://pinia.vuejs.org/cookbook/options-api.html%EF%BC%89%E3%80%82\">https://pinia.vuejs.org/cookbook/options-api.htmlï¼‰ã€‚</a></em><br>Once the store is instantiated, you can access any property defined in <code>state</code>, <code>getters</code>, and <code>actions</code> directly on the store. We will see these in detail in the next pages but autocompletion will help you.<br><em>è¯‘ï¼šä¸€æ—¦å­˜å‚¨è¢«å®ä¾‹åŒ–ï¼Œä½ å¯ä»¥ç›´æ¥åœ¨å­˜å‚¨ä¸Šè®¿é—® <code>state</code>ï¼Œ<code>getters</code> å’Œ <code>actions</code> ä¸­å®šä¹‰çš„å±æ€§ã€‚æˆ‘ä»¬å°†åœ¨ä¸‹ä¸€é¡µä¸­è¯¦ç»†è®²è§£ï¼Œä½†æ˜¯è‡ªåŠ¨è¡¥å…¨å°†å¸®åŠ©ä½ ã€‚</em><br>Note that <code>store</code> is an object wrapped with <code>reactive</code>, meaning there is no need to write <code>.value</code> after getters but, like <code>props</code> in <code>setup</code>, <strong>we cannot destructure it</strong>:<br><em>è¯‘ï¼šè¯·æ³¨æ„ï¼Œå­˜å‚¨æ˜¯ä¸€ä¸ª <code>reactive</code> åŒ…è£…çš„å¯¹è±¡ï¼Œå› æ­¤ä¸éœ€è¦å†™ <code>.value</code> åé¢çš„ gettersï¼Œä½†æ˜¯ï¼Œåƒ <code>setup</code> ä¸­çš„ <code>props</code>ï¼Œæˆ‘ä»¬ä¸èƒ½è§£æ„å®ƒ</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">export default defineComponent(&#123;\n  setup() &#123;\n    const store &#x3D; useStore();\n    &#x2F;&#x2F; âŒ This won&#39;t work because it breaks reactivity it&#39;s the same as destructuring from &#96;props&#96;\n    &#x2F;&#x2F; è¿™ä¸ä¼šå·¥ä½œï¼Œå› ä¸ºå®ƒä¼šç ´åå¯è§‚å¯Ÿæ€§ï¼Œå®ƒæ˜¯ç›¸åŒçš„ä¸º &#96;props&#96; æ„é€ çš„\n    const &#123; name, doubleCount &#125; &#x3D; store;\n\n    name; &#x2F;&#x2F; &quot;eduardo&quot;\n    doubleCount; &#x2F;&#x2F; 2\n\n    return &#123;\n      &#x2F;&#x2F; will always be &quot;eduardo&quot;\n      &#x2F;&#x2F; å°†å§‹ç»ˆæ˜¯ &quot;eduardo&quot;\n      name,\n      &#x2F;&#x2F; will always be 2\n      &#x2F;&#x2F; å°†å§‹ç»ˆæ˜¯ 2\n      doubleCount,\n      &#x2F;&#x2F; this one will be reactive\n      &#x2F;&#x2F; è¿™ä¸ªå°†æ˜¯å¯è§‚å¯Ÿçš„\n      doubleValue: computed(() &#x3D;&gt; store.doubleCount),\n    &#125;;\n  &#125;,\n&#125;);</code></pre>\n\n<p>In order to extract properties from the store while keeping its reactivity, you need to use <code>storeToRefs()</code>. It will create refs for every reactive property. This is useful when you are only using state from the store but not calling any action. Note you can destructure actions directly from the store as they are bound to the store itself too:<br><em>è¯‘ï¼šä¸ºäº†ä»å­˜å‚¨ä¸­æå–å±æ€§è€Œä¿æŒå…¶å¯è§‚å¯Ÿæ€§ï¼Œä½ éœ€è¦ä½¿ç”¨ <code>storeToRefs()</code>ã€‚å®ƒä¼šåˆ›å»ºæ¯ä¸ªå¯è§‚å¯Ÿå±æ€§çš„ refã€‚è¿™å¯¹äºåªä½¿ç”¨å­˜å‚¨ä¸­çš„çŠ¶æ€ä½†ä¸è°ƒç”¨ä»»ä½•è¡Œä¸ºæ—¶éå¸¸æœ‰ç”¨ã€‚è¯·æ³¨æ„ï¼Œä½ å¯ä»¥ç›´æ¥ä»å­˜å‚¨ä¸­è§£æ„ actionsï¼Œå› ä¸ºå®ƒä»¬éƒ½æ˜¯ç»‘å®šåˆ°å­˜å‚¨æœ¬èº«çš„ã€‚</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">import &#123; storeToRefs &#125; from &quot;pinia&quot;;\n\nexport default defineComponent(&#123;\n  setup() &#123;\n    const store &#x3D; useStore();\n    &#x2F;&#x2F; &#96;name&#96; and &#96;doubleCount&#96; are reactive refs\n    &#x2F;&#x2F; This will also create refs for properties added by plugins\n    &#x2F;&#x2F; but skip any action or non reactive (non ref&#x2F;reactive) property\n    const &#123; name, doubleCount &#125; &#x3D; storeToRefs(store);\n    &#x2F;&#x2F; the increment action can be just extracted\n    const &#123; increment &#125; &#x3D; store;\n\n    return &#123;\n      name,\n      doubleCount,\n      increment,\n    &#125;;\n  &#125;,\n&#125;);</code></pre>\n\n<h3 id=\"State\"><a href=\"#State\" class=\"headerlink\" title=\"State\"></a>State</h3><p><VueSchoolLink\n  href=\"https://vueschool.io/lessons/access-state-from-a-pinia-store\"\n  title=\"Learn all about state in Pinia\"\n/></p>\n<p>The state is, most of the time, the central part of your store. People often start by defining the state that represents their app. In Pinia the state is defined as a function that returns the initial state. This allows Pinia to work in both Server and Client Side.<br><em>å¤§å¤šæ•°æ—¶å€™ï¼Œstateæ˜¯ä½ storeçš„ä¸­å¿ƒã€‚äººä»¬é€šå¸¸ä»å®šä¹‰ä»£è¡¨å…¶åº”ç”¨ç¨‹åºçš„çŠ¶æ€å¼€å§‹ã€‚åœ¨Piniaä¸­ï¼ŒçŠ¶æ€å®šä¹‰ä¸ºè¿”å›åˆå§‹çŠ¶æ€çš„å‡½æ•°ã€‚è¿™å…è®¸Piniaåœ¨æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯éƒ½å·¥ä½œã€‚</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">import &#123; defineStore &#125; from &quot;pinia&quot;;\n\nconst useStore &#x3D; defineStore(&quot;storeId&quot;, &#123;\n  &#x2F;&#x2F; arrow function recommended for full type inference\n  state: () &#x3D;&gt; &#123;\n    return &#123;\n      &#x2F;&#x2F; all these properties will have their type inferred automatically\n      counter: 0,\n      name: &quot;Eduardo&quot;,\n      isAdmin: true,\n    &#125;;\n  &#125;,\n&#125;);</code></pre>\n\n<div class=\"custom-quote tip\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12.01 15C12.01 14.5 12.01 14.5 12.01 14.5C12.04 13.75 13 13.46 14.04 12.2C14.41 11.74 14.69 11.41 14.86 10.85C15.15 9.95 14.92 9.18 14.86 9.02C14.8 8.79 14.52 8 13.72 7.46C13.06 7.02 12.42 7 12.14 7C11.9 7 11.36 7 10.78 7.3C10.28 7.56 9.98 7.9 9.83 8.1C9.24 8.82 9.06 9.63 9 10.06\"></path>\n<path stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 18H12.01\"></path>\n</svg></span>\n<p class=\"custom-quote-title\">TIP</p>\n<p>If you are using Vue 2, the data you create in <code>state</code> follows the same rules as the <code>data</code> in a Vue instance, ie the state object must be plain and you need to call <code>Vue.set()</code> when <strong>adding new</strong> properties to it. <strong>See also: <a href=\"https://v2.vuejs.org/v2/api/#data\">Vue#data</a></strong>.<br><em>å¦‚æœä½ ä½¿ç”¨ Vue 2ï¼Œåœ¨ <code>state</code> ä¸­åˆ›å»ºçš„æ•°æ®éµå¾ª Vue å®ä¾‹ä¸­çš„ <code>data</code> çš„è§„åˆ™ï¼Œå³ state å¯¹è±¡å¿…é¡»æ˜¯çº¯ç²¹çš„ï¼Œå¹¶ä¸”éœ€è¦åœ¨ <strong>æ·»åŠ æ–°çš„</strong> å±æ€§æ—¶è°ƒç”¨ <code>Vue.set()</code>ã€‚è¯·å‚è§ <a href=\"https://v2.vuejs.org/v2/api/#data\">Vue#data</a>ã€‚</em></p>\n</div>\n<p><strong>Accessing the <code>state</code></strong></p>\n<p>By default, you can directly read and write to the state by accessing it through the <code>store</code> instance:<br><em>é»˜è®¤æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥ç›´æ¥è¯»å–å’Œå†™å…¥çŠ¶æ€ï¼Œé€šè¿‡è®¿é—® <code>store</code> å®ä¾‹æ¥è®¿é—®å®ƒï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">const store &#x3D; useStore();\n\nstore.counter++;</code></pre>\n\n<p><strong>Resetting the state</strong></p>\n<p>You can <em>reset</em> the state to its initial value by calling the <code>$reset()</code> method on the store:<br><em>ä½ å¯ä»¥é€šè¿‡è°ƒç”¨ <code>$reset()</code> æ–¹æ³•æ¥é‡ç½®çŠ¶æ€ï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">const store &#x3D; useStore();\n\nstore.$reset();</code></pre>\n\n<p><strong>Usage with the Options API</strong></p>\n<p><VueSchoolLink\n  href=\"https://vueschool.io/lessons/access-pinia-state-in-the-options-api\"\n  title=\"Access Pinia State via the Options API\"\n/></p>\n<p>For the following examples, you can assume the following store was created:<br><em>ä¸ºäº†ä¸‹é¢çš„ä¾‹å­ï¼Œä½ å¯ä»¥å‡è®¾ä»¥ä¸‹çš„å­˜å‚¨å·²åˆ›å»ºï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">&#x2F;&#x2F; Example File Path:\n&#x2F;&#x2F; .&#x2F;src&#x2F;stores&#x2F;counterStore.js\n\nimport &#123; defineStore &#125; from &quot;pinia&quot;;\n\nconst useCounterStore &#x3D; defineStore(&quot;counterStore&quot;, &#123;\n  state: () &#x3D;&gt; (&#123;\n    counter: 0,\n  &#125;),\n&#125;);</code></pre>\n\n<p>If you are not using the Composition API, and you are using <code>computed</code>, <code>methods</code>, â€¦, you can use the <code>mapState()</code> helper to map state properties as readonly computed properties:<br><em>å¦‚æœä½ ä¸ä½¿ç”¨ Composition APIï¼Œå¹¶ä¸”ä½¿ç”¨ <code>computed</code>ã€<code>methods</code> ç­‰ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>mapState()</code> å¸®åŠ©å™¨æ¥æ˜ å°„çŠ¶æ€å±æ€§ä¸ºåªè¯»çš„è®¡ç®—å±æ€§ï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">import &#123; mapState &#125; from &#39;pinia&#39;\nimport &#123; useCounterStore &#125; from &#39;..&#x2F;stores&#x2F;counterStore&#39;\n\nexport default &#123;\n  computed: &#123;\n    &#x2F;&#x2F; gives access to this.counter inside the component\n    &#x2F;&#x2F; same as reading from store.counter\n    ...mapState(useCounterStore, [&#39;counter&#39;])\n    &#x2F;&#x2F; same as above but registers it as this.myOwnName\n    ...mapState(useCounterStore, &#123;\n      myOwnName: &#39;counter&#39;,\n      &#x2F;&#x2F; you can also write a function that gets access to the store\n      double: store &#x3D;&gt; store.counter * 2,\n      &#x2F;&#x2F; it can have access to &#96;this&#96; but it won&#39;t be typed correctly...\n      magicValue(store) &#123;\n        return store.someGetter + this.counter + this.double\n      &#125;,\n    &#125;),\n  &#125;,\n&#125;</code></pre>\n\n<p><strong>Modifiable state</strong></p>\n<p>If you want to be able to write to these state properties (e.g. if you have a form), you can use <code>mapWritableState()</code> instead. Note you cannot pass a function like with <code>mapState()</code>:<br><em>å¦‚æœä½ æƒ³è¦å†™å…¥è¿™äº›çŠ¶æ€å±æ€§ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªè¡¨å•ï¼‰ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>mapWritableState()</code>ã€‚æ³¨æ„ï¼Œä½ ä¸èƒ½ä¼ é€’ä¸€ä¸ªå‡½æ•°ç±»ä¼¼äº <code>mapState()</code>ï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">import &#123; mapWritableState &#125; from &#39;pinia&#39;\nimport &#123; useCounterStore &#125; from &#39;..&#x2F;stores&#x2F;counterStore&#39;\n\nexport default &#123;\n  computed: &#123;\n    &#x2F;&#x2F; gives access to this.counter inside the component and allows setting it\n    &#x2F;&#x2F; this.counter++\n    &#x2F;&#x2F; same as reading from store.counter\n    ...mapWritableState(useCounterStore, [&#39;counter&#39;])\n    &#x2F;&#x2F; same as above but registers it as this.myOwnName\n    ...mapWritableState(useCounterStore, &#123;\n      myOwnName: &#39;counter&#39;,\n    &#125;),\n  &#125;,\n&#125;</code></pre>\n\n<div class=\"custom-quote tip\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12.01 15C12.01 14.5 12.01 14.5 12.01 14.5C12.04 13.75 13 13.46 14.04 12.2C14.41 11.74 14.69 11.41 14.86 10.85C15.15 9.95 14.92 9.18 14.86 9.02C14.8 8.79 14.52 8 13.72 7.46C13.06 7.02 12.42 7 12.14 7C11.9 7 11.36 7 10.78 7.3C10.28 7.56 9.98 7.9 9.83 8.1C9.24 8.82 9.06 9.63 9 10.06\"></path>\n<path stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 18H12.01\"></path>\n</svg></span>\n<p class=\"custom-quote-title\">TIP</p>\n<p>You donâ€™t need <code>mapWritableState()</code> for collections like arrays unless you are replacing the whole array with <code>cartItems = []</code>, <code>mapState()</code> still allows you to call methods on your collections.<br><em>æ³¨æ„ï¼Œä½ ä¸éœ€è¦ <code>mapWritableState()</code> ä¸ºé›†åˆç±»å‹ï¼ˆä¾‹å¦‚æ•°ç»„ï¼‰ï¼Œé™¤éä½ æƒ³è¦æ›¿æ¢æ•´ä¸ªæ•°ç»„ä¸º <code>cartItems = []</code>ï¼Œ<code>mapState()</code> ä»ç„¶å…è®¸ä½ è°ƒç”¨é›†åˆçš„æ–¹æ³•ã€‚</em></p>\n</div>\n<p><strong>Mutating the state</strong></p>\n<!-- TODO: disable this with `strictMode` -->\n\n<p>Apart from directly mutating the store with <code>store.counter++</code>, you can also call the <code>$patch</code> method. It allows you to apply multiple changes at the same time with a partial <code>state</code> object:<br><em>é™¤äº†ç›´æ¥é€šè¿‡ <code>store.counter++</code> æ¥ä¿®æ”¹å­˜å‚¨ï¼Œä½ ä¹Ÿå¯ä»¥è°ƒç”¨ <code>$patch()</code> æ–¹æ³•ã€‚å®ƒå…è®¸ä½ åŒæ—¶ä½¿ç”¨ä¸€ä¸ªéƒ¨åˆ† <code>state</code> å¯¹è±¡æ¥åº”ç”¨å¤šä¸ªå˜æ›´ï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">store.$patch(&#123;\n  counter: store.counter + 1,\n  name: &quot;Abalam&quot;,\n&#125;);</code></pre>\n\n<p>However, some mutations are really hard or costly to apply with this syntax: any collection modification (e.g. pushing, removing, splicing an element from an array) requires you to create a new collection. Because of this, the <code>$patch</code> method also accepts a function to group this kind of mutations that are difficult to apply with a patch object:<br><em>ä½†æ˜¯ï¼Œä¸€äº›å˜æ›´éå¸¸éš¾æˆ–è€…æ˜‚è´µåœ°åº”ç”¨ï¼Œå› ä¸ºå®ƒä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„é›†åˆã€‚å› æ­¤ï¼Œ<code>$patch</code> æ–¹æ³•ä¹Ÿæ¥å—ä¸€ä¸ªå‡½æ•°æ¥ç»„ç»‡è¿™ç§éš¾ä»¥åº”ç”¨çš„å˜æ›´ï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">cartStore.$patch((state) &#x3D;&gt; &#123;\n  state.items.push(&#123; name: &quot;shoes&quot;, quantity: 1 &#125;);\n  state.hasChanged &#x3D; true;\n&#125;);</code></pre>\n\n<!-- TODO: disable this with `strictMode`, `{ noDirectPatch: true }` -->\n\n<p>The main difference here is that <code>$patch()</code> allows you to group multiple changes into one single entry in the devtools. Note <strong>both, direct changes to <code>state</code> and <code>$patch()</code> appear in the devtools</strong> and can be time travelled (not yet in Vue 3).<br>_ä¸»è¦çš„åŒºåˆ«æ˜¯ï¼Œ<code>$patch()</code> å…è®¸ä½ å°†å¤šä¸ªå˜æ›´ç»„æˆä¸€ä¸ªå•ç‹¬çš„æ¡ç›®åœ¨ devtools ä¸­ã€‚æ³¨æ„ **ä¸¤è€…éƒ½ä¼šåœ¨ devtools ä¸­å‡ºç°ï¼Œå¹¶ä¸”å¯ä»¥è¢«æ—¶é—´è½´è¿½è¸ªï¼ˆå°šæœªåœ¨ Vue 3 ä¸­ï¼‰ã€‚_<br><strong>Replacing the <code>state</code></strong></p>\n<p>You can replace the whole state of a store by setting its <code>$state</code> property to a new object:<br><em>ä½ å¯ä»¥é€šè¿‡è®¾ç½®å­˜å‚¨çš„ <code>$state</code> å±æ€§æ¥æ›¿æ¢å®ƒçš„çŠ¶æ€ï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">store.$state &#x3D; &#123; counter: 666, name: &quot;Paimon&quot; &#125;;</code></pre>\n\n<p>You can also replace the whole state of your application by changing the <code>state</code> of the <code>pinia</code> instance. This is used during <a href=\"../ssr/#state-hydration\">SSR for hydration</a>.<br><em>ä½ ä¹Ÿå¯ä»¥é€šè¿‡æ›´æ”¹ <code>pinia</code> å®ä¾‹çš„ <code>state</code> æ¥æ›¿æ¢æ•´ä¸ªåº”ç”¨çš„çŠ¶æ€ã€‚è¿™ç”¨äº <a href=\"../ssr/#state-hydration\">SSR for hydration</a>ã€‚</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">pinia.state.value &#x3D; &#123;&#125;;</code></pre>\n\n<p><strong>Subscribing to the state</strong></p>\n<p>You can watch the state and its changes through the <code>$subscribe()</code> method of a store, similar to Vuexâ€™s <a href=\"https://vuex.vuejs.org/api/#subscribe\">subscribe method</a>. The advantage of using <code>$subscribe()</code> over a regular <code>watch()</code> is that <em>subscriptions</em> will trigger only once after <em>patches</em> (e.g. when using the function version from above).<br><em>ä½ å¯ä»¥é€šè¿‡å­˜å‚¨çš„ <code>$subscribe()</code> æ–¹æ³•æ¥è®¢é˜…çŠ¶æ€ï¼Œä¸ Vuex çš„ <a href=\"https://vuex.vuejs.org/api/#subscribe\">subscribe æ–¹æ³•</a> ç±»ä¼¼ã€‚ä½¿ç”¨ <code>$subscribe()</code> æ–¹æ³•æ¥è®¢é˜…çŠ¶æ€ï¼Œä¼˜åŠ¿åœ¨äºå®ƒä¼šåœ¨å˜æ›´ååªè§¦å‘ä¸€æ¬¡è®¢é˜…ï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨ä¸Šé¢çš„å‡½æ•°ç‰ˆæœ¬ï¼‰ã€‚</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">cartStore.$subscribe((mutation, state) &#x3D;&gt; &#123;\n  &#x2F;&#x2F; import &#123; MutationType &#125; from &#39;pinia&#39;\n  mutation.type; &#x2F;&#x2F; &#39;direct&#39; | &#39;patch object&#39; | &#39;patch function&#39;\n  &#x2F;&#x2F; same as cartStore.$id\n  mutation.storeId; &#x2F;&#x2F; &#39;cart&#39;\n  &#x2F;&#x2F; only available with mutation.type &#x3D;&#x3D;&#x3D; &#39;patch object&#39;\n  mutation.payload; &#x2F;&#x2F; patch object passed to cartStore.$patch()\n\n  &#x2F;&#x2F; persist the whole state to the local storage whenever it changes\n  localStorage.setItem(&quot;cart&quot;, JSON.stringify(state));\n&#125;);</code></pre>\n\n<p>By default, <em>state subscriptions</em> are bound to the component where they are added (if the store is inside a componentâ€™s <code>setup()</code>). Meaning, they will be automatically removed when the component is unmounted. If you want to keep them after the component is unmounted, pass <code>&#123; detached: true &#125;</code> as the second argument to <em>detach</em> the <em>state subscription</em> from the current component:<br><em>é»˜è®¤æƒ…å†µä¸‹ï¼Œ_çŠ¶æ€è®¢é˜…_ä¼šç»‘å®šåˆ°æ·»åŠ å®ƒçš„ç»„ä»¶ï¼ˆå¦‚æœå­˜å‚¨åœ¨ç»„ä»¶çš„ <code>setup()</code> ä¸­ï¼‰ã€‚æ„å‘³ç€ï¼Œå®ƒä¼šåœ¨ç»„ä»¶å¸è½½åè‡ªåŠ¨åˆ é™¤ã€‚å¦‚æœä½ æƒ³è¦åœ¨ç»„ä»¶å¸è½½åä¿æŒå®ƒä»¬ï¼Œå¯ä»¥å°† <code>&#123; detached: true &#125;</code> ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ç»™ <em>detach</em> <em>çŠ¶æ€è®¢é˜…</em> ä»å½“å‰ç»„ä»¶ï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">export default &#123;\n  setup() &#123;\n    const someStore &#x3D; useSomeStore();\n\n    &#x2F;&#x2F; this subscription will be kept after the component is unmounted\n    someStore.$subscribe(callback, &#123; detached: true &#125;);\n\n    &#x2F;&#x2F; ...\n  &#125;,\n&#125;;</code></pre>\n\n<div class=\"custom-quote tip\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12.01 15C12.01 14.5 12.01 14.5 12.01 14.5C12.04 13.75 13 13.46 14.04 12.2C14.41 11.74 14.69 11.41 14.86 10.85C15.15 9.95 14.92 9.18 14.86 9.02C14.8 8.79 14.52 8 13.72 7.46C13.06 7.02 12.42 7 12.14 7C11.9 7 11.36 7 10.78 7.3C10.28 7.56 9.98 7.9 9.83 8.1C9.24 8.82 9.06 9.63 9 10.06\"></path>\n<path stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 18H12.01\"></path>\n</svg></span>\n<p class=\"custom-quote-title\">TIP</p>\n<p>You can watch the whole state on the <code>pinia</code> instance:<br>ä½ å¯ä»¥ç›‘å¬æ•´ä¸ªpiniaå®ä¾‹çš„çŠ¶æ€ï¼Œè¿™ä¸ªçŠ¶æ€æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«äº†æ‰€æœ‰çš„storeçš„çŠ¶æ€ã€‚</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">watch(\n  pinia.state,\n  (state) &#x3D;&gt; &#123;\n    &#x2F;&#x2F; persist the whole state to the local storage whenever it changes\n    localStorage.setItem(&quot;piniaState&quot;, JSON.stringify(state));\n  &#125;,\n  &#123; deep: true &#125;\n);</code></pre>\n\n</p>\n</div>\n<h2 id=\"Getters\"><a href=\"#Getters\" class=\"headerlink\" title=\"Getters\"></a>Getters</h2><p><VueSchoolLink\n  href=\"https://vueschool.io/lessons/getters-in-pinia\"\n  title=\"Learn all about getters in Pinia\"\n/></p>\n<p>Getters are exactly the equivalent of <a href=\"https://v3.vuejs.org/guide/reactivity-computed-watchers.html#computed-values\">computed values</a> for the state of a Store. They can be defined with the <code>getters</code> property in <code>defineStore()</code>. They receive the <code>state</code> as the first parameter <strong>to encourage</strong> the usage of arrow function:<br><em>è·å–å™¨æ˜¯çŠ¶æ€çš„è®¡ç®—å€¼ã€‚å®ƒä»¬å¯ä»¥é€šè¿‡ <code>defineStore()</code> ä¸­çš„ <code>getters</code> å±æ€§æ¥å®šä¹‰ã€‚å®ƒä»¬ä¼šæ¥æ”¶ <code>state</code>ï¼ˆä½¿ç”¨ç®­å¤´å‡½æ•°ï¼‰ ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">export const useStore &#x3D; defineStore(&#39;main&#39;, &#123;\n  state: () &#x3D;&gt; (&#123;\n    counter: 0,\n  &#125;),\n  getters: &#123;\n    doubleCount: (state) &#x3D;&gt; state.counter * 2,\n  &#125;,\n&#125;)</code></pre>\n\n<p>Most of the time, getters will only rely on the state, however, they might need to use other getters. Because of this, we can get access to the <em>whole store instance</em> through <code>this</code> when defining a regular function <strong>but it is necessary to define the type of the return type (in TypeScript)</strong>. This is due to a known limitation in TypeScript and <strong>doesnâ€™t affect getters defined with an arrow function nor getters not using <code>this</code></strong>:<br><em>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè·å–å™¨åªä¾èµ–äºçŠ¶æ€ï¼Œä½†å®ƒä»¬å¯èƒ½éœ€è¦ä½¿ç”¨å…¶ä»–è·å–å™¨ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>this</code> è®¿é—®åˆ°æ•´ä¸ªå­˜å‚¨å®ä¾‹ï¼ˆä½†æ˜¯éœ€è¦åœ¨TypeScriptä¸­å®šä¹‰è¿”å›ç±»å‹ï¼‰ï¼Œè¿™æ˜¯å› ä¸ºå·²çŸ¥çš„é™åˆ¶ï¼Œä¸å½±å“ä½¿ç”¨ç®­å¤´å‡½æ•°æˆ–ä¸ä½¿ç”¨<code>this</code>çš„è·å–å™¨ï¼š</em></p>\n<pre class=\"line-numbers language-typescript\" data-language=\"typescript\"><code class=\"language-typescript\">export const useStore &#x3D; defineStore(&#39;main&#39;, &#123;\n  state: () &#x3D;&gt; (&#123;\n    counter: 0,\n  &#125;),\n  getters: &#123;\n    &#x2F;&#x2F; automatically infers the return type as a number\n    &#x2F;&#x2F; è‡ªåŠ¨æ¨æ–­è¿”å›ç±»å‹ä¸ºæ•°å­—\n    doubleCount(state) &#123;\n      return state.counter * 2\n    &#125;,\n    &#x2F;&#x2F; the return type **must** be explicitly set\n    &#x2F;&#x2F;  è¿”å›ç±»å‹ **å¿…é¡»** è¢«æ˜¾å¼è®¾ç½®\n    doublePlusOne(): number &#123;\n      &#x2F;&#x2F; autocompletion and typings for the whole store âœ¨\n      &#x2F;&#x2F; å¯¹äºæ•´ä¸ªstoreè‡ªåŠ¨å®Œæˆå’Œç±»å‹æ¨æ–­ âœ¨\n      return this.doubleCount + 1\n    &#125;,\n  &#125;,\n&#125;)</code></pre>\n\n<p>Then you can access the getter directly on the store instance:<br><em>ç„¶åä½ å¯ä»¥ç›´æ¥åœ¨å­˜å‚¨å®ä¾‹ä¸Šè®¿é—®è·å–å™¨ï¼š</em></p>\n<pre class=\"line-numbers language-typescript\" data-language=\"typescript\"><code class=\"language-typescript\">&lt;template&gt;\n  &lt;p&gt;Double count is &#123;&#123; store.doubleCount &#125;&#125;&lt;&#x2F;p&gt;\n&lt;&#x2F;template&gt;\n\n&lt;script&gt;\nexport default &#123;\n  setup() &#123;\n    const store &#x3D; useStore()\n\n    return &#123; store &#125;\n  &#125;,\n&#125;\n&lt;&#x2F;script&gt;</code></pre>\n\n<h2 id=\"Accessing-other-getters\"><a href=\"#Accessing-other-getters\" class=\"headerlink\" title=\"Accessing other getters\"></a>Accessing other getters</h2><p>As with computed properties, you can combine multiple getters. Access any other getter via <code>this</code>. Even if you are not using TypeScript, you can hint your IDE for types with the <a href=\"https://jsdoc.app/tags-returns.html\">JSDoc</a>:<br><em>å¦‚åŒè®¡ç®—å±æ€§ï¼Œä½ å¯ä»¥å°†å¤šä¸ªè·å–å™¨ç»„åˆåœ¨ä¸€èµ·ã€‚é€šè¿‡ <code>this</code> è®¿é—®å…¶ä»–è·å–å™¨ã€‚å³ä½¿ä½ ä¸ä½¿ç”¨TypeScriptï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡<a href=\"https://jsdoc.app/tags-returns.html\">JSDoc</a>æç¤ºä½ çš„IDEç±»å‹ï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">export const useStore &#x3D; defineStore(&#39;main&#39;, &#123;\n  state: () &#x3D;&gt; (&#123;\n    counter: 0,\n  &#125;),\n  getters: &#123;\n    &#x2F;&#x2F; type is automatically inferred because we are not using &#96;this&#96;\n    &#x2F;&#x2F; ç±»å‹è‡ªåŠ¨æ¨æ–­ï¼Œå› ä¸ºæˆ‘ä»¬ä¸ä½¿ç”¨&#96;this&#96;\n    doubleCount: (state) &#x3D;&gt; state.counter * 2,\n    &#x2F;&#x2F; here we need to add the type ourselves (using JSDoc in JS). We can also\n    &#x2F;&#x2F; use this to document the getter\n    &#x2F;&#x2F; åœ¨è¿™é‡Œæˆ‘ä»¬éœ€è¦è‡ªå·±æ·»åŠ ç±»å‹ï¼ˆä½¿ç”¨JSDocåœ¨JSï¼‰ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨è¿™ä¸ªæ¥æè¿°è·å–å™¨\n    &#x2F;**\n     * Returns the counter value times two plus one.\n     *\n     * @returns &#123;number&#125;\n     *&#x2F;\n    doubleCountPlusOne() &#123;\n      &#x2F;&#x2F; autocompletion âœ¨\n      return this.doubleCount + 1\n    &#125;,\n  &#125;,\n&#125;)</code></pre>\n\n<h2 id=\"Passing-arguments-to-getters\"><a href=\"#Passing-arguments-to-getters\" class=\"headerlink\" title=\"Passing arguments to getters\"></a>Passing arguments to getters</h2><p><em>Getters</em> are just <em>computed</em> properties behind the scenes, so itâ€™s not possible to pass any parameters to them. However, you can return a function from the <em>getter</em> to accept any arguments:<br><em>è·å–å™¨æ˜¯ç»„ä»¶çš„è®¡ç®—å±æ€§ï¼Œå› æ­¤ä¸èƒ½ä¼ é€’ä»»ä½•å‚æ•°ã€‚ç„¶è€Œï¼Œä½ å¯ä»¥ä»è·å–å™¨è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œæ¥å—ä»»ä½•å‚æ•°ï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">export const useStore &#x3D; defineStore(&#39;main&#39;, &#123;\n  getters: &#123;\n    getUserById: (state) &#x3D;&gt; &#123;\n      return (userId) &#x3D;&gt; state.users.find((user) &#x3D;&gt; user.id &#x3D;&#x3D;&#x3D; userId)\n    &#125;,\n  &#125;,\n&#125;)</code></pre>\n\n<p>and use in component:<br><em>åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ï¼š</em></p>\n<pre class=\"line-numbers language-typescript\" data-language=\"typescript\"><code class=\"language-typescript\">&lt;script&gt;\nexport default &#123;\n  setup() &#123;\n    const store &#x3D; useStore()\n\n    return &#123; getUserById: store.getUserById &#125;\n  &#125;,\n&#125;\n&lt;&#x2F;script&gt;\n\n&lt;template&gt;\n  &lt;p&gt;User 2: &#123;&#123; getUserById(2) &#125;&#125;&lt;&#x2F;p&gt;\n&lt;&#x2F;template&gt;</code></pre>\n\n<p>Note that when doing this, <strong>getters are not cached anymore</strong>, they are simply functions that you invoke. You can however cache some results inside of the getter itself, which is uncommon but should prove more performant:<br><em>æ³¨æ„ï¼Œå½“è¿™åšçš„æ—¶å€™ï¼Œ<strong>è·å–å™¨ä¸å†ç¼“å­˜äº†</strong>ï¼Œå®ƒä»¬æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä½ å¯ä»¥åœ¨è·å–å™¨å†…éƒ¨ç¼“å­˜ä¸€äº›ç»“æœï¼Œè¿™æ˜¯ä¸€ç§æ¯”è¾ƒå¸¸è§çš„æƒ…å†µï¼Œä½†æ˜¯åº”è¯¥æ›´æœ‰æ•ˆç‡ï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">export const useStore &#x3D; defineStore(&#39;main&#39;, &#123;\n  getters: &#123;\n    getActiveUserById(state) &#123;\n      const activeUsers &#x3D; state.users.filter((user) &#x3D;&gt; user.active)\n      return (userId) &#x3D;&gt; activeUsers.find((user) &#x3D;&gt; user.id &#x3D;&#x3D;&#x3D; userId)\n    &#125;,\n  &#125;,\n&#125;)</code></pre>\n\n<h2 id=\"Accessing-other-stores-getters\"><a href=\"#Accessing-other-stores-getters\" class=\"headerlink\" title=\"Accessing other stores getters\"></a>Accessing other stores getters</h2><p>To use another store getters, you can directly <em>use it</em> inside of the <em>getter</em>:<br><em>è¦ä½¿ç”¨å¦ä¸€ä¸ªå­˜å‚¨è·å–å™¨ï¼Œå¯ä»¥ç›´æ¥åœ¨è·å–å™¨ä¸­_ä½¿ç”¨å®ƒ_ï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">import &#123; useOtherStore &#125; from &#39;.&#x2F;other-store&#39;\n\nexport const useStore &#x3D; defineStore(&#39;main&#39;, &#123;\n  state: () &#x3D;&gt; (&#123;\n    &#x2F;&#x2F; ...\n  &#125;),\n  getters: &#123;\n    otherGetter(state) &#123;\n      const otherStore &#x3D; useOtherStore()\n      return state.localData + otherStore.data\n    &#125;,\n  &#125;,\n&#125;)</code></pre>\n\n<h2 id=\"Usage-with-setup\"><a href=\"#Usage-with-setup\" class=\"headerlink\" title=\"Usage with setup()\"></a>Usage with <code>setup()</code></h2><p>You can directly access any getter as a property of the store (exactly like state properties):<br><em>ä½ å¯ä»¥ç›´æ¥åœ¨å­˜å‚¨ä¸­ä½œä¸ºå±æ€§è®¿é—®ä»»ä½•è·å–å™¨ï¼ˆç²¾å‡†åœ°å¦‚åŒçŠ¶æ€å±æ€§ï¼‰ï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">export default &#123;\n  setup() &#123;\n    const store &#x3D; useStore()\n\n    store.counter &#x3D; 3\n    store.doubleCount &#x2F;&#x2F; 6\n  &#125;,\n&#125;</code></pre>\n\n<h2 id=\"Usage-with-the-Options-API\"><a href=\"#Usage-with-the-Options-API\" class=\"headerlink\" title=\"Usage with the Options API\"></a>Usage with the Options API</h2><p><VueSchoolLink\n  href=\"https://vueschool.io/lessons/access-pinia-getters-in-the-options-api\"\n  title=\"Access Pinia Getters via the Options API\"\n/></p>\n<p>For the following examples, you can assume the following store was created:<br><em>å¯¹äºä¸‹é¢çš„ä¾‹å­ï¼Œä½ å¯ä»¥å‡è®¾ä»¥ä¸‹å­˜å‚¨å·²åˆ›å»ºï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">&#x2F;&#x2F; Example File Path:\n&#x2F;&#x2F; .&#x2F;src&#x2F;stores&#x2F;counterStore.js\n\nimport &#123; defineStore &#125; from &#39;pinia&#39;,\n\nconst useCounterStore &#x3D; defineStore(&#39;counterStore&#39;, &#123;\n  state: () &#x3D;&gt; (&#123;\n    counter: 0\n  &#125;),\n  getters: &#123;\n    doubleCounter(state) &#123;\n      return state.counter * 2\n    &#125;\n  &#125;\n&#125;)</code></pre>\n\n<h3 id=\"With-setup\"><a href=\"#With-setup\" class=\"headerlink\" title=\"With setup()\"></a>With <code>setup()</code></h3><p>While Composition API is not for everyone, the <code>setup()</code> hook can make using Pinia easier to work with in the Options API. No extra map helper functions needed!<br><em>è€Œä¸æ˜¯æ‰€æœ‰äººéƒ½éœ€è¦ä½¿ç”¨ç»„åˆAPIï¼Œ<code>setup()</code>é’©å­å¯ä»¥è®©Piniaæ›´å®¹æ˜“åœ°åœ¨Options APIä¸­ä½¿ç”¨ã€‚æ²¡æœ‰é¢å¤–çš„æ˜ å°„åŠ©æ‰‹å‡½æ•°éœ€è¦ï¼</em></p>\n<h2 id=\"è¿™æ˜¯ä¸€ä¸ªä¼˜ç‚¹\"><a href=\"#è¿™æ˜¯ä¸€ä¸ªä¼˜ç‚¹\" class=\"headerlink\" title=\"è¿™æ˜¯ä¸€ä¸ªä¼˜ç‚¹\"></a>è¿™æ˜¯ä¸€ä¸ªä¼˜ç‚¹</h2><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">import &#123; useCounterStore &#125; from &#39;..&#x2F;stores&#x2F;counterStore&#39;\n\nexport default &#123;\n  setup() &#123;\n    const counterStore &#x3D; useCounterStore()\n\n    return &#123; counterStore &#125;\n  &#125;,\n  computed: &#123;\n    quadrupleCounter() &#123;\n      return this.counterStore.doubleCounter * 2\n    &#125;,\n  &#125;,\n&#125;</code></pre>\n\n<h3 id=\"Without-setup\"><a href=\"#Without-setup\" class=\"headerlink\" title=\"Without setup()\"></a>Without <code>setup()</code></h3><p>You can use the same <code>mapState()</code> function used in the <a href=\"./state.md#options-api\">previous section of state</a> to map to getters:<br><em>ä½ å¯ä»¥ä½¿ç”¨åœ¨<a href=\"./state.md#options-api\">ä¸Šä¸€èŠ‚çŠ¶æ€</a>ä¸­ä½¿ç”¨çš„<code>mapState()</code>å‡½æ•°æ¥æ˜ å°„åˆ°è·å–å™¨ï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">import &#123; mapState &#125; from &#39;pinia&#39;\nimport &#123; useCounterStore &#125; from &#39;..&#x2F;stores&#x2F;counterStore&#39;\n\nexport default &#123;\n  computed: &#123;\n    &#x2F;&#x2F; gives access to this.doubleCounter inside the component\n    &#x2F;&#x2F; same as reading from store.doubleCounter\n    ...mapState(useCounterStore, [&#39;doubleCount&#39;])\n    &#x2F;&#x2F; same as above but registers it as this.myOwnName\n    ...mapState(useCounterStore, &#123;\n      myOwnName: &#39;doubleCounter&#39;,\n      &#x2F;&#x2F; you can also write a function that gets access to the store\n      double: store &#x3D;&gt; store.doubleCount,\n    &#125;),\n  &#125;,\n&#125;</code></pre>\n\n<h1 id=\"Actions\"><a href=\"#Actions\" class=\"headerlink\" title=\"Actions\"></a>Actions</h1><p><VueSchoolLink\n  href=\"https://vueschool.io/lessons/synchronous-and-asynchronous-actions-in-pinia\"\n  title=\"Learn all about actions in Pinia\"\n/></p>\n<p>Actions are the equivalent of <a href=\"https://v3.vuejs.org/guide/data-methods.html#methods\">methods</a> in components. They can be defined with the <code>actions</code> property in <code>defineStore()</code> and <strong>they are perfect to define business logic</strong>:<br><em>åœ¨<code>defineStore()</code>ä¸­å®šä¹‰çš„<code>actions</code>å±æ€§æ˜¯ç»„ä»¶çš„æ–¹æ³•ï¼Œå®ƒä»¬å¯ä»¥ç”¨æ¥å®šä¹‰ä¸šåŠ¡é€»è¾‘ï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">export const useStore &#x3D; defineStore(&#39;main&#39;, &#123;\n  state: () &#x3D;&gt; (&#123;\n    counter: 0,\n  &#125;),\n  actions: &#123;\n    increment() &#123;\n      this.counter++\n    &#125;,\n    randomizeCounter() &#123;\n      this.counter &#x3D; Math.round(100 * Math.random())\n    &#125;,\n  &#125;,\n&#125;)</code></pre>\n\n<p>Like <a href=\"./getters.md\">getters</a>, actions get access to the <em>whole store instance</em> through <code>this</code> with <strong>full typing (and autocompletion âœ¨) support</strong>. <strong>Unlike getters, <code>actions</code> can be asynchronous</strong>, you can <code>await</code> inside of actions any API call or even other actions! Here is an example using <a href=\"https://github.com/posva/mande\">Mande</a>. Note the library you use doesnâ€™t matter as long as you get a <code>Promise</code>, you could even use the native <code>fetch</code> function (browser only):<br><em>åƒ<a href=\"./getters.md\">è·å–å™¨</a>ä¸€æ ·ï¼Œactionså¯ä»¥é€šè¿‡<code>this</code>è®¿é—®æ•´ä¸ªå­˜å‚¨å®ä¾‹ï¼Œ<strong>å®ƒä»¬å¯ä»¥æ˜¯å¼‚æ­¥çš„</strong>ï¼Œä½ å¯ä»¥åœ¨actionsä¸­ä½¿ç”¨<code>await</code>ä»»ä½•APIè°ƒç”¨æˆ–è€…å¯ä»¥ä½¿ç”¨å…¶ä»–actionsï¼è¿™é‡Œæ˜¯ä¸€ä¸ªä½¿ç”¨[Mande](</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">import &#123; mande &#125; from &#39;mande&#39;\n\nconst api &#x3D; mande(&#39;&#x2F;api&#x2F;users&#39;)\n\nexport const useUsers &#x3D; defineStore(&#39;users&#39;, &#123;\n  state: () &#x3D;&gt; (&#123;\n    userData: null,\n    &#x2F;&#x2F; ...\n  &#125;),\n\n  actions: &#123;\n    async registerUser(login, password) &#123;\n      try &#123;\n        this.userData &#x3D; await api.post(&#123; login, password &#125;)\n        showTooltip(&#96;Welcome back $&#123;this.userData.name&#125;!&#96;)\n      &#125; catch (error) &#123;\n        showTooltip(error)\n        &#x2F;&#x2F; let the form component display the error\n        return error\n      &#125;\n    &#125;,\n  &#125;,\n&#125;)</code></pre>\n\n<p>You are also completely free to set whatever arguments you want and return anything. When calling actions, everything will be automatically inferred!<br><em>ä½ å¯ä»¥è®¾ç½®ä»»ä½•å‚æ•°å’Œè¿”å›ä»»ä½•ä¸œè¥¿ï¼Œå½“è°ƒç”¨actionsæ—¶ï¼Œæ‰€æœ‰çš„ä¸œè¥¿éƒ½ä¼šè‡ªåŠ¨æ¨æ–­ï¼</em><br>Actions are invoked like methods:<br><em>actionsåƒæ–¹æ³•è¢«è°ƒç”¨ï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">export default defineComponent(&#123;\n  setup() &#123;\n    const main &#x3D; useMainStore()\n    &#x2F;&#x2F; call the action as a method of the store\n    main.randomizeCounter()\n\n    return &#123;&#125;\n  &#125;,\n&#125;)</code></pre>\n\n<h2 id=\"Accessing-other-stores-actions\"><a href=\"#Accessing-other-stores-actions\" class=\"headerlink\" title=\"Accessing other stores actions\"></a>Accessing other stores actions</h2><p>To use another store, you can directly <em>use it</em> inside of the <em>action</em>:<br><em>è¦ä½¿ç”¨å¦ä¸€ä¸ªå­˜å‚¨ï¼Œä½ å¯ä»¥ç›´æ¥åœ¨_action_ä¸­ä½¿ç”¨å®ƒï¼š</em></p>\n<h2 id=\"è¿™æ¯”reactå¥½ç”¨ï¼Œå¯ä»¥åµŒå¥—\"><a href=\"#è¿™æ¯”reactå¥½ç”¨ï¼Œå¯ä»¥åµŒå¥—\" class=\"headerlink\" title=\"è¿™æ¯”reactå¥½ç”¨ï¼Œå¯ä»¥åµŒå¥—\"></a>è¿™æ¯”reactå¥½ç”¨ï¼Œå¯ä»¥åµŒå¥—</h2><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">import &#123; useAuthStore &#125; from &#39;.&#x2F;auth-store&#39;\n\nexport const useSettingsStore &#x3D; defineStore(&#39;settings&#39;, &#123;\n  state: () &#x3D;&gt; (&#123;\n    preferences: null,\n    &#x2F;&#x2F; ...\n  &#125;),\n  actions: &#123;\n    async fetchUserPreferences() &#123;\n      const auth &#x3D; useAuthStore()\n      if (auth.isAuthenticated) &#123;\n        this.preferences &#x3D; await fetchPreferences()\n      &#125; else &#123;\n        throw new Error(&#39;User must be authenticated&#39;)\n      &#125;\n    &#125;,\n  &#125;,\n&#125;)</code></pre>\n\n<h2 id=\"Usage-with-setup-1\"><a href=\"#Usage-with-setup-1\" class=\"headerlink\" title=\"Usage with setup()\"></a>Usage with <code>setup()</code></h2><p>You can directly call any action as a method of the store:<br><em>ä½ å¯ä»¥ç›´æ¥è°ƒç”¨ä»»ä½•actionä½œä¸ºstoreçš„æ–¹æ³•ï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">export default &#123;\n  setup() &#123;\n    const store &#x3D; useStore()\n\n    store.randomizeCounter()\n  &#125;,\n&#125;</code></pre>\n\n<h2 id=\"Usage-with-the-Options-API-1\"><a href=\"#Usage-with-the-Options-API-1\" class=\"headerlink\" title=\"Usage with the Options API\"></a>Usage with the Options API</h2><p><VueSchoolLink\n  href=\"https://vueschool.io/lessons/access-pinia-actions-in-the-options-api\"\n  title=\"Access Pinia Getters via the Options API\"\n/></p>\n<p>For the following examples, you can assume the following store was created:<br><em>å¯¹äºä¸‹é¢çš„ä¾‹å­ï¼Œä½ å¯ä»¥å‡è®¾ä»¥ä¸‹çš„å­˜å‚¨å·²ç»åˆ›å»ºï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">&#x2F;&#x2F; Example File Path:\n&#x2F;&#x2F; .&#x2F;src&#x2F;stores&#x2F;counterStore.js\n\nimport &#123; defineStore &#125; from &#39;pinia&#39;,\n\nconst useCounterStore &#x3D; defineStore(&#39;counterStore&#39;, &#123;\n  state: () &#x3D;&gt; (&#123;\n    counter: 0\n  &#125;),\n  actions: &#123;\n    increment() &#123;\n      this.counter++\n    &#125;\n  &#125;\n&#125;)</code></pre>\n\n<h3 id=\"With-setup-1\"><a href=\"#With-setup-1\" class=\"headerlink\" title=\"With setup()\"></a>With <code>setup()</code></h3><p>While Composition API is not for everyone, the <code>setup()</code> hook can make using Pinia easier to work with in the Options API. No extra map helper functions needed!<br><em>Composition APIä¸æ˜¯æ‰€æœ‰äººéƒ½èƒ½ç”¨ï¼Œä½†æ˜¯<code>setup()</code>é’©å­å¯ä»¥è®©Piniaæ›´åŠ ç®€å•åœ°ä½¿ç”¨åœ¨Options APIä¸­ï¼Œä¸éœ€è¦é¢å¤–çš„æ˜ å°„åŠŸèƒ½ï¼</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">import &#123; useCounterStore &#125; from &#39;..&#x2F;stores&#x2F;counterStore&#39;\n\nexport default &#123;\n  setup() &#123;\n    const counterStore &#x3D; useCounterStore()\n\n    return &#123; counterStore &#125;\n  &#125;,\n  methods: &#123;\n    incrementAndPrint() &#123;\n      this.counterStore.increment()\n      console.log(&#39;New Count:&#39;, this.counterStore.count)\n    &#125;,\n  &#125;,\n&#125;</code></pre>\n\n<h3 id=\"Without-setup-1\"><a href=\"#Without-setup-1\" class=\"headerlink\" title=\"Without setup()\"></a>Without <code>setup()</code></h3><p>If you would prefer not to use Composition API at all, you can use the <code>mapActions()</code> helper to map actions properties as methods in your component:<br><em>å¦‚æœä½ æƒ³ä¸ä½¿ç”¨Composition APIï¼Œä½ å¯ä»¥ä½¿ç”¨<code>mapActions()</code>åŠ©æ‰‹æ¥å°†actionså±æ€§æ˜ å°„ä¸ºç»„ä»¶çš„æ–¹æ³•ï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">import &#123; mapActions &#125; from &#39;pinia&#39;\nimport &#123; useCounterStore &#125; from &#39;..&#x2F;stores&#x2F;counterStore&#39;\n\nexport default &#123;\n  methods: &#123;\n    &#x2F;&#x2F; gives access to this.increment() inside the component\n    &#x2F;&#x2F; same as calling from store.increment()\n    ...mapActions(useCounterStore, [&#39;increment&#39;])\n    &#x2F;&#x2F; same as above but registers it as this.myOwnName()\n    ...mapActions(useCounterStore, &#123; myOwnName: &#39;doubleCounter&#39; &#125;),\n  &#125;,\n&#125;</code></pre>\n\n<h2 id=\"Subscribing-to-actions\"><a href=\"#Subscribing-to-actions\" class=\"headerlink\" title=\"Subscribing to actions\"></a>Subscribing to actions</h2><p>It is possible to observe actions and their outcome with <code>store.$onAction()</code>. The callback passed to it is executed before the action itself. <code>after</code> handle promises and allows you to execute a function after the action resolves. In a similar way, <code>onError</code> allows you execute a function if the action throws or rejects. These are useful for tracking errors at runtime, similar to <a href=\"https://v3.vuejs.org/guide/tooling/deployment.html#tracking-runtime-errors\">this tip in the Vue docs</a>.<br><em>å¯ä»¥ä½¿ç”¨<code>store.$onAction()</code>æ¥è§‚å¯Ÿactionså’Œå®ƒä»¬çš„ç»“æœã€‚ä¼ å…¥çš„å›è°ƒä¼šåœ¨actionè‡ªèº«ä¹‹å‰æ‰§è¡Œã€‚<code>after</code>å¤„ç†promisesï¼Œå…è®¸ä½ åœ¨actionè§£å†³ä¹‹åæ‰§è¡Œä¸€ä¸ªå‡½æ•°ã€‚åŒæ ·ï¼Œ<code>onError</code>å…è®¸ä½ åœ¨actionæŠ›å‡ºæˆ–è€…rejectä¹‹åæ‰§è¡Œä¸€ä¸ªå‡½æ•°ã€‚è¿™äº›æ˜¯ç”¨äºè·Ÿè¸ªè¿è¡Œæ—¶é”™è¯¯çš„å¥½æ–¹æ³•ï¼Œç±»ä¼¼äº<a href=\"https://v3.vuejs.org/guide/tooling/deployment.html#tracking-runtime-errors\">è¿™ä¸ªæç¤ºåœ¨Vueæ–‡æ¡£</a>ã€‚</em><br>Here is an example that logs before running actions and after they resolve&#x2F;reject.<br><em>è¿™æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œå®ƒä¼šåœ¨æ‰§è¡Œactionsä¹‹å‰å’Œä¹‹åè§£å†³&#x2F;rejectã€‚</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">const unsubscribe &#x3D; someStore.$onAction(\n  (&#123;\n    name, &#x2F;&#x2F; name of the action\n    store, &#x2F;&#x2F; store instance, same as &#96;someStore&#96;\n    args, &#x2F;&#x2F; array of parameters passed to the action\n    after, &#x2F;&#x2F; hook after the action returns or resolves\n    onError, &#x2F;&#x2F; hook if the action throws or rejects\n  &#125;) &#x3D;&gt; &#123;\n    &#x2F;&#x2F; a shared variable for this specific action call\n    &#x2F;&#x2F; å…±äº«å˜é‡ï¼Œè¿™ä¸ªç‰¹å®šçš„actionè°ƒç”¨\n    const startTime &#x3D; Date.now()\n    &#x2F;&#x2F; this will trigger before an action on &#96;store&#96; is executed\n    &#x2F;&#x2F; è¿™å°†è§¦å‘åœ¨&#96;store&#96;ä¸Šæ‰§è¡Œactionä¹‹å‰\n    console.log(&#96;Start &quot;$&#123;name&#125;&quot; with params [$&#123;args.join(&#39;, &#39;)&#125;].&#96;)\n\n    &#x2F;&#x2F; this will trigger if the action succeeds and after it has fully run.\n    &#x2F;&#x2F; è¿™å°†è§¦å‘å¦‚æœactionæˆåŠŸå¹¶ä¸”å®Œæˆè¿è¡Œã€‚\n    &#x2F;&#x2F; it waits for any returned promised\n    &#x2F;&#x2F;  å®ƒç­‰å¾…ä»»ä½•è¿”å›çš„promised\n    after((result) &#x3D;&gt; &#123;\n      console.log(\n        &#96;Finished &quot;$&#123;name&#125;&quot; after $&#123;\n          Date.now() - startTime\n        &#125;ms.\\nResult: $&#123;result&#125;.&#96;\n      )\n    &#125;)\n\n    &#x2F;&#x2F; this will trigger if the action throws or returns a promise that rejects\n    &#x2F;&#x2F;  è¿™å°†è§¦å‘å¦‚æœactionæŠ›å‡ºæˆ–è€…è¿”å›ä¸€ä¸ªpromiseï¼Œreject\n    onError((error) &#x3D;&gt; &#123;\n      console.warn(\n        &#96;Failed &quot;$&#123;name&#125;&quot; after $&#123;Date.now() - startTime&#125;ms.\\nError: $&#123;error&#125;.&#96;\n      )\n    &#125;)\n  &#125;\n)\n\n&#x2F;&#x2F; manually remove the listener\n&#x2F;&#x2F; æ‰‹åŠ¨ç§»é™¤ç›‘å¬å™¨\nunsubscribe()</code></pre>\n\n<p>By default, <em>action subscriptions</em> are bound to the component where they are added (if the store is inside a componentâ€™s <code>setup()</code>). Meaning, they will be automatically removed when the component is unmounted. If you want to keep them after the component is unmounted, pass <code>true</code> as the second argument to <em>detach</em> the <em>action subscription</em> from the current component:<br><em>é»˜è®¤æƒ…å†µä¸‹ï¼Œactionè®¢é˜…æ˜¯ç»‘å®šåˆ°æ·»åŠ å®ƒä»¬çš„ç»„ä»¶ï¼ˆå¦‚æœstoreåœ¨ç»„ä»¶çš„setupä¸­ï¼‰ã€‚æ„æ€æ˜¯ï¼Œå®ƒä»¬ä¼šåœ¨ç»„ä»¶è¢«å¸è½½åè‡ªåŠ¨ç§»é™¤ã€‚å¦‚æœä½ æƒ³è¦ä¿æŒå®ƒä»¬åœ¨ç»„ä»¶è¢«å¸è½½åï¼Œå°†ç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ç»™_detach_actionè®¢é˜…_ä»å½“å‰ç»„ä»¶ï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">export default &#123;\n  setup() &#123;\n    const someStore &#x3D; useSomeStore()\n\n    &#x2F;&#x2F; this subscription will be kept after the component is unmounted\n    someStore.$onAction(callback, true)\n\n    &#x2F;&#x2F; ...\n  &#125;,\n&#125;</code></pre>\n\n\n<h1 id=\"Plugins\"><a href=\"#Plugins\" class=\"headerlink\" title=\"Plugins\"></a>Plugins</h1><p>Pinia stores can be fully extended thanks to a low level API. Here is a list of things you can do:<br><em>Pinia storeså¯ä»¥å®Œå…¨æ‰©å±•ï¼Œé€šè¿‡ä¸€ä¸ªä½çº§APIã€‚è¿™æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œä½ å¯ä»¥åšçš„äº‹æƒ…ï¼š</em></p>\n<ul>\n<li>Add <code>new properties</code> to stores <em>ç»™storesæ·»åŠ æ–°çš„å±æ€§</em></li>\n<li>Add <code>new options</code> when defining stores <em>åœ¨å®šä¹‰storesæ—¶æ·»åŠ æ–°çš„é€‰é¡¹</em></li>\n<li>Add <code>new methods</code> to stores <em>ç»™storesæ·»åŠ æ–°çš„æ–¹æ³•</em></li>\n<li>Wrap <code>existing methods</code> <em>åŒ…è£…ç°æœ‰çš„æ–¹æ³•</em></li>\n<li>Change or even cancel <code>actions</code> <em>æ”¹å˜æˆ–å–æ¶ˆactions</em></li>\n<li>Implement side effects like <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage\">Local Storage</a> <em>å®ç°å‰¯ä½œç”¨æ•ˆæœï¼Œä¾‹å¦‚localStorage</em></li>\n<li>Apply <strong>only</strong> to specific stores <em>åªåº”ç”¨åˆ°ç‰¹å®šçš„stores</em></li>\n</ul>\n<p>Plugins are added to the pinia instance with <code>pinia.use()</code>. The simplest example is adding a static property to all stores by returning an object:<br><em>æ’ä»¶æ˜¯æ·»åŠ åˆ°piniaå®ä¾‹çš„<code>pinia.use()</code>ã€‚æœ€ç®€å•çš„ä¾‹å­æ˜¯æ·»åŠ ä¸€ä¸ªé™æ€å±æ€§åˆ°æ‰€æœ‰storesï¼Œé€šè¿‡è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">import &#123; createPinia &#125; from &#39;pinia&#39;\n\n&#x2F;&#x2F; add a property named &#96;secret&#96; to every store that is created after this plugin is installed\n&#x2F;&#x2F; this could be in a different file\nfunction SecretPiniaPlugin() &#123;\n  return &#123; secret: &#39;the cake is a lie&#39; &#125;\n&#125;\n\nconst pinia &#x3D; createPinia()\n&#x2F;&#x2F; give the plugin to pinia\npinia.use(SecretPiniaPlugin)\n\n&#x2F;&#x2F; in another file\nconst store &#x3D; useStore()\nstore.secret &#x2F;&#x2F; &#39;the cake is a lie&#39;</code></pre>\n\n<p>This is useful to add global objects like the router, modal, or toast managers.<br><em>è¿™æ˜¯æœ‰ç”¨çš„ï¼Œä¾‹å¦‚routerã€modalæˆ–toastç®¡ç†å™¨</em></p>\n<h2 id=\"Introduction-1\"><a href=\"#Introduction-1\" class=\"headerlink\" title=\"Introduction\"></a>Introduction</h2><p>A Pinia plugin is a function that optionally returns properties to be added to a store. It takes one optional argument, a <em>context</em>:<br><em>ä¸€ä¸ªPiniaæ’ä»¶æ˜¯ä¸€ä¸ªå¯é€‰çš„è¿”å›å±æ€§çš„å‡½æ•°ã€‚å®ƒåªæ¥å—ä¸€ä¸ªå¯é€‰çš„å‚æ•°ï¼Œä¸€ä¸ª_context_ï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">export function myPiniaPlugin(context) &#123;\n  context.pinia &#x2F;&#x2F; the pinia created with &#96;createPinia()&#96; \n  context.app &#x2F;&#x2F; the current app created with &#96;createApp()&#96; (Vue 3 only)\n  context.store &#x2F;&#x2F; the store the plugin is augmenting\n  context.options &#x2F;&#x2F; the options object defining the store passed to &#96;defineStore()&#96;\n  &#x2F;&#x2F; ...\n&#125;</code></pre>\n\n<p>This function is then passed to <code>pinia</code> with <code>pinia.use()</code>:<br><em>è¿™ä¸ªå‡½æ•°æ˜¯é€šè¿‡<code>pinia.use()</code>ä¼ é€’ç»™<code>pinia</code>ï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">pinia.use(myPiniaPlugin)</code></pre>\n\n<p>Plugins are only applied to stores <strong>created after <code>pinia</code> is passed to the app</strong>, otherwise they wonâ€™t be applied.<br><em>æ’ä»¶åªåº”ç”¨åˆ°stores <strong>åœ¨<code>pinia</code>è¢«ä¼ é€’ç»™appååˆ›å»º</strong>ï¼Œå¦åˆ™å®ƒä»¬ä¸ä¼šåº”ç”¨</em></p>\n<h2 id=\"Augmenting-a-Store\"><a href=\"#Augmenting-a-Store\" class=\"headerlink\" title=\"Augmenting a Store\"></a>Augmenting a Store</h2><p>You can add properties to every store by simply returning an object of them in a plugin:<br><em>ä½ å¯ä»¥é€šè¿‡è¿”å›ä¸€ä¸ªå¯¹è±¡æ¥ç»™æ¯ä¸ªstoreæ·»åŠ å±æ€§</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">pinia.use(() &#x3D;&gt; (&#123; hello: &#39;world&#39; &#125;))</code></pre>\n\n<p>You can also set the property directly on the <code>store</code> but <strong>if possible use the return version so they can be automatically tracked by devtools</strong>:<br><em>ä½ ä¹Ÿå¯ä»¥ç›´æ¥ç»™storeè®¾ç½®å±æ€§ï¼Œä½†æ˜¯<strong>å¦‚æœå¯èƒ½ï¼Œè¯·ä½¿ç”¨è¿”å›ç‰ˆæœ¬ï¼Œä»¥ä¾¿å®ƒä»¬å¯ä»¥è¢«è‡ªåŠ¨è¿½è¸ª</strong></em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">pinia.use((&#123; store &#125;) &#x3D;&gt; &#123;\n  store.hello &#x3D; &#39;world&#39;\n&#125;)</code></pre>\n\n<p>Any property <em>returned</em> by a plugin will be automatically tracked by devtools so in order to make <code>hello</code> visible in devtools, make sure to add it to <code>store._customProperties</code> <strong>in dev mode only</strong> if you want to debug it in devtools:<br>_ä»»ä½•æ’ä»¶è¿”å›çš„å±æ€§éƒ½ä¼šè¢«è‡ªåŠ¨è¿½è¸ªè¢«devtoolsè¿½è¸ªï¼Œæ‰€ä»¥è¦è®©helloå¯è§åœ¨devtoolsï¼Œè¯·åœ¨devæ¨¡å¼ä¸‹ï¼Œå¦‚æœä½ æƒ³è¦è°ƒè¯•å®ƒåœ¨devtoolsï¼Œè¯·åœ¨store.<em>customPropertiesä¸­æ·»åŠ å®ƒï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">&#x2F;&#x2F; from the example above\npinia.use((&#123; store &#125;) &#x3D;&gt; &#123;\n  store.hello &#x3D; &#39;world&#39;\n  &#x2F;&#x2F; make sure your bundler handle this. webpack and vite should do it by default\n  &#x2F;&#x2F; ç¡®å®šä½ çš„bundlerå¤„ç†è¿™ä¸ªã€‚é»˜è®¤æƒ…å†µwebpackå’Œviteåº”è¯¥åšå®ƒ\n  if (process.env.NODE_ENV &#x3D;&#x3D;&#x3D; &#39;development&#39;) &#123;\n    &#x2F;&#x2F; add any keys you set on the store\n    &#x2F;&#x2F; åœ¨storeä¸Šæ·»åŠ ä»»ä½•ä½ è®¾ç½®çš„é”®\n    store._customProperties.add(&#39;hello&#39;)\n  &#125;\n&#125;)</code></pre>\n\n<p>Note that every store is wrapped with <a href=\"https://v3.vuejs.org/api/basic-reactivity.html#reactive\"><code>reactive</code></a>, automatically unwrapping any Ref (<code>ref()</code>, <code>computed()</code>, â€¦) it contains:<br><em>æ³¨æ„ï¼Œæ¯ä¸ªstoreéƒ½ä¼šè¢«åŒ…è£¹åœ¨<a href=\"https://v3.vuejs.org/api/basic-reactivity.html#reactive\"><code>reactive</code></a>ï¼Œè‡ªåŠ¨è§£å¼€ä»»ä½•Refï¼ˆ<code>ref()</code>, <code>computed()</code>, â€¦ï¼‰å®ƒåŒ…å«ï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">const sharedRef &#x3D; ref(&#39;shared&#39;)\npinia.use((&#123; store &#125;) &#x3D;&gt; &#123;\n  &#x2F;&#x2F; each store has its individual &#96;hello&#96; property\n  &#x2F;&#x2F; æ¯ä¸ªstoreéƒ½æœ‰å®ƒè‡ªå·±çš„&#96;hello&#96;å±æ€§\n  store.hello &#x3D; ref(&#39;secret&#39;)\n  &#x2F;&#x2F; it gets automatically unwrapped\n  &#x2F;&#x2F; è¿™ä¼šè¢«è‡ªåŠ¨è§£å¼€\n  store.hello &#x2F;&#x2F; &#39;secret&#39;\n\n  &#x2F;&#x2F; all stores are sharing the value &#96;shared&#96; property\n  &#x2F;&#x2F; æ‰€æœ‰storeå…±äº«&#96;shared&#96;å±æ€§\n  store.shared &#x3D; sharedRef\n  store.shared &#x2F;&#x2F; &#39;shared&#39;\n&#125;)</code></pre>\n\n<p>This is why you can access all computed properties without <code>.value</code> and why they are reactive.<br><em>è¿™æ˜¯ä¸ºä»€ä¹ˆä½ å¯ä»¥ä¸ä½¿ç”¨<code>.value</code>æ¥è®¿é—®æ‰€æœ‰è®¡ç®—å±æ€§ï¼Œå¹¶ä¸”å®ƒä»¬æ˜¯ååº”æ€§çš„</em></p>\n<h3 id=\"Adding-new-state\"><a href=\"#Adding-new-state\" class=\"headerlink\" title=\"Adding new state\"></a>Adding new state</h3><p>If you want to add new state properties to a store or properties that are meant to be used during hydration, <strong>you will have to add it in two places</strong>:<br><em>å¦‚æœä½ æƒ³è¦ç»™storeæˆ–è€…æƒ³è¦åœ¨åŒæ„æ—¶ä½¿ç”¨çš„å±æ€§ï¼Œä½ éœ€è¦åœ¨ä¸¤å¤„æ·»åŠ ï¼š</em></p>\n<ul>\n<li>On the <code>store</code> so you can access it with <code>store.myState</code> <em>åœ¨storeä¸Šä½ å¯ä»¥é€šè¿‡<code>store.myState</code>è®¿é—®å®ƒ</em></li>\n<li>On <code>store.$state</code> so it can be used in devtools and, <strong>be serialized during SSR</strong>. <em>åœ¨store.$stateä¸Šä½ å¯ä»¥è®¿é—®å®ƒåœ¨devtoolså’Œï¼Œ<strong>åœ¨SSRæ—¶ä¼šè¢«åºåˆ—åŒ–</strong></em></li>\n</ul>\n<p>On top of that, you will certainly have to use a <code>ref()</code> (or other reactive API) in order to share the value across different accesses:<br><em>åœ¨é¡¶éƒ¨ï¼Œä½ å¿…é¡»ä½¿ç”¨<code>ref()</code>ï¼ˆæˆ–å…¶ä»–ååº”æ€§APIï¼‰æ¥å…±äº«å€¼ï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">import &#123; toRef, ref &#125; from &#39;vue&#39;\n\npinia.use((&#123; store &#125;) &#x3D;&gt; &#123;\n  &#x2F;&#x2F; to correctly handle SSR, we need to make sure we are not overriding an\n  &#x2F;&#x2F; existing value\n  &#x2F;&#x2F; ä¸ºäº†æ­£ç¡®å¤„ç†SSRï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿æˆ‘ä»¬ä¸ä¼šè¦†ç›–ç°æœ‰å€¼\n  if (!Object.prototype.hasOwnProperty(store.$state, &#39;hasError&#39;)) &#123;\n    &#x2F;&#x2F; hasError is defined within the plugin, so each store has their individual\n    &#x2F;&#x2F; state property\n    &#x2F;&#x2F; hasErroræ˜¯åœ¨æ’ä»¶ä¸­å®šä¹‰çš„ï¼Œæ‰€ä»¥æ¯ä¸ªstoreéƒ½æœ‰å®ƒè‡ªå·±çš„çŠ¶æ€å±æ€§\n    const hasError &#x3D; ref(false)\n    &#x2F;&#x2F; setting the variable on &#96;$state&#96;, allows it be serialized during SSR\n    &#x2F;&#x2F; è®¾ç½®å®ƒåœ¨&#96;$state&#96;ï¼Œè¿™æ ·å®ƒå¯ä»¥åœ¨SSRæ—¶è¢«åºåˆ—åŒ–\n    store.$state.hasError &#x3D; hasError\n  &#125;\n  &#x2F;&#x2F; we need to transfer the ref from the state to the store, this way\n  &#x2F;&#x2F; both accesses: store.hasError and store.$state.hasError will work\n  &#x2F;&#x2F; and share the same variable\n  &#x2F;&#x2F; æˆ‘ä»¬éœ€è¦å°†refä»çŠ¶æ€ä¼ é€’ç»™storeï¼Œè¿™æ ·ä¸¤ä¸ªè®¿é—®ï¼šstore.hasErrorå’Œstore.$state.hasErroréƒ½å¯ä»¥ä½¿ç”¨ï¼Œå¹¶ä¸”å…±äº«ç›¸åŒçš„å˜é‡\n  &#x2F;&#x2F; See https:&#x2F;&#x2F;vuejs.org&#x2F;api&#x2F;reactivity-utilities.html#toref\n  store.hasError &#x3D; toRef(store.$state, &#39;hasError&#39;)\n\n  &#x2F;&#x2F; in this case it&#39;s better not to return &#96;hasError&#96; since it\n  &#x2F;&#x2F; will be displayed in the &#96;state&#96; section in the devtools\n  &#x2F;&#x2F; anyway and if we return it, devtools will display it twice.\n  &#x2F;&#x2F; åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸åº”è¯¥è¿”å›&#96;hasError&#96;ï¼Œå› ä¸ºå®ƒå°†åœ¨devtoolsçš„&#96;state&#96;éƒ¨åˆ†æ˜¾ç¤ºä¸¤æ¬¡\n&#125;)</code></pre>\n\n<p>Note that state changes or additions that occur within a plugin (that includes calling <code>store.$patch()</code>) happen before the store is active and therefore <strong>do not trigger any subscriptions</strong>.<br><em>æ³¨æ„ï¼Œåœ¨æ’ä»¶ä¸­ï¼ˆåŒ…æ‹¬è°ƒç”¨<code>store.$patch()</code>ï¼‰å‘ç”Ÿçš„çŠ¶æ€å˜åŒ–æˆ–æ·»åŠ ï¼ˆåŒ…æ‹¬è°ƒç”¨<code>store.$patch()</code>ï¼‰<strong>ä¸ä¼šè§¦å‘ä»»ä½•è®¢é˜…</strong>ã€‚</em><br>:::warning<br>If you are using <strong>Vue 2</strong>, Pinia is subject to the <a href=\"https://vuejs.org/v2/guide/reactivity.html#Change-Detection-Caveats\">same reactivity caveats</a> as Vue. You will need to use <code>set</code> from <code>@vue/composition-api</code> when creating new state properties like <code>secret</code> and <code>hasError</code>:<br><em>å¦‚æœä½ ä½¿ç”¨<strong>Vue 2</strong>ï¼ŒPiniaå°†å—åˆ°<a href=\"https://vuejs.org/v2/guide/reactivity.html#Change-Detection-Caveats\">åŒç±»å‹ååº”æ€§é—®é¢˜</a>ã€‚ä½ éœ€è¦ä½¿ç”¨<code>set</code>æ¥åˆ›å»ºæ–°çš„çŠ¶æ€å±æ€§ï¼Œå¦‚<code>secret</code>å’Œ<code>hasError</code>ï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">import &#123; set, toRef &#125; from &#39;@vue&#x2F;composition-api&#39;\npinia.use((&#123; store &#125;) &#x3D;&gt; &#123;\n  if (!Object.prototype.hasOwnProperty(store.$state, &#39;hello&#39;)) &#123;\n    const secretRef &#x3D; ref(&#39;secret&#39;)\n    &#x2F;&#x2F; If the data is meant to be used during SSR, you should\n    &#x2F;&#x2F; set it on the &#96;$state&#96; property so it is serialized and\n    &#x2F;&#x2F; picked up during hydration\n    &#x2F;&#x2F; å¦‚æœæ•°æ®æ˜¯åœ¨SSRæ—¶ä½¿ç”¨çš„ï¼Œä½ åº”è¯¥å°†å®ƒè®¾ç½®åœ¨&#96;$state&#96;å±æ€§ï¼Œè¿™æ ·å®ƒå°†è¢«åºåˆ—åŒ–å¹¶åœ¨åŒæ„æ—¶è¢«æå–\n    set(store.$state, &#39;secret&#39;, secretRef)\n  &#125;\n  &#x2F;&#x2F; set it directly on the store too so you can access it\n  &#x2F;&#x2F; both ways: &#96;store.$state.secret&#96; &#x2F; &#96;store.secret&#96;\n  &#x2F;&#x2F; åœ¨storeä¸Šç›´æ¥è®¾ç½®å®ƒï¼Œè¿™æ ·ä½ å¯ä»¥åœ¨ä¸¤ç§æ–¹å¼ï¼š&#96;store.$state.secret&#96; &#x2F; &#96;store.secret&#96;\n  set(store, &#39;secret&#39;, toRef(store.$state, &#39;secret&#39;))\n  store.secret &#x2F;&#x2F; &#39;secret&#39;\n&#125;)</code></pre>\n\n<p>:::</p>\n<h2 id=\"Adding-new-external-properties\"><a href=\"#Adding-new-external-properties\" class=\"headerlink\" title=\"Adding new external properties\"></a>Adding new external properties</h2><p>When adding external properties, class instances that come from other libraries, or simply things that are not reactive, you should wrap the object with <code>markRaw()</code> before passing it to pinia. Here is an example adding the router to every store:<br><em>å½“æ·»åŠ å¤–éƒ¨å±æ€§æ—¶ï¼Œç±»å®ä¾‹æ¥è‡ªå…¶ä»–åº“ï¼Œæˆ–è€…åªæ˜¯ä¸ååº”æ€§çš„ä¸œè¥¿ï¼Œä½ åº”è¯¥åœ¨ä¼ é€’ä¹‹å‰ä½¿ç”¨<code>markRaw()</code>ã€‚è¿™æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œå°†è·¯ç”±æ·»åŠ åˆ°æ¯ä¸ªstoreï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">import &#123; markRaw &#125; from &#39;vue&#39;\n&#x2F;&#x2F; adapt this based on where your router is\n&#x2F;&#x2F; åŸºäºä½ çš„è·¯ç”±åœ¨è¿™é‡Œé€‚é…\nimport &#123; router &#125; from &#39;.&#x2F;router&#39;\n\npinia.use((&#123; store &#125;) &#x3D;&gt; &#123;\n  store.router &#x3D; markRaw(router)\n&#125;)</code></pre>\n\n<h2 id=\"Calling-subscribe-inside-plugins\"><a href=\"#Calling-subscribe-inside-plugins\" class=\"headerlink\" title=\"Calling $subscribe inside plugins\"></a>Calling <code>$subscribe</code> inside plugins</h2><p>You can use <a href=\"./state.md#subscribing-to-the-state\">store.$subscribe</a> and <a href=\"./actions.md#subscribing-to-actions\">store.$onAction</a> inside plugins too:<br><em>ä½ å¯ä»¥åœ¨æ’ä»¶ä¸­ä½¿ç”¨<a href=\"./state.md#subscribing-to-the-state\">store.$subscribe</a>å’Œ<a href=\"./actions.md#subscribing-to-actions\">store.$onAction</a>ï¼š</em></p>\n<pre class=\"line-numbers language-typescript\" data-language=\"typescript\"><code class=\"language-typescript\">pinia.use((&#123; store &#125;) &#x3D;&gt; &#123;\n  store.$subscribe(() &#x3D;&gt; &#123;\n    &#x2F;&#x2F; react to store changes\n    &#x2F;&#x2F; å“åº”storeå˜åŒ–\n  &#125;)\n  store.$onAction(() &#x3D;&gt; &#123;\n    &#x2F;&#x2F; react to store actions\n    &#x2F;&#x2F; å“åº”storeåŠ¨ä½œ\n  &#125;)\n&#125;)</code></pre>\n\n<h2 id=\"Adding-new-options\"><a href=\"#Adding-new-options\" class=\"headerlink\" title=\"Adding new options\"></a>Adding new options</h2><p>It is possible to create new options when defining stores to later on consume them from plugins. For example, you could create a <code>debounce</code> option that allows you to debounce any action:<br><em>å¯ä»¥åœ¨å®šä¹‰storeæ—¶åˆ›å»ºæ–°çš„é€‰é¡¹ï¼Œä»¥ä¾¿ä»¥åä»æ’ä»¶ä¸­æ¶ˆè´¹ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ª<code>debounce</code>é€‰é¡¹ï¼Œå…è®¸ä½ å°†ä»»ä½•åŠ¨ä½œdebounceï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">defineStore(&#39;search&#39;, &#123;\n  actions: &#123;\n    searchContacts() &#123;\n      &#x2F;&#x2F; ...\n    &#125;,\n  &#125;,\n\n  &#x2F;&#x2F; this will be read by a plugin later on\n  &#x2F;&#x2F; å°†è¢«æ’ä»¶åé¢è¯»å–\n  debounce: &#123;\n    &#x2F;&#x2F; debounce the action searchContacts by 300ms\n    &#x2F;&#x2F; å»¶è¿ŸåŠ¨ä½œsearchContacts 300ms\n    searchContacts: 300,\n  &#125;,\n&#125;)</code></pre>\n\n<p>The plugin can then read that option to wrap actions and replace the original ones:<br><em>æ’ä»¶å¯ä»¥è¯»å–è¿™ä¸ªé€‰é¡¹ï¼Œä»¥ä¾¿åŒ…è£…åŠ¨ä½œå¹¶æ›¿æ¢åŸå§‹åŠ¨ä½œï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">&#x2F;&#x2F; use any debounce library\nimport debounce from &#39;lodash&#x2F;debounce&#39;\n\npinia.use((&#123; options, store &#125;) &#x3D;&gt; &#123;\n  if (options.debounce) &#123;\n    &#x2F;&#x2F; we are overriding the actions with new ones\n    &#x2F;&#x2F; æˆ‘ä»¬è¦†ç›–äº†åŠ¨ä½œ compose\n    return Object.keys(options.debounce).reduce((debouncedActions, action) &#x3D;&gt; &#123;\n      debouncedActions[action] &#x3D; debounce(\n        store[action],\n        options.debounce[action]\n      )\n      return debouncedActions\n    &#125;, &#123;&#125;)\n  &#125;\n&#125;)</code></pre>\n\n<p>Note that custom options are passed as the 3rd argument when using the setup syntax:<br><em>æ³¨æ„ï¼Œè‡ªå®šä¹‰é€‰é¡¹ä¼šä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ä¼ é€’ç»™setupè¯­æ³•ï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">defineStore(\n  &#39;search&#39;,\n  () &#x3D;&gt; &#123;\n    &#x2F;&#x2F; ...\n  &#125;,\n  &#123;\n    &#x2F;&#x2F; this will be read by a plugin later on\n    &#x2F;&#x2F; å°†è¢«æ’ä»¶åé¢è¯»å–\n    debounce: &#123;\n      &#x2F;&#x2F; debounce the action searchContacts by 300ms\n      &#x2F;&#x2F; å»¶è¿ŸåŠ¨ä½œsearchContacts 300ms\n      searchContacts: 300,\n    &#125;,\n  &#125;\n)</code></pre>\n\n<h2 id=\"TypeScript\"><a href=\"#TypeScript\" class=\"headerlink\" title=\"TypeScript\"></a>TypeScript</h2><p>Everything shown above can be done with typing support, so you donâ€™t ever need to use <code>any</code> or <code>@ts-ignore</code>.<br><em>æ‰€æœ‰ä¸Šé¢çš„éƒ½å¯ä»¥ä½¿ç”¨ç±»å‹æ”¯æŒï¼Œæ‰€ä»¥ä½ æ°¸è¿œä¸éœ€è¦ä½¿ç”¨<code>any</code>æˆ–<code>@ts-ignore</code>ã€‚</em></p>\n<h3 id=\"Typing-plugins\"><a href=\"#Typing-plugins\" class=\"headerlink\" title=\"Typing plugins\"></a>Typing plugins</h3><p>A Pinia plugin can be typed as follows:<br><em>ä¸€ä¸ªPiniaæ’ä»¶å¯ä»¥å¦‚ä¸‹ç±»å‹ï¼š</em></p>\n<pre class=\"line-numbers language-typescript\" data-language=\"typescript\"><code class=\"language-typescript\">import &#123; PiniaPluginContext &#125; from &#39;pinia&#39;\n\nexport function myPiniaPlugin(context: PiniaPluginContext) &#123;\n  &#x2F;&#x2F; ...\n&#125;</code></pre>\n\n<h3 id=\"Typing-new-store-properties\"><a href=\"#Typing-new-store-properties\" class=\"headerlink\" title=\"Typing new store properties\"></a>Typing new store properties</h3><p>When adding new properties to stores, you should also extend the <code>PiniaCustomProperties</code> interface.<br><em>å½“æ·»åŠ æ–°çš„å±æ€§åˆ°storeæ—¶ï¼Œä½ åº”è¯¥åŒæ—¶æ‰©å±•<code>PiniaCustomProperties</code>æ¥å£ã€‚</em></p>\n<pre class=\"line-numbers language-typescript\" data-language=\"typescript\"><code class=\"language-typescript\">import &#39;pinia&#39;\n\ndeclare module &#39;pinia&#39; &#123;\n  export interface PiniaCustomProperties &#123;\n    &#x2F;&#x2F; by using a setter we can allow both strings and refs\n    &#x2F;&#x2F; ä½¿ç”¨setterï¼Œæˆ‘ä»¬å¯ä»¥å…è®¸å­—ç¬¦ä¸²å’Œrefs\n    set hello(value: string | Ref&lt;string&gt;)\n    get hello(): string\n\n    &#x2F;&#x2F; you can define simpler values too\n    &#x2F;&#x2F; ä½ ä¹Ÿå¯ä»¥å®šä¹‰ç®€å•çš„å€¼\n    simpleNumber: number\n  &#125;\n&#125;</code></pre>\n\n<p>It can then be written and read safely:<br><em>ç„¶åå¯ä»¥å®‰å…¨çš„å†™å’Œè¯»ï¼š</em></p>\n<pre class=\"line-numbers language-typescript\" data-language=\"typescript\"><code class=\"language-typescript\">pinia.use((&#123; store &#125;) &#x3D;&gt; &#123;\n  store.hello &#x3D; &#39;Hola&#39;\n  store.hello &#x3D; ref(&#39;Hola&#39;)\n\n  store.simpleNumber &#x3D; Math.random()\n  &#x2F;&#x2F; @ts-expect-error: we haven&#39;t typed this correctly\n  store.simpleNumber &#x3D; ref(Math.random())\n&#125;)</code></pre>\n\n<p><code>PiniaCustomProperties</code> is a generic type that allows you to reference properties of a store. Imagine the following example where we copy over the initial options as <code>$options</code> (this would only work for option stores):<br><em><code>PiniaCustomProperties</code>æ˜¯ä¸€ä¸ªæ³›å‹ç±»å‹ï¼Œå…è®¸ä½ å¼•ç”¨storeçš„å±æ€§ã€‚å‡è®¾æˆ‘ä»¬å°†åˆå§‹é€‰é¡¹å¤åˆ¶åˆ°<code>$options</code>ï¼ˆè¿™åªå¯¹é€‰é¡¹storeæœ‰æ•ˆï¼‰ï¼š</em></p>\n<pre class=\"line-numbers language-typescript\" data-language=\"typescript\"><code class=\"language-typescript\">pinia.use((&#123; options &#125;) &#x3D;&gt; (&#123; $options: options &#125;))</code></pre>\n\n<p>We can properly type this by using the 4 generic types of <code>PiniaCustomProperties</code>:<br><em>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨<code>PiniaCustomProperties</code>çš„4ä¸ªæ³›å‹ç±»å‹æ¥ç¡®å®šç±»å‹ï¼š</em></p>\n<pre class=\"line-numbers language-typescript\" data-language=\"typescript\"><code class=\"language-typescript\">import &#39;pinia&#39;\n\ndeclare module &#39;pinia&#39; &#123;\n  export interface PiniaCustomProperties&lt;Id, S, G, A&gt; &#123;\n    $options: &#123;\n      id: Id\n      state?: () &#x3D;&gt; S\n      getters?: G\n      actions?: A\n    &#125;\n  &#125;\n&#125;</code></pre>\n\n<div class=\"custom-quote tip\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12.01 15C12.01 14.5 12.01 14.5 12.01 14.5C12.04 13.75 13 13.46 14.04 12.2C14.41 11.74 14.69 11.41 14.86 10.85C15.15 9.95 14.92 9.18 14.86 9.02C14.8 8.79 14.52 8 13.72 7.46C13.06 7.02 12.42 7 12.14 7C11.9 7 11.36 7 10.78 7.3C10.28 7.56 9.98 7.9 9.83 8.1C9.24 8.82 9.06 9.63 9 10.06\"></path>\n<path stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 18H12.01\"></path>\n</svg></span>\n<p class=\"custom-quote-title\">TIP</p>\n<p>When extending types in generics, they must be named <strong>exactly as in the source code</strong>. <code>Id</code> cannot be named <code>id</code> or <code>I</code>, and <code>S</code> cannot be named <code>State</code>. Here is what every letter stands for:<br><em>åœ¨æ³›å‹ä¸­æ‰©å±•ç±»å‹æ—¶ï¼Œå®ƒä»¬å¿…é¡»ä¸æºä»£ç ä¸­çš„åç§°å®Œå…¨ä¸€è‡´ã€‚<code>Id</code>ä¸èƒ½å‘½åä¸º<code>id</code>æˆ–<code>I</code>ï¼Œ<code>S</code>ä¸èƒ½å‘½åä¸º<code>State</code>ã€‚è¿™é‡Œæ˜¯æ¯ä¸ªå­—æ¯çš„å«ä¹‰ï¼š</em></p>\n<ul>\n<li>S: State</li>\n<li>G: Getters</li>\n<li>A: Actions</li>\n<li>SS: Setup Store &#x2F; Store</li>\n</ul>\n</p>\n</div>\n<h3 id=\"Typing-new-state\"><a href=\"#Typing-new-state\" class=\"headerlink\" title=\"Typing new state\"></a>Typing new state</h3><p>When adding new state properties (to both, the <code>store</code> and <code>store.$state</code>), you need to add the type to <code>PiniaCustomStateProperties</code> instead. Differently from <code>PiniaCustomProperties</code>, it only receives the <code>State</code> generic:<br><em>å½“æ·»åŠ æ–°çš„çŠ¶æ€å±æ€§ï¼ˆåˆ°storeå’Œstore.$stateï¼‰æ—¶ï¼Œä½ éœ€è¦æ·»åŠ ç±»å‹åˆ°<code>PiniaCustomStateProperties</code>ï¼Œä¸åŒäº<code>PiniaCustomProperties</code>ï¼Œå®ƒåªæ¥æ”¶<code>State</code>æ³›å‹ï¼š</em></p>\n<pre class=\"line-numbers language-typescript\" data-language=\"typescript\"><code class=\"language-typescript\">import &#39;pinia&#39;\n\ndeclare module &#39;pinia&#39; &#123;\n  export interface PiniaCustomStateProperties&lt;S&gt; &#123;\n    hello: string\n  &#125;\n&#125;</code></pre>\n\n<h3 id=\"Typing-new-creation-options\"><a href=\"#Typing-new-creation-options\" class=\"headerlink\" title=\"Typing new creation options\"></a>Typing new creation options</h3><p>When creating new options for <code>defineStore()</code>, you should extend the <code>DefineStoreOptionsBase</code>. Differently from <code>PiniaCustomProperties</code>, it only exposes two generics: the State and the Store type, allowing you to limit what can be defined. For example, you can use the names of the actions:<br><em>å½“åˆ›å»ºæ–°çš„é€‰é¡¹for<code>defineStore()</code>æ—¶ï¼Œä½ åº”è¯¥æ‰©å±•<code>DefineStoreOptionsBase</code>ã€‚ä¸åŒäº<code>PiniaCustomProperties</code>ï¼Œå®ƒåªå…¬å¼€ä¸¤ä¸ªæ³›å‹ï¼šçŠ¶æ€å’Œstoreç±»å‹ï¼Œå…è®¸ä½ é™åˆ¶å¯ä»¥å®šä¹‰ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨actionsçš„åç§°ï¼š</em></p>\n<pre class=\"line-numbers language-typescript\" data-language=\"typescript\"><code class=\"language-typescript\">import &#39;pinia&#39;\n\ndeclare module &#39;pinia&#39; &#123;\n  export interface DefineStoreOptionsBase&lt;S, Store&gt; &#123;\n    &#x2F;&#x2F; allow defining a number of ms for any of the actions\n    &#x2F;&#x2F; å…è®¸å®šä¹‰ä»»æ„çš„msçš„ä»»ä½•ä¸€ä¸ªactions\n    debounce?: Partial&lt;Record&lt;keyof StoreActions&lt;Store&gt;, number&gt;&gt;\n  &#125;\n&#125;</code></pre>\n\n<div class=\"custom-quote tip\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12.01 15C12.01 14.5 12.01 14.5 12.01 14.5C12.04 13.75 13 13.46 14.04 12.2C14.41 11.74 14.69 11.41 14.86 10.85C15.15 9.95 14.92 9.18 14.86 9.02C14.8 8.79 14.52 8 13.72 7.46C13.06 7.02 12.42 7 12.14 7C11.9 7 11.36 7 10.78 7.3C10.28 7.56 9.98 7.9 9.83 8.1C9.24 8.82 9.06 9.63 9 10.06\"></path>\n<path stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 18H12.01\"></path>\n</svg></span>\n<p class=\"custom-quote-title\">TIP</p>\n<p>There is also a <code>StoreGetters</code> type to extract the <em>getters</em> from a Store type. You can also extend the options of <em>setup stores</em> or <em>option stores</em> <strong>only</strong> by extending the types <code>DefineStoreOptions</code> and <code>DefineSetupStoreOptions</code> respectively.<br><em>æœ‰ä¸€ä¸ª<code>StoreGetters</code>ç±»å‹æ¥æå–storeçš„_getters_ã€‚ä½ ä¹Ÿå¯ä»¥æ‰©å±•_setup stores_æˆ–_option stores_çš„é€‰é¡¹ï¼Œåªéœ€æ‰©å±•types<code>DefineStoreOptions</code>å’Œ<code>DefineSetupStoreOptions</code>ã€‚</em></p>\n</div>\n<h2 id=\"Nuxt-js\"><a href=\"#Nuxt-js\" class=\"headerlink\" title=\"Nuxt.js\"></a>Nuxt.js</h2><p>When <a href=\"../ssr/nuxt.md\">using pinia alongside Nuxt</a>, you will have to create a <a href=\"https://nuxtjs.org/docs/2.x/directory-structure/plugins\">Nuxt plugin</a> first. This will give you access to the <code>pinia</code> instance:<br><em>å½“ä½¿ç”¨piniaä¸Nuxtä¸€èµ·ä½¿ç”¨ï¼ˆssr&#x2F;nuxt.mdï¼‰ï¼Œä½ éœ€è¦å…ˆåˆ›å»ºä¸€ä¸ª<a href=\"https://nuxtjs.org/docs/2.x/directory-structure/plugins\">Nuxt plugin</a>ã€‚è¿™å°†ä¼šç»™ä½ è®¿é—®piniaå®ä¾‹ï¼š</em></p>\n<pre class=\"line-numbers language-typescript\" data-language=\"typescript\"><code class=\"language-typescript\">&#x2F;&#x2F; plugins&#x2F;myPiniaPlugin.js\nimport &#123; PiniaPluginContext &#125; from &#39;pinia&#39;\nimport &#123; Plugin &#125; from &#39;@nuxt&#x2F;types&#39;\n\nfunction MyPiniaPlugin(&#123; store &#125;: PiniaPluginContext) &#123;\n  store.$subscribe((mutation) &#x3D;&gt; &#123;\n    &#x2F;&#x2F; react to store changes\n    &#x2F;&#x2F; å“åº”storeå˜åŒ–\n    console.log(&#96;[ğŸ $&#123;mutation.storeId&#125;]: $&#123;mutation.type&#125;.&#96;)\n  &#125;)\n\n  &#x2F;&#x2F; Note this has to be typed if you are using TS\n  &#x2F;&#x2F; æ³¨æ„ï¼Œå¦‚æœä½ ä½¿ç”¨TSï¼Œè¿™å¿…é¡»æ˜¯ç±»å‹åŒ–çš„\n  return &#123; creationTime: new Date() &#125;\n&#125;\n\nconst myPlugin: Plugin &#x3D; (&#123; $pinia &#125;) &#x3D;&gt; &#123;\n  $pinia.use(MyPiniaPlugin)\n&#125;\n\nexport default myPlugin</code></pre>\n\n<p>Note the above example is using TypeScript, you have to remove the type annotations <code>PiniaPluginContext</code> and <code>Plugin</code> as well as their imports if you are using a <code>.js</code> file.<br><em>æ³¨æ„ï¼Œä¸Šé¢çš„ä¾‹å­ä½¿ç”¨TypeScriptï¼Œå¦‚æœä½ ä½¿ç”¨äº†<code>.js</code>æ–‡ä»¶,ä½ éœ€è¦ç§»é™¤ç±»å‹æ ‡æ³¨<code>PiniaPluginContext</code>å’Œ<code>Plugin</code>ã€‚</em></p>\n<h1 id=\"Using-a-store-outside-of-a-component\"><a href=\"#Using-a-store-outside-of-a-component\" class=\"headerlink\" title=\"Using a store outside of a component\"></a>Using a store outside of a component</h1><p>Pinia stores rely on the <code>pinia</code> instance to share the same store instance across all calls. Most of the time, this works out of the box by just calling your <code>useStore()</code> function. For example, in <code>setup()</code>, you donâ€™t need to do anything else. But things are a bit different outside of a component.<br>Behind the scenes, <code>useStore()</code> <em>injects</em> the <code>pinia</code> instance you gave to your <code>app</code>. This means that if the <code>pinia</code> instance cannot be automatically injected, you have to manually provide it to the <code>useStore()</code> function.<br>You can solve this differently depending on the kind of application you are writing.<br><em>Pinia å­˜å‚¨ä¾èµ–äºpiniaå®ä¾‹æ¥å…±äº«åŒä¸€ä¸ªstoreå®ä¾‹ã€‚å¤§å¤šæ•°æ—¶å€™ï¼Œè¿™æ˜¯é€šè¿‡è°ƒç”¨ä½ çš„useStore()å‡½æ•°æ¥å®ç°çš„ã€‚ä¾‹å¦‚ï¼Œåœ¨setup()ä¸­ï¼Œä½ ä¸éœ€è¦åšä»»ä½•å…¶ä»–äº‹æƒ…ã€‚ä½†æ˜¯ï¼Œåœ¨ä¸€ä¸ªç»„ä»¶ä¹‹å¤–ï¼Œäº‹æƒ…æ˜¯æœ‰æ‰€ä¸åŒçš„ã€‚</em></p>\n<h2 id=\"Single-Page-Applications\"><a href=\"#Single-Page-Applications\" class=\"headerlink\" title=\"Single Page Applications\"></a>Single Page Applications</h2><p>If you are not doing any SSR (Server Side Rendering), any call of <code>useStore()</code> after installing the pinia plugin with <code>app.use(pinia)</code> will work:<br><em>å¦‚æœä½ ä¸æ˜¯åšä»»ä½•SSRï¼ˆæœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼‰ï¼Œåœ¨å®‰è£…piniaæ’ä»¶åè°ƒç”¨useStore()åï¼Œå®ƒå°†ä¼šå·¥ä½œï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">import &#123; useUserStore &#125; from &#39;@&#x2F;stores&#x2F;user&#39;\nimport &#123; createApp &#125; from &#39;vue&#39;\nimport App from &#39;.&#x2F;App.vue&#39;\n\n&#x2F;&#x2F; âŒ  fails because it&#39;s called before the pinia is created\n&#x2F;&#x2F; âŒ  å› ä¸ºå®ƒåœ¨piniaåˆ›å»ºä¹‹å‰è¢«è°ƒç”¨\nconst userStore &#x3D; useUserStore()\n\nconst pinia &#x3D; createPinia()\nconst app &#x3D; createApp(App)\napp.use(pinia)\n\n&#x2F;&#x2F; âœ… works because the pinia instance is now active\n&#x2F;&#x2F; âœ… å› ä¸ºpiniaå®ä¾‹ç°åœ¨å·²ç»æ¿€æ´»\nconst userStore &#x3D; useUserStore()</code></pre>\n\n<p>The easiest way to ensure this is always applied is to <em>defer</em> calls of <code>useStore()</code> by placing them inside functions that will always run after pinia is installed.<br><em>æœ€ç®€å•çš„æ–¹æ³•æ˜¯é€šè¿‡å°†useStore()å‡½æ•°æ”¾åœ¨å‡½æ•°ä¸­ï¼Œæ¥ä¿è¯å®ƒæ€»æ˜¯åœ¨piniaå®‰è£…åæ‰è¢«è°ƒç”¨ã€‚</em><br>Letâ€™s take a look at this example of using a store inside of a navigation guard with Vue Router:<br><em>çœ‹ä¸€ä¸‹ä½¿ç”¨storeåœ¨å¯¼èˆªå®ˆå«ä¸­çš„ä¾‹å­ï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">import &#123; createRouter &#125; from &#39;vue-router&#39;\nconst router &#x3D; createRouter(&#123;\n  &#x2F;&#x2F; ...\n&#125;)\n\n&#x2F;&#x2F; âŒ Depending on the order of imports this will fail\n&#x2F;&#x2F; âŒ å–å†³äºå¯¼å…¥çš„é¡ºåºï¼Œè¿™å°†ä¼šå¤±è´¥\nconst store &#x3D; useStore()\n\nrouter.beforeEach((to, from, next) &#x3D;&gt; &#123;\n  &#x2F;&#x2F; we wanted to use the store here\n  &#x2F;&#x2F; æˆ‘ä»¬æƒ³è¦ä½¿ç”¨storeè¿™é‡Œ\n  if (store.isLoggedIn) next()\n  else next(&#39;&#x2F;login&#39;)\n&#125;)\n\nrouter.beforeEach((to) &#x3D;&gt; &#123;\n  &#x2F;&#x2F; âœ… This will work because the router starts its navigation after\n  &#x2F;&#x2F; the router is installed and pinia will be installed too\n  &#x2F;&#x2F; âœ… è¿™å°†ä¼šå·¥ä½œï¼Œå› ä¸ºè·¯ç”±å¼€å§‹å¯¼èˆªä¹‹åï¼Œpiniaä¹Ÿä¼šè¢«å®‰è£…\n  const store &#x3D; useStore()\n\n  if (to.meta.requiresAuth &amp;&amp; !store.isLoggedIn) return &#39;&#x2F;login&#39;\n&#125;)</code></pre>\n\n<h2 id=\"SSR-Apps\"><a href=\"#SSR-Apps\" class=\"headerlink\" title=\"SSR Apps\"></a>SSR Apps</h2><p>When dealing with Server Side Rendering, you will have to pass the <code>pinia</code> instance to <code>useStore()</code>. This prevents pinia from sharing global state between different application instances.<br><em>åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“çš„åº”ç”¨ä¸­ï¼Œä½ éœ€è¦ä¼ é€’piniaå®ä¾‹ç»™useStore()ã€‚è¿™å°†é˜»æ­¢piniaåœ¨ä¸åŒåº”ç”¨å®ä¾‹ä¹‹é—´å…±äº«å…¨å±€çŠ¶æ€ã€‚</em><br>There is a whole section dedicated to it in the <a href=\"/ssr/index.md\">SSR guide</a>, this is just a short explanation:<br><em>åœ¨<a href=\"/ssr/index.md\">SSRæŒ‡å—</a>ä¸­æœ‰ä¸€ä¸ªä¸“é—¨çš„ç« èŠ‚ï¼Œè¿™åªæ˜¯ä¸€ä¸ªç®€çŸ­çš„è¯´æ˜ï¼š</em></p>\n<h1 id=\"æ‰‹å†Œ\"><a href=\"#æ‰‹å†Œ\" class=\"headerlink\" title=\"æ‰‹å†Œ\"></a>æ‰‹å†Œ</h1><h1 id=\"Usage-without-setup\"><a href=\"#Usage-without-setup\" class=\"headerlink\" title=\"Usage without setup()\"></a>Usage without <code>setup()</code></h1><p>Pinia can be used even if you are not using the composition API (if you are using Vue 2, you still need to install the <code>@vue/composition-api</code> plugin though). While we recommend you to give the Composition API a try and learn it, it might not be the time for you and your team yet, you might be in the process of migrating an application, or any other reason. There are a few functions:<br><em>Piniaå¯ä»¥è¢«ä½¿ç”¨ï¼Œå³ä½¿ä½ ä¸ä½¿ç”¨ç»„åˆAPIï¼ˆå¦‚æœä½ ä½¿ç”¨Vue 2ï¼Œä½ ä»ç„¶éœ€è¦å®‰è£…<code>@vue/composition-api</code>æ’ä»¶ï¼‰ã€‚ä½†æ˜¯æˆ‘ä»¬å»ºè®®ä½ è¯•ä¸€è¯•ç»„åˆAPIï¼Œç„¶åå­¦ä¹ å®ƒï¼Œéå›¢é˜Ÿåˆä½œï¼Œä½ å¯èƒ½æ­£åœ¨è¿ç§»ä¸€ä¸ªåº”ç”¨ï¼Œæˆ–è€…å…¶ä»–ä»»ä½•åŸå› ã€‚æœ‰ä¸€äº›å‡½æ•°ï¼š</em></p>\n<ul>\n<li><a href=\"#giving-access-to-the-whole-store\">mapStores</a></li>\n<li><a href=\"../core-concepts/state.md#options-api\">mapState</a></li>\n<li><a href=\"../core-concepts/state.md#modifiable-state\">mapWritableState</a></li>\n<li>âš ï¸ <a href=\"../core-concepts/getters.md#options-api\">mapGetters</a> (just for migration convenience, use <code>mapState()</code> instead)</li>\n<li><a href=\"../core-concepts/actions.md#options-api\">mapActions</a></li>\n</ul>\n<h2 id=\"Giving-access-to-the-whole-store\"><a href=\"#Giving-access-to-the-whole-store\" class=\"headerlink\" title=\"Giving access to the whole store\"></a>Giving access to the whole store</h2><p>If you need to access pretty much everything from the store, it might be too much to map every single property of the storeâ€¦ Instead you can get access to the whole store with <code>mapStores()</code>:<br><em>å¦‚æœä½ éœ€è¦è®¿é—®æ•´ä¸ªstoreï¼Œå¯èƒ½ä¼šå¤ªå¤šäº†ï¼Œå¯ä»¥ä½¿ç”¨mapStores()æ¥è®¿é—®æ•´ä¸ªstoreï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">import &#123; mapStores &#125; from &#39;pinia&#39;\n\n&#x2F;&#x2F; given two stores with the following ids\n&#x2F;&#x2F; ç»™å®šä¸¤ä¸ªstoreï¼Œå…¶idä¸ºï¼š\nconst useUserStore &#x3D; defineStore(&#39;user&#39;, &#123;\n  &#x2F;&#x2F; ...\n&#125;)\nconst useCartStore &#x3D; defineStore(&#39;cart&#39;, &#123;\n  &#x2F;&#x2F; ...\n&#125;)\n\nexport default &#123;\n  computed: &#123;\n    &#x2F;&#x2F; note we are not passing an array, just one store after the other\n    &#x2F;&#x2F; each store will be accessible as its id + &#39;Store&#39;\n    &#x2F;&#x2F; æ³¨æ„æˆ‘ä»¬ä¸ä¼ é€’æ•°ç»„ï¼Œè€Œæ˜¯ä¸€ä¸ªstoreä¸€ä¸ªstore\n    ...mapStores(useCartStore, useUserStore)\n  &#125;,\n\n  methods: &#123;\n    async buyStuff() &#123;\n      &#x2F;&#x2F; use them anywhere!\n      &#x2F;&#x2F; ä½¿ç”¨å®ƒä»¬ä»»ä½•åœ°æ–¹ï¼\n      if (this.userStore.isAuthenticated()) &#123;\n        await this.cartStore.buy()\n        this.$router.push(&#39;&#x2F;purchased&#39;)\n      &#125;\n    &#125;,\n  &#125;,\n&#125;</code></pre>\n\n<p>By default, Pinia will add the <code>&quot;Store&quot;</code> suffix to the <code>id</code> of each store. You can customize this behavior by calling the <code>setMapStoreSuffix()</code>:<br><em>é»˜è®¤æƒ…å†µä¸‹ï¼ŒPiniaå°†æ·»åŠ â€œStoreâ€åç¼€åˆ°æ¯ä¸ªstoreçš„idã€‚ä½ å¯ä»¥é€šè¿‡è°ƒç”¨setMapStoreSuffix()æ¥è‡ªå®šä¹‰è¿™ä¸ªè¡Œä¸ºï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">import &#123; createPinia, setMapStoreSuffix &#125; from &#39;pinia&#39;\n\n&#x2F;&#x2F; completely remove the suffix: this.user, this.cart\n&#x2F;&#x2F; å®Œå…¨åˆ é™¤åç¼€ï¼šthis.user, this.cart\nsetMapStoreSuffix(&#39;&#39;)\n&#x2F;&#x2F; this.user_store, this.cart_store (it&#39;s okay, I won&#39;t judge you)\n&#x2F;&#x2F; è¿™ä¸ªuser_store, this.cart_storeï¼ˆä¹Ÿæ˜¯å¯ä»¥çš„ï¼‰\n\nsetMapStoreSuffix(&#39;_store&#39;)\nexport const pinia &#x3D; createPinia()</code></pre>\n\n<h2 id=\"TypeScript-1\"><a href=\"#TypeScript-1\" class=\"headerlink\" title=\"TypeScript\"></a>TypeScript</h2><p>By default, all map helpers support autocompletion and you donâ€™t need to do anything. If you call <code>setMapStoreSuffix()</code> to change the <code>&quot;Store&quot;</code> suffix, you will need to also add it somewhere in a TS file or your <code>global.d.ts</code> file. The most convenient place would be the same place where you call <code>setMapStoreSuffix()</code>:<br><em>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰map helperséƒ½æ”¯æŒè‡ªåŠ¨å®Œæˆï¼Œä½ ä¸éœ€è¦åšä»»ä½•äº‹æƒ…ã€‚å¦‚æœä½ è°ƒç”¨setMapStoreSuffix()æ¥æ”¹å˜â€œStoreâ€åç¼€ï¼Œä½ è¿˜éœ€è¦åœ¨TSæ–‡ä»¶æˆ–ä½ çš„global.d.tsæ–‡ä»¶ä¸­æ·»åŠ å®ƒã€‚æœ€æ–¹ä¾¿çš„åœ°æ–¹å°±æ˜¯åœ¨ä½ è°ƒç”¨setMapStoreSuffix()çš„åœ°æ–¹ï¼š</em></p>\n<pre class=\"line-numbers language-typescript\" data-language=\"typescript\"><code class=\"language-typescript\">import &#123; createPinia, setMapStoreSuffix &#125; from &#39;pinia&#39;\n&#x2F;&#x2F; completely remove the suffix\n&#x2F;&#x2F; å®Œå…¨åˆ é™¤åç¼€\nsetMapStoreSuffix(&#39;&#39;) \n\nexport const pinia &#x3D; createPinia()\n\ndeclare module &#39;pinia&#39; &#123;\n  export interface MapStoresCustomization &#123;\n    &#x2F;&#x2F; set it to the same value as above\n    &#x2F;&#x2F; è®¾ç½®ä¸ºä¸Šé¢çš„å€¼\n    suffix: &#39;&#39;\n  &#125;\n&#125;</code></pre>\n\n<div class=\"custom-quote warning\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12 8V13\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12 15.99V16.01\"></path>\n</svg>\n</span>\n<p class=\"custom-quote-title\">WARNING</p>\n<p>If you are using a TypeScript declaration file (like <code>global.d.ts</code>), make sure to <code>import &#39;pinia&#39;</code> at the top of it to expose all existing types.<br><em>å¦‚æœä½ ä½¿ç”¨äº†ä¸€ä¸ªTypeScriptå£°æ˜æ–‡ä»¶ï¼ˆä¾‹å¦‚<code>global.d.ts</code>ï¼‰ï¼Œè¯·åœ¨å®ƒçš„é¡¶éƒ¨å¯¼å…¥<code>pinia</code>æ¥å¯¹æ‰€æœ‰ç°æœ‰ç±»å‹è¿›è¡Œæš´éœ²ã€‚</em></p>\n</div>\n<h1 id=\"Composing-Stores\"><a href=\"#Composing-Stores\" class=\"headerlink\" title=\"Composing Stores\"></a>Composing Stores</h1><p>Composing stores is about having stores that use each other and there is one rule to follow:<br><em>ç»„åˆstoreæ˜¯å…³äºæœ‰storeä½¿ç”¨å¦ä¸€ä¸ªstoreçš„äº‹æƒ…ï¼Œæœ‰ä¸€æ¡è§„åˆ™è¦éµå®ˆï¼š</em><br>If <strong>two or more stores use each other</strong>, they cannot create an infinite loop through <em>getters</em> or <em>actions</em>. They cannot <strong>both</strong> directly read each other state in their setup function:<br><em>å¦‚æœä¸¤ä¸ªæˆ–å¤šä¸ªstoreä½¿ç”¨äº†å¦ä¸€ä¸ªstoreï¼Œé‚£ä¹ˆå®ƒä»¬ä¸èƒ½é€šè¿‡_getters_æˆ–_actions_åˆ›å»ºæ— é™å¾ªç¯ã€‚å®ƒä»¬ä¸èƒ½åŒæ—¶ç›´æ¥è¯»å–å¦ä¸€ä¸ªstoreçš„çŠ¶æ€ï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">const useX &#x3D; defineStore(&#39;x&#39;, () &#x3D;&gt; &#123;\n  const y &#x3D; useY()\n\n  &#x2F;&#x2F; âŒ This is not possible because y also tries to read x.name\n  &#x2F;&#x2F; âŒ è¿™æ˜¯ä¸å¯èƒ½çš„ï¼Œå› ä¸ºyä¹Ÿè¯•å›¾è¯»å–xçš„name\n  y.name\n\n  function doSomething() &#123;\n    &#x2F;&#x2F; âœ… Read y properties in computed or actions\n    &#x2F;&#x2F; âœ… è¯»å–yå±æ€§åœ¨computedæˆ–actions\n    const yName &#x3D; y.name\n    &#x2F;&#x2F; ...\n  &#125;\n\n  return &#123;\n    name: ref(&#39;I am X&#39;),\n  &#125;\n&#125;)\n\nconst useY &#x3D; defineStore(&#39;y&#39;, () &#x3D;&gt; &#123;\n  const x &#x3D; useX()\n\n  &#x2F;&#x2F; âŒ This is not possible because x also tries to read y.name\n  &#x2F;&#x2F; âŒ è¿™æ˜¯ä¸å¯èƒ½çš„ï¼Œå› ä¸ºxä¹Ÿè¯•å›¾è¯»å–yçš„name\n  x.name\n\n  function doSomething() &#123;\n    &#x2F;&#x2F; âœ… Read x properties in computed or actions\n    &#x2F;&#x2F; âœ… è¯»å–xå±æ€§åœ¨computedæˆ–actions\n    const xName &#x3D; x.name\n    &#x2F;&#x2F; ...\n  &#125;\n\n  return &#123;\n    name: ref(&#39;I am Y&#39;),\n  &#125;\n&#125;)</code></pre>\n\n<h2 id=\"Nested-stores\"><a href=\"#Nested-stores\" class=\"headerlink\" title=\"Nested stores\"></a>Nested stores</h2><p>Note that if one store uses another store, <strong>there is no need to create a new store in a separate file</strong>, you can directly import it. Think of it as nesting.<br><em>å¦‚æœä¸€ä¸ªstoreä½¿ç”¨å¦ä¸€ä¸ªstoreï¼Œ<strong>ä¸éœ€è¦åœ¨ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„store</strong>ï¼Œä½ å¯ä»¥ç›´æ¥å¯¼å…¥å®ƒã€‚è®°ä½å®ƒæ˜¯åµŒå¥—çš„ã€‚</em><br>You can call <code>useOtherStore()</code> at the top of any getter or action:<br><em>ä½ å¯ä»¥åœ¨ä»»ä½•getteræˆ–actionçš„é¡¶éƒ¨è°ƒç”¨useOtherStore()ï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">import &#123; useUserStore &#125; from &#39;.&#x2F;user&#39;\n\nexport const cartStore &#x3D; defineStore(&#39;cart&#39;, &#123;\n  getters: &#123;\n    &#x2F;&#x2F; ... other getters\n    summary(state) &#123;\n      const user &#x3D; useUserStore()\n\n      return &#96;Hi $&#123;user.name&#125;, you have $&#123;state.list.length&#125; items in your cart. It costs $&#123;state.price&#125;.&#96;\n    &#125;,\n  &#125;,\n\n  actions: &#123;\n    purchase() &#123;\n      const user &#x3D; useUserStore()\n\n      return apiPurchase(user.id, this.list)\n    &#125;,\n  &#125;,\n&#125;)</code></pre>\n\n<h2 id=\"Shared-Getters\"><a href=\"#Shared-Getters\" class=\"headerlink\" title=\"Shared Getters\"></a>Shared Getters</h2><p>You can simply call <code>useOtherStore()</code> inside a <em>getter</em>:<br><em>ä½ å¯ä»¥åœ¨_getter_ä¸­ç›´æ¥è°ƒç”¨useOtherStore()ï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">import &#123; defineStore &#125; from &#39;pinia&#39;\nimport &#123; useUserStore &#125; from &#39;.&#x2F;user&#39;\n\nexport const useCartStore &#x3D; defineStore(&#39;cart&#39;, &#123;\n  getters: &#123;\n    summary(state) &#123;\n      const user &#x3D; useUserStore()\n\n      return &#96;Hi $&#123;user.name&#125;, you have $&#123;state.list.length&#125; items in your cart. It costs $&#123;state.price&#125;.&#96;\n    &#125;,\n  &#125;,\n&#125;)</code></pre>\n\n<h2 id=\"Shared-Actions\"><a href=\"#Shared-Actions\" class=\"headerlink\" title=\"Shared Actions\"></a>Shared Actions</h2><p>The same applies to <em>actions</em>:<br><em>åŒæ ·é€‚ç”¨äº_actions_ï¼š</em></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">import &#123; defineStore &#125; from &#39;pinia&#39;\nimport &#123; useUserStore &#125; from &#39;.&#x2F;user&#39;\n\nexport const useCartStore &#x3D; defineStore(&#39;cart&#39;, &#123;\n  actions: &#123;\n    async orderCart() &#123;\n      const user &#x3D; useUserStore()\n\n      try &#123;\n        await apiOrderCart(user.token, this.items)\n        &#x2F;&#x2F; another action\n        this.emptyCart()\n      &#125; catch (err) &#123;\n        displayError(err)\n      &#125;\n    &#125;,\n  &#125;,\n&#125;)</code></pre>","text":"Pinia ç‰¹ç‚¹ğŸ’¡ Intuitiveç›´è§‚çš„Stores are as familiar as components. API designed to let you write well organized stores.å­˜å‚¨å’Œç»„ä»¶æ˜¯ä¸€æ ·çš„ã€‚APIè®¾è®¡äº†è®©ä½ å†™å¥½ç»„ç»‡çš„å­˜å‚¨ã€‚ ğŸ”‘...","link":"","photos":[],"count_time":{"symbolsCount":"68k","symbolsTime":"1:02"},"categories":[{"name":"vue","slug":"vue","count":14,"path":"api/categories/vue.json"}],"tags":[{"name":"vue","slug":"vue","count":14,"path":"api/tags/vue.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Pinia-%E7%89%B9%E7%82%B9\"><span class=\"toc-text\">Pinia ç‰¹ç‚¹</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Introduction\"><span class=\"toc-text\">Introduction</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%B5%B7%E6%AD%A5\"><span class=\"toc-text\">èµ·æ­¥</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Installation\"><span class=\"toc-text\">Installation</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#What-is-a-Store\"><span class=\"toc-text\">What is a Store?</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#When-should-I-use-a-Store\"><span class=\"toc-text\">When should I use a Store</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5\"><span class=\"toc-text\">æ ¸å¿ƒæ¦‚å¿µ</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Store\"><span class=\"toc-text\">Store</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#State\"><span class=\"toc-text\">State</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Getters\"><span class=\"toc-text\">Getters</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Accessing-other-getters\"><span class=\"toc-text\">Accessing other getters</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Passing-arguments-to-getters\"><span class=\"toc-text\">Passing arguments to getters</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Accessing-other-stores-getters\"><span class=\"toc-text\">Accessing other stores getters</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Usage-with-setup\"><span class=\"toc-text\">Usage with setup()</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Usage-with-the-Options-API\"><span class=\"toc-text\">Usage with the Options API</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#With-setup\"><span class=\"toc-text\">With setup()</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%BF%99%E6%98%AF%E4%B8%80%E4%B8%AA%E4%BC%98%E7%82%B9\"><span class=\"toc-text\">è¿™æ˜¯ä¸€ä¸ªä¼˜ç‚¹</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Without-setup\"><span class=\"toc-text\">Without setup()</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Actions\"><span class=\"toc-text\">Actions</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Accessing-other-stores-actions\"><span class=\"toc-text\">Accessing other stores actions</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%BF%99%E6%AF%94react%E5%A5%BD%E7%94%A8%EF%BC%8C%E5%8F%AF%E4%BB%A5%E5%B5%8C%E5%A5%97\"><span class=\"toc-text\">è¿™æ¯”reactå¥½ç”¨ï¼Œå¯ä»¥åµŒå¥—</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Usage-with-setup-1\"><span class=\"toc-text\">Usage with setup()</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Usage-with-the-Options-API-1\"><span class=\"toc-text\">Usage with the Options API</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#With-setup-1\"><span class=\"toc-text\">With setup()</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Without-setup-1\"><span class=\"toc-text\">Without setup()</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Subscribing-to-actions\"><span class=\"toc-text\">Subscribing to actions</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Plugins\"><span class=\"toc-text\">Plugins</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Introduction-1\"><span class=\"toc-text\">Introduction</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Augmenting-a-Store\"><span class=\"toc-text\">Augmenting a Store</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Adding-new-state\"><span class=\"toc-text\">Adding new state</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Adding-new-external-properties\"><span class=\"toc-text\">Adding new external properties</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Calling-subscribe-inside-plugins\"><span class=\"toc-text\">Calling $subscribe inside plugins</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Adding-new-options\"><span class=\"toc-text\">Adding new options</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#TypeScript\"><span class=\"toc-text\">TypeScript</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Typing-plugins\"><span class=\"toc-text\">Typing plugins</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Typing-new-store-properties\"><span class=\"toc-text\">Typing new store properties</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Typing-new-state\"><span class=\"toc-text\">Typing new state</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Typing-new-creation-options\"><span class=\"toc-text\">Typing new creation options</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Nuxt-js\"><span class=\"toc-text\">Nuxt.js</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Using-a-store-outside-of-a-component\"><span class=\"toc-text\">Using a store outside of a component</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Single-Page-Applications\"><span class=\"toc-text\">Single Page Applications</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#SSR-Apps\"><span class=\"toc-text\">SSR Apps</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E6%89%8B%E5%86%8C\"><span class=\"toc-text\">æ‰‹å†Œ</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Usage-without-setup\"><span class=\"toc-text\">Usage without setup()</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Giving-access-to-the-whole-store\"><span class=\"toc-text\">Giving access to the whole store</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#TypeScript-1\"><span class=\"toc-text\">TypeScript</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Composing-Stores\"><span class=\"toc-text\">Composing Stores</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Nested-stores\"><span class=\"toc-text\">Nested stores</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Shared-Getters\"><span class=\"toc-text\">Shared Getters</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Shared-Actions\"><span class=\"toc-text\">Shared Actions</span></a></li></ol>","author":{"name":"ä¸¾æ‰‹æ‘˜æœˆäº®","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/202303171118970.webp","link":"/","description":"<div><p>ä¸¾æ‰‹å‘è‹ç©¹ï¼Œå¹¶éä¸€å®šè¦æ‘˜åˆ°æ˜Ÿæœˆ</p><p>çœ¼ä¸­æœ‰å…‰ï¼Œå¿ƒä¸­æœ‰æ¢¦ï¼Œè„šä¸‹æœ‰è·¯</p><div>","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"javascript event","uid":"30090ec9fe2f3c6d588fdab6524f755c","slug":"2022-06-13event","date":"2022-06-13T02:31:04.000Z","updated":"2023-08-04T06:07:10.007Z","comments":true,"path":"api/articles/2022-06-13event.json","keywords":null,"cover":null,"text":"ç°è±¡æè¿°react_devtools_backend.js:4026 Warning: This synthetic event is reused for performance reasons. If you&#39;re seeing this, you&#39;re ac...","link":"","photos":[],"count_time":{"symbolsCount":"2.8k","symbolsTime":"3 mins."},"categories":[{"name":"React","slug":"React","count":39,"path":"api/categories/React.json"}],"tags":[{"name":"React","slug":"React","count":33,"path":"api/tags/React.json"}],"author":{"name":"ä¸¾æ‰‹æ‘˜æœˆäº®","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/202303171118970.webp","link":"/","description":"<div><p>ä¸¾æ‰‹å‘è‹ç©¹ï¼Œå¹¶éä¸€å®šè¦æ‘˜åˆ°æ˜Ÿæœˆ</p><p>çœ¼ä¸­æœ‰å…‰ï¼Œå¿ƒä¸­æœ‰æ¢¦ï¼Œè„šä¸‹æœ‰è·¯</p><div>","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}},"next_post":{"title":"å‰ç«¯åŸºç¡€- æ•°ç»„å¯¹è±¡æ–¹æ³•å®ç°åŸç†","uid":"57a999928e12a5391c5331208745c7af","slug":"2022-06-10js-arr","date":"2022-06-10T07:06:40.000Z","updated":"2023-02-20T21:20:56.461Z","comments":true,"path":"api/articles/2022-06-10js-arr.json","keywords":null,"cover":"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fres.cloudinary.com%2Fcitiar%2Fimage%2Fupload%2Fv1611373461%2Fucamc%2Fcommon%2Fthumb_5x_Javascript-O.png&refer=http%3A%2F%2Fres.cloudinary.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1657437058&t=2169b1ec59622a8e20039841292e4d8b","text":"æå‰ç»ˆæ­¢å¾ªç¯è§ï¼š2022-10-16js å“ªäº›å¾ªç¯å¯ä»¥æå‰ç»ˆæ­¢æ‰å¾ªç¯ for å¾ªç¯ for...in some every åºå· æ–¹æ³• break continue return return true return false æå‰ç»ˆæ­¢å¾ªç¯ 1 for å¾ªç¯ æˆåŠŸ è·³å‡ºæœ¬æ¬¡å¾ªç¯...","link":"","photos":[],"count_time":{"symbolsCount":"9.2k","symbolsTime":"8 mins."},"categories":[{"name":"å‰ç«¯åŸºç¡€","slug":"å‰ç«¯åŸºç¡€","count":54,"path":"api/categories/å‰ç«¯åŸºç¡€.json"}],"tags":[{"name":"å‰ç«¯åŸºç¡€","slug":"å‰ç«¯åŸºç¡€","count":56,"path":"api/tags/å‰ç«¯åŸºç¡€.json"},{"name":"é¢è¯•","slug":"é¢è¯•","count":20,"path":"api/tags/é¢è¯•.json"}],"author":{"name":"ä¸¾æ‰‹æ‘˜æœˆäº®","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/202303171118970.webp","link":"/","description":"<div><p>ä¸¾æ‰‹å‘è‹ç©¹ï¼Œå¹¶éä¸€å®šè¦æ‘˜åˆ°æ˜Ÿæœˆ</p><p>çœ¼ä¸­æœ‰å…‰ï¼Œå¿ƒä¸­æœ‰æ¢¦ï¼Œè„šä¸‹æœ‰è·¯</p><div>","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}}}