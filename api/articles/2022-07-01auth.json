{"title":"æˆæƒä¸æ ¡éªŒåœºæ™¯ã€Œç®€èŠã€","uid":"22d71efeaa5b73e832334cf42551f026","slug":"2022-07-01auth","date":"2022-07-01T09:12:26.000Z","updated":"2022-09-16T13:54:56.205Z","comments":true,"path":"api/articles/2022-07-01auth.json","keywords":null,"cover":null,"content":"<h2 id=\"æœ€ç®€å•\"><a href=\"#æœ€ç®€å•\" class=\"headerlink\" title=\"æœ€ç®€å•\"></a>æœ€ç®€å•</h2><p>ç”¨å˜é‡ï¼Œæ¨¡æ‹Ÿæ•°æ®</p>\n<h2 id=\"session-cookie\"><a href=\"#session-cookie\" class=\"headerlink\" title=\"session + cookie\"></a>session + cookie</h2><p>æ¯ä¸ªç”¨æˆ·å¯¹åº”ä¸€ä¸ªä¼šè¯</p>\n<h2 id=\"SSO-1\"><a href=\"#SSO-1\" class=\"headerlink\" title=\"SSO 1\"></a>SSO 1</h2><ul>\n<li>session + redis + cookie</li>\n</ul>\n<p>è§‰å¾—æœ‰ç‚¹å¥‡è‘©ï¼Œç¬¬äºŒä»½<strong>æ ¸å¿ƒé¡¹ç›®</strong>é‡åˆ°</p>\n<h2 id=\"jwt-redis\"><a href=\"#jwt-redis\" class=\"headerlink\" title=\"jwt + redis\"></a>jwt + redis</h2><p>ç¬¬äºŒä»½<strong>éæ ¸å¿ƒé¡¹ç›®</strong>é‡åˆ°</p>\n<p><strong>ä»¥ä¸‹æ˜¯ä¸€èˆ¬å…¬å¸å¸¸ç”¨çš„æ–¹å¼ï¼Œé¢è¯•çš„æ—¶å€™ï¼Œå¤§å®¶éƒ½åœ¨å” è¿™ä¸ª</strong></p>\n<h2 id=\"SSO-2\"><a href=\"#SSO-2\" class=\"headerlink\" title=\"SSO 2\"></a>SSO 2</h2><ul>\n<li>jwt + redis + cookie</li>\n</ul>\n<h2 id=\"ç¬¬ä¸‰æ–¹\"><a href=\"#ç¬¬ä¸‰æ–¹\" class=\"headerlink\" title=\"ç¬¬ä¸‰æ–¹\"></a>ç¬¬ä¸‰æ–¹</h2><ul>\n<li>æˆæƒ + SSOï¼ˆ jwt + redis + cookieï¼‰</li>\n<li>æ‰«ç æˆæƒ + SSOï¼ˆ jwt + redis + cookieï¼‰</li>\n</ul>\n<p>ç¬¬ä¸‰æ–¹ä½¿ç”¨æœ€å¤šçš„å¾®ä¿¡ã€æ”¯ä»˜å®ã€QQã€é£ä¹¦ï¼Œç¬¬ä¸‰æ–¹æˆæƒä¸€èˆ¬é€šè¿‡å›è°ƒçš„å½¢å¼ï¼ŒæŠŠæˆæƒç»“æœ<code>code</code>è¿”å›ä¸ªå¼€å‘è€…</p>\n<h2 id=\"ä¼ä¸šåˆè§„\"><a href=\"#ä¼ä¸šåˆè§„\" class=\"headerlink\" title=\"ä¼ä¸šåˆè§„\"></a>ä¼ä¸šåˆè§„</h2><ul>\n<li>app æ‰«ç +ä¼ä¸š web + SSO(jwt + redis + cookie)</li>\n</ul>\n<p>å¤§å…¬å¸éœ€è¦åš<strong>åˆè§„</strong>ï¼Œå°¤å…¶æ˜¯ä¸Šå¸‚å…¬å¸è¦è¿™äº›ä¸œä¸œï¼Œæ‰€æœ‰ç”¨æˆ·æ•°æ®å…¨éƒ¨æ¥è‡ªå…¬å¸å†…éƒ¨ç³»ç»Ÿï¼Œé¢è¯•çš„æ—¶å€™ï¼Œå¤§å®¶åŸºæœ¬ä¸Šä¸ä¼šè°ˆè¿™ä¸ªï¼Œå¦‚æœä½ ç»™é¢è¯•å®˜å” äº†ï¼Œè‚¯å®šè§‰å¾—ä½ åœ¨èƒ¡è¯´å…«é“ï¼Œå› ä¸ºä¸‹é¢çš„å¾ˆçµæ´»,åœºæ™¯å’Œå¾®ä¿¡ç±»ä¼¼ï¼Œä½ è¯´æ‰«ç ï¼Œé¢è¯•å®˜è‚¯å®šè®¤ä¸ºä½ è¯´çš„æ˜¯ä¸Šé¢<code>ç¬¬ä¸‰æ–¹</code>é‚£å¥—ä¸œè¥¿ï¼Œç„¶è€Œå®Œå…¨ä¸ä¸€æ ·</p>\n<p>åœ¨æ‰«ç ç™»å½•å’Œç¡®è®¤ç™»é™†æ—¶å€™è¿™ä¸ªç‚¹åˆ†äº†å¤šç§ï¼ˆé•¿é“¾æ¥ã€Websocketã€MQTTã€å‚å®¶é€šé“æ¨é€ï¼Œéƒ½å¯ä»¥å®ç°ï¼‰</p>\n<p>ä»¥æˆ‘ç¬¬ä¸‰ä»½å·¥ä½œä¸ºä¾‹ï¼š</p>\n<ul>\n<li><code>Flutteræ¡Œé¢ç«¯VPN</code> + <code>ç§»åŠ¨ç«¯</code>ç”¨äº† MQTT</li>\n<li><code>Electronæ¡Œé¢ç«¯</code> + <code>ç§»åŠ¨ç«¯</code>, Electron æ¡Œé¢ç«¯ç”¨å®šæ—¶å™¨è°ƒ,<code>ç§»åŠ¨ç«¯</code>MQTT</li>\n<li><code>æ‰«ç æ‰“å¼€é“¾æ¥</code>ï¼Œç›´æ¥æ³¨å…¥ cookieï¼Œè€Œä¸æ˜¯é€šè¿‡<code>å›è°ƒ</code>æˆ–è€…<code>redirecté‡å®šå‘</code></li>\n</ul>\n<p>ä¹‹æ‰€ä»¥æ²¡ç”¨å‚å®¶é€šé“ï¼Œå› ä¸ºå…¬å¸åŸç”Ÿéƒ¨é—¨çš„å‚å®¶é€šé“éœ€è¦æ”¹é€ æ‰èƒ½ç”¨ï¼Œç”±äºæ”¹é€ æˆæœ¬çš„å­˜åœ¨ï¼Œä¸æä¾›ã€‚æ€»ä¹‹éº»çƒ¦ï½ï¼Œæ¢äº†ä¸ª MQTT æ–¹æ¡ˆ</p>\n<p>mobile åŸç”Ÿ(ã€Œ<code>RN</code>ã€<code>Flutter</code>ã€<code>IOS</code>ã€<code>å®‰å“</code>ã€<code>Weex</code>ã€<code>uniapp</code>ã€<code>ionic</code>ã€)åˆ†çš„ç»†ç‚¹,æˆ‘é‡åˆ°è¿‡çš„éƒ½åˆ—å‡ºæ¥äº†ï¼Œç®€å•æ¥è¯´å°±æ˜¯ IOS å’Œå®‰å“ï¼Œè‡³äºé¸¿è’™å•¥çš„å°±ä¸è¯´äº†</p>\n<p>æ€»ç»“ï¼šè¿™ä¸ªå§ï¼Œå°±ç›¸å½“äºï¼Œå…¬å¸å¼€å‘äº†è‡ªå·±çš„<code>å¾®ä¿¡æ¡Œé¢window/mac</code> + <code>å¾®ä¿¡æ‰‹æœº</code></p>\n<h2 id=\"webview-cookie-æ³¨å…¥\"><a href=\"#webview-cookie-æ³¨å…¥\" class=\"headerlink\" title=\"webview cookie æ³¨å…¥\"></a>webview cookie æ³¨å…¥</h2><p><code>react-native-webview</code>å‘ h5 åº”ç”¨æ³¨å…¥ cookieï¼Œ<code>èµ° SSO éªŒè¯å®ç°å…ç™»</code>ï¼Œ åŸç”Ÿå½“ç„¶ä¹ŸOKçš„</p>\n","text":"æœ€ç®€å•ç”¨å˜é‡ï¼Œæ¨¡æ‹Ÿæ•°æ® session + cookieæ¯ä¸ªç”¨æˆ·å¯¹åº”ä¸€ä¸ªä¼šè¯ SSO 1 session + redis + cookie è§‰å¾—æœ‰ç‚¹å¥‡è‘©ï¼Œç¬¬äºŒä»½æ ¸å¿ƒé¡¹ç›®é‡åˆ° jwt + redisç¬¬äºŒä»½éæ ¸å¿ƒé¡¹ç›®é‡åˆ° ä»¥ä¸‹æ˜¯ä¸€èˆ¬å…¬å¸å¸¸ç”¨çš„æ–¹å¼ï¼Œé¢è¯•çš„æ—¶å€™ï¼Œå¤§å®¶éƒ½åœ¨å” è¿™ä¸ª SSO ...","link":"","photos":[],"count_time":{"symbolsCount":914,"symbolsTime":"1 mins."},"categories":[{"name":"auth","slug":"auth","count":1,"path":"api/categories/auth.json"}],"tags":[{"name":"auth","slug":"auth","count":1,"path":"api/tags/auth.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%9C%80%E7%AE%80%E5%8D%95\"><span class=\"toc-text\">æœ€ç®€å•</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#session-cookie\"><span class=\"toc-text\">session + cookie</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#SSO-1\"><span class=\"toc-text\">SSO 1</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#jwt-redis\"><span class=\"toc-text\">jwt + redis</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#SSO-2\"><span class=\"toc-text\">SSO 2</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%AC%AC%E4%B8%89%E6%96%B9\"><span class=\"toc-text\">ç¬¬ä¸‰æ–¹</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BC%81%E4%B8%9A%E5%90%88%E8%A7%84\"><span class=\"toc-text\">ä¼ä¸šåˆè§„</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#webview-cookie-%E6%B3%A8%E5%85%A5\"><span class=\"toc-text\">webview cookie æ³¨å…¥</span></a></li></ol>","author":{"name":"é™ˆæµ·é¾™","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"éœ€è¦å°±å­¦å‘—ï¼Œå¤šå¤§ç‚¹äº‹ğŸ˜‚","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"å‰ç«¯åŸºç¡€-jsç®—æ³•","uid":"b6eefb99ab4e0f88e52602483fde65dd","slug":"2022-07-04js","date":"2022-07-04T07:31:24.000Z","updated":"2022-09-16T13:54:56.209Z","comments":true,"path":"api/articles/2022-07-04js.json","keywords":null,"cover":[],"text":"æ’åºå†’æ³¡æ’åº é€‰æ‹©æ’åº æ’å…¥æ’åº å½’å¹¶æ’åº å¸Œå°”æ’åº å¿«é€Ÿæ’åº &#x2F;* å¿«æ’æ˜¯å†’æ³¡çš„ä¸€ç§æ”¹è¿›ï¼ŒåŸºäºåˆ†æ²»æ€æƒ³ *&#x2F; const arr2 &#x3D; [2, 44, 1, 0, -22, 56, -78]; function quickSort2(arr) &#...","link":"","photos":[],"count_time":{"symbolsCount":"28k","symbolsTime":"26 mins."},"categories":[{"name":"å‰ç«¯åŸºç¡€","slug":"å‰ç«¯åŸºç¡€","count":27,"path":"api/categories/å‰ç«¯åŸºç¡€.json"}],"tags":[{"name":"å‰ç«¯åŸºç¡€","slug":"å‰ç«¯åŸºç¡€","count":29,"path":"api/tags/å‰ç«¯åŸºç¡€.json"}],"author":{"name":"é™ˆæµ·é¾™","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"éœ€è¦å°±å­¦å‘—ï¼Œå¤šå¤§ç‚¹äº‹ğŸ˜‚","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}},"next_post":{"title":"react hook ä½¿ç”¨ bug","uid":"e5dbf22be09b32f376c35e2a002b6557","slug":"2022-07-01bug","date":"2022-07-01T03:16:39.000Z","updated":"2022-09-16T14:29:30.425Z","comments":true,"path":"api/articles/2022-07-01bug.json","keywords":null,"cover":[],"text":"é—®é¢˜Rendered more hooks than during the previous render. è§£å†³ ä¸¤ç§æ–¹å¼è§£å†³ï¼š å‹¾å­å‰ç½® ä¸ç”¨è¿™ä¸ªå‹¾å­ æ€»ç»“å‹¾å­ä¸èƒ½åœ¨æ¡ä»¶è¯­å¥ä¸­ä½¿ç”¨ è¿™ä¸ªè¦æ³¨æ„å¹¶ä¸æ˜¯ä¸€å®šè¿™ç§å½¢å¼ if (æ¡ä»¶) &#123; &#x2F;&#x2F; å¦‚æœæ¡ä»¶...","link":"","photos":[],"count_time":{"symbolsCount":507,"symbolsTime":"1 mins."},"categories":[{"name":"bug","slug":"bug","count":4,"path":"api/categories/bug.json"}],"tags":[{"name":"react","slug":"react","count":13,"path":"api/tags/react.json"},{"name":"bug","slug":"bug","count":6,"path":"api/tags/bug.json"}],"author":{"name":"é™ˆæµ·é¾™","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"éœ€è¦å°±å­¦å‘—ï¼Œå¤šå¤§ç‚¹äº‹ğŸ˜‚","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}}}