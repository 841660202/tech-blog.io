{"title":"React@16.5.0 createElement","uid":"5d9b43eaa4875051b6cba337b4fe23d2","slug":"2022-07-21react-createElement","date":"2022-07-21T03:18:50.000Z","updated":"2022-09-16T14:01:08.860Z","comments":true,"path":"api/articles/2022-07-21react-createElement.json","keywords":null,"cover":null,"content":"<h2 id=\"é¡¹ç›®å¼€å‘æ—¶å€™ä¹¦å†™ä»£ç \"><a href=\"#é¡¹ç›®å¼€å‘æ—¶å€™ä¹¦å†™ä»£ç \" class=\"headerlink\" title=\"é¡¹ç›®å¼€å‘æ—¶å€™ä¹¦å†™ä»£ç \"></a>é¡¹ç›®å¼€å‘æ—¶å€™ä¹¦å†™ä»£ç </h2><p><strong>æŸä¸ªé¡µé¢æˆ–è€…æ˜¯ç»„ä»¶</strong></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">&#x2F;&#x2F;  class ReactComponent extends React.Component &#123;\n&#x2F;&#x2F;      render() &#123;\n&#x2F;&#x2F;          return &lt;p className&#x3D;&quot;class&quot;&gt;Hello React&lt;&#x2F;p&gt;;\n&#x2F;&#x2F;      &#125;\n&#x2F;&#x2F;  &#125;\n&#x2F;&#x2F;  ä»¥ä¸Šä»£ç ä¼šç¼–è¯‘ä¸ºï¼š\nclass ReactComponent extends React.Component &#123;\n  render() &#123;\n    React.createElement(&quot;p&quot;, &#123; className: &quot;class&quot; &#125;, &quot;Hello React&quot;); &#x2F;&#x2F; ä¹‹å‰çœ‹åˆ°èœœå£³ä»£ç æ˜¯è¿™ä¸ªæ ·å­ï¼Œæˆ‘è¿˜ä»¥ä¸ºæ˜¯ç ”å‘æ‰‹å†™çš„å‘¢\n  &#125;\n&#125;\n\n&#x2F;&#x2F;  &lt;ReactComponent someProp&#x3D;&quot;prop&quot; &#x2F;&gt;\nReact.createElement(ReactComponent, &#123; someProp: &quot;prop&quot; &#125;, null);</code></pre>\n\n<p>ä»¥ä¸Šä»£ç  api åœ¨<code>packages/react/src/React.js</code></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">const React &#x3D; &#123;\n  createElement: createElement, &#x2F;&#x2F; packages&#x2F;react&#x2F;src&#x2F;ReactElement.js  createElement -&gt; ReactElement\n  version: ReactVersion,\n&#125;;\nexport default React;</code></pre>\n\n<h2 id=\"React-æ˜¯å¦‚ä½•å°†è™šæ‹Ÿ-DOM-è½¬æ¢ä¸ºçœŸå®-DOM\"><a href=\"#React-æ˜¯å¦‚ä½•å°†è™šæ‹Ÿ-DOM-è½¬æ¢ä¸ºçœŸå®-DOM\" class=\"headerlink\" title=\"React æ˜¯å¦‚ä½•å°†è™šæ‹Ÿ DOM è½¬æ¢ä¸ºçœŸå® DOM\"></a>React æ˜¯å¦‚ä½•å°†è™šæ‹Ÿ DOM è½¬æ¢ä¸ºçœŸå® DOM</h2><ol>\n<li>é¦–å…ˆæˆ‘ä»¬è¦é€šè¿‡ <code>React.createElement</code> å‡½æ•°æ¥å°†æˆ‘ä»¬å®šä¹‰å¥½çš„ç»„ä»¶è¿›è¡Œè½¬æ¢ä¸º React å…ƒç´ </li>\n<li>å°†åˆ›å»ºå¥½çš„ <code>React</code> å…ƒç´ é€šè¿‡è°ƒç”¨ <code>ReactDom.render</code> æ¥è¿›è¡Œæ¸²æŸ“</li>\n<li><code>ReactDom.render</code> è°ƒç”¨åå…ˆåˆ›å»ºæ ¹å¯¹è±¡ <code>root</code>ï¼Œç„¶åè°ƒç”¨ <code>root.render</code></li>\n<li>ç„¶åç»è¿‡è‹¥å¹²å‡½æ•°è°ƒç”¨ï¼Œæ¥åˆ° <code>workLoop</code> å‡½æ•°ï¼Œå®ƒå°†éå†è™šæ‹Ÿ DOM æ ‘ï¼Œå°†ä¸‹ä¸€ä¸ªéœ€è¦å¤„ç†çš„è™šæ‹Ÿ DOM ä¼ ç»™ <code>performUnitOfWork</code>ï¼Œ<code>performUnitOfWork</code> å†å°†è™šæ‹Ÿ DOM ä¼ ç»™ <code>beginWork</code> åï¼Œ<code>beginWork</code>æ ¹æ®è™šæ‹Ÿ DOM çš„ç±»å‹ä¸åŒè¿›è¡Œç›¸åº”å¤„ç†ï¼Œå¹¶å¯¹å­èŠ‚ç‚¹è¿›è¡Œå¤„ç†ä¸º <code>Fiber</code> ç±»å‹ï¼Œä¸º <code>Fiber</code> ç±»å‹è™šæ‹Ÿ DOM , æ·»åŠ çˆ¶èŠ‚ç‚¹ã€å…„å¼ŸèŠ‚ç‚¹ç­‰ç»†èŠ‚ï¼Œä»¥æ–¹ä¾¿éå†æ ‘ã€‚</li>\n<li><code>beginWork</code> å¤„ç†å®Œåè¿”å›éœ€è¦å¤„ç†çš„å­å…ƒç´ å†ç»§ç»­å¤„ç†ï¼Œç›´åˆ°æ²¡æœ‰å­å…ƒç´ ï¼ˆå³è¿”å› nullï¼‰ï¼Œæ­¤æ—¶ <code>performUnitOfWork</code> è°ƒç”¨ <code>completeUnitOfWork</code> å¤„ç†è¿™é¢—<code>è™šæ‹Ÿ DOM å­æ ‘</code>ï¼Œå°†å…¶è½¬<code>æ¢ä¸ºçœŸå® DOM</code>ã€‚</li>\n<li>æœ€åæ‰€æœ‰çš„<code>è™šæ‹Ÿ DOM</code> éƒ½å°†è½¬ä¸º<code>çœŸå® DOM</code>ã€‚</li>\n</ol>\n<h2 id=\"å‡½æ•°è°ƒç”¨è¿‡ç¨‹\"><a href=\"#å‡½æ•°è°ƒç”¨è¿‡ç¨‹\" class=\"headerlink\" title=\"å‡½æ•°è°ƒç”¨è¿‡ç¨‹\"></a>å‡½æ•°è°ƒç”¨è¿‡ç¨‹</h2><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">root.render(children, callback) -&gt;\nDOMRenderer.updateContainer(children, root, null, work._onCommit) -&gt;\nupdateContainerAtExpirationTime(\n    element,\n    container,\n    parentComponent,\n    expirationTime,\n    callback,\n) -&gt;\nscheduleRootUpdate(current, element, expirationTime, callback) -&gt;\nscheduleWork(current, expirationTime) -&gt;\nrequestWork(root, rootExpirationTime) -&gt;\nperformWorkOnRoot(root, Sync, false) -&gt;\nrenderRoot(root, false) -&gt;\nworkLoop(isYieldy) -&gt;\nperformUnitOfWork(nextUnitOfWork: Fiber) &#x3D;&gt; Fiber | null -&gt;\nbeginWork(current, workInProgress, nextRenderExpirationTime)\n</code></pre>\n\n<p><strong>ä½¿ç”¨ ReactDom æ¸²æŸ“åˆ° é¡µé¢ä¸Š</strong></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">ReactDom.render(React.createElement(App), document.getElementById(&quot;root&quot;));</code></pre>\n\n<h2 id=\"æˆ‘è‰¹ï¼Œæœ‰ç‚¹æ‡µï½\"><a href=\"#æˆ‘è‰¹ï¼Œæœ‰ç‚¹æ‡µï½\" class=\"headerlink\" title=\"æˆ‘è‰¹ï¼Œæœ‰ç‚¹æ‡µï½\"></a>æˆ‘è‰¹ï¼Œæœ‰ç‚¹æ‡µï½</h2><p>å¾…è¡¥ï¼Œå…ˆå†™ä¸ªå…¶ä»–çš„å‹å‹æƒŠ</p>\n<h2 id=\"å‚è€ƒé“¾æ¥\"><a href=\"#å‚è€ƒé“¾æ¥\" class=\"headerlink\" title=\"å‚è€ƒé“¾æ¥\"></a>å‚è€ƒé“¾æ¥</h2><p><a href=\"https://blog.csdn.net/weixin_34221276/article/details/88770678\" target=\"_blank\" >React æºç é˜…è¯»ï¼šè™šæ‹Ÿ DOM çš„åˆå§‹åŒ–</a></p>\n<p><a href=\"https://www.cnblogs.com/JhoneLee/p/9481321.html\" target=\"_blank\" >React 16 æºç çå‡ æŠŠè§£è¯» ã€ä¸€ã€‘ ä»jsxåˆ°ä¸€ä¸ªreact è™šæ‹Ÿdomå¯¹è±¡</a></p>\n<p><a href=\"https://www.cnblogs.com/JhoneLee/p/9482911.html\" target=\"_blank\" >React 16 æºç çå‡ æŠŠè§£è¯» ã€äºŒã€‘ reactç»„ä»¶çš„è§£æè¿‡ç¨‹</a></p>\n<p><a href=\"https://www.cnblogs.com/JhoneLee/p/9481618.html\" target=\"_blank\" >React 16 æºç çå‡ æŠŠè§£è¯» ã€ä¸‰ ç‚¹ ä¸€ã€‘ æŠŠreactç»„ä»¶å¯¹è±¡å¼„åˆ°domä¸­å»(çŸ›å¤´æŒ‡å‘fiberï¼Œfiberä¸è§£è¯»è¿™ä¸ªè¿‡ç¨‹ä¹Ÿä¸çŸ¥é“) </a></p>\n<p><a href=\"https://www.cnblogs.com/JhoneLee/p/9493776.html\" target=\"_blank\" >React 16 æºç çå‡ æŠŠè§£è¯» ã€ä¸‰ ç‚¹ äºŒã€‘ reactä¸­çš„fiberRoot</a></p>\n","text":"é¡¹ç›®å¼€å‘æ—¶å€™ä¹¦å†™ä»£ç æŸä¸ªé¡µé¢æˆ–è€…æ˜¯ç»„ä»¶ &#x2F;&#x2F; class ReactComponent extends React.Component &#123; &#x2F;&#x2F; render() &#123; &#x2F;&#x2F; return &lt;p ...","link":"","photos":[],"count_time":{"symbolsCount":"2.4k","symbolsTime":"2 mins."},"categories":[{"name":"React@16.5.0","slug":"React-16-5-0","count":5,"path":"api/categories/React-16-5-0.json"}],"tags":[{"name":"React@16.5.0","slug":"React-16-5-0","count":5,"path":"api/tags/React-16-5-0.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E6%97%B6%E5%80%99%E4%B9%A6%E5%86%99%E4%BB%A3%E7%A0%81\"><span class=\"toc-text\">é¡¹ç›®å¼€å‘æ—¶å€™ä¹¦å†™ä»£ç </span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#React-%E6%98%AF%E5%A6%82%E4%BD%95%E5%B0%86%E8%99%9A%E6%8B%9F-DOM-%E8%BD%AC%E6%8D%A2%E4%B8%BA%E7%9C%9F%E5%AE%9E-DOM\"><span class=\"toc-text\">React æ˜¯å¦‚ä½•å°†è™šæ‹Ÿ DOM è½¬æ¢ä¸ºçœŸå® DOM</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E8%BF%87%E7%A8%8B\"><span class=\"toc-text\">å‡½æ•°è°ƒç”¨è¿‡ç¨‹</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%88%91%E8%89%B9%EF%BC%8C%E6%9C%89%E7%82%B9%E6%87%B5%EF%BD%9E\"><span class=\"toc-text\">æˆ‘è‰¹ï¼Œæœ‰ç‚¹æ‡µï½</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5\"><span class=\"toc-text\">å‚è€ƒé“¾æ¥</span></a></li></ol>","author":{"name":"é™ˆæµ·é¾™","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"éœ€è¦å°±å­¦å‘—ï¼Œå¤šå¤§ç‚¹äº‹ğŸ˜‚","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"React@16.5.0 unsafe_","uid":"f07658ed4d8d481756bfa8b0d656b104","slug":"2022-07-21react-unsafe","date":"2022-07-21T06:23:16.000Z","updated":"2022-09-16T14:01:16.728Z","comments":true,"path":"api/articles/2022-07-21react-unsafe.json","keywords":null,"cover":null,"text":"æˆ‘æ•´ç†è¿™ç¯‡æ–‡ç« çš„ç›®çš„å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘åœ¨å­¦æŠ€æœ¯æ—¶å€™æ›´å¤šå…³æ³¨çš„æ˜¯æ•™ç¨‹å’Œæ–‡æ¡£,åŸå› æœ‰ä¸‰ï¼šæ—¶é—´ç´§ã€ä»»åŠ¡é‡ã€æ–°æŠ€æœ¯å¾ˆå¤š æœ€è¿‘æ‰‹å¤´æ— äº‹ï¼Œåˆšå¥½æœæºç æœåˆ°äº†ï¼Œå¸Œæœ›é—²æš‡ä¹‹ä½™ï¼Œä½ ä¹Ÿèƒ½äº†è§£ React å˜æ›´è¿‡ç¨‹ï¼ŒåŠ æ·± React çš„ç†è§£ è¿‡æ—¶çš„ç»„ä»¶ç”Ÿå‘½å‘¨æœŸå¾€å¾€ä¼šå¸¦æ¥ä¸å®‰å…¨çš„ç¼–ç å®è·µ componentWi...","link":"","photos":[],"count_time":{"symbolsCount":"17k","symbolsTime":"15 mins."},"categories":[{"name":"React@16.5.0","slug":"React-16-5-0","count":5,"path":"api/categories/React-16-5-0.json"}],"tags":[{"name":"React@16.5.0","slug":"React-16-5-0","count":5,"path":"api/tags/React-16-5-0.json"}],"author":{"name":"é™ˆæµ·é¾™","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"éœ€è¦å°±å­¦å‘—ï¼Œå¤šå¤§ç‚¹äº‹ğŸ˜‚","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}},"next_post":{"title":"React@16.5.0 syntheticEvent","uid":"8cd3fa1949a115d76dd37b87c1175bed","slug":"2022-07-20react-syntheticEvent","date":"2022-07-20T01:18:53.000Z","updated":"2022-09-16T14:01:01.355Z","comments":true,"path":"api/articles/2022-07-20react-syntheticEvent.json","keywords":null,"cover":[],"text":"æœ¬æ–‡è¯´æ˜æœ¬æ–‡ä¸»è¦å†…å®¹æ˜¯ React v16.5.0, éƒ¨åˆ†å†…å®¹ä¼šæ¶‰åŠåˆ° React v17+, React v17+åˆæˆäº‹ä»¶ä¸ React16 æœ‰å¾ˆå¤§å·®å¼‚ React å’Œäº‹ä»¶ç³»ç»Ÿæ¦‚è¿°è§ &#x2F;** * * +------------+ . * | DOM | . * +--...","link":"","photos":[],"count_time":{"symbolsCount":"14k","symbolsTime":"13 mins."},"categories":[{"name":"React@16.5.0","slug":"React-16-5-0","count":5,"path":"api/categories/React-16-5-0.json"}],"tags":[{"name":"React@16.5.0","slug":"React-16-5-0","count":5,"path":"api/tags/React-16-5-0.json"}],"author":{"name":"é™ˆæµ·é¾™","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"éœ€è¦å°±å­¦å‘—ï¼Œå¤šå¤§ç‚¹äº‹ğŸ˜‚","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}}}