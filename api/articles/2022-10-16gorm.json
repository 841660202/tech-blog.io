{"title":"gorm","uid":"9e2838a04929d964c7bc52054867739d","slug":"2022-10-16gorm","date":"2022-10-16T10:34:17.000Z","updated":"2022-12-22T13:36:21.789Z","comments":true,"path":"api/articles/2022-10-16gorm.json","keywords":null,"cover":"http://t-blog-images.aijs.top/img/202212211225570.webp","content":"<h2 id=\"github\"><a href=\"#github\" class=\"headerlink\" title=\"github\"></a>github</h2><div style=\"display: flex;align-items: center;padding-top:4px;padding-bottom: 4px\"><a target=\"_blank\" href=\"https://github.com/go-gorm/gorm\">https://github.com/go-gorm/gorm</a><img src=\"https://img.shields.io/github/stars/go-gorm/gorm?style=social\" /></div>\n\n<h2 id=\"ORM\"><a href=\"#ORM\" class=\"headerlink\" title=\"ORM\"></a>ORM</h2><img src=\"http://t-blog-images.aijs.top/img/202210161834906.png\" style=\"width: 500px;max-width:100%\" />\n\n<h2 id=\"orm-è§£å†³çš„é—®é¢˜\"><a href=\"#orm-è§£å†³çš„é—®é¢˜\" class=\"headerlink\" title=\"orm è§£å†³çš„é—®é¢˜\"></a>orm è§£å†³çš„é—®é¢˜</h2><p><strong>ä¸“æ³¨äºè¯­è¨€ï¼Œå¼±åŒ– sql</strong></p>\n<img src=\"http://t-blog-images.aijs.top/img/202210161839151.png\" />\n\n<img src=\"http://t-blog-images.aijs.top/img/202210161839663.png\" />\n\n<h2 id=\"gorm-å†…éƒ¨å¦‚ä½•å®ç°\"><a href=\"#gorm-å†…éƒ¨å¦‚ä½•å®ç°\" class=\"headerlink\" title=\"gorm å†…éƒ¨å¦‚ä½•å®ç°\"></a>gorm å†…éƒ¨å¦‚ä½•å®ç°</h2><p>GORM å†…éƒ¨ä½¿ç”¨ SQL builder ç”Ÿæˆ SQLã€‚</p>\n<p>å¯¹äºæ¯ä¸ªæ“ä½œï¼ŒGORM éƒ½ä¼šåˆ›å»ºä¸€ä¸ª <code>*gorm.Statement</code> å¯¹è±¡ï¼Œæ‰€æœ‰çš„ GORM API éƒ½æ˜¯åœ¨ä¸º <code>statement</code> æ·»åŠ ã€ä¿®æ”¹ å­å¥ï¼Œæœ€åï¼ŒGORM ä¼šæ ¹æ®è¿™äº›å­å¥ç”Ÿæˆ SQL</p>\n<h3 id=\"è‡ªå®šä¹‰æ“ä½œ\"><a href=\"#è‡ªå®šä¹‰æ“ä½œ\" class=\"headerlink\" title=\"è‡ªå®šä¹‰æ“ä½œ\"></a>è‡ªå®šä¹‰æ“ä½œ</h3><h4 id=\"è¡¨åè‡ªå®šä¹‰\"><a href=\"#è¡¨åè‡ªå®šä¹‰\" class=\"headerlink\" title=\"è¡¨åè‡ªå®šä¹‰\"></a>è¡¨åè‡ªå®šä¹‰</h4><h4 id=\"å¤–é”®è‡ªå®šä¹‰\"><a href=\"#å¤–é”®è‡ªå®šä¹‰\" class=\"headerlink\" title=\"å¤–é”®è‡ªå®šä¹‰\"></a>å¤–é”®è‡ªå®šä¹‰</h4><h2 id=\"gorm-å…³ç³»\"><a href=\"#gorm-å…³ç³»\" class=\"headerlink\" title=\"gorm å…³ç³»\"></a>gorm å…³ç³»</h2><img src=\"http://t-blog-images.aijs.top/img/202210161838476.png\" />\n\n<img src=\"http://t-blog-images.aijs.top/img/202210161838476.png\" />\n\n<h2 id=\"gorm-Firstã€Takeã€Last-åŒºåˆ«\"><a href=\"#gorm-Firstã€Takeã€Last-åŒºåˆ«\" class=\"headerlink\" title=\"gorm Firstã€Takeã€Last åŒºåˆ«\"></a>gorm Firstã€Takeã€Last åŒºåˆ«</h2><ul>\n<li><code>First</code> è·å–ç¬¬ä¸€æ¡è®°å½• <strong>ï¼ˆä¸»é”®å‡åºï¼‰</strong></li>\n<li><code>Take</code> è·å–ä¸€æ¡è®°å½•ï¼Œ<strong>æ²¡æœ‰æŒ‡å®šæ’åºå­—æ®µ</strong></li>\n<li><code>Last</code> è·å–æœ€åä¸€æ¡è®°å½• <strong>ï¼ˆä¸»é”®é™åºï¼‰</strong></li>\n</ul>\n<p><strong>First å’Œ Last çš„ä½¿ç”¨æœ‰æ¡ä»¶é™åˆ¶</strong></p>\n<p>åªæœ‰åœ¨ç›®æ ‡ struct æ˜¯æŒ‡é’ˆæˆ–è€…é€šè¿‡ db.Model() æŒ‡å®š model æ—¶ï¼Œè¯¥æ–¹æ³•æ‰æœ‰æ•ˆ</p>\n<p>å¦‚æœç›¸å…³ model æ²¡æœ‰å®šä¹‰ä¸»é”®ï¼Œé‚£ä¹ˆå°†æŒ‰ model çš„ç¬¬ä¸€ä¸ªå­—æ®µè¿›è¡Œæ’åº</p>\n<h2 id=\"gorm-Find-ä¸-Scan-çš„åŒºåˆ«\"><a href=\"#gorm-Find-ä¸-Scan-çš„åŒºåˆ«\" class=\"headerlink\" title=\"gorm Find ä¸ Scan çš„åŒºåˆ«\"></a>gorm Find ä¸ Scan çš„åŒºåˆ«</h2><pre class=\"line-numbers language-go\" data-language=\"go\"><code class=\"language-go\">&#x2F;&#x2F; è¶…è¿‡ä¸€åˆ—çš„æŸ¥è¯¢ï¼Œåº”è¯¥ä½¿ç”¨ &#96;Scan&#96; æˆ–è€… &#96;Find&#96;ï¼Œä¾‹å¦‚ï¼š\ndb.Select(&quot;name&quot;, &quot;age&quot;).Scan(&amp;users)\ndb.Select(&quot;name&quot;, &quot;age&quot;).Find(&amp;users)</code></pre>\n\n<h2 id=\"gorm-Struct-ä¸-Map-çš„åŒºåˆ«\"><a href=\"#gorm-Struct-ä¸-Map-çš„åŒºåˆ«\" class=\"headerlink\" title=\"gorm Struct ä¸ Map çš„åŒºåˆ«\"></a>gorm Struct ä¸ Map çš„åŒºåˆ«</h2><h3 id=\"ç›¸åŒç‚¹ï¼š\"><a href=\"#ç›¸åŒç‚¹ï¼š\" class=\"headerlink\" title=\"ç›¸åŒç‚¹ï¼š\"></a>ç›¸åŒç‚¹ï¼š</h3><ul>\n<li>éƒ½å¯åšæŸ¥è¯¢æ¡ä»¶</li>\n</ul>\n<h3 id=\"ä¸åŒç‚¹ï¼š\"><a href=\"#ä¸åŒç‚¹ï¼š\" class=\"headerlink\" title=\"ä¸åŒç‚¹ï¼š\"></a>ä¸åŒç‚¹ï¼š</h3><ul>\n<li>æ˜¯å¦å«æœ‰é›¶å€¼ï¼š struct ä¸åŒ…å«é›¶å€¼æŸ¥è¯¢æ¡ä»¶ <code>&amp;User&#123;é”®å€¼å¯¹&#125;</code>ï¼Œmap åŒ…å«é›¶å€¼æŸ¥è¯¢æ¡ä»¶ <code>map[string]interface&#123;&#125;&#123;é”®å€¼å¯¹&#125;</code></li>\n<li>æŒ‡å®šæŸ¥è¯¢ é€šè¿‡å‘ Where() ä¼ å…¥ struct æ¥æŒ‡å®šæŸ¥è¯¢æ¡ä»¶çš„å­—æ®µã€å€¼ã€è¡¨åï¼ˆè¿™ä¸ªåœ°æ–¹è¦æ³¨æ„æ‹¼æ¥åçš„ sql æ˜¯å¦æ­£å¸¸æ‰§è¡Œï¼‰</li>\n</ul>\n<pre class=\"line-numbers language-go\" data-language=\"go\"><code class=\"language-go\">db.Where(&amp;User&#123;Name: &quot;jinzhu&quot;&#125;, &quot;name&quot;, &quot;Age&quot;).Find(&amp;users)\n&#x2F;&#x2F; SELECT * FROM users WHERE name &#x3D; &quot;jinzhu&quot; AND age &#x3D; 0;\n\ndb.Where(&amp;User&#123;Name: &quot;jinzhu&quot;&#125;, &quot;Age&quot;).Find(&amp;users)\n&#x2F;&#x2F; SELECT * FROM users WHERE age &#x3D; 0;</code></pre>\n\n<h2 id=\"gorm-å“ªäº›ç±»å‹è¯­å¥å¯ä»¥ä½œæŸ¥è¯¢\"><a href=\"#gorm-å“ªäº›ç±»å‹è¯­å¥å¯ä»¥ä½œæŸ¥è¯¢\" class=\"headerlink\" title=\"gorm å“ªäº›ç±»å‹è¯­å¥å¯ä»¥ä½œæŸ¥è¯¢\"></a>gorm å“ªäº›ç±»å‹è¯­å¥å¯ä»¥ä½œæŸ¥è¯¢</h2><ul>\n<li>ä¸»é”®</li>\n<li>sql è¯­å¥</li>\n<li>struct ç»“æ„ä½“</li>\n<li>map</li>\n</ul>\n<h2 id=\"gorm-å“ªäº›ä¸ä¼šè§¦å‘æŸ¥è¯¢\"><a href=\"#gorm-å“ªäº›ä¸ä¼šè§¦å‘æŸ¥è¯¢\" class=\"headerlink\" title=\"gorm å“ªäº›ä¸ä¼šè§¦å‘æŸ¥è¯¢\"></a>gorm å“ªäº›ä¸ä¼šè§¦å‘æŸ¥è¯¢</h2><ul>\n<li>where æ¡ä»¶</li>\n<li>not æ¡ä»¶</li>\n<li>or æ¡ä»¶</li>\n<li>select é€‰æ‹©</li>\n<li>order æ’åº</li>\n<li>limit &amp; offset (è¿™é‡Œè¦æ³¨æ„ mysql ä¸æ”¯æŒ offset å•ç‹¬ä½¿ç”¨)</li>\n</ul>\n<h2 id=\"gorm-å“ªäº›ä¼šè§¦å‘æŸ¥è¯¢\"><a href=\"#gorm-å“ªäº›ä¼šè§¦å‘æŸ¥è¯¢\" class=\"headerlink\" title=\"gorm å“ªäº›ä¼šè§¦å‘æŸ¥è¯¢\"></a>gorm å“ªäº›ä¼šè§¦å‘æŸ¥è¯¢</h2><ul>\n<li>First ä¸»é”®æ’åºç¬¬ä¸€ä¸ª</li>\n<li>Last ä¸»é”®æ’åºæœ€åä¸€ä¸ª</li>\n<li>Take æ— ä¸»é”®æ’åºç¬¬ä¸€ä¸ª</li>\n<li>Find</li>\n<li>Scan</li>\n<li>Pluck åªè¿”å›å•åˆ—</li>\n<li>Count</li>\n<li>æ‰¹æŸ¥è¯¢ï¼Œä¸€æ¬¡æŸ¥è¯¢å¤šå°‘ä¸ªï¼Œå…è®¸å¤šæ¬¡æŸ¥è¯¢</li>\n<li>FirstOrInit ä¸æ›´æ–°æ•°æ®åº“</li>\n<li>FirstOrCreate æŸ¥ä¸åˆ°æ›´æ–°æ•°æ®åº“</li>\n</ul>\n<pre class=\"line-numbers language-go\" data-language=\"go\"><code class=\"language-go\">\nvar user User\n\tdb.Debug().FirstOrInit(&amp;user, User&#123;Name: &quot;non_existing&quot;&#125;)\n\tdb.Debug().FirstOrCreate(&amp;user, User&#123;Name: &quot;non_create&quot;&#125;)\n\n\t&#x2F;&#x2F; ç¬¬ä¸€æ¬¡æŸ¥è¯¢\n\t&#x2F;&#x2F; 2022&#x2F;10&#x2F;20 10:29:38 &#x2F;Users&#x2F;haotian&#x2F;haotian&#x2F;github&#x2F;go&#x2F;learn-gorm&#x2F;crud&#x2F;r.go:431\n\t&#x2F;&#x2F; [7.830ms] [rows:0] SELECT * FROM &#96;users&#96; WHERE &#96;users&#96;.&#96;name&#96; &#x3D; &#39;non_existing&#39; ORDER BY &#96;users&#96;.&#96;id&#96; LIMIT 1\n\n\t&#x2F;&#x2F; 2022&#x2F;10&#x2F;20 10:29:38 &#x2F;Users&#x2F;haotian&#x2F;haotian&#x2F;github&#x2F;go&#x2F;learn-gorm&#x2F;crud&#x2F;r.go:432\n\t&#x2F;&#x2F; [2.192ms] [rows:0] SELECT * FROM &#96;users&#96; WHERE &#96;users&#96;.&#96;name&#96; &#x3D; &#39;non_create&#39; ORDER BY &#96;users&#96;.&#96;id&#96; LIMIT 1\n\n\t&#x2F;&#x2F; 2022&#x2F;10&#x2F;20 10:29:38 &#x2F;Users&#x2F;haotian&#x2F;haotian&#x2F;github&#x2F;go&#x2F;learn-gorm&#x2F;crud&#x2F;r.go:432\n\t&#x2F;&#x2F; [38.437ms] [rows:1] INSERT INTO &#96;users&#96; (&#96;name&#96;,&#96;age&#96;,&#96;email&#96;,&#96;birthday&#96;,&#96;member_number&#96;,&#96;activated_at&#96;,&#96;created_at&#96;,&#96;updated_at&#96;,&#96;active&#96;) VALUES (&#39;non_create&#39;,18,NULL,NULL,NULL,NULL,&#39;2022-10-20 10:29:38.008&#39;,&#39;2022-10-20 10:29:38.008&#39;,true)\n\n\n\t&#x2F;&#x2F; ç¬¬äºŒæ¬¡æŸ¥è¯¢\n\t&#x2F;&#x2F; 2022&#x2F;10&#x2F;20 10:30:07 &#x2F;Users&#x2F;haotian&#x2F;haotian&#x2F;github&#x2F;go&#x2F;learn-gorm&#x2F;crud&#x2F;r.go:431\n\t&#x2F;&#x2F; [8.054ms] [rows:0] SELECT * FROM &#96;users&#96; WHERE &#96;users&#96;.&#96;name&#96; &#x3D; &#39;non_existing&#39; ORDER BY &#96;users&#96;.&#96;id&#96; LIMIT 1\n\t&#x2F;&#x2F;\n\t&#x2F;&#x2F; 2022&#x2F;10&#x2F;20 10:30:07 &#x2F;Users&#x2F;haotian&#x2F;haotian&#x2F;github&#x2F;go&#x2F;learn-gorm&#x2F;crud&#x2F;r.go:432\n\t&#x2F;&#x2F; [0.680ms] [rows:1] SELECT * FROM &#96;users&#96; WHERE &#96;users&#96;.&#96;name&#96; &#x3D; &#39;non_create&#39; ORDER BY &#96;users&#96;.&#96;id&#96; LIMIT 1\n\n\t&#x2F;&#x2F; | 19 | galeone                           | NULL  |   18 | 2022-10-19 11:21:56.089 | NULL          | NULL         | 2022-10-19 11:21:56.090 | 2022-10-19 11:21:56.090 |      1 |\n\t&#x2F;&#x2F; | 20 | galeone                           | NULL  |   18 | 2022-10-19 11:26:50.011 | NULL          | NULL         | 2022-10-19 11:26:50.012 | 2022-10-19 11:26:50.012 |      1 |\n\t&#x2F;&#x2F; | 21 | æˆ‘è¦å­˜falseï¼Œä¸è¦é»˜è®¤true         | NULL  |   18 | 2022-10-19 11:28:52.852 | NULL          | NULL         | 2022-10-19 11:28:52.852 | 2022-10-19 11:28:52.852 |      0 |\n\t&#x2F;&#x2F; | 22 | non_create                        | NULL  |   18 | NULL                    | NULL          | NULL         | 2022-10-20 10:29:38.008 | 2022-10-20 10:29:38.008 |      1 |\n\t&#x2F;&#x2F; +----+-----------------------------------+-------+------+-------------------------+---------------+--------------+-------------------------+-------------------------+--------+\n\t&#x2F;&#x2F; 22 rows in set (0.01 sec)</code></pre>\n\n<h2 id=\"mysql-offset-amp-limit-ä¸-where-amp-limit\"><a href=\"#mysql-offset-amp-limit-ä¸-where-amp-limit\" class=\"headerlink\" title=\"mysql offset &amp; limit ä¸ where &amp;limit\"></a>mysql offset &amp; limit ä¸ where &amp;limit</h2><img src=\"http://t-blog-images.aijs.top/img/202210201019656.svg\" style=\"width:500px;max-width:100%\" />\n\n<h2 id=\"gorm-Model-ä¸-Table-çš„åŒºåˆ«\"><a href=\"#gorm-Model-ä¸-Table-çš„åŒºåˆ«\" class=\"headerlink\" title=\"gorm Model ä¸ Table çš„åŒºåˆ«\"></a>gorm Model ä¸ Table çš„åŒºåˆ«</h2><p>GORM å…è®¸æ‰«æç»“æœè‡³ map[string]interface{} æˆ– []map[string]interface{}ï¼Œæ­¤æ—¶åˆ«å¿˜äº†æŒ‡å®š Model æˆ– Table</p>\n<pre class=\"line-numbers language-go\" data-language=\"go\"><code class=\"language-go\">result :&#x3D; map[string]interface&#123;&#125;&#123;&#125;\ndb.Model(&amp;User&#123;&#125;).First(&amp;result, &quot;id &#x3D; ?&quot;, 1)\n\nvar results []map[string]interface&#123;&#125;\ndb.Table(&quot;users&quot;).Find(&amp;results)</code></pre>\n\n<h2 id=\"gorm-åˆ é™¤\"><a href=\"#gorm-åˆ é™¤\" class=\"headerlink\" title=\"gorm åˆ é™¤\"></a>gorm åˆ é™¤</h2><p>å…ˆäº†è§£è¿™ä¸ªï¼Œè¿™ä¸ªç®€å•ï¼Œä¸ä¼šå¤ªå— ğŸ‘Š</p>\n<ul>\n<li>ä¸»é”®åˆ é™¤</li>\n<li>æ¡ä»¶åˆ é™¤</li>\n<li>æ‰¹é‡åˆ é™¤</li>\n<li>å…¨å±€åˆ é™¤(è§„é¿)</li>\n<li>è¿”å›åˆ é™¤è¡Œçš„æ•°æ®</li>\n<li>è½¯åˆ é™¤</li>\n<li>æŸ¥è¯¢è¢«è½¯åˆ è®°å½•</li>\n<li>æ°¸ä¹…åˆ é™¤</li>\n<li>åˆ é™¤æ ‡è®° Flag</li>\n<li>å‹¾å­æš‚æ—¶è·³è¿‡</li>\n</ul>\n<h3 id=\"ä¸»é”®åˆ é™¤\"><a href=\"#ä¸»é”®åˆ é™¤\" class=\"headerlink\" title=\"ä¸»é”®åˆ é™¤\"></a>ä¸»é”®åˆ é™¤</h3><ul>\n<li>ä¼ å…¥ä¸€ä¸ªå®ä¾‹åœ°å€ <code>&amp;user</code></li>\n<li>ç»“æ„ä½“ï¼š<code>db.Delete(&amp;User&#123;&#125;, string/number) // ç»“æ„ä½“</code></li>\n<li>æ‰¹é‡ä¸»é”® <code>db.Delete(&amp;users, []int&#123;1,2,3&#125;) // &amp;users</code></li>\n</ul>\n<h3 id=\"æ¡ä»¶åˆ é™¤\"><a href=\"#æ¡ä»¶åˆ é™¤\" class=\"headerlink\" title=\"æ¡ä»¶åˆ é™¤\"></a>æ¡ä»¶åˆ é™¤</h3><p><code>db.Where(&quot;name = ?&quot;, &quot;jinzhu&quot;).Delete(&amp;email)</code></p>\n<h3 id=\"æ‰¹é‡åˆ é™¤\"><a href=\"#æ‰¹é‡åˆ é™¤\" class=\"headerlink\" title=\"æ‰¹é‡åˆ é™¤\"></a>æ‰¹é‡åˆ é™¤</h3><ul>\n<li>like æ¡ä»¶åˆ é™¤</li>\n</ul>\n<pre class=\"line-numbers language-go\" data-language=\"go\"><code class=\"language-go\">&#x2F;&#x2F; è¿™ç§å«å•¥ï¼Œå…ˆwhere, ååˆ é™¤\ndb.Where(&quot;email LIKE ?&quot;, &quot;%jinzhu%&quot;).Delete(&amp;Email&#123;&#125;)\n&#x2F;&#x2F; DELETE from emails where email LIKE &quot;%jinzhu%&quot;;\n&#x2F;&#x2F; ç»“æ„ä½“åˆ é™¤ï¼Ÿ\ndb.Delete(&amp;Email&#123;&#125;, &quot;email LIKE ?&quot;, &quot;%jinzhu%&quot;)\n&#x2F;&#x2F; DELETE from emails where email LIKE &quot;%jinzhu%&quot;;</code></pre>\n\n<h3 id=\"å…¨å±€åˆ é™¤-è§„é¿\"><a href=\"#å…¨å±€åˆ é™¤-è§„é¿\" class=\"headerlink\" title=\"å…¨å±€åˆ é™¤(è§„é¿)\"></a>å…¨å±€åˆ é™¤(è§„é¿)</h3><ul>\n<li>æœ‰æ¡ä»¶ï¼Œä¸”æŸ¥åˆ°çš„ç»“æœæ˜¯å…¨éƒ¨æ•°æ® <code>Where æ¡ä»¶ä¸º&quot;true&quot; éƒ½ä¼šæ¸…ç©º</code></li>\n<li>åŸç”Ÿ sql</li>\n<li>AllowGlobalUpdate</li>\n</ul>\n<pre class=\"line-numbers language-go\" data-language=\"go\"><code class=\"language-go\">db.Delete(&amp;User&#123;&#125;).Error &#x2F;&#x2F; gorm.ErrMissingWhereClause\n\n&#x2F;&#x2F; ä¼šæ¸…è¡¨\ndb.Where(&quot;1 &#x3D; 1&quot;).Delete(&amp;User&#123;&#125;)\n&#x2F;&#x2F; DELETE FROM &#96;users&#96; WHERE 1&#x3D;1\n\n&#x2F;&#x2F; Whereæ¡ä»¶ä¸º&quot;true&quot; éƒ½ä¼šæ¸…ç©º\nvar users []User\ndb.Debug().Where(&quot;1 &#x3D; 1&quot;).Find(&amp;users)\n&#x2F;&#x2F; [4.435ms] [rows:22] SELECT * FROM &#96;users&#96; WHERE 1 &#x3D; 1\ndb.Debug().Where(&quot;true&quot;).Find(&amp;users)\n\n&#x2F;&#x2F; 2022&#x2F;10&#x2F;20 10:54:53 &#x2F;Users&#x2F;haotian&#x2F;haotian&#x2F;github&#x2F;go&#x2F;learn-gorm&#x2F;crud&#x2F;r.go:459\n&#x2F;&#x2F; [3.312ms] [rows:22] SELECT * FROM &#96;users&#96; WHERE true\n\ndb.Debug().Where(&quot;2&#x3D;2&quot;).Find(&amp;users)\n&#x2F;&#x2F; 2022&#x2F;10&#x2F;20 10:54:53 &#x2F;Users&#x2F;haotian&#x2F;haotian&#x2F;github&#x2F;go&#x2F;learn-gorm&#x2F;crud&#x2F;r.go:460\n&#x2F;&#x2F; [0.305ms] [rows:22] SELECT * FROM &#96;users&#96; WHERE 2&#x3D;2\n\n\n\n&#x2F;&#x2F; ä¼šæ¸…è¡¨\ndb.Exec(&quot;DELETE FROM users&quot;)\n&#x2F;&#x2F; DELETE FROM users\n&#x2F;&#x2F; ä¼šæ¸…è¡¨\ndb.Session(&amp;gorm.Session&#123;AllowGlobalUpdate: true&#125;).Delete(&amp;User&#123;&#125;)\n&#x2F;&#x2F; DELETE FROM users</code></pre>\n\n<h3 id=\"è¿”å›åˆ é™¤è¡Œçš„æ•°æ®\"><a href=\"#è¿”å›åˆ é™¤è¡Œçš„æ•°æ®\" class=\"headerlink\" title=\"è¿”å›åˆ é™¤è¡Œçš„æ•°æ®\"></a>è¿”å›åˆ é™¤è¡Œçš„æ•°æ®</h3><p><code>Clauses(clause.Returning&#123;&#125;)</code> ä»…é€‚ç”¨äºæ”¯æŒ Returning çš„æ•°æ®åº“</p>\n<pre class=\"line-numbers language-go\" data-language=\"go\"><code class=\"language-go\">&#x2F;&#x2F; è¿”å›æ‰€æœ‰åˆ—\nvar users []User\nDB.Clauses(clause.Returning&#123;&#125;).Where(&quot;role &#x3D; ?&quot;, &quot;admin&quot;).Delete(&amp;users)\n&#x2F;&#x2F; DELETE FROM &#96;users&#96; WHERE role &#x3D; &quot;admin&quot; RETURNING *\n&#x2F;&#x2F; users &#x3D;&gt; []User&#123;&#123;ID: 1, Name: &quot;jinzhu&quot;, Role: &quot;admin&quot;, Salary: 100&#125;, &#123;ID: 2, Name: &quot;jinzhu.2&quot;, Role: &quot;admin&quot;, Salary: 1000&#125;&#125;\n\n&#x2F;&#x2F; è¿”å›æŒ‡å®šçš„åˆ—\nDB.Clauses(clause.Returning&#123;Columns: []clause.Column&#123;&#123;Name: &quot;name&quot;&#125;, &#123;Name: &quot;salary&quot;&#125;&#125;&#125;).Where(&quot;role &#x3D; ?&quot;, &quot;admin&quot;).Delete(&amp;users)\n&#x2F;&#x2F; DELETE FROM &#96;users&#96; WHERE role &#x3D; &quot;admin&quot; RETURNING &#96;name&#96;, &#96;salary&#96;\n&#x2F;&#x2F; users &#x3D;&gt; []User&#123;&#123;ID: 0, Name: &quot;jinzhu&quot;, Role: &quot;&quot;, Salary: 100&#125;, &#123;ID: 0, Name: &quot;jinzhu.2&quot;, Role: &quot;&quot;, Salary: 1000&#125;&#125;</code></pre>\n\n<h3 id=\"è½¯åˆ é™¤\"><a href=\"#è½¯åˆ é™¤\" class=\"headerlink\" title=\"è½¯åˆ é™¤\"></a>è½¯åˆ é™¤</h3><ul>\n<li>å¼•å…¥ <code>gorm.Model</code></li>\n<li>ä¸å¼•å…¥ <code>gorm.Model</code> ï¼Œ <code>Deleted gorm.DeletedAt</code></li>\n</ul>\n<h3 id=\"æŸ¥è¯¢è¢«è½¯åˆ è®°å½•\"><a href=\"#æŸ¥è¯¢è¢«è½¯åˆ è®°å½•\" class=\"headerlink\" title=\"æŸ¥è¯¢è¢«è½¯åˆ è®°å½•\"></a>æŸ¥è¯¢è¢«è½¯åˆ è®°å½•</h3><p>Unscoped è¯‘ä¸ºï¼š æœªé™å®šèŒƒå›´</p>\n<pre class=\"line-numbers language-go\" data-language=\"go\"><code class=\"language-go\">db.Unscoped().Where(&quot;age &#x3D; 20&quot;).Find(&amp;users)\n&#x2F;&#x2F; SELECT * FROM users WHERE age &#x3D; 20;\n\n</code></pre>\n\n<h3 id=\"æ°¸ä¹…åˆ é™¤\"><a href=\"#æ°¸ä¹…åˆ é™¤\" class=\"headerlink\" title=\"æ°¸ä¹…åˆ é™¤\"></a>æ°¸ä¹…åˆ é™¤</h3><pre class=\"line-numbers language-go\" data-language=\"go\"><code class=\"language-go\">db.Unscoped().Delete(&amp;order)\n&#x2F;&#x2F; DELETE FROM orders WHERE id&#x3D;10;\n</code></pre>\n\n<h3 id=\"åˆ é™¤æ ‡è®°-Flag\"><a href=\"#åˆ é™¤æ ‡è®°-Flag\" class=\"headerlink\" title=\"åˆ é™¤æ ‡è®° Flag\"></a>åˆ é™¤æ ‡è®° Flag</h3><ul>\n<li>unix æ—¶é—´æˆ³</li>\n<li>1&#x2F;0 æ ‡è®°</li>\n<li>æ··åˆæ¨¡å¼</li>\n</ul>\n<h4 id=\"unix-æ—¶é—´æˆ³\"><a href=\"#unix-æ—¶é—´æˆ³\" class=\"headerlink\" title=\"unix æ—¶é—´æˆ³\"></a>unix æ—¶é—´æˆ³</h4><pre class=\"line-numbers language-go\" data-language=\"go\"><code class=\"language-go\">type User struct &#123;\n  ID    uint\n  Name  string\n  &#x2F;&#x2F; DeletedAt *time.Time &#x2F;&#x2F; æˆ‘è§‰å¾—å§è¿˜æ˜¯ä½¿ç”¨è¿™ä¸ªï¼Œæœ‰åˆ é™¤æ—¶é—´ï¼Œå‰ç«¯æƒ³å±•ç¤ºå°±å±•ç¤ºï¼Œä¸æƒ³å±•ç¤ºå°±å½“false&#x2F;trueå¤„ç†\n  DeletedAt soft_delete.DeletedAt &#96;gorm:&quot;softDelete:milli&quot;&#96;\n  &#x2F;&#x2F; DeletedAt soft_delete.DeletedAt &#96;gorm:&quot;softDelete:nano&quot;&#96;\n&#125;\n\n&#x2F;&#x2F; æŸ¥è¯¢\nSELECT * FROM users WHERE deleted_at &#x3D; 0;\n\n&#x2F;&#x2F; åˆ é™¤\nUPDATE users SET deleted_at &#x3D; &#x2F;* å½“å‰æ¯«ç§’ã€çº³ç§’æ—¶é—´æˆ³ *&#x2F; WHERE ID &#x3D; 1;\n</code></pre>\n\n<h4 id=\"1-x2F-0-æ ‡è®°\"><a href=\"#1-x2F-0-æ ‡è®°\" class=\"headerlink\" title=\"1&#x2F;0 æ ‡è®°\"></a>1&#x2F;0 æ ‡è®°</h4><pre class=\"line-numbers language-go\" data-language=\"go\"><code class=\"language-go\">\nimport &quot;gorm.io&#x2F;plugin&#x2F;soft_delete&quot; &#x2F;&#x2F; è¿™é‡Œå¼•å…¥äº†ä¸ªæ’ä»¶\n\ntype User struct &#123;\n  ID    uint\n  Name  string\n  IsDel soft_delete.DeletedAt &#96;gorm:&quot;softDelete:flag&quot;&#96; &#x2F;&#x2F; è¿™é‡Œä½¿ç”¨tabè¿›è¡Œæ ‡è®°\n&#125;\n\n&#x2F;&#x2F; æŸ¥è¯¢\nSELECT * FROM users WHERE is_del &#x3D; 0;\n\n&#x2F;&#x2F; åˆ é™¤\nUPDATE users SET is_del &#x3D; 1 WHERE ID &#x3D; 1;</code></pre>\n\n<h4 id=\"æ··åˆæ¨¡å¼\"><a href=\"#æ··åˆæ¨¡å¼\" class=\"headerlink\" title=\"æ··åˆæ¨¡å¼\"></a>æ··åˆæ¨¡å¼</h4><pre class=\"line-numbers language-go\" data-language=\"go\"><code class=\"language-go\">type User struct &#123;\n  ID        uint\n  Name      string\n  DeletedAt time.Time &#x2F;&#x2F; è¿™ä¸ª\n  IsDel     soft_delete.DeletedAt &#96;gorm:&quot;softDelete:flag,DeletedAtField:DeletedAt&quot;&#96; &#x2F;&#x2F; ä½¿ç”¨ &#96;1&#96; &#96;0&#96; æ ‡è¯†\n  &#x2F;&#x2F; IsDel     soft_delete.DeletedAt &#96;gorm:&quot;softDelete:,DeletedAtField:DeletedAt&quot;&#96; &#x2F;&#x2F; ä½¿ç”¨ &#96;unix second&#96; æ ‡è¯†\n  &#x2F;&#x2F; IsDel     soft_delete.DeletedAt &#96;gorm:&quot;softDelete:nano,DeletedAtField:DeletedAt&quot;&#96; &#x2F;&#x2F; ä½¿ç”¨ &#96;unix nano second&#96; æ ‡è¯†\n&#125;\n\n&#x2F;&#x2F; æŸ¥è¯¢\nSELECT * FROM users WHERE is_del &#x3D; 0; &#x2F;&#x2F; ä¸€ä¸ªæŸ¥è¯¢æ¡ä»¶å°±å¤Ÿäº†\n&#x2F;&#x2F; åœ¨gormä¸­ï¼Œè¿™é‡Œæœ‰ä¸ªé—®é¢˜ï¼Œå¦‚æœfindï¼Œåœ¨ä¸åŠ Unscopedä¼šä¸ä¼šæŸ¥ä¸åˆ°å‘¢ï¼Ÿ TODO:\n\n&#x2F;&#x2F; åˆ é™¤ï¼Œæ¯”è¾ƒä¸¤ä¸ªéƒ½è¦æ”¹å•Šï¼Œè¿™ä¹ˆç”¨çš„åœºæ™¯æ˜¯ä»€ä¹ˆ\nUPDATE users SET is_del &#x3D; 1, deleted_at &#x3D; &#x2F;* current unix second *&#x2F; WHERE ID &#x3D; 1;</code></pre>\n\n<h2 id=\"åŸç”Ÿ-SQL-å’Œ-SQL-ç”Ÿæˆå™¨\"><a href=\"#åŸç”Ÿ-SQL-å’Œ-SQL-ç”Ÿæˆå™¨\" class=\"headerlink\" title=\"åŸç”Ÿ SQL å’Œ SQL ç”Ÿæˆå™¨\"></a>åŸç”Ÿ SQL å’Œ SQL ç”Ÿæˆå™¨</h2><p>è¿™ä¸ªæ¯”è¾ƒæœ‰ç”¨</p>\n<ul>\n<li><code>db.Raw</code> + Scan Rawï¼šè¯‘ä¸ºåŸç”Ÿ</li>\n<li><code>db.Exec</code> Execï¼š æ‰§è¡Œ</li>\n</ul>\n<pre class=\"line-numbers language-go\" data-language=\"go\"><code class=\"language-go\">&#x2F;&#x2F; db.Raw + Scan\ndb.Raw(&quot;SELECT id, name, age FROM users WHERE name &#x3D; ?&quot;, 3).Scan(&amp;result)\n\n&#x2F;&#x2F; db.Exec\ndb.Exec(&quot;UPDATE orders SET shipped_at &#x3D; ? WHERE id IN ?&quot;, time.Now(), []int64&#123;1, 2, 3&#125;)\n\n&#x2F;&#x2F; Exec with SQL Expression\ndb.Exec(&quot;UPDATE users SET money &#x3D; ? WHERE name &#x3D; ?&quot;, gorm.Expr(&quot;money * ? + ?&quot;, 10000, 1), &quot;jinzhu&quot;)\n</code></pre>\n\n<h3 id=\"å‘½åå‚æ•°\"><a href=\"#å‘½åå‚æ•°\" class=\"headerlink\" title=\"å‘½åå‚æ•°\"></a>å‘½åå‚æ•°</h3><p>GORM æ”¯æŒ sql.NamedArgã€map[string]interface{}{} æˆ– struct å½¢å¼çš„å‘½åå‚æ•°</p>\n<pre class=\"line-numbers language-go\" data-language=\"go\"><code class=\"language-go\">\ndb.Where(&quot;name1 &#x3D; @name OR name2 &#x3D; @name&quot;, sql.Named(&quot;name&quot;, &quot;jinzhu&quot;)).Find(&amp;user) &#x2F;&#x2F; name æ›¿æ¢å‰é¢çš„@name\n&#x2F;&#x2F; SELECT * FROM &#96;users&#96; WHERE name1 &#x3D; &quot;jinzhu&quot; OR name2 &#x3D; &quot;jinzhu&quot;\n\n&#x2F;&#x2F; map[string]interface&#123;&#125;&#123;&#125;\ndb.Where(&quot;name1 &#x3D; @name OR name2 &#x3D; @name&quot;, map[string]interface&#123;&#125;&#123;&quot;name&quot;: &quot;jinzhu2&quot;&#125;).First(&amp;result3)\n&#x2F;&#x2F; SELECT * FROM &#96;users&#96; WHERE name1 &#x3D; &quot;jinzhu2&quot; OR name2 &#x3D; &quot;jinzhu2&quot; ORDER BY &#96;users&#96;.&#96;id&#96; LIMIT 1\n\n&#x2F;&#x2F; struct å½¢å¼çš„å‘½åå‚æ•°\ntype NamedArgument struct &#123;\n    Name string\n    Name2 string\n&#125;\n\ndb.Raw(\n  &quot;SELECT * FROM users WHERE (name1 &#x3D; @Name AND name3 &#x3D; @Name) AND name2 &#x3D; @Name2&quot;,\n  NamedArgument&#123;Name: &quot;jinzhu&quot;, Name2: &quot;jinzhu2&quot;&#125;\n).Find(&amp;user)</code></pre>\n\n<h3 id=\"é¢„æ£€-DryRun-æ¨¡å¼\"><a href=\"#é¢„æ£€-DryRun-æ¨¡å¼\" class=\"headerlink\" title=\"é¢„æ£€ DryRun æ¨¡å¼\"></a>é¢„æ£€ DryRun æ¨¡å¼</h3><p>ç”Ÿæˆè¯­å¥ä¸æ‰§è¡Œ</p>\n<pre class=\"line-numbers language-go\" data-language=\"go\"><code class=\"language-go\">stmt :&#x3D; db.Session(&amp;Session&#123;DryRun: true&#125;).First(&amp;user, 1).Statement\nstmt.SQL.String() &#x2F;&#x2F;&#x3D;&gt; SELECT * FROM &#96;users&#96; WHERE &#96;id&#96; &#x3D; $1 ORDER BY &#96;id&#96;\nstmt.Vars         &#x2F;&#x2F;&#x3D;&gt; []interface&#123;&#125;&#123;1&#125;\n</code></pre>\n\n<h3 id=\"ToSql\"><a href=\"#ToSql\" class=\"headerlink\" title=\"ToSql\"></a>ToSql</h3><p>ç”Ÿæˆè¯­å¥ä¸æ‰§è¡Œ</p>\n<p>GORM ä½¿ç”¨ database&#x2F;sql çš„å‚æ•°å ä½ç¬¦æ¥æ„å»º SQL è¯­å¥ï¼Œå®ƒä¼šè‡ªåŠ¨è½¬ä¹‰å‚æ•°ä»¥é¿å… SQL æ³¨å…¥</p>\n<pre class=\"line-numbers language-go\" data-language=\"go\"><code class=\"language-go\">sql :&#x3D; DB.ToSQL(func(tx *gorm.DB) *gorm.DB &#123;\n  return tx.Model(&amp;User&#123;&#125;).Where(&quot;id &#x3D; ?&quot;, 100).Limit(10).Order(&quot;age desc&quot;).Find(&amp;[]User&#123;&#125;)\n&#125;)\nsql &#x2F;&#x2F;&#x3D;&gt; SELECT * FROM &quot;users&quot; WHERE id &#x3D; 100 AND &quot;users&quot;.&quot;deleted_at&quot; IS NULL ORDER BY age desc LIMIT 10\n</code></pre>\n\n<h3 id=\"Row-amp-Rows\"><a href=\"#Row-amp-Rows\" class=\"headerlink\" title=\"Row &amp; Rows\"></a>Row &amp; Rows</h3><pre class=\"line-numbers language-go\" data-language=\"go\"><code class=\"language-go\">&#x2F;&#x2F; ä½¿ç”¨ GORM API æ„å»º SQL\nrow :&#x3D; db.Table(&quot;users&quot;).Where(&quot;name &#x3D; ?&quot;, &quot;jinzhu&quot;).Select(&quot;name&quot;, &quot;age&quot;).Row()\nrow.Scan(&amp;name, &amp;age)\n\n&#x2F;&#x2F; ä½¿ç”¨åŸç”Ÿ SQL\nrow :&#x3D; db.Raw(&quot;select name, age, email from users where name &#x3D; ?&quot;, &quot;jinzhu&quot;).Row()\nrow.Scan(&amp;name, &amp;age, &amp;email)</code></pre>\n\n<p>è·å– <code>*sql.Rows</code> ç»“æœ</p>\n<pre class=\"line-numbers language-go\" data-language=\"go\"><code class=\"language-go\">&#x2F;&#x2F; ä½¿ç”¨ GORM API æ„å»º SQL\nrows, err :&#x3D; db.Model(&amp;User&#123;&#125;).Where(&quot;name &#x3D; ?&quot;, &quot;jinzhu&quot;).Select(&quot;name, age, email&quot;).Rows()\ndefer rows.Close()\n\n&#x2F;&#x2F; æ•°æ®æƒ…å†µï¼Œéœ€è¦ç”¨åˆ°å¾ªç¯\nfor rows.Next() &#123; &#x2F;&#x2F; è¿™ä¸ªæ˜¯whileå¾ªç¯ï¼Œ åœ¨goä¸­ä¸ºç®€åŒ–ç‰ˆfor\n  rows.Scan(&amp;name, &amp;age, &amp;email)\n\n  &#x2F;&#x2F; ä¸šåŠ¡é€»è¾‘...\n&#125;\n\n&#x2F;&#x2F; åŸç”Ÿ SQL\nrows, err :&#x3D; db.Raw(&quot;select name, age, email from users where name &#x3D; ?&quot;, &quot;jinzhu&quot;).Rows()\ndefer rows.Close()\nfor rows.Next() &#123;\n  rows.Scan(&amp;name, &amp;age, &amp;email)\n\n  &#x2F;&#x2F; ä¸šåŠ¡é€»è¾‘...\n&#125;\n\n&#x2F;&#x2F; sql.rows æ‰«æè‡³ model\n\nrows, err :&#x3D; db.Model(&amp;User&#123;&#125;).Where(&quot;name &#x3D; ?&quot;, &quot;jinzhu&quot;).Select(&quot;name, age, email&quot;).Rows() &#x2F;&#x2F; (*sql.Rows, error)\ndefer rows.Close()\n\nvar user User\nfor rows.Next() &#123;\n  &#x2F;&#x2F; ScanRows å°†ä¸€è¡Œæ‰«æè‡³ user\n  db.ScanRows(rows, &amp;user)\n\n  &#x2F;&#x2F; ä¸šåŠ¡é€»è¾‘...\n&#125;</code></pre>\n\n<h3 id=\"å•è¿æ¥-å¤šæ“ä½œ\"><a href=\"#å•è¿æ¥-å¤šæ“ä½œ\" class=\"headerlink\" title=\"å•è¿æ¥,å¤šæ“ä½œ\"></a>å•è¿æ¥,å¤šæ“ä½œ</h3><pre class=\"line-numbers language-go\" data-language=\"go\"><code class=\"language-go\">&#x2F;&#x2F; åœ¨ä¸€æ¡ tcp DB è¿æ¥ä¸­è¿è¡Œå¤šæ¡ SQL (ä¸æ˜¯äº‹åŠ¡)\n\ndb.Connection(func(tx *gorm.DB) error &#123;\n  tx.Exec(&quot;SET my.role &#x3D; ?&quot;, &quot;admin&quot;)\n\n  tx.First(&amp;User&#123;&#125;)\n&#125;)</code></pre>\n\n<h3 id=\"å­å¥\"><a href=\"#å­å¥\" class=\"headerlink\" title=\"å­å¥\"></a>å­å¥</h3><p>TODOï¼š å…ˆä¸å­¦</p>\n<h3 id=\"StatementModifier-è¯­å¥ä¿®æ”¹å™¨\"><a href=\"#StatementModifier-è¯­å¥ä¿®æ”¹å™¨\" class=\"headerlink\" title=\"StatementModifier è¯­å¥ä¿®æ”¹å™¨\"></a>StatementModifier è¯­å¥ä¿®æ”¹å™¨</h3><p>TODOï¼š å…ˆä¸å­¦</p>\n<hr/>\n\n<h2 id=\"gorm-æ›´æ–°\"><a href=\"#gorm-æ›´æ–°\" class=\"headerlink\" title=\"gorm æ›´æ–°\"></a>gorm æ›´æ–°</h2><h3 id=\"ä¿å­˜æ‰€æœ‰å­—æ®µ\"><a href=\"#ä¿å­˜æ‰€æœ‰å­—æ®µ\" class=\"headerlink\" title=\"ä¿å­˜æ‰€æœ‰å­—æ®µ\"></a>ä¿å­˜æ‰€æœ‰å­—æ®µ</h3><p>Save <strong>ä¼šä¿å­˜æ‰€æœ‰çš„å­—æ®µï¼Œå³ä½¿å­—æ®µæ˜¯é›¶å€¼</strong></p>\n<pre class=\"line-numbers language-go\" data-language=\"go\"><code class=\"language-go\">db.First(&amp;user)\n\nuser.Name &#x3D; &quot;jinzhu 2&quot;\nuser.Age &#x3D; 100\ndb.Save(&amp;user)\n&#x2F;&#x2F; UPDATE users SET name&#x3D;&#39;jinzhu 2&#39;, age&#x3D;100, birthday&#x3D;&#39;2016-01-01&#39;, updated_at &#x3D; &#39;2013-11-17 21:34:10&#39; WHERE id&#x3D;111;\n</code></pre>\n\n<h3 id=\"æ›´æ–°å•ä¸ªåˆ—\"><a href=\"#æ›´æ–°å•ä¸ªåˆ—\" class=\"headerlink\" title=\"æ›´æ–°å•ä¸ªåˆ—\"></a>æ›´æ–°å•ä¸ªåˆ—</h3><p>è¿™é‡Œç›´æ¥ç”¨çš„é”®å€¼å¯¹</p>\n<pre class=\"line-numbers language-go\" data-language=\"go\"><code class=\"language-go\">&#x2F;&#x2F; æ¡ä»¶æ›´æ–°\ndb.Model(&amp;User&#123;&#125;).Where(&quot;active &#x3D; ?&quot;, true).Update(&quot;name&quot;, &quot;hello&quot;)\n&#x2F;&#x2F; UPDATE users SET name&#x3D;&#39;hello&#39;, updated_at&#x3D;&#39;2013-11-17 21:34:10&#39; WHERE active&#x3D;true;\n\n&#x2F;&#x2F; User çš„ ID æ˜¯ &#96;111&#96;\ndb.Model(&amp;user).Update(&quot;name&quot;, &quot;hello&quot;)\n&#x2F;&#x2F; UPDATE users SET name&#x3D;&#39;hello&#39;, updated_at&#x3D;&#39;2013-11-17 21:34:10&#39; WHERE id&#x3D;111;\n\n&#x2F;&#x2F; æ ¹æ®æ¡ä»¶å’Œ model çš„å€¼è¿›è¡Œæ›´æ–°\ndb.Model(&amp;user).Where(&quot;active &#x3D; ?&quot;, true).Update(&quot;name&quot;, &quot;hello&quot;)\n&#x2F;&#x2F; UPDATE users SET name&#x3D;&#39;hello&#39;, updated_at&#x3D;&#39;2013-11-17 21:34:10&#39; WHERE id&#x3D;111 AND active&#x3D;true;\n</code></pre>\n\n<h3 id=\"æ›´æ–°å¤šåˆ—\"><a href=\"#æ›´æ–°å¤šåˆ—\" class=\"headerlink\" title=\"æ›´æ–°å¤šåˆ—\"></a>æ›´æ–°å¤šåˆ—</h3><ul>\n<li><code>struct</code> æ›´æ–°éé›¶å€¼å­—æ®µ</li>\n<li><code>map[string]interface&#123;&#125;</code></li>\n</ul>\n<pre class=\"line-numbers language-go\" data-language=\"go\"><code class=\"language-go\">&#x2F;&#x2F; æ ¹æ® &#96;struct&#96; æ›´æ–°å±æ€§ï¼Œåªä¼šæ›´æ–°éé›¶å€¼çš„å­—æ®µ\ndb.Model(&amp;user).Updates(User&#123;Name: &quot;hello&quot;, Age: 18, Active: false&#125;)\n&#x2F;&#x2F; UPDATE users SET name&#x3D;&#39;hello&#39;, age&#x3D;18, updated_at &#x3D; &#39;2013-11-17 21:34:10&#39; WHERE id &#x3D; 111;\n\n&#x2F;&#x2F; æ ¹æ® &#96;map&#96; æ›´æ–°å±æ€§\ndb.Model(&amp;user).Updates(map[string]interface&#123;&#125;&#123;&quot;name&quot;: &quot;hello&quot;, &quot;age&quot;: 18, &quot;active&quot;: false&#125;)\n&#x2F;&#x2F; UPDATE users SET name&#x3D;&#39;hello&#39;, age&#x3D;18, active&#x3D;false, updated_at&#x3D;&#39;2013-11-17 21:34:10&#39; WHERE id&#x3D;111;\n</code></pre>\n\n<h3 id=\"æ›´æ–°é€‰å®šå­—æ®µ\"><a href=\"#æ›´æ–°é€‰å®šå­—æ®µ\" class=\"headerlink\" title=\"æ›´æ–°é€‰å®šå­—æ®µ\"></a>æ›´æ–°é€‰å®šå­—æ®µ</h3><ul>\n<li>Select é€‰æ‹©å­—æ®µ</li>\n<li>Omit å‰”é™¤å­—æ®µ</li>\n</ul>\n<pre class=\"line-numbers language-go\" data-language=\"go\"><code class=\"language-go\">&#x2F;&#x2F; ä½¿ç”¨ Map è¿›è¡Œ Select\n&#x2F;&#x2F; User&#39;s ID is &#96;111&#96;:\n\n&#x2F;&#x2F;åªæ›´æ–°name\ndb.Model(&amp;user).Select(&quot;name&quot;).Updates(map[string]interface&#123;&#125;&#123;&quot;name&quot;: &quot;hello&quot;, &quot;age&quot;: 18, &quot;active&quot;: false&#125;)\n&#x2F;&#x2F; UPDATE users SET name&#x3D;&#39;hello&#39; WHERE id&#x3D;111;\n\n\n&#x2F;&#x2F; ä¸æ›´æ–°name\ndb.Model(&amp;user).Omit(&quot;name&quot;).Updates(map[string]interface&#123;&#125;&#123;&quot;name&quot;: &quot;hello&quot;, &quot;age&quot;: 18, &quot;active&quot;: false&#125;)\n&#x2F;&#x2F; UPDATE users SET age&#x3D;18, active&#x3D;false, updated_at&#x3D;&#39;2013-11-17 21:34:10&#39; WHERE id&#x3D;111;\n\n&#x2F;&#x2F; ä½¿ç”¨ Struct è¿›è¡Œ Selectï¼ˆä¼š select é›¶å€¼çš„å­—æ®µï¼‰ è¿™ä¹ˆç‰¹æ®Šçš„å—ï¼Ÿå“¦ï¼Œå¤§æ¦‚æ™“å¾—äº†ï¼š é»˜è®¤æ˜¯ä¸æ›´æ–°ï¼Œä½†Selectè¦æ›´æ–°\ndb.Model(&amp;user).Select(&quot;Name&quot;, &quot;Age&quot;).Updates(User&#123;Name: &quot;new_name&quot;, Age: 0&#125;)\n&#x2F;&#x2F; UPDATE users SET name&#x3D;&#39;new_name&#39;, age&#x3D;0 WHERE id&#x3D;111;\n\n&#x2F;&#x2F; Select æ‰€æœ‰å­—æ®µï¼ˆæŸ¥è¯¢åŒ…æ‹¬é›¶å€¼å­—æ®µçš„æ‰€æœ‰å­—æ®µï¼‰\n&#x2F;&#x2F; è¿˜æ”¯æŒ *å‘¢\ndb.Model(&amp;user).Select(&quot;*&quot;).Update(User&#123;Name: &quot;jinzhu&quot;, Role: &quot;admin&quot;, Age: 0&#125;)\n\n&#x2F;&#x2F; Select é™¤ Role å¤–çš„æ‰€æœ‰å­—æ®µï¼ˆåŒ…æ‹¬é›¶å€¼å­—æ®µçš„æ‰€æœ‰å­—æ®µï¼‰\n&#x2F;&#x2F; ç»„åˆä½¿ç”¨\ndb.Model(&amp;user).Select(&quot;*&quot;).Omit(&quot;Role&quot;).Update(User&#123;Name: &quot;jinzhu&quot;, Role: &quot;admin&quot;, Age: 0&#125;)\n</code></pre>\n\n<h3 id=\"æ›´æ–°-Hook\"><a href=\"#æ›´æ–°-Hook\" class=\"headerlink\" title=\"æ›´æ–° Hook\"></a>æ›´æ–° Hook</h3><p>å‹¾å­æ— éå°±æ˜¯æ ¡éªŒå’Œæ”¹å˜</p>\n<h3 id=\"æ‰¹é‡æ›´æ–°\"><a href=\"#æ‰¹é‡æ›´æ–°\" class=\"headerlink\" title=\"æ‰¹é‡æ›´æ–°\"></a>æ‰¹é‡æ›´æ–°</h3><p>ä¸æŒ‡å®šä¸»é”®å°±æ˜¯æ‰¹æ›´æ–°</p>\n<pre class=\"line-numbers language-go\" data-language=\"go\"><code class=\"language-go\">&#x2F;&#x2F; æ ¹æ® struct æ›´æ–°\n&#x2F;&#x2F; ç»™gormä¸ªæ¨¡å‹ï¼Œè®©å®ƒæ¥æ‰¾è¡¨\ndb.Model(User&#123;&#125;).Where(&quot;role &#x3D; ?&quot;, &quot;admin&quot;).Updates(User&#123;Name: &quot;hello&quot;, Age: 18&#125;)\n&#x2F;&#x2F; UPDATE users SET name&#x3D;&#39;hello&#39;, age&#x3D;18 WHERE role &#x3D; &#39;admin&#39;;\n\n&#x2F;&#x2F; æ ¹æ® map æ›´æ–°\n&#x2F;&#x2F; db.Table é€‰æ‹©æŸä¸ªè¡¨\ndb.Table(&quot;users&quot;).Where(&quot;id IN ?&quot;, []int&#123;10, 11&#125;).Updates(map[string]interface&#123;&#125;&#123;&quot;name&quot;: &quot;hello&quot;, &quot;age&quot;: 18&#125;)\n&#x2F;&#x2F; UPDATE users SET name&#x3D;&#39;hello&#39;, age&#x3D;18 WHERE id IN (10, 11);\n</code></pre>\n\n<h3 id=\"é˜»æ­¢å…¨å±€æ›´æ–°\"><a href=\"#é˜»æ­¢å…¨å±€æ›´æ–°\" class=\"headerlink\" title=\"é˜»æ­¢å…¨å±€æ›´æ–°\"></a>é˜»æ­¢å…¨å±€æ›´æ–°</h3><pre class=\"line-numbers language-go\" data-language=\"go\"><code class=\"language-go\">db.Model(&amp;User&#123;&#125;).Update(&quot;name&quot;, &quot;jinzhu&quot;).Error &#x2F;&#x2F; gorm.ErrMissingWhereClause\n\n\n&#x2F;&#x2F; .Where(&quot;true&quot;) æ¨¡å¼\ndb.Model(&amp;User&#123;&#125;).Where(&quot;1 &#x3D; 1&quot;).Update(&quot;name&quot;, &quot;jinzhu&quot;)\n&#x2F;&#x2F; UPDATE users SET &#96;name&#96; &#x3D; &quot;jinzhu&quot; WHERE 1&#x3D;1\n\n&#x2F;&#x2F; åŸç”Ÿ\ndb.Exec(&quot;UPDATE users SET name &#x3D; ?&quot;, &quot;jinzhu&quot;)\n&#x2F;&#x2F; UPDATE users SET name &#x3D; &quot;jinzhu&quot;\n\n&#x2F;&#x2F; AllowGlobalUpdate\ndb.Session(&amp;gorm.Session&#123;AllowGlobalUpdate: true&#125;).Model(&amp;User&#123;&#125;).Update(&quot;name&quot;, &quot;jinzhu&quot;)\n&#x2F;&#x2F; UPDATE users SET &#96;name&#96; &#x3D; &quot;jinzhu&quot;</code></pre>\n\n<h3 id=\"æ›´æ–°çš„å—å½±å“æ•°\"><a href=\"#æ›´æ–°çš„å—å½±å“æ•°\" class=\"headerlink\" title=\"æ›´æ–°çš„å—å½±å“æ•°\"></a>æ›´æ–°çš„å—å½±å“æ•°</h3><pre class=\"line-numbers language-go\" data-language=\"go\"><code class=\"language-go\">&#x2F;&#x2F; é€šè¿‡ &#96;RowsAffected&#96; å¾—åˆ°æ›´æ–°çš„è®°å½•æ•°\nresult :&#x3D; db.Model(User&#123;&#125;).Where(&quot;role &#x3D; ?&quot;, &quot;admin&quot;).Updates(User&#123;Name: &quot;hello&quot;, Age: 18&#125;)\n&#x2F;&#x2F; UPDATE users SET name&#x3D;&#39;hello&#39;, age&#x3D;18 WHERE role &#x3D; &#39;admin&#39;;\n\nresult.RowsAffected &#x2F;&#x2F; æ›´æ–°çš„è®°å½•æ•°\nresult.Error        &#x2F;&#x2F; æ›´æ–°çš„é”™è¯¯</code></pre>\n\n<h3 id=\"é«˜çº§é€‰é¡¹\"><a href=\"#é«˜çº§é€‰é¡¹\" class=\"headerlink\" title=\"é«˜çº§é€‰é¡¹\"></a>é«˜çº§é€‰é¡¹</h3><h3 id=\"ä½¿ç”¨-SQL-è¡¨è¾¾å¼æ›´æ–°\"><a href=\"#ä½¿ç”¨-SQL-è¡¨è¾¾å¼æ›´æ–°\" class=\"headerlink\" title=\"ä½¿ç”¨ SQL è¡¨è¾¾å¼æ›´æ–°\"></a>ä½¿ç”¨ SQL è¡¨è¾¾å¼æ›´æ–°</h3><pre class=\"line-numbers language-go\" data-language=\"go\"><code class=\"language-go\">\n&#x2F;&#x2F; product çš„ ID æ˜¯ &#96;3&#96;\ndb.Model(&amp;product).Update(&quot;price&quot;, gorm.Expr(&quot;price * ? + ?&quot;, 2, 100))\n&#x2F;&#x2F; UPDATE &quot;products&quot; SET &quot;price&quot; &#x3D; price * 2 + 100, &quot;updated_at&quot; &#x3D; &#39;2013-11-17 21:34:10&#39; WHERE &quot;id&quot; &#x3D; 3;\n\ndb.Model(&amp;product).Updates(map[string]interface&#123;&#125;&#123;&quot;price&quot;: gorm.Expr(&quot;price * ? + ?&quot;, 2, 100)&#125;)\n&#x2F;&#x2F; UPDATE &quot;products&quot; SET &quot;price&quot; &#x3D; price * 2 + 100, &quot;updated_at&quot; &#x3D; &#39;2013-11-17 21:34:10&#39; WHERE &quot;id&quot; &#x3D; 3;\n\ndb.Model(&amp;product).UpdateColumn(&quot;quantity&quot;, gorm.Expr(&quot;quantity - ?&quot;, 1))\n&#x2F;&#x2F; UPDATE &quot;products&quot; SET &quot;quantity&quot; &#x3D; quantity - 1 WHERE &quot;id&quot; &#x3D; 3;\n\ndb.Model(&amp;product).Where(&quot;quantity &gt; 1&quot;).UpdateColumn(&quot;quantity&quot;, gorm.Expr(&quot;quantity - ?&quot;, 1))\n&#x2F;&#x2F; UPDATE &quot;products&quot; SET &quot;quantity&quot; &#x3D; quantity - 1 WHERE &quot;id&quot; &#x3D; 3 AND quantity &gt; 1;\n\n&#x2F;&#x2F; å°†é“¾å¼è°ƒç”¨æ‹†è§£\n\n  &#x2F;&#x2F; db.Model(&amp;product) é€‰è¡¨\n  &#x2F;&#x2F; .UpdateColumn(&quot;quantity&quot;, &#x2F;&#x2F; æ›´æ–°æ“ä½œ\n  &#x2F;&#x2F; .Where(&quot;quantity &gt; 1&quot;) &#x2F;&#x2F; åˆ¤æ–­æ¡ä»¶\n\n&#x2F;&#x2F; æˆ‘æœ‰ä¸ªç–‘é—®ï¼šgorm æ˜¯å¦‚ä½•è¿›è¡Œé“¾å¼è°ƒç”¨è€Œä¿è¯é¡ºåºçš„ï¼Ÿ\n\n&#x2F;&#x2F; func (db *DB) Model(value interface&#123;&#125;) (tx *DB) &#123;\n&#x2F;&#x2F; \ttx &#x3D; db.getInstance()\n&#x2F;&#x2F; \ttx.Statement.Model &#x3D; value\n&#x2F;&#x2F; \treturn\n&#x2F;&#x2F; &#125;\n\n&#x2F;&#x2F; æŠŠæ‰€æœ‰çš„.èŠ‚ç‚¹ éƒ½æ”¾åˆ°Statementä¸Šï¼ŒUpdateColumnæ˜¯æ‰§è¡Œ tx.callbacks.Update().Executeï¼Œ æœ€åæ€ä¹ˆç»„ç»‡çš„ Executeæ‰§è¡Œäº†å•¥ï¼Ÿå¾€ä¸‹å¥½åƒçœ‹ä¸æ‡‚äº†\n\n&#x2F;&#x2F; func (db *DB) UpdateColumn(column string, value interface&#123;&#125;) (tx *DB) &#123;\n&#x2F;&#x2F; \ttx &#x3D; db.getInstance()\n&#x2F;&#x2F; \ttx.Statement.Dest &#x3D; map[string]interface&#123;&#125;&#123;column: value&#125;\n&#x2F;&#x2F; \ttx.Statement.SkipHooks &#x3D; true\n&#x2F;&#x2F; \treturn tx.callbacks.Update().Execute(tx)\n&#x2F;&#x2F; &#125;\n\n\n&#x2F;&#x2F; for _, f :&#x3D; range p.fns &#123; &#x2F;&#x2F; p *processor\n&#x2F;&#x2F; \t\tf(db)\n&#x2F;&#x2F; \t&#125;</code></pre>\n\n<p>TODO:è¿™é‡Œæœ‰ä¸ªè‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œåœ¨ä¸‹é¢ç« èŠ‚é‡Œæœ‰ï¼Œå…ˆè·³è¿‡</p>\n<h3 id=\"æ ¹æ®å­æŸ¥è¯¢è¿›è¡Œæ›´æ–°\"><a href=\"#æ ¹æ®å­æŸ¥è¯¢è¿›è¡Œæ›´æ–°\" class=\"headerlink\" title=\"æ ¹æ®å­æŸ¥è¯¢è¿›è¡Œæ›´æ–°\"></a>æ ¹æ®å­æŸ¥è¯¢è¿›è¡Œæ›´æ–°</h3><pre class=\"line-numbers language-go\" data-language=\"go\"><code class=\"language-go\">db.Model(&amp;user)\n.Update(\n  &quot;company_name&quot;,\n  db.Model(&amp;Company&#123;&#125;).Select(&quot;name&quot;).Where(&quot;companies.id &#x3D; users.company_id&quot;)\n)\n&#x2F;&#x2F; UPDATE &quot;users&quot; SET &quot;company_name&quot; &#x3D; (SELECT name FROM companies WHERE companies.id &#x3D; users.company_id);\n\n&#x2F;&#x2F; è¡¨æ˜æ˜¯å¤æ•°\ndb.Table(&quot;users as u&quot;).Where(&quot;name &#x3D; ?&quot;, &quot;jinzhu&quot;)\n.Update(\n  &quot;company_name&quot;,\n  db.Table(&quot;companies as c&quot;).Select(&quot;name&quot;).Where(&quot;c.id &#x3D; u.company_id&quot;)\n)\n\ndb.Table(&quot;users as u&quot;).Where(&quot;name &#x3D; ?&quot;, &quot;jinzhu&quot;)\n.Updates(map[string]interface&#123;&#125;&#123;\n  &quot;company_name&quot;: db.Table(&quot;companies as c&quot;).Select(&quot;name&quot;).Where(&quot;c.id &#x3D; u.company_id&quot;)\n&#125;)</code></pre>\n\n<h3 id=\"ä¸ä½¿ç”¨-Hook-å’Œæ—¶é—´è¿½è¸ª\"><a href=\"#ä¸ä½¿ç”¨-Hook-å’Œæ—¶é—´è¿½è¸ª\" class=\"headerlink\" title=\"ä¸ä½¿ç”¨ Hook å’Œæ—¶é—´è¿½è¸ª\"></a>ä¸ä½¿ç”¨ Hook å’Œæ—¶é—´è¿½è¸ª</h3><p>å®˜æ–¹æ–‡æ¡£ä¸Šæ˜¯é”™è¯¯çš„ï¼Œ æ²¡æœ‰ä¸»é”®ï¼Œæ²¡æœ‰æŸ¥è¯¢æ¡ä»¶ï¼Œä¸ä¼šæ›´æ–°<br>æ³¨æ„ï¼šä¸‹é¢è¿™å‡ ä¸ª <em>ä¸è¿½è¸ªæ›´æ–°æ—¶é—´</em></p>\n<pre class=\"line-numbers language-go\" data-language=\"go\"><code class=\"language-go\">var user User\ndb.Debug().Model(&amp;user).Where(&quot;id &#x3D; ?&quot;,1).UpdateColumn(&quot;name&quot;, &quot;hello&quot;)\n&#x2F;&#x2F; 2022&#x2F;10&#x2F;20 14:52:17 &#x2F;Users&#x2F;haotian&#x2F;haotian&#x2F;github&#x2F;go&#x2F;learn-gorm&#x2F;crud&#x2F;r.go:468 WHERE conditions required\n&#x2F;&#x2F; [0.496ms] [rows:0] UPDATE &#96;users&#96; SET &#96;name&#96;&#x3D;&#39;hello&#39; where &#96;id&#96;&#x3D;1\n\n&#x2F;&#x2F; æ›´æ–°å¤šä¸ªåˆ—\ndb.Model(&amp;user).Where(&quot;id &#x3D; ?&quot;,1).UpdateColumns(User&#123;Name: &quot;hello&quot;, Age: 18&#125;)\n&#x2F;&#x2F; 2022&#x2F;10&#x2F;20 14:53:09 &#x2F;Users&#x2F;haotian&#x2F;haotian&#x2F;github&#x2F;go&#x2F;learn-gorm&#x2F;crud&#x2F;r.go:473 WHERE conditions required\n&#x2F;&#x2F; [0.567ms] [rows:0] UPDATE &#96;users&#96; SET &#96;name&#96;&#x3D;&#39;hello&#39;,&#96;age&#96;&#x3D;18 where &#96;id&#96;&#x3D;1\n\n&#x2F;&#x2F; æ›´æ–°é€‰ä¸­çš„åˆ—\ndb.Model(&amp;user).Select(&quot;name&quot;, &quot;age&quot;).Where(&quot;id &#x3D; ?&quot;,1).UpdateColumns(User&#123;Name: &quot;hello&quot;, Age: 0&#125;)\n&#x2F;&#x2F; 2022&#x2F;10&#x2F;20 14:53:59 &#x2F;Users&#x2F;haotian&#x2F;haotian&#x2F;github&#x2F;go&#x2F;learn-gorm&#x2F;crud&#x2F;r.go:478 WHERE conditions required\n&#x2F;&#x2F; [0.539ms] [rows:0] UPDATE &#96;users&#96; SET &#96;name&#96;&#x3D;&#39;hello&#39;,&#96;age&#96;&#x3D;0 where &#96;id&#96;&#x3D;1\n</code></pre>\n\n<h3 id=\"è¿”å›ä¿®æ”¹è¡Œçš„æ•°æ®\"><a href=\"#è¿”å›ä¿®æ”¹è¡Œçš„æ•°æ®\" class=\"headerlink\" title=\"è¿”å›ä¿®æ”¹è¡Œçš„æ•°æ®\"></a>è¿”å›ä¿®æ”¹è¡Œçš„æ•°æ®</h3><p>è¿™ä¸ªæœ‰ç”¨ï¼Œå¯ä»¥ç»™å‰ç«¯åŒæ­¥æ•°æ®ï¼Œè€Œä¸éœ€è¦å‰ç«¯å†å‘ä¸ªè¯·æ±‚åˆ°åç«¯æŸ¥è¯¢æ•°æ®ï¼Œ</p>\n<pre class=\"line-numbers language-go\" data-language=\"go\"><code class=\"language-go\">&#x2F;&#x2F; è¿”å›æ‰€æœ‰åˆ—\nvar users []User\nDB.Model(&amp;users).Clauses(clause.Returning&#123;&#125;).Where(&quot;role &#x3D; ?&quot;, &quot;admin&quot;).Update(&quot;salary&quot;, gorm.Expr(&quot;salary * ?&quot;, 2))\n&#x2F;&#x2F; UPDATE &#96;users&#96; SET &#96;salary&#96;&#x3D;salary * 2,&#96;updated_at&#96;&#x3D;&quot;2021-10-28 17:37:23.19&quot; WHERE role &#x3D; &quot;admin&quot; RETURNING *\n&#x2F;&#x2F; users &#x3D;&gt; []User&#123;&#123;ID: 1, Name: &quot;jinzhu&quot;, Role: &quot;admin&quot;, Salary: 100&#125;, &#123;ID: 2, Name: &quot;jinzhu.2&quot;, Role: &quot;admin&quot;, Salary: 1000&#125;&#125;\n\n&#x2F;&#x2F; è¿”å›æŒ‡å®šçš„åˆ—\nDB.Model(&amp;users).Clauses(clause.Returning&#123;Columns: []clause.Column&#123;&#123;Name: &quot;name&quot;&#125;, &#123;Name: &quot;salary&quot;&#125;&#125;&#125;).Where(&quot;role &#x3D; ?&quot;, &quot;admin&quot;).Update(&quot;salary&quot;, gorm.Expr(&quot;salary * ?&quot;, 2))\n&#x2F;&#x2F; UPDATE &#96;users&#96; SET &#96;salary&#96;&#x3D;salary * 2,&#96;updated_at&#96;&#x3D;&quot;2021-10-28 17:37:23.19&quot; WHERE role &#x3D; &quot;admin&quot; RETURNING &#96;name&#96;, &#96;salary&#96;\n&#x2F;&#x2F; users &#x3D;&gt; []User&#123;&#123;ID: 0, Name: &quot;jinzhu&quot;, Role: &quot;&quot;, Salary: 100&#125;, &#123;ID: 0, Name: &quot;jinzhu.2&quot;, Role: &quot;&quot;, Salary: 1000&#125;&#125;\n</code></pre>\n\n<h3 id=\"æ£€æŸ¥å­—æ®µæ˜¯å¦æœ‰å˜æ›´ï¼Ÿ\"><a href=\"#æ£€æŸ¥å­—æ®µæ˜¯å¦æœ‰å˜æ›´ï¼Ÿ\" class=\"headerlink\" title=\"æ£€æŸ¥å­—æ®µæ˜¯å¦æœ‰å˜æ›´ï¼Ÿ\"></a>æ£€æŸ¥å­—æ®µæ˜¯å¦æœ‰å˜æ›´ï¼Ÿ</h3><h3 id=\"åœ¨-Update-æ—¶ä¿®æ”¹å€¼\"><a href=\"#åœ¨-Update-æ—¶ä¿®æ”¹å€¼\" class=\"headerlink\" title=\"åœ¨ Update æ—¶ä¿®æ”¹å€¼\"></a>åœ¨ Update æ—¶ä¿®æ”¹å€¼</h3><pre class=\"line-numbers language-go\" data-language=\"go\"><code class=\"language-go\">&#x2F;&#x2F; ç»™è°åŠ çš„å‹¾å­ï¼Ÿ ç»™user?,åŠ å‹¾å­éƒ½åŠ è½½å­—æ®µä¸Šçš„å—\nfunc (user *User) BeforeSave(tx *gorm.DB) (err error) &#123;\n  if pw, err :&#x3D; bcrypt.GenerateFromPassword(user.Password, 0); err &#x3D;&#x3D; nil &#123;\n    tx.Statement.SetColumn(&quot;EncryptedPassword&quot;, pw)\n  &#125;\n\n  if tx.Statement.Changed(&quot;Code&quot;) &#123;\n    user.Age +&#x3D; 20\n    tx.Statement.SetColumn(&quot;Age&quot;, user.Age)\n  &#125;\n&#125;\n\ndb.Model(&amp;user).Update(&quot;Name&quot;, &quot;jinzhu&quot;)</code></pre>\n\n<hr/>\n\n<h2 id=\"gorm-å®‰å…¨\"><a href=\"#gorm-å®‰å…¨\" class=\"headerlink\" title=\"gorm å®‰å…¨\"></a>gorm å®‰å…¨</h2><h3 id=\"gorm-SQL-æ³¨å…¥\"><a href=\"#gorm-SQL-æ³¨å…¥\" class=\"headerlink\" title=\"gorm SQL æ³¨å…¥\"></a>gorm SQL æ³¨å…¥</h3><p><strong>åº”å¯¹</strong></p>\n<p>GORM ä½¿ç”¨ database&#x2F;sql çš„<em>å‚æ•°å ä½ç¬¦æ¥æ„é€  SQL è¯­å¥ï¼Œè¿™å¯ä»¥è‡ªåŠ¨è½¬ä¹‰å‚æ•°</em>ï¼Œé¿å… SQL æ³¨å…¥æ•°æ®</p>\n<h3 id=\"æŸ¥è¯¢æ¡ä»¶\"><a href=\"#æŸ¥è¯¢æ¡ä»¶\" class=\"headerlink\" title=\"æŸ¥è¯¢æ¡ä»¶\"></a>æŸ¥è¯¢æ¡ä»¶</h3><h3 id=\"å†…è”æ¡ä»¶\"><a href=\"#å†…è”æ¡ä»¶\" class=\"headerlink\" title=\"å†…è”æ¡ä»¶\"></a>å†…è”æ¡ä»¶</h3><p>å½“é€šè¿‡ç”¨æˆ·è¾“å…¥çš„æ•´å½¢ä¸»é”®æ£€ç´¢è®°å½•æ—¶ï¼Œä½ åº”è¯¥å¯¹å˜é‡è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚</p>\n<h3 id=\"é¿å…-Sql-æ³¨å…¥çš„åŸåˆ™ï¼š\"><a href=\"#é¿å…-Sql-æ³¨å…¥çš„åŸåˆ™ï¼š\" class=\"headerlink\" title=\"é¿å… Sql æ³¨å…¥çš„åŸåˆ™ï¼š\"></a>é¿å… Sql æ³¨å…¥çš„åŸåˆ™ï¼š</h3><ul>\n<li>é¿å… SQL æ³¨å…¥çš„ä¸€èˆ¬åŸåˆ™æ˜¯ï¼Œä¸ä¿¡ä»»ç”¨æˆ·æäº¤çš„æ•°æ®ã€‚</li>\n<li>æ‚¨å¯ä»¥è¿›è¡Œç™½åå•éªŒè¯æ¥æµ‹è¯•ç”¨æˆ·çš„è¾“å…¥æ˜¯å¦ä¸ºå·²çŸ¥å®‰å…¨çš„ã€å·²æ‰¹å‡†ã€å·²å®šä¹‰çš„è¾“å…¥ TODO: å¦‚ä½•å®ç°ï¼Ÿ</li>\n<li>åœ¨ä½¿ç”¨ç”¨æˆ·çš„è¾“å…¥æ—¶ï¼Œä»…å°†å®ƒä»¬ä½œä¸ºå‚æ•°ã€‚</li>\n</ul>\n<h2 id=\"é»˜è®¤å€¼\"><a href=\"#é»˜è®¤å€¼\" class=\"headerlink\" title=\"é»˜è®¤å€¼\"></a>é»˜è®¤å€¼</h2><h2 id=\"é›¶å€¼-é»˜è®¤å€¼\"><a href=\"#é›¶å€¼-é»˜è®¤å€¼\" class=\"headerlink\" title=\"é›¶å€¼ || é»˜è®¤å€¼\"></a>é›¶å€¼ || é»˜è®¤å€¼</h2><ul>\n<li>æ–¹å¼ 1: æŒ‡é’ˆ</li>\n<li>æ–¹å¼ 2: sql ç»“æ„ä½“</li>\n</ul>\n<h2 id=\"map-string-interface-å•¥æ„æ€ï¼Ÿ\"><a href=\"#map-string-interface-å•¥æ„æ€ï¼Ÿ\" class=\"headerlink\" title=\"map[string]interface{}{}å•¥æ„æ€ï¼Ÿ\"></a><code>map[string]interface&#123;&#125;&#123;&#125;</code>å•¥æ„æ€ï¼Ÿ</h2><pre class=\"line-numbers language-go\" data-language=\"go\"><code class=\"language-go\">.Updates(map[string]interface&#123;&#125;&#123;&quot;name&quot;: &quot;hello&quot;, &quot;age&quot;: 18, &quot;active&quot;: false&#125;)</code></pre>\n\n<h2 id=\"è½¯åˆ é™¤åæŸ¥è¯¢å…¨é‡æ•°æ®\"><a href=\"#è½¯åˆ é™¤åæŸ¥è¯¢å…¨é‡æ•°æ®\" class=\"headerlink\" title=\"è½¯åˆ é™¤åæŸ¥è¯¢å…¨é‡æ•°æ®\"></a>è½¯åˆ é™¤åæŸ¥è¯¢å…¨é‡æ•°æ®</h2><pre class=\"line-numbers language-go\" data-language=\"go\"><code class=\"language-go\">&#x2F;&#x2F; Unscoped ç¿»è¯‘ä¸ºï¼šæ— èŒƒå›´\n\n&#x2F;&#x2F; Unscoped æ–¹æ³•å¯ä»¥æŸ¥è¯¢è¢«è½¯åˆ é™¤çš„è®°å½•\ndb.Unscoped().Where(&quot;age &#x3D; 20&quot;).Find(&amp;users)\n&#x2F;&#x2F;&#x2F;&#x2F; SELECT * FROM users WHERE age &#x3D; 20;</code></pre>\n\n<h2 id=\"å®æˆ˜å­¦ä¹ \"><a href=\"#å®æˆ˜å­¦ä¹ \" class=\"headerlink\" title=\"å®æˆ˜å­¦ä¹ \"></a>å®æˆ˜å­¦ä¹ </h2><p>æ‰¾ä¸ªé¡¹ç›®ç…ç…ï¼Œ</p>\n<p><a href=\"https://github.com/Q1mi/bubble\" target=\"_blank\" >è§</a></p>\n<h2 id=\"é¡¹ç›®æ¶æ„\"><a href=\"#é¡¹ç›®æ¶æ„\" class=\"headerlink\" title=\"é¡¹ç›®æ¶æ„\"></a>é¡¹ç›®æ¶æ„</h2><img src=\"http://t-blog-images.aijs.top/img/202210162226393.png\" />\n\n<h2 id=\"åšå®¢æ”¶é›†\"><a href=\"#åšå®¢æ”¶é›†\" class=\"headerlink\" title=\"åšå®¢æ”¶é›†\"></a>åšå®¢æ”¶é›†</h2><p><a href=\"https://www.liwenzhou.com/posts/Go/golang-menu/\" target=\"_blank\" >liwenzhou.com golang èœå•</a></p>\n<p><a href=\"https://www.liwenzhou.com/posts/Go/gorm_crud/#autoid-1-0-0\" target=\"_blank\" >liwenzhou.com åˆ›å»º</a></p>\n<p><a href=\"https://www.liwenzhou.com/posts/Go/gorm_crud/#autoid-1-1-3\" target=\"_blank\" >liwenzhou.com æŸ¥è¯¢</a></p>\n<p><a href=\"https://www.liwenzhou.com/posts/Go/gorm_crud/#autoid-1-3-4\" target=\"_blank\" >liwenzhou.com æ›´æ–°</a></p>\n<p><a href=\"https://www.liwenzhou.com/posts/Go/gorm_crud/#autoid-1-4-8\" target=\"_blank\" >liwenzhou.com åˆ é™¤</a></p>\n<p><a href=\"https://www.liwenzhou.com/posts/Go/gorm_crud/#autoid-1-2-11\" target=\"_blank\" >liwenzhou.com é“¾å¼è°ƒç”¨</a></p>\n<p><a href=\"https://www.bilibili.com/video/BV1gJ411p7xC?p=19\" target=\"_blank\" >B ç«™è§†é¢‘ gorm</a></p>\n<p><a href=\"https://gitee.com/moxi159753/LearningNotes/tree/master/Golang/Gin%E6%A1%86%E6%9E%B6/\" target=\"_blank\" >è¯¾ç¨‹ä»£ç </a></p>\n<p>å­¦é«˜çº§çš„éƒ½è¦é’±ï¼Œå‘œå‘œï½ï¼Œæœ‰é’±çœŸå¥½</p>\n<p><a href=\"https://study.163.com/course/introduction.htm?courseId=1210171207#/courseDetail?tab=1\" target=\"_blank\" >å“ªä½è€å“¥æœ‰ä¹°æ­¤è¯¾ç¨‹ï¼Œå€Ÿé˜…,ä¸‰å…‹æ²¹äº†</a></p>\n","text":"githubhttps://github.com/go-gorm/gorm ORM orm è§£å†³çš„é—®é¢˜ä¸“æ³¨äºè¯­è¨€ï¼Œå¼±åŒ– sql gorm å†…éƒ¨å¦‚ä½•å®ç°GORM å†…éƒ¨ä½¿ç”¨ SQL builder ç”Ÿæˆ SQLã€‚ å¯¹äºæ¯ä¸ªæ“ä½œï¼ŒGORM éƒ½ä¼šåˆ›å»ºä¸€ä¸ª *gorm.Statement ...","link":"","photos":[],"count_time":{"symbolsCount":"26k","symbolsTime":"24 mins."},"categories":[{"name":"Go","slug":"Go","count":19,"path":"api/categories/Go.json"}],"tags":[{"name":"Go","slug":"Go","count":19,"path":"api/tags/Go.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#github\"><span class=\"toc-text\">github</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#ORM\"><span class=\"toc-text\">ORM</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#orm-%E8%A7%A3%E5%86%B3%E7%9A%84%E9%97%AE%E9%A2%98\"><span class=\"toc-text\">orm è§£å†³çš„é—®é¢˜</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#gorm-%E5%86%85%E9%83%A8%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0\"><span class=\"toc-text\">gorm å†…éƒ¨å¦‚ä½•å®ç°</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%93%8D%E4%BD%9C\"><span class=\"toc-text\">è‡ªå®šä¹‰æ“ä½œ</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E8%A1%A8%E5%90%8D%E8%87%AA%E5%AE%9A%E4%B9%89\"><span class=\"toc-text\">è¡¨åè‡ªå®šä¹‰</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%A4%96%E9%94%AE%E8%87%AA%E5%AE%9A%E4%B9%89\"><span class=\"toc-text\">å¤–é”®è‡ªå®šä¹‰</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#gorm-%E5%85%B3%E7%B3%BB\"><span class=\"toc-text\">gorm å…³ç³»</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#gorm-First%E3%80%81Take%E3%80%81Last-%E5%8C%BA%E5%88%AB\"><span class=\"toc-text\">gorm Firstã€Takeã€Last åŒºåˆ«</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#gorm-Find-%E4%B8%8E-Scan-%E7%9A%84%E5%8C%BA%E5%88%AB\"><span class=\"toc-text\">gorm Find ä¸ Scan çš„åŒºåˆ«</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#gorm-Struct-%E4%B8%8E-Map-%E7%9A%84%E5%8C%BA%E5%88%AB\"><span class=\"toc-text\">gorm Struct ä¸ Map çš„åŒºåˆ«</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%9B%B8%E5%90%8C%E7%82%B9%EF%BC%9A\"><span class=\"toc-text\">ç›¸åŒç‚¹ï¼š</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%8D%E5%90%8C%E7%82%B9%EF%BC%9A\"><span class=\"toc-text\">ä¸åŒç‚¹ï¼š</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#gorm-%E5%93%AA%E4%BA%9B%E7%B1%BB%E5%9E%8B%E8%AF%AD%E5%8F%A5%E5%8F%AF%E4%BB%A5%E4%BD%9C%E6%9F%A5%E8%AF%A2\"><span class=\"toc-text\">gorm å“ªäº›ç±»å‹è¯­å¥å¯ä»¥ä½œæŸ¥è¯¢</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#gorm-%E5%93%AA%E4%BA%9B%E4%B8%8D%E4%BC%9A%E8%A7%A6%E5%8F%91%E6%9F%A5%E8%AF%A2\"><span class=\"toc-text\">gorm å“ªäº›ä¸ä¼šè§¦å‘æŸ¥è¯¢</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#gorm-%E5%93%AA%E4%BA%9B%E4%BC%9A%E8%A7%A6%E5%8F%91%E6%9F%A5%E8%AF%A2\"><span class=\"toc-text\">gorm å“ªäº›ä¼šè§¦å‘æŸ¥è¯¢</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#mysql-offset-amp-limit-%E4%B8%8E-where-amp-limit\"><span class=\"toc-text\">mysql offset &amp; limit ä¸ where &amp;limit</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#gorm-Model-%E4%B8%8E-Table-%E7%9A%84%E5%8C%BA%E5%88%AB\"><span class=\"toc-text\">gorm Model ä¸ Table çš„åŒºåˆ«</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#gorm-%E5%88%A0%E9%99%A4\"><span class=\"toc-text\">gorm åˆ é™¤</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%BB%E9%94%AE%E5%88%A0%E9%99%A4\"><span class=\"toc-text\">ä¸»é”®åˆ é™¤</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9D%A1%E4%BB%B6%E5%88%A0%E9%99%A4\"><span class=\"toc-text\">æ¡ä»¶åˆ é™¤</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%89%B9%E9%87%8F%E5%88%A0%E9%99%A4\"><span class=\"toc-text\">æ‰¹é‡åˆ é™¤</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%85%A8%E5%B1%80%E5%88%A0%E9%99%A4-%E8%A7%84%E9%81%BF\"><span class=\"toc-text\">å…¨å±€åˆ é™¤(è§„é¿)</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%BF%94%E5%9B%9E%E5%88%A0%E9%99%A4%E8%A1%8C%E7%9A%84%E6%95%B0%E6%8D%AE\"><span class=\"toc-text\">è¿”å›åˆ é™¤è¡Œçš„æ•°æ®</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%BD%AF%E5%88%A0%E9%99%A4\"><span class=\"toc-text\">è½¯åˆ é™¤</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9F%A5%E8%AF%A2%E8%A2%AB%E8%BD%AF%E5%88%A0%E8%AE%B0%E5%BD%95\"><span class=\"toc-text\">æŸ¥è¯¢è¢«è½¯åˆ è®°å½•</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%B0%B8%E4%B9%85%E5%88%A0%E9%99%A4\"><span class=\"toc-text\">æ°¸ä¹…åˆ é™¤</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%88%A0%E9%99%A4%E6%A0%87%E8%AE%B0-Flag\"><span class=\"toc-text\">åˆ é™¤æ ‡è®° Flag</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#unix-%E6%97%B6%E9%97%B4%E6%88%B3\"><span class=\"toc-text\">unix æ—¶é—´æˆ³</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-x2F-0-%E6%A0%87%E8%AE%B0\"><span class=\"toc-text\">1&#x2F;0 æ ‡è®°</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%B7%B7%E5%90%88%E6%A8%A1%E5%BC%8F\"><span class=\"toc-text\">æ··åˆæ¨¡å¼</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8E%9F%E7%94%9F-SQL-%E5%92%8C-SQL-%E7%94%9F%E6%88%90%E5%99%A8\"><span class=\"toc-text\">åŸç”Ÿ SQL å’Œ SQL ç”Ÿæˆå™¨</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%91%BD%E5%90%8D%E5%8F%82%E6%95%B0\"><span class=\"toc-text\">å‘½åå‚æ•°</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%A2%84%E6%A3%80-DryRun-%E6%A8%A1%E5%BC%8F\"><span class=\"toc-text\">é¢„æ£€ DryRun æ¨¡å¼</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#ToSql\"><span class=\"toc-text\">ToSql</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Row-amp-Rows\"><span class=\"toc-text\">Row &amp; Rows</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%8D%95%E8%BF%9E%E6%8E%A5-%E5%A4%9A%E6%93%8D%E4%BD%9C\"><span class=\"toc-text\">å•è¿æ¥,å¤šæ“ä½œ</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AD%90%E5%8F%A5\"><span class=\"toc-text\">å­å¥</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#StatementModifier-%E8%AF%AD%E5%8F%A5%E4%BF%AE%E6%94%B9%E5%99%A8\"><span class=\"toc-text\">StatementModifier è¯­å¥ä¿®æ”¹å™¨</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#gorm-%E6%9B%B4%E6%96%B0\"><span class=\"toc-text\">gorm æ›´æ–°</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BF%9D%E5%AD%98%E6%89%80%E6%9C%89%E5%AD%97%E6%AE%B5\"><span class=\"toc-text\">ä¿å­˜æ‰€æœ‰å­—æ®µ</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9B%B4%E6%96%B0%E5%8D%95%E4%B8%AA%E5%88%97\"><span class=\"toc-text\">æ›´æ–°å•ä¸ªåˆ—</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9B%B4%E6%96%B0%E5%A4%9A%E5%88%97\"><span class=\"toc-text\">æ›´æ–°å¤šåˆ—</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9B%B4%E6%96%B0%E9%80%89%E5%AE%9A%E5%AD%97%E6%AE%B5\"><span class=\"toc-text\">æ›´æ–°é€‰å®šå­—æ®µ</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9B%B4%E6%96%B0-Hook\"><span class=\"toc-text\">æ›´æ–° Hook</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%89%B9%E9%87%8F%E6%9B%B4%E6%96%B0\"><span class=\"toc-text\">æ‰¹é‡æ›´æ–°</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%98%BB%E6%AD%A2%E5%85%A8%E5%B1%80%E6%9B%B4%E6%96%B0\"><span class=\"toc-text\">é˜»æ­¢å…¨å±€æ›´æ–°</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9B%B4%E6%96%B0%E7%9A%84%E5%8F%97%E5%BD%B1%E5%93%8D%E6%95%B0\"><span class=\"toc-text\">æ›´æ–°çš„å—å½±å“æ•°</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%AB%98%E7%BA%A7%E9%80%89%E9%A1%B9\"><span class=\"toc-text\">é«˜çº§é€‰é¡¹</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BD%BF%E7%94%A8-SQL-%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%9B%B4%E6%96%B0\"><span class=\"toc-text\">ä½¿ç”¨ SQL è¡¨è¾¾å¼æ›´æ–°</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%A0%B9%E6%8D%AE%E5%AD%90%E6%9F%A5%E8%AF%A2%E8%BF%9B%E8%A1%8C%E6%9B%B4%E6%96%B0\"><span class=\"toc-text\">æ ¹æ®å­æŸ¥è¯¢è¿›è¡Œæ›´æ–°</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%8D%E4%BD%BF%E7%94%A8-Hook-%E5%92%8C%E6%97%B6%E9%97%B4%E8%BF%BD%E8%B8%AA\"><span class=\"toc-text\">ä¸ä½¿ç”¨ Hook å’Œæ—¶é—´è¿½è¸ª</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%BF%94%E5%9B%9E%E4%BF%AE%E6%94%B9%E8%A1%8C%E7%9A%84%E6%95%B0%E6%8D%AE\"><span class=\"toc-text\">è¿”å›ä¿®æ”¹è¡Œçš„æ•°æ®</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%A3%80%E6%9F%A5%E5%AD%97%E6%AE%B5%E6%98%AF%E5%90%A6%E6%9C%89%E5%8F%98%E6%9B%B4%EF%BC%9F\"><span class=\"toc-text\">æ£€æŸ¥å­—æ®µæ˜¯å¦æœ‰å˜æ›´ï¼Ÿ</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%9C%A8-Update-%E6%97%B6%E4%BF%AE%E6%94%B9%E5%80%BC\"><span class=\"toc-text\">åœ¨ Update æ—¶ä¿®æ”¹å€¼</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#gorm-%E5%AE%89%E5%85%A8\"><span class=\"toc-text\">gorm å®‰å…¨</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#gorm-SQL-%E6%B3%A8%E5%85%A5\"><span class=\"toc-text\">gorm SQL æ³¨å…¥</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9F%A5%E8%AF%A2%E6%9D%A1%E4%BB%B6\"><span class=\"toc-text\">æŸ¥è¯¢æ¡ä»¶</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%86%85%E8%81%94%E6%9D%A1%E4%BB%B6\"><span class=\"toc-text\">å†…è”æ¡ä»¶</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%81%BF%E5%85%8D-Sql-%E6%B3%A8%E5%85%A5%E7%9A%84%E5%8E%9F%E5%88%99%EF%BC%9A\"><span class=\"toc-text\">é¿å… Sql æ³¨å…¥çš„åŸåˆ™ï¼š</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%BB%98%E8%AE%A4%E5%80%BC\"><span class=\"toc-text\">é»˜è®¤å€¼</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%9B%B6%E5%80%BC-%E9%BB%98%E8%AE%A4%E5%80%BC\"><span class=\"toc-text\">é›¶å€¼ || é»˜è®¤å€¼</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#map-string-interface-%E5%95%A5%E6%84%8F%E6%80%9D%EF%BC%9F\"><span class=\"toc-text\">map[string]interface{}{}å•¥æ„æ€ï¼Ÿ</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%BD%AF%E5%88%A0%E9%99%A4%E5%90%8E%E6%9F%A5%E8%AF%A2%E5%85%A8%E9%87%8F%E6%95%B0%E6%8D%AE\"><span class=\"toc-text\">è½¯åˆ é™¤åæŸ¥è¯¢å…¨é‡æ•°æ®</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AE%9E%E6%88%98%E5%AD%A6%E4%B9%A0\"><span class=\"toc-text\">å®æˆ˜å­¦ä¹ </span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%A1%B9%E7%9B%AE%E6%9E%B6%E6%9E%84\"><span class=\"toc-text\">é¡¹ç›®æ¶æ„</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8D%9A%E5%AE%A2%E6%94%B6%E9%9B%86\"><span class=\"toc-text\">åšå®¢æ”¶é›†</span></a></li></ol>","author":{"name":"ä¸¾æ‰‹æ‘˜æœˆäº®","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/202303171118970.webp","link":"/","description":"<div><p>ä¸¾æ‰‹å‘è‹ç©¹ï¼Œå¹¶éä¸€å®šè¦æ‘˜åˆ°æ˜Ÿæœˆ</p><p>çœ¼ä¸­æœ‰å…‰ï¼Œå¿ƒä¸­æœ‰æ¢¦ï¼Œè„šä¸‹æœ‰è·¯</p><div>","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"jsé¢è¯•é¢˜","uid":"abbf797f56f759efd8b49b85ff4481ae","slug":"2022-10-16js","date":"2022-10-16T15:17:54.000Z","updated":"2022-12-22T13:36:21.790Z","comments":true,"path":"api/articles/2022-10-16js.json","keywords":null,"cover":null,"text":"B ç«™çˆ¬å–è„šæœ¬var list &#x3D; document.getElementsByClassName(&quot;video-list&quot;)[0]; Array.from(list.children).forEach((item) &#x3D;&gt; &#123...","link":"","photos":[],"count_time":{"symbolsCount":"14k","symbolsTime":"13 mins."},"categories":[{"name":"js","slug":"js","count":1,"path":"api/categories/js.json"}],"tags":[{"name":"js","slug":"js","count":1,"path":"api/tags/js.json"}],"author":{"name":"ä¸¾æ‰‹æ‘˜æœˆäº®","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/202303171118970.webp","link":"/","description":"<div><p>ä¸¾æ‰‹å‘è‹ç©¹ï¼Œå¹¶éä¸€å®šè¦æ‘˜åˆ°æ˜Ÿæœˆ</p><p>çœ¼ä¸­æœ‰å…‰ï¼Œå¿ƒä¸­æœ‰æ¢¦ï¼Œè„šä¸‹æœ‰è·¯</p><div>","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}},"next_post":{"title":"Bç«™æ’­æ”¾é€Ÿåº¦ä¿®æ”¹","uid":"857139c827e07a054648ff4832e5a476","slug":"2022-10-16Bplayer-rate","date":"2022-10-16T07:55:58.000Z","updated":"2022-10-18T12:24:12.488Z","comments":true,"path":"api/articles/2022-10-16Bplayer-rate.json","keywords":null,"cover":[],"text":"èƒŒæ™¯B ç«™è§†é¢‘æ’­æ”¾é€Ÿåº¦å¯é€‰é¡¹å¤ªå°‘äº†ï¼Œæœ‰çš„è§†é¢‘è¢«è½¬åŒ–çš„è¯­é€Ÿå¿«ï¼Œæœ‰çš„è§†é¢‘è¢«è½¬åŒ–çš„ç‰¹æ…¢ï¼Œä¸èƒ½å¿ï½ æ›´æ”¹ dom&lt;ul class&#x3D;&quot;bpx-player-ctrl-playbackrate-menu&quot;&gt; &lt;!-- å¢åŠ ä¸ªä¸‰å€é€Ÿé€‰é¡¹ï¼ŒBç«™æ²¡...","link":"","photos":[],"count_time":{"symbolsCount":"1.6k","symbolsTime":"1 mins."},"categories":[{"name":"å·¥å…·","slug":"å·¥å…·","count":26,"path":"api/categories/å·¥å…·.json"}],"tags":[{"name":"å·¥å…·","slug":"å·¥å…·","count":20,"path":"api/tags/å·¥å…·.json"}],"author":{"name":"ä¸¾æ‰‹æ‘˜æœˆäº®","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/202303171118970.webp","link":"/","description":"<div><p>ä¸¾æ‰‹å‘è‹ç©¹ï¼Œå¹¶éä¸€å®šè¦æ‘˜åˆ°æ˜Ÿæœˆ</p><p>çœ¼ä¸­æœ‰å…‰ï¼Œå¿ƒä¸­æœ‰æ¢¦ï¼Œè„šä¸‹æœ‰è·¯</p><div>","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}}}