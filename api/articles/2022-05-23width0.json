{"title":"flex width:0","uid":"eb38c4ce852a081263435b4198b57084","slug":"2022-05-23width0","date":"2022-05-23T09:16:21.000Z","updated":"2022-09-16T13:54:56.114Z","comments":true,"path":"api/articles/2022-05-23width0.json","keywords":null,"cover":"http://t-blog-images.aijs.top/img/flex.webp","content":"<h2 id=\"flex嵌套\"><a href=\"#flex嵌套\" class=\"headerlink\" title=\"flex嵌套\"></a>flex嵌套</h2><p>内部元素宽度默认100%，撑开父元素，父元素的根元素限制最大宽度，子元素并不受flex控制</p>\n<p>遇到多次了，这次是维护其他同事的代码，又撞见了，说明这个问题很常见，一个不留神，就踩到了</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">根元素\n  ……\n  - 父元素flex\n  …… flex\n   - 子元素flex(默认宽度100%)\n</code></pre>\n\n<pre class=\"line-numbers language-css\" data-language=\"css\"><code class=\"language-css\">.doc-tree-base-title-node .doc-tree-base-title-text &gt; a &#123;\n    display: flex;\n    align-items: center;\n    color: #777;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    flex: 1;\n&#125;</code></pre>\n\n<h2 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h2><p><img src=\"http://t-blog-images.aijs.top/img/20220523171556.webp\"></p>\n<p> 观察下发现，flex是嵌套的，最外层的还是flex，一层一层，最外层的宽度，却是由最内层的宽度决定（这个调试可以看到）</p>\n<h2 id=\"调试\"><a href=\"#调试\" class=\"headerlink\" title=\"调试\"></a>调试</h2><ul>\n<li>图1</li>\n</ul>\n<p> <img src=\"http://t-blog-images.aijs.top/img/20220523171802.webp\"></p>\n<ul>\n<li>图2</li>\n</ul>\n<p> <img src=\"http://t-blog-images.aijs.top/img/20220523171918.webp\"></p>\n<ul>\n<li>图3</li>\n</ul>\n<p> <img src=\"http://t-blog-images.aijs.top/img/20220523172024.webp\"></p>\n<h2 id=\"分析\"><a href=\"#分析\" class=\"headerlink\" title=\"分析\"></a>分析</h2><p> 图1 元素没有宽度，宽度默认是<code>100%</code></p>\n<p> 图1到图3是由a标签子元素撑开的，宽度是<code>100%</code>,加上操作按钮，元素宽度超100%</p>\n<p> 而在侧边树结构的最外层设置了<code>max-width: 500px</code>,而内部子元素尺寸却是<code>599.48 x 36</code></p>\n<p> 显然是不合理的</p>\n<h2 id=\"修复\"><a href=\"#修复\" class=\"headerlink\" title=\"修复\"></a>修复</h2> <pre class=\"line-numbers language-none\"><code class=\"language-none\">根元素\n  ……\n  - 父元素flex\n  …… flex\n   - 子元素flex(默认宽度设置宽度0 或者其他小点的宽度，越小越好)\n</code></pre>\n<p> <img src=\"http://t-blog-images.aijs.top/img/20220523173256.webp\"></p>\n<h2 id=\"什么原因导致的\"><a href=\"#什么原因导致的\" class=\"headerlink\" title=\"什么原因导致的\"></a>什么原因导致的</h2><p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/CSS/flex\">MDN flex</a></p>\n<p>语法</p>\n<pre class=\"line-numbers language-CSS\" data-language=\"CSS\"><code class=\"language-CSS\">&#x2F;* 关键字值 *&#x2F;\nflex: auto;\nflex: initial;\nflex: none;\n\n&#x2F;* 一个值, 无单位数字: flex-grow *&#x2F;\nflex: 2;\n\n&#x2F;* 一个值, width&#x2F;height: flex-basis *&#x2F;\nflex: 10em;\nflex: 30px;\nflex: min-content;\n\n&#x2F;* 两个值: flex-grow | flex-basis *&#x2F;\nflex: 1 30px;\n\n&#x2F;* 两个值: flex-grow | flex-shrink *&#x2F;\nflex: 2 2;\n\n&#x2F;* 三个值: flex-grow | flex-shrink | flex-basis *&#x2F;\nflex: 2 2 10%;\n\n&#x2F;*全局属性值 *&#x2F;\nflex: inherit;\nflex: initial;\nflex: unset;\n</code></pre>\n\n\n<p>可以使用一个，两个或三个值来指定 flex属性。</p>\n<p>1.<strong>单值语法</strong>: 值必须为以下其中之一:</p>\n<ul>\n<li>一个无单位数(<code>&lt;number&gt;</code>): 它会被当作flex:<code>&lt;number&gt;</code> 1 0; 解释：<code>&lt;flex-shrink&gt;</code>的值被假定为1，然后<code>&lt;flex-basis&gt;</code> 的值被假定为0。</li>\n<li>一个有效的宽度(width)值: 它会被当作 <code>&lt;flex-basis&gt;</code>的值。</li>\n<li>关键字none，auto或initial.<br>2.<strong>双值语法</strong>: 第一个值必须为一个无单位数，并且它会被当作 <code>&lt;flex-grow&gt;</code> 的值。第二个值必须为以下之一：</li>\n<li>一个无单位数：它会被当作 <code>&lt;flex-shrink&gt;</code> 的值。</li>\n<li>一个有效的宽度值: 它会被当作 <code>&lt;flex-basis&gt;</code> 的值。<br>3.<strong>三值语法</strong>:</li>\n<li>第一个值必须为一个无单位数，并且它会被当作 <code>&lt;flex-grow&gt;</code> 的值。</li>\n<li>第二个值必须为一个无单位数，并且它会被当作  <code>&lt;flex-shrink&gt;</code> 的值。</li>\n<li>第三个值必须为一个有效的宽度值， 并且它会被当作 <code>&lt;flex-basis&gt;</code> 的值。</li>\n</ul>\n<p> 可以看到单值，作为双值处理</p>\n <pre class=\"line-numbers language-css\" data-language=\"css\"><code class=\"language-css\">flex-shrink:1;\nflex-basis: 0;</code></pre>\n\n<h2 id=\"flex-basis\"><a href=\"#flex-basis\" class=\"headerlink\" title=\"flex-basis\"></a>flex-basis</h2><p> 自来看下<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/CSS/flex-basis\">flex-base</a></p>\n<p> 查看文档后发现，文档上没说关于<code>flex-basic: 0 </code>的事情,给了个演示，也看不出来想表达什么</p>\n<p><a href=\"https://blog.csdn.net/u010951953/article/details/124145786\">flex-basis 属性的含义</a><br><a href=\"https://www.w3.org/TR/2018/CR-css-flexbox-1-20181119/#flex-basis-property\">w3c flex-basis-property</a><br>flex布局一般由flex容器（display 属性值为 flex 或 inline-flex）和其子元素（后文亦称flex子项或flex item）构成。flex-basis 属性一般作用在flex子项上，它定义了：在flex容器分配剩余空间前flex子项在主轴方向上的初始尺寸。flex子项在主轴方向上的实际尺寸是根据元素自身尺寸、flex-basis、flex-grow、flex-shrink 等属性共同决定的。如何计算实际尺寸不是本文重点，不继续展开。</p>\n<h2 id=\"flex-basis-0px与0\"><a href=\"#flex-basis-0px与0\" class=\"headerlink\" title=\"flex-basis:0px与0%\"></a>flex-basis:0px与0%</h2><ul>\n<li>如果 flex-basis 的值为百分数，且它flex容器的尺寸没有被显式设置，此时 flex-basis 的值会被解析为 content</li>\n</ul>\n<h2 id=\"其他，值得一看\"><a href=\"#其他，值得一看\" class=\"headerlink\" title=\"其他，值得一看\"></a>其他，值得一看</h2><h2 id=\"flex-1\"><a href=\"#flex-1\" class=\"headerlink\" title=\"flex: 1\"></a>flex: 1</h2><p>在浏览器中，flex: 1 的 flex-basis 值为什么不是W3C文档中提到的 0 ？</p>\n<p>当使用 flex 属性但又省略不写它其中的 flex-basis 值时，会将 flex-basis 设置为 0.</p>\n<p>这里的 0 单位是 px 还是 % 我们在Chrome浏览器里就能验证：</p>\n<img src=\"http://t-blog-images.aijs.top/img/20220523181618.webp\" width=400  style=\"object-fit: content\"/>\n\n<p>答案是 px.</p>\n<p>这段是2015年修正日志里的，意思是将之前 flex 简写语法里的 flex-basis 的解析值从 0% 恢复为原来的 0.</p>\n<p>注意： 这个值的解析规则经历了 0px -&gt; 0% -&gt; 0px 的变化，这是W3C flex 标准文档的视角。</p>\n<p>简而言之就是有兼容性问题。现在已有很多网页都利用了 flex 属性的这个特性来开发。如果简写语法里 flex-basis 的解析从 0% 变为 0px 会导致部分情况下flex容器塌陷，致使很多网页异常</p>\n<p><a href=\"https://blog.csdn.net/u010951953/article/details/124145786\">建议看原文</a></p>\n","text":"flex嵌套内部元素宽度默认100%，撑开父元素，父元素的根元素限制最大宽度，子元素并不受flex控制 遇到多次了，这次是维护其他同事的代码，又撞见了，说明这个问题很常见，一个不留神，就踩到了 根元素 …… - 父元素flex …… flex - 子元素flex(默认宽度100%...","link":"","photos":[],"count_time":{"symbolsCount":"2.5k","symbolsTime":"2 mins."},"categories":[{"name":"css3","slug":"css3","count":1,"path":"api/categories/css3.json"}],"tags":[{"name":"bug","slug":"bug","count":6,"path":"api/tags/bug.json"},{"name":"css3","slug":"css3","count":1,"path":"api/tags/css3.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#flex%E5%B5%8C%E5%A5%97\"><span class=\"toc-text\">flex嵌套</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%97%AE%E9%A2%98\"><span class=\"toc-text\">问题</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%B0%83%E8%AF%95\"><span class=\"toc-text\">调试</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%88%86%E6%9E%90\"><span class=\"toc-text\">分析</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BF%AE%E5%A4%8D\"><span class=\"toc-text\">修复</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BB%80%E4%B9%88%E5%8E%9F%E5%9B%A0%E5%AF%BC%E8%87%B4%E7%9A%84\"><span class=\"toc-text\">什么原因导致的</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#flex-basis\"><span class=\"toc-text\">flex-basis</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#flex-basis-0px%E4%B8%8E0\"><span class=\"toc-text\">flex-basis:0px与0%</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%85%B6%E4%BB%96%EF%BC%8C%E5%80%BC%E5%BE%97%E4%B8%80%E7%9C%8B\"><span class=\"toc-text\">其他，值得一看</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#flex-1\"><span class=\"toc-text\">flex: 1</span></a></li></ol>","author":{"name":"陈海龙","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"需要就学呗，多大点事😂","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"react-redux 源码1","uid":"83401137c3fcd92a859b6d9e289c2c88","slug":"2022-05-24react-redux","date":"2022-05-24T05:58:32.000Z","updated":"2022-09-16T14:01:56.906Z","comments":true,"path":"api/articles/2022-05-24react-redux.json","keywords":null,"cover":null,"text":"react-redux官方介绍 官方UI绑定层。 React Redux is the official React UI bindings layer for Redux. 从redux的store读数据。 It lets your React components read ...","link":"","photos":[],"count_time":{"symbolsCount":"13k","symbolsTime":"12 mins."},"categories":[{"name":"React","slug":"React","count":17,"path":"api/categories/React.json"}],"tags":[{"name":"react-redux","slug":"react-redux","count":2,"path":"api/tags/react-redux.json"},{"name":"redux","slug":"redux","count":6,"path":"api/tags/redux.json"},{"name":"源码","slug":"源码","count":14,"path":"api/tags/源码.json"}],"author":{"name":"陈海龙","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"需要就学呗，多大点事😂","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}},"next_post":{"title":"前端基础-CSS如何工作","uid":"57540390a0f554fbb760ff3d30acb124","slug":"2022-05-23css","date":"2022-05-23T07:53:28.000Z","updated":"2022-09-16T13:54:56.112Z","comments":true,"path":"api/articles/2022-05-23css.json","keywords":null,"cover":[],"text":"浏览器工作原理 当浏览器展示一个文件的时候，它必须兼顾文件的内容和文件的样式信息 如何加载CSS和HTML下面的步骤是浏览加载网页的简化版本: 浏览器载入HTML文件（比如从网络上获取）。 将HTML文件转化成一个DOM（Document Object Model），DOM是文件...","link":"","photos":[],"count_time":{"symbolsCount":"1.4k","symbolsTime":"1 mins."},"categories":[{"name":"浏览器原理","slug":"浏览器原理","count":1,"path":"api/categories/浏览器原理.json"}],"tags":[{"name":"前端基础","slug":"前端基础","count":29,"path":"api/tags/前端基础.json"},{"name":"浏览器原理","slug":"浏览器原理","count":2,"path":"api/tags/浏览器原理.json"},{"name":"原理","slug":"原理","count":1,"path":"api/tags/原理.json"}],"author":{"name":"陈海龙","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"需要就学呗，多大点事😂","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}}}