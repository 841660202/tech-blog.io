{"title":"React useImperativeHandle","uid":"89201434f3db3df07b7bcb0835c2df9a","slug":"2022-09-06useImperativeHandle","date":"2022-09-06T03:21:11.000Z","updated":"2022-11-28T13:21:09.887Z","comments":true,"path":"api/articles/2022-09-06useImperativeHandle.json","keywords":null,"cover":[],"content":"<h2 id=\"小插曲\"><a href=\"#小插曲\" class=\"headerlink\" title=\"小插曲\"></a>小插曲</h2><p>vscode 把 js 代码做做了 ts 校验</p>\n<img src=\"http://t-blog-images.aijs.top/img/202209061141505.webp\" />\n\n<p>问题处理</p>\n<img src=\"http://t-blog-images.aijs.top/img/202209061143356.webp\" />\n\n<h2 id=\"useImperativeHandle\"><a href=\"#useImperativeHandle\" class=\"headerlink\" title=\"useImperativeHandle\"></a>useImperativeHandle</h2><p>use Imperative Handle 使用命令句柄</p>\n<p><code>useImperativeHandle(ref, createHandle, [deps])</code></p>\n<p><code>useImperativeHandle </code> 可以让你在使用 <code>ref</code> 时自定义暴露给父组件的实例值。</p>\n<p>在大多数情况下，应当避免使用 <code>ref </code>这样的命令式代码。<code>useImperativeHandle </code> 应当与 <code>forwardRef</code> 一起使用：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">function FancyInput(props, ref) &#123;\n  const inputRef &#x3D; useRef();\n  useImperativeHandle(ref, () &#x3D;&gt; (&#123;\n    focus: () &#x3D;&gt; &#123;\n      inputRef.current.focus();\n    &#125;,\n  &#125;));\n  return &lt;input ref&#x3D;&#123;inputRef&#125; &#x2F;*...*&#x2F; &#x2F;&gt;;\n&#125;\n\nFancyInput &#x3D; forwardRef(FancyInput);</code></pre>\n\n<p>在本例中，渲染  <code>&lt;FancyInput ref=&#123;inputRef&#125; /&gt;</code>  的父组件可以调用  <code>inputRef.current.focus()</code>。</p>\n<h2 id=\"antd-form\"><a href=\"#antd-form\" class=\"headerlink\" title=\"antd form\"></a>antd form</h2><p>看下组件中是如何使用的</p>\n<pre class=\"line-numbers language-tsx\" data-language=\"tsx\"><code class=\"language-tsx\">&#x2F;&#x2F; ...\nconst [wrapForm] &#x3D; useForm(form);\n&#x2F;&#x2F; ...\nReact.useImperativeHandle(ref, () &#x3D;&gt; wrapForm);</code></pre>\n\n<h2 id=\"useImperativeHandle-源码\"><a href=\"#useImperativeHandle-源码\" class=\"headerlink\" title=\"useImperativeHandle 源码\"></a>useImperativeHandle 源码</h2><h2 id=\"Type-‘MutableRefObject-lt-IOrgStaffSelectRef-undefined-gt-’-is-not-assignable-to-type-‘Ref-undefined’\"><a href=\"#Type-‘MutableRefObject-lt-IOrgStaffSelectRef-undefined-gt-’-is-not-assignable-to-type-‘Ref-undefined’\" class=\"headerlink\" title=\"Type ‘MutableRefObject&lt;IOrgStaffSelectRef | undefined&gt;’ is not assignable to type ‘Ref | undefined’.\"></a>Type ‘MutableRefObject&lt;IOrgStaffSelectRef | undefined&gt;’ is not assignable to type ‘Ref<IOrgStaffSelectRef> | undefined’.</h2><p><a href=\"https://atomizedobjects.com/blog/react/how-to-use-useref-with-typescript/#:~:text=However%20if%20you%20then%20change%20this%20to%20allow%20strings%20as%20well%20we%20no%20longer%20will%20get%20that%20error%3A\" target=\"_blank\" >How to use useRef with TypeScript</a></p>\n<h2 id=\"参考链接\"><a href=\"#参考链接\" class=\"headerlink\" title=\"参考链接\"></a>参考链接</h2><p><a href=\"https://www.jianshu.com/p/1b31b54ab7c0\" target=\"_blank\" >vscode 中对 JS 文件使用了 typeScript 检测</a></p>\n<p><a href=\"https://github.com/yaofly2012/note/issues/219\" target=\"_blank\" >useImperativeHandle 笔记</a></p>\n<p><a href=\"https://segmentfault.com/q/1010000023311358\" target=\"_blank\" >为什么 React 源码中有 new.js 和 old.js ？</a></p>\n<p><a href=\"https://juejin.cn/post/6932763604492140557\" target=\"_blank\" >useEffect 和 useLayoutEffect 源码浅析</a></p>\n<p><a href=\"https://segmentfault.com/a/1190000040758640\" target=\"_blank\" >最陌生的 hooks: useImperativeHandle</a></p>\n","text":"小插曲vscode 把 js 代码做做了 ts 校验 问题处理 useImperativeHandleuse Imperative Handle 使用命令句柄 useImperativeHandle(ref, createHandle, [deps]) useImperative...","link":"","photos":[],"count_time":{"symbolsCount":"1.2k","symbolsTime":"1 mins."},"categories":[{"name":"React","slug":"React","count":39,"path":"api/categories/React.json"}],"tags":[{"name":"React","slug":"React","count":33,"path":"api/tags/React.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%B0%8F%E6%8F%92%E6%9B%B2\"><span class=\"toc-text\">小插曲</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#useImperativeHandle\"><span class=\"toc-text\">useImperativeHandle</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#antd-form\"><span class=\"toc-text\">antd form</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#useImperativeHandle-%E6%BA%90%E7%A0%81\"><span class=\"toc-text\">useImperativeHandle 源码</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Type-%E2%80%98MutableRefObject-lt-IOrgStaffSelectRef-undefined-gt-%E2%80%99-is-not-assignable-to-type-%E2%80%98Ref-undefined%E2%80%99\"><span class=\"toc-text\">Type ‘MutableRefObject&lt;IOrgStaffSelectRef | undefined&gt;’ is not assignable to type ‘Ref | undefined’.</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5\"><span class=\"toc-text\">参考链接</span></a></li></ol>","author":{"name":"十三","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/202303171118970.webp","link":"/","description":"<div><p>多学一点，多想一点，多做一点</p><p>眼中有光，心中有梦，脚下有路</p><div>","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"nest 413","uid":"86597b4f3663d14f1511e64b4a45dce2","slug":"2022-09-06nestjs","date":"2022-09-06T12:44:35.000Z","updated":"2022-09-16T13:54:56.317Z","comments":true,"path":"api/articles/2022-09-06nestjs.json","keywords":null,"cover":[],"text":"有问题的项目import &#123; NestFactory &#125; from &quot;@nestjs&#x2F;core&quot;; import &#123; NestExpressApplication &#125; from &quot;@nestjs&#x...","link":"","photos":[],"count_time":{"symbolsCount":"10k","symbolsTime":"9 mins."},"categories":[{"name":"nest","slug":"nest","count":1,"path":"api/categories/nest.json"}],"tags":[{"name":"nest","slug":"nest","count":1,"path":"api/tags/nest.json"}],"author":{"name":"十三","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/202303171118970.webp","link":"/","description":"<div><p>多学一点，多想一点，多做一点</p><p>眼中有光，心中有梦，脚下有路</p><div>","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}},"next_post":{"title":"vscode react-javascript-snippets源码","uid":"1ad99506e723aeb106287f0014b15cda","slug":"2022-09-05vscode","date":"2022-09-05T02:35:51.000Z","updated":"2023-02-20T21:20:56.471Z","comments":true,"path":"api/articles/2022-09-05vscode.json","keywords":null,"cover":"https://www.ymama.net/config/ueditor/php/upload/image/20200827/1598515434460503.png","text":"背景要分享自己开发的代码片段工具 vs-snippets，正所谓：没有对比，就没有伤害,了解下别人是如何开发代码片段插件的思路，做个对比 不得不说，react-javascript-snippets 无论从源代码组织还是支持的代码片段来讲都非常优秀，对于大众化来讲非常 nice。...","link":"","photos":[],"count_time":{"symbolsCount":"12k","symbolsTime":"11 mins."},"categories":[{"name":"vscode","slug":"vscode","count":8,"path":"api/categories/vscode.json"}],"tags":[{"name":"vscode","slug":"vscode","count":11,"path":"api/tags/vscode.json"}],"author":{"name":"十三","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/202303171118970.webp","link":"/","description":"<div><p>多学一点，多想一点，多做一点</p><p>眼中有光，心中有梦，脚下有路</p><div>","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}}}