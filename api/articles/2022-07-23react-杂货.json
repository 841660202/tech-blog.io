{"title":"React@16ã€17 æ‚è´§","uid":"7914c7b61758cb63e0d9afa98b764a25","slug":"2022-07-23react-æ‚è´§","date":"2022-07-22T16:25:08.000Z","updated":"2022-09-16T14:29:30.433Z","comments":true,"path":"api/articles/2022-07-23react-æ‚è´§.json","keywords":null,"cover":null,"content":"<h2 id=\"æ³¨æ„ç‰ˆæœ¬å“ˆ\"><a href=\"#æ³¨æ„ç‰ˆæœ¬å“ˆ\" class=\"headerlink\" title=\"æ³¨æ„ç‰ˆæœ¬å“ˆ\"></a>æ³¨æ„ç‰ˆæœ¬å“ˆ</h2><p><a href=\"https://juejin.cn/post/7034899177205137438\" target=\"_blank\" >ä»å‰æœ‰åº§å±±ä¹‹ react æºç è§£è¯»ä¹‹ ReactContext</a></p>\n<p><a href=\"https://blog.csdn.net/m0_51744158/article/details/120870752\" target=\"_blank\" >React æºç è§£æâ€”â€”â€”â€”ReactContext.js,ReactLazy.js</a></p>\n<p><a href=\"https://www.cnblogs.com/sunxiaopei/p/12239160.html\" target=\"_blank\" >React çš„ React.createRef()&#x2F;forwardRef()æºç è§£æ(ä¸‰)</a></p>\n<p><a href=\"https://www.cnblogs.com/sunxiaopei/p/12205447.html\" target=\"_blank\" >React çš„ React.createElement æºç è§£æ(ä¸€)</a></p>\n<p><a href=\"https://zhuanlan.zhihu.com/p/81947864\" target=\"_blank\" >React æºç è§£æ(ä¸‰) requestWork ä¹‹å‰çš„çš„å‡†å¤‡å·¥ä½œ</a></p>\n<p><a href=\"https://wenku.baidu.com/view/4306c6f2d25abe23482fb4daa58da0116c171fe1.html\" target=\"_blank\" >react æºç è§£æ 7.Fiber æ¶æ„</a></p>\n<h2 id=\"å‰åç‰ˆæœ¬å·®å¼‚\"><a href=\"#å‰åç‰ˆæœ¬å·®å¼‚\" class=\"headerlink\" title=\"å‰åç‰ˆæœ¬å·®å¼‚\"></a>å‰åç‰ˆæœ¬å·®å¼‚</h2><h3 id=\"expirationTime\"><a href=\"#expirationTime\" class=\"headerlink\" title=\"expirationTime\"></a>expirationTime</h3><p>expirationTime è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼Œè€Œç°åœ¨æ˜¯ expirationTime è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜</p>\n<h3 id=\"React16-ä¸-17-ç‰ˆæœ¬åˆæˆäº‹ä»¶çš„åŒºåˆ«\"><a href=\"#React16-ä¸-17-ç‰ˆæœ¬åˆæˆäº‹ä»¶çš„åŒºåˆ«\" class=\"headerlink\" title=\"React16 ä¸ 17 ç‰ˆæœ¬åˆæˆäº‹ä»¶çš„åŒºåˆ«\"></a>React16 ä¸ 17 ç‰ˆæœ¬åˆæˆäº‹ä»¶çš„åŒºåˆ«</h3><ul>\n<li>react16 æ—¶äº‹ä»¶å§”æ‰˜çš„å¯¹è±¡æ˜¯ documentï¼Œreact17 æ—¶äº‹ä»¶å§”æ‰˜çš„å¯¹è±¡æ˜¯å®¹å™¨ç»„ä»¶</li>\n<li>react16 æ—¶åŸç”Ÿäº‹ä»¶ä¸ react äº‹ä»¶æ‰§è¡Œæ—¶ï¼Œå†’æ³¡é˜¶æ®µä¸æ•è·é˜¶æ®µæ²¡æœ‰åŒºåˆ†å¼€ï¼ˆæ•è·-&gt; å†’æ³¡ -&gt; æ•è·ï¼‰ï¼›</li>\n<li>react17 æ—¶ä¼˜åŒ–äº†åˆæˆäº‹ä»¶çš„æ‰§è¡Œï¼Œå½“ä¸åŸç”Ÿäº‹ä»¶ä¸€èµ·è°ƒç”¨æ—¶ï¼Œæ•è·é˜¶æ®µæ€»æ˜¯å…ˆäºå†’æ³¡é˜¶æ®µï¼ˆæ•è· -&gt; å†’æ³¡ï¼‰</li>\n<li>react17 åºŸå¼ƒäº†äº‹ä»¶æ± </li>\n</ul>\n<!-- â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\nç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€ŒMonkey_Kcodeã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚\nåŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/weixin_47431743/article/details/122156714 -->\n\n<h3 id=\"æ›´æ”¹äº‹ä»¶å§”æ‰˜\"><a href=\"#æ›´æ”¹äº‹ä»¶å§”æ‰˜\" class=\"headerlink\" title=\"æ›´æ”¹äº‹ä»¶å§”æ‰˜\"></a>æ›´æ”¹äº‹ä»¶å§”æ‰˜</h3><p>ä»æŠ€æœ¯ä¸Šè®²ï¼Œå§‹ç»ˆå¯ä»¥åœ¨åº”ç”¨ç¨‹åºä¸­åµŒå¥—ä¸åŒç‰ˆæœ¬çš„ Reactã€‚ä½†æ˜¯ï¼Œç”±äº React äº‹ä»¶ç³»ç»Ÿçš„å·¥ä½œåŸç†ï¼Œè¿™å¾ˆéš¾å®ç°ã€‚</p>\n<p>è‡ªä»å…¶å‘å¸ƒä»¥æ¥ï¼ŒReact ä¸€ç›´è‡ªåŠ¨è¿›è¡Œäº‹ä»¶å§”æ‰˜ã€‚å½“ document ä¸Šè§¦å‘ DOM äº‹ä»¶æ—¶ï¼ŒReact ä¼šæ‰¾å‡ºè°ƒç”¨çš„ç»„ä»¶ï¼Œç„¶å React äº‹ä»¶ä¼šåœ¨ç»„ä»¶ä¸­å‘ä¸Š â€œå†’æ³¡â€ã€‚ä½†å®é™…ä¸Šï¼ŒåŸç”Ÿäº‹ä»¶å·²ç»å†’æ³¡å‡ºäº† document çº§åˆ«ï¼ŒReact åœ¨å…¶ä¸­å®‰è£…äº†äº‹ä»¶å¤„ç†å™¨ã€‚</p>\n<p>ä½†æ˜¯ï¼Œè¿™å°±æ˜¯é€æ­¥å‡çº§çš„å›°éš¾æ‰€åœ¨ã€‚</p>\n<p><span style=\"color: red\">å¦‚æœé¡µé¢ä¸Šæœ‰å¤šä¸ª React ç‰ˆæœ¬ï¼Œä»–ä»¬éƒ½å°†åœ¨é¡¶å±‚æ³¨å†Œäº‹ä»¶å¤„ç†å™¨ã€‚è¿™ä¼šç ´å <code>e.stopPropagation()</code>ï¼šå¦‚æœåµŒå¥—æ ‘ç»“æ„ä¸­é˜»æ­¢äº†äº‹ä»¶å†’æ³¡ï¼Œä½†å¤–éƒ¨æ ‘ä¾ç„¶èƒ½æ¥æ”¶åˆ°å®ƒã€‚è¿™ä¼šä½¿ä¸åŒç‰ˆæœ¬ React åµŒå¥—å˜å¾—å›°éš¾é‡é‡</span>ã€‚è¿™ç§æ‹…å¿§å¹¶ä¸æ˜¯æ²¡æœ‰æ ¹æ®çš„ â€”â€” ä¾‹å¦‚ï¼Œå››å¹´å‰ Atom ç¼–è¾‘å™¨å°±é‡åˆ°äº†ç›¸åŒçš„é—®é¢˜ã€‚</p>\n<p>åŸºäºæ­¤ï¼š åœ¨ React 17 ä¸­ï¼ŒReact å°†ä¸å†å‘ document é™„åŠ äº‹ä»¶å¤„ç†å™¨ã€‚è€Œä¼šå°†äº‹ä»¶å¤„ç†å™¨é™„åŠ åˆ°æ¸²æŸ“ React æ ‘çš„æ ¹ DOM å®¹å™¨ä¸­ï¼š</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">const rootNode &#x3D; document.getElementById(&quot;root&quot;);\nReactDOM.render(&lt;App &#x2F;&gt;, rootNode);</code></pre>\n\n<p>åœ¨ React 16 æˆ–æ›´æ—©ç‰ˆæœ¬ä¸­ï¼ŒReact ä¼šå¯¹å¤§å¤šæ•°äº‹ä»¶æ‰§è¡Œ <code>document.addEventListener()</code>ã€‚React 17 å°†ä¼šåœ¨åº•å±‚è°ƒç”¨ <code>rootNode.addEventListener()</code>ã€‚</p>\n<h3 id=\"Hooks-çš„å®ç°åŸç†\"><a href=\"#Hooks-çš„å®ç°åŸç†\" class=\"headerlink\" title=\"Hooks çš„å®ç°åŸç†\"></a>Hooks çš„å®ç°åŸç†</h3><p>React ä¼šç»´æŠ¤ä¿©ä¸ªé“¾è¡¨ï¼Œä¸€ä¸ªæ˜¯ <code>currentHook</code>ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯ <code>WorkInProgressHook</code>,æ¯ä¸€ä¸ªèŠ‚ç‚¹ç±»å‹éƒ½æ˜¯ <code>Hooks</code>ï¼Œæ¯å½“ <code>hooks</code> å‡½æ•°è¢«è°ƒç”¨ï¼Œreact å°±ä¼šåˆ›å»ºä¸€ä¸ª <code>hooks</code> å¯¹è±¡ï¼Œå¹¶æŒ‚åœ¨é“¾è¡¨çš„å°¾éƒ¨ï¼Œå‡½æ•°ç»„ä»¶ä¹‹æ‰€ä»¥èƒ½åšä¸€äº›ç±»ç»„ä»¶ä¸èƒ½åšçš„äº‹å„¿ï¼Œå°±æ˜¯å› ä¸º <code>hook</code> å¯¹è±¡ï¼Œå‡½æ•°ç»„ä»¶çš„çŠ¶æ€ï¼Œè®¡ç®—å€¼ï¼Œç¼“å­˜ç­‰éƒ½æ˜¯äº¤ç»™ <code>hook</code> å»å®Œæˆçš„ï¼Œè¿™æ ·ç»„ä»¶é€šè¿‡ Fiber.memoizedState å±æ€§æŒ‡å‘ hook é“¾è¡¨çš„å¤´éƒ¨æ¥å…³è” <code>hook</code> å¯¹è±¡å’Œå½“å‰ç»„ä»¶ï¼Œè¿™æ ·å°±å‘æŒ¥äº† <code>hooks</code> çš„ä½œç”¨ã€‚æ¯æ¬¡è°ƒç”¨ hooks API çš„æ—¶å€™ï¼Œå°±ä¼šé¦–å…ˆè°ƒç”¨ <code>createWorkInProgressHook</code> å‡½æ•°ã€‚å¾—åˆ° <code>hooks</code> çš„ä¸²è”ä¸æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè€Œæ˜¯ä¸€ä¸ªé“¾å¼ç»“æ„ï¼Œä»æ ¹èŠ‚ç‚¹ <code>workInProgressHook</code> å‘ä¸‹é€šè¿‡ next è¿›è¡Œä¸²è”ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ <code>Hooks</code> ä¸èƒ½åµŒå¥—ä½¿ç”¨ï¼Œä¸èƒ½åœ¨æ¡ä»¶åˆ¤æ–­ä¸­ä½¿ç”¨ï¼Œä¸èƒ½åœ¨å¾ªç¯ä¸­ä½¿ç”¨ï¼Œå¦åˆ™é“¾å¼å°±ä¼šè¢«ç ´åã€‚</p>\n<!-- â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\nç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€Œleoxiaogeã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚\nåŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/github_37759996/article/details/119187241 -->\n\n<h3 id=\"createSyntheticEvent-æºç \"><a href=\"#createSyntheticEvent-æºç \" class=\"headerlink\" title=\"createSyntheticEvent æºç \"></a>createSyntheticEvent æºç </h3><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">function createSyntheticEvent(Interface: EventInterfaceType) &#123;\n  function SyntheticBaseEvent(\n    reactName: string | null,\n    reactEventType: string,\n    targetInst: Fiber,\n    nativeEvent: &#123;[propName: string]: mixed&#125;,\n    nativeEventTarget: null | EventTarget,\n  ) &#123;\n\n  Object.assign(SyntheticBaseEvent.prototype, &#123;\n    preventDefault: function() &#123;&#125;,\n\n    stopPropagation: function() &#123;&#125;,\n\n    &#x2F;**\n     * We release all dispatched &#96;SyntheticEvent&#96;s after each event loop, adding\n     * them back into the pool. This allows a way to hold onto a reference that\n     * won&#39;t be added back into the pool.\n     *&#x2F;\n    &#x2F;**\n    *æˆ‘ä»¬åœ¨æ¯ä¸ªäº‹ä»¶å¾ªç¯åé‡Šæ”¾æ‰€æœ‰è°ƒåº¦çš„&#39;SyntheticEvent&#39;ï¼Œæ·»åŠ \n    *ä»–ä»¬å›åˆ°æ°´æ± é‡Œã€‚è¿™å…è®¸ä¸€ç§ä¿æŒå¼•ç”¨çš„æ–¹æ³•\n    *ä¸ä¼šè¢«æ·»åŠ å›æ± ä¸­ã€‚\n    *&#x2F;\n    persist: function() &#123;\n      &#x2F;&#x2F; Modern event system doesn&#39;t use pooling.\n      &#x2F;&#x2F; ç°ä»£äº‹ä»¶ç³»ç»Ÿä¸ä½¿ç”¨æ± ã€‚\n    &#125;,\n\n    &#x2F;**\n     * Checks if this event should be released back into the pool.\n     *\n     * @return &#123;boolean&#125; True if this should not be released, false otherwise.\n     *&#x2F;\n    isPersistent: functionThatReturnsTrue,\n  &#125;);\n  return SyntheticBaseEvent;\n&#125;</code></pre>\n\n<p><code>persist</code>æ˜¯ä¸ªç©ºå‡½æ•°ï¼Œå› ä¸ºç°åœ¨çš„äº‹ä»¶ç³»ç»Ÿä¸ä½¿ç”¨<code>äº‹ä»¶æ± æœºåˆ¶</code></p>\n<p><code>äº‹ä»¶æ± </code>å¯ä»¥å½¢è±¡åœ°ç†è§£ä¸ºæœ‰ä¸ªæ± å­é‡Œè£…æ»¡äº† SyntheticEvent å¯¹è±¡ï¼Œç¨‹åºæœ‰éœ€è¦æ—¶ä¼šä»æ± ä¸­å–å‡ºä¸€äº›ä½¿ç”¨ï¼Œä½¿ç”¨å®Œåå†æ”¾å›æ± ä¸­ã€‚</p>\n<p><code>äº‹ä»¶æ± æœºåˆ¶</code>æ„å‘³ç€ SyntheticEvent å¯¹è±¡ä¼šè¢«ç¼“å­˜ä¸”åå¤ä½¿ç”¨ï¼Œç›®çš„æ˜¯æé«˜æ€§èƒ½ï¼Œå‡å°‘åˆ›å»ºä¸å¿…è¦çš„å¯¹è±¡ã€‚å½“ SyntheticEvent å¯¹è±¡è¢«æ”¶å›åˆ°äº‹ä»¶æ± ä¸­æ—¶ï¼Œå±æ€§ä¼šè¢«æŠ¹é™¤ã€é‡ç½®ä¸º nullã€‚</p>\n<p>å› æ­¤ï¼Œæˆ‘ä»¬åœ¨å†™ React äº‹ä»¶å›è°ƒå‡½æ•°çš„æ—¶å€™åˆ‡è®°<code>ä¸èƒ½å°† event ç”¨äºå¼‚æ­¥æ“ä½œ</code> â€”â€” å½“å¼‚æ­¥æ“ä½œçœŸæ­£æ‰§è¡Œçš„æ—¶å€™ï¼ŒSyntheticEvent å¯¹è±¡æœ‰å¯èƒ½å·²ç»è¢«é‡ç½®äº†</p>\n<p><strong>æœ‰äº‹ä»¶æ± çš„æƒ…å†µä¸‹ï¼Œå¦‚ä½•å¤„ç†å¼‚æ­¥äº‹ä»¶</strong></p>\n<ul>\n<li>è§£å†³æ–¹æ¡ˆä¸€ï¼š ä½¿ç”¨ event.persist() æ–¹æ³•</li>\n<li>è§£å†³æ–¹æ¡ˆäºŒï¼š åŠæ—¶ç¼“å­˜æ‰€éœ€çš„ event å±æ€§å€¼</li>\n</ul>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">&#x2F;&#x2F; è§£å†³æ–¹æ¡ˆä¸€ï¼š\nhandleChange &#x3D; (event) &#x3D;&gt; &#123;\n  event.persist(); &#x2F;&#x2F; æŒä¹…åŒ–\n  this.setState((prevState) &#x3D;&gt; (&#123;\n    value: event.target.value,\n    editionCounter: prevState.editionCounter + 1,\n  &#125;));\n&#125;;\n&#x2F;&#x2F; è§£å†³æ–¹æ¡ˆäºŒï¼š\nhandleChange &#x3D; (event) &#x3D;&gt; &#123;\n  const value &#x3D; event.target.value; &#x2F;&#x2F; valueè¿™ä¸ªæœ¬åœ°å˜é‡å·²ç»ä¿å­˜äº†ç›®æ ‡å€¼\n  this.setState((prevState) &#x3D;&gt; (&#123;\n    value,\n    editionCounter: prevState.editionCounter + 1,\n  &#125;));\n&#125;;</code></pre>\n\n<p><a href=\"https://zhuanlan.zhihu.com/p/212187297\" target=\"_blank\" >è§</a></p>\n<p><strong>ç§»é™¤ç‰ˆæœ¬</strong><br>åœ¨ 17.0.0 (October 20, 2020)ï¼ŒReact DOMï¼ŒRemove event pooling. (@trueadm in #18969)</p>\n<p><strong>ç§»é™¤åŸå› </strong></p>\n<p><a href=\"https://blog.saeloun.com/2021/04/06/react-17-removes-event-pooling-in-modern-system.html#event-pooling\" target=\"_blank\" >è§ Event Pooling</a></p>\n<ul>\n<li>è™½ç„¶å»ºç«‹äº‹ä»¶æ± æ˜¯ä¸ºäº†æé«˜æ€§èƒ½ï¼Œä½†åœ¨ç°ä»£æµè§ˆå™¨ä¸­å¹¶æ²¡æœ‰æé«˜æ€§èƒ½ã€‚</li>\n<li>äº‹ä»¶æ± ä¹Ÿè®©å¼€å‘äººå‘˜æ„Ÿåˆ°å›°æƒ‘ã€‚ä¾‹å¦‚ï¼Œæ— æ³•è®¿é—®<code>eventx.target</code>ã€‚è®¾ç½®çŠ¶æ€æ›´æ–°ç¨‹åºä¸­çš„ç›®æ ‡ã€‚</li>\n</ul>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>With React 16 and earlier, we have to call event.persist() to properly use the event, or read the property we need.</p></blockquote>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">handleChange(event) &#123;\n  console.log(event.target.value);\n  event.persist();\n  this.setState(() &#x3D;&gt; (&#123;\n    text: event.target.value\n  &#125;));\n&#125;\n</code></pre>\n\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>In React 17, the same code works as expected allowing us to fetch event.target.value without calling event.persist().<br>The old event pooling optimization has been fully removed, so we can read the event fields whenever we need them.</p></blockquote>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">export class App extends React.Component &#123;\n  constructor() &#123;\n    super();\n    this.state &#x3D; &#123; text: &quot;&quot; &#125;;\n    this.handleChange &#x3D; this.handleChange.bind(this);\n  &#125;\n  handleChange(event) &#123;\n    console.log(event.target.value);\n    this.setState(() &#x3D;&gt; (&#123;\n      text: event.target.value,\n    &#125;));\n  &#125;\n  render() &#123;\n    return (\n      &lt;div&gt;\n        &lt;span&gt;Text: &lt;&#x2F;span&gt;\n        &lt;input onChange&#x3D;&#123;this.handleChange&#125; value&#x3D;&#123;this.state.text&#125; &#x2F;&gt;\n      &lt;&#x2F;div&gt;\n    );\n  &#125;\n&#125;</code></pre>\n\n<h3 id=\"ä¸ºä»€ä¹ˆåŸç”Ÿäº‹ä»¶çš„-stopPropagation-å¯ä»¥é˜»æ­¢åˆæˆäº‹ä»¶çš„ä¼ é€’ï¼Ÿ\"><a href=\"#ä¸ºä»€ä¹ˆåŸç”Ÿäº‹ä»¶çš„-stopPropagation-å¯ä»¥é˜»æ­¢åˆæˆäº‹ä»¶çš„ä¼ é€’ï¼Ÿ\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆåŸç”Ÿäº‹ä»¶çš„ stopPropagation å¯ä»¥é˜»æ­¢åˆæˆäº‹ä»¶çš„ä¼ é€’ï¼Ÿ\"></a>ä¸ºä»€ä¹ˆåŸç”Ÿäº‹ä»¶çš„ stopPropagation å¯ä»¥é˜»æ­¢åˆæˆäº‹ä»¶çš„ä¼ é€’ï¼Ÿ</h3><p>å› ä¸ºåˆæˆäº‹ä»¶æ˜¯åœ¨åŸç”Ÿäº‹ä»¶è§¦å‘ä¹‹åæ‰å¼€å§‹æ”¶é›†å¹¶è§¦å‘çš„ï¼Œæ‰€ä»¥å½“åŸç”Ÿäº‹ä»¶è°ƒç”¨ stopPropagation é˜»æ­¢ä¼ é€’åï¼Œæ ¹æœ¬åˆ°ä¸åˆ° root èŠ‚ç‚¹ï¼Œè§¦å‘ä¸äº† React ç»‘å®šçš„å¤„ç†å‡½æ•°ï¼Œè‡ªç„¶åˆæˆäº‹ä»¶ä¹Ÿä¸ä¼šè§¦å‘ï¼Œæ‰€ä»¥åŸç”Ÿäº‹ä»¶ä¸æ˜¯é˜»æ­¢äº†åˆæˆäº‹ä»¶çš„ä¼ é€’ï¼Œè€Œæ˜¯é˜»æ­¢äº† React ä¸­ç»‘å®šçš„äº‹ä»¶å‡½æ•°çš„æ‰§è¡Œã€‚</p>\n<h3 id=\"react-åŸºç¡€çŸ¥è¯†æ€»ç»“\"><a href=\"#react-åŸºç¡€çŸ¥è¯†æ€»ç»“\" class=\"headerlink\" title=\"react åŸºç¡€çŸ¥è¯†æ€»ç»“\"></a>react åŸºç¡€çŸ¥è¯†æ€»ç»“</h3><p><a href=\"http://www.zzvips.com/article/230111.html\" target=\"_blank\" >è§</a></p>\n<h2 id=\"React17-æºç \"><a href=\"#React17-æºç \" class=\"headerlink\" title=\"React17 æºç \"></a>React17 æºç </h2><p><a href=\"https://www.zhihu.com/column/c_1203007131219533824\" target=\"_blank\" >è§</a></p>\n<h2 id=\"å‚è€ƒé“¾æ¥\"><a href=\"#å‚è€ƒé“¾æ¥\" class=\"headerlink\" title=\"å‚è€ƒé“¾æ¥\"></a>å‚è€ƒé“¾æ¥</h2><p><a href=\"http://www.zzvips.com/article/230111.html\" target=\"_blank\" >react åŸºç¡€çŸ¥è¯†æ€»ç»“</a></p>\n<p><a href=\"http://www.zzvips.com/article/227118.html\" target=\"_blank\" >React äº‹ä»¶æœºåˆ¶æºç è§£æ 17.0.1</a></p>\n<p><a href=\"https://react.docschina.org/blog/2020/08/10/react-v17-rc.html#changes-to-event-delegation\" target=\"_blank\" >æ›´æ”¹äº‹ä»¶å§”æ‰˜</a></p>\n","text":"æ³¨æ„ç‰ˆæœ¬å“ˆä»å‰æœ‰åº§å±±ä¹‹ react æºç è§£è¯»ä¹‹ ReactContext React æºç è§£æâ€”â€”â€”â€”ReactContext.js,ReactLazy.js React çš„ React.createRef()&#x2F;forwardRef()æºç è§£æ(ä¸‰) React çš„ R...","link":"","photos":[],"count_time":{"symbolsCount":"5.3k","symbolsTime":"5 mins."},"categories":[{"name":"react","slug":"react","count":18,"path":"api/categories/react.json"}],"tags":[{"name":"react","slug":"react","count":13,"path":"api/tags/react.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%B3%A8%E6%84%8F%E7%89%88%E6%9C%AC%E5%93%88\"><span class=\"toc-text\">æ³¨æ„ç‰ˆæœ¬å“ˆ</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%89%8D%E5%90%8E%E7%89%88%E6%9C%AC%E5%B7%AE%E5%BC%82\"><span class=\"toc-text\">å‰åç‰ˆæœ¬å·®å¼‚</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#expirationTime\"><span class=\"toc-text\">expirationTime</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#React16-%E4%B8%8E-17-%E7%89%88%E6%9C%AC%E5%90%88%E6%88%90%E4%BA%8B%E4%BB%B6%E7%9A%84%E5%8C%BA%E5%88%AB\"><span class=\"toc-text\">React16 ä¸ 17 ç‰ˆæœ¬åˆæˆäº‹ä»¶çš„åŒºåˆ«</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9B%B4%E6%94%B9%E4%BA%8B%E4%BB%B6%E5%A7%94%E6%89%98\"><span class=\"toc-text\">æ›´æ”¹äº‹ä»¶å§”æ‰˜</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Hooks-%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86\"><span class=\"toc-text\">Hooks çš„å®ç°åŸç†</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#createSyntheticEvent-%E6%BA%90%E7%A0%81\"><span class=\"toc-text\">createSyntheticEvent æºç </span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%BA%E4%BB%80%E4%B9%88%E5%8E%9F%E7%94%9F%E4%BA%8B%E4%BB%B6%E7%9A%84-stopPropagation-%E5%8F%AF%E4%BB%A5%E9%98%BB%E6%AD%A2%E5%90%88%E6%88%90%E4%BA%8B%E4%BB%B6%E7%9A%84%E4%BC%A0%E9%80%92%EF%BC%9F\"><span class=\"toc-text\">ä¸ºä»€ä¹ˆåŸç”Ÿäº‹ä»¶çš„ stopPropagation å¯ä»¥é˜»æ­¢åˆæˆäº‹ä»¶çš„ä¼ é€’ï¼Ÿ</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#react-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93\"><span class=\"toc-text\">react åŸºç¡€çŸ¥è¯†æ€»ç»“</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#React17-%E6%BA%90%E7%A0%81\"><span class=\"toc-text\">React17 æºç </span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5\"><span class=\"toc-text\">å‚è€ƒé“¾æ¥</span></a></li></ol>","author":{"name":"é™ˆæµ·é¾™","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"éœ€è¦å°±å­¦å‘—ï¼Œå¤šå¤§ç‚¹äº‹ğŸ˜‚","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"React V17.0 å€™é€‰ç‰ˆæœ¬ï¼šæ— æ–°åŠŸèƒ½","uid":"4afe9cca9efcce45bab52ea3fe738dfb","slug":"2022-07-25React-v17","date":"2022-07-25T06:54:43.000Z","updated":"2022-09-16T14:29:30.434Z","comments":true,"path":"api/articles/2022-07-25React-v17.json","keywords":null,"cover":[],"text":"æ— æ–°ç‰¹æ€§React 17 çš„ç‰ˆæœ¬æ˜¯éæ¯”å¯»å¸¸çš„ï¼Œå› ä¸ºå®ƒæ²¡æœ‰æ·»åŠ ä»»ä½•é¢å‘å¼€å‘äººå‘˜çš„æ–°åŠŸèƒ½ã€‚è€Œä¸»è¦ä¾§é‡äºå‡çº§ç®€åŒ– React æœ¬èº«ã€‚ æˆ‘ä»¬æ­£åœ¨ç§¯æå¼€å‘ React çš„æ–°åŠŸèƒ½ï¼Œä½†å®ƒä»¬å¹¶ä¸å±äºæ­¤ç‰ˆæœ¬ã€‚React 17 æ˜¯æˆ‘ä»¬è¿›è¡Œæ·±åº¦æ¨å¹¿æˆ˜ç•¥çš„å…³é”®æ‰€åœ¨ã€‚ æ­¤ç‰ˆæœ¬ä¹‹æ‰€ä»¥ç‰¹æ®Šï¼Œä½ å¯ä»¥è®¤ä¸º Rea...","link":"","photos":[],"count_time":{"symbolsCount":"8.3k","symbolsTime":"8 mins."},"categories":[{"name":"react","slug":"react","count":18,"path":"api/categories/react.json"}],"tags":[{"name":"react","slug":"react","count":13,"path":"api/tags/react.json"}],"author":{"name":"é™ˆæµ·é¾™","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"éœ€è¦å°±å­¦å‘—ï¼Œå¤šå¤§ç‚¹äº‹ğŸ˜‚","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}},"next_post":{"title":"React@16.5.0 diffing algorithm","uid":"591f2a8f52aa8db4f8ec9853d594cc54","slug":"2022-07-22react-diffing","date":"2022-07-22T01:16:00.000Z","updated":"2022-09-16T14:29:30.431Z","comments":true,"path":"api/articles/2022-07-22react-diffing.json","keywords":null,"cover":[],"text":"è¯´æ˜ React provides a declarative API so that you donâ€™t have to worry about exactly what changes on every update. This makes writing applicati...","link":"","photos":[],"count_time":{"symbolsCount":"5k","symbolsTime":"5 mins."},"categories":[{"name":"react@16.5.0","slug":"react-16-5-0","count":5,"path":"api/categories/react-16-5-0.json"}],"tags":[{"name":"react@16.5.0","slug":"react-16-5-0","count":5,"path":"api/tags/react-16-5-0.json"}],"author":{"name":"é™ˆæµ·é¾™","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"éœ€è¦å°±å­¦å‘—ï¼Œå¤šå¤§ç‚¹äº‹ğŸ˜‚","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}}}