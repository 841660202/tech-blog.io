{"title":"py文件中字段提取","uid":"f16cfe223ad4d183c261ac932e97ed00","slug":"2023-05-26py","date":"2023-05-26T09:48:31.000Z","updated":"2023-05-29T00:41:07.270Z","comments":true,"path":"api/articles/2023-05-26py.json","keywords":null,"cover":null,"content":"<h2 id=\"背景\"><a href=\"#背景\" class=\"headerlink\" title=\"背景\"></a>背景</h2><p>项目中多语言一团糟，开发的正常，客户的 app 上没有多语言数据</p>\n<ol>\n<li>要将项目中用到的多语言全部提取</li>\n<li>去重</li>\n<li>提取多语言，与内部 APP 多语言合并</li>\n<li>合并项目中额外新增的部分</li>\n<li>手动处理部分涉及业务逻辑的多语言</li>\n<li>上传客户多语言平台，供客户修改</li>\n</ol>\n<h1 id=\"主要是提取\"><a href=\"#主要是提取\" class=\"headerlink\" title=\"主要是提取\"></a>主要是提取</h1><pre class=\"line-numbers language-py3\" data-language=\"py3\"><code class=\"language-py3\">\nimport os\nimport re\n\n\ndef extract_strings(folder_path):\n    all_strings &#x3D; []\n\n    # 遍历文件夹\n    for root, dirs, files in os.walk(folder_path):\n        for file_name in files:\n            if file_name.endswith(&#39;.js&#39;):\n                # print(&quot;file_name: &quot;+file_name)\n                # 读取文件内容\n                file_path &#x3D; os.path.join(root, file_name)\n                with open(file_path, &#39;r&#39;, encoding&#x3D;&#39;utf-8&#39;) as f:\n                    content &#x3D; f.read()\n                    # print(content)\n\n                # 正则表达式提取字符串\n                # pattern &#x3D; r&#39;Strings\\.(?!getLang\\()[\\&#39;&quot;]?([\\w\\d_\\$]+)[\\&#39;&quot;]?&#39;\n                pattern &#x3D; r&quot;Strings\\.(?:getLang\\()?[\\&quot;&#39;]?([\\w\\d]+)[\\&quot;&#39;]?\\)?&quot;\n                result &#x3D; re.findall(pattern, content)\n                # print(file_path, result)\n                # 将提取到的字符串添加到列表中\n                for match in result:\n                    # 数组中插入数据\n                    all_strings.append(match)\n\n    return all_strings\n\n\nfolder_path &#x3D; &#39;.&#x2F;src&#39;\nstrings &#x3D; extract_strings(folder_path)\n# set去重， 推导式\nresults &#x3D; [x for x in list(set(strings)) if &#39;getLang&#39; not in x]\n\nprint(results)\n</code></pre>\n","text":"背景项目中多语言一团糟，开发的正常，客户的 app 上没有多语言数据 要将项目中用到的多语言全部提取 去重 提取多语言，与内部 APP 多语言合并 合并项目中额外新增的部分 手动处理部分涉及业务逻辑的多语言 上传客户多语言平台，供客户修改 主要是提取 import os impo...","link":"","photos":[],"count_time":{"symbolsCount":"1.4k","symbolsTime":"1 mins."},"categories":[{"name":"python","slug":"python","count":1,"path":"api/categories/python.json"}],"tags":[{"name":"python","slug":"python","count":1,"path":"api/tags/python.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%83%8C%E6%99%AF\"><span class=\"toc-text\">背景</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E4%B8%BB%E8%A6%81%E6%98%AF%E6%8F%90%E5%8F%96\"><span class=\"toc-text\">主要是提取</span></a>","author":{"name":"十三","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/202303171118970.webp","link":"/","description":"<div><p>多学一点，多想一点，多做一点</p><p>眼中有光，心中有梦，脚下有路</p><div>","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"QTScropy","uid":"aa15850fa98d0630e8c164288227ac3a","slug":"2023-06-02qtscropy","date":"2023-06-01T23:58:27.000Z","updated":"2023-07-08T01:06:25.359Z","comments":true,"path":"api/articles/2023-06-02qtscropy.json","keywords":null,"cover":[],"text":"截图 问题无线投屏拔掉 usb 线子，就会断掉链接 【TODO】 ","link":"","photos":[],"count_time":{"symbolsCount":34,"symbolsTime":"1 mins."},"categories":[{"name":"工具","slug":"工具","count":26,"path":"api/categories/工具.json"}],"tags":[{"name":"工具","slug":"工具","count":20,"path":"api/tags/工具.json"}],"author":{"name":"十三","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/202303171118970.webp","link":"/","description":"<div><p>多学一点，多想一点，多做一点</p><p>眼中有光，心中有梦，脚下有路</p><div>","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}},"next_post":{"title":"重拾java","uid":"67e193579c0cb334ed58fb94e7cd04b2","slug":"2023-05-25java","date":"2023-05-25T12:52:54.000Z","updated":"2023-07-08T01:06:25.359Z","comments":true,"path":"api/articles/2023-05-25java.json","keywords":null,"cover":[],"text":"文章结构跟着兴趣走而不是顺序 输入校验validating-form-input 如何校验 如何处理检验不通过的信息 “Validating Form” 是指对表单数据进行验证以确保其符合特定规则或要求的过程。在 Web 应用程序中，表单通常用于收集用户输入的数据，例如注册表格、...","link":"","photos":[],"count_time":{"symbolsCount":"118k","symbolsTime":"1:48"},"categories":[{"name":"java","slug":"java","count":1,"path":"api/categories/java.json"}],"tags":[{"name":"java","slug":"java","count":1,"path":"api/tags/java.json"}],"author":{"name":"十三","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/202303171118970.webp","link":"/","description":"<div><p>多学一点，多想一点，多做一点</p><p>眼中有光，心中有梦，脚下有路</p><div>","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}}}