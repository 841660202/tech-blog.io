{"title":"RN position","uid":"86982b92d8849af6d72f26999e9eb0f2","slug":"2023-04-19rn","date":"2023-04-19T09:00:51.000Z","updated":"2023-05-15T13:17:32.996Z","comments":true,"path":"api/articles/2023-04-19rn.json","keywords":null,"cover":[],"content":"<h2 id=\"背景\"><a href=\"#背景\" class=\"headerlink\" title=\"背景\"></a>背景</h2><p>最近在给另一个部门兜底项目，火急火燎的，在开发随贴开关面板时候遇到了 ,页面中使用多个 position</p>\n<p>电量告警信息在顶部，中间是开关面板主控制区域，主控制区域外部：使用了 position（主控制区域内部：还是 position）</p>\n<p>页面结构：</p>\n<ol>\n<li><p>电池 icon</p>\n</li>\n<li><p>电池提示信息</p>\n</li>\n<li><p>主控制区域</p>\n</li>\n<li><p>之前开发的主控制区域，为什么用 position？</p>\n</li>\n</ol>\n<p>为了给每个按钮添加按键按下去的效果</p>\n<ol start=\"2\">\n<li>如果我来实现</li>\n</ol>\n<p>我可能要用 RN 的背景了，因为它本就是增加背景的效果</p>\n<h2 id=\"RN-多个-position-Bug\"><a href=\"#RN-多个-position-Bug\" class=\"headerlink\" title=\"RN 多个 position Bug\"></a>RN 多个 position Bug</h2><ol>\n<li>为什么说这是个 Bug？<br>后面的 position ，会高于前面 position 的层级，无论用什么办法都解决不了（网上有：elevation, zIndex 的方案都无法解决）</li>\n<li>碍你啥事了？<br>主控制区域，遮住了低电量提示不能点击，而我不想改变主控制区域</li>\n</ol>\n<h2 id=\"之前的-web-写法\"><a href=\"#之前的-web-写法\" class=\"headerlink\" title=\"之前的 web 写法\"></a>之前的 web 写法</h2><p>一顿操作完，本以为 OK, 想了很好，打脸很快</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">const styles &#x3D; StyleSheet.create(&#123;\n  tipContent: &#123;\n    height: cy(26),\n    flexDirection: &#39;row&#39;,\n    alignItems: &#39;center&#39;,\n    borderRadius: 24.5,\n    marginTop: cy(14),\n    marginBottom: cy(18),\n    width: cx(118),\n    &#x2F;&#x2F; top: cy(36), &#x2F;&#x2F; &#123; translateY: cy(56) &#125;替换\n    left: &#39;50%&#39;,\n    transform: [&#123; translateX: -cx(56) &#125;, &#123; translateY: cy(36) &#125;],\n    position: &#39;absolute&#39;,\n  &#125;,\n&#125;);</code></pre>\n\n<p>图就不放了，毕竟是客户的设计稿</p>\n<h2 id=\"修改方案\"><a href=\"#修改方案\" class=\"headerlink\" title=\"修改方案\"></a>修改方案</h2><p>方案 1:</p>\n<p>放顶部，不定位，“自然放”，主控制区域往下放<br>（如果前面人用了 flex 布局，没用定位的情况，我觉得我都不用改主控制区域，然而，并没有用，改了下高度）</p>\n<p>方案 2:</p>\n<p>把上面的电池提示信息放主控制区域后面，然后 position 到顶部</p>\n<p>没采用方案 2，</p>\n<ol>\n<li>如果电池 icon 放顶部的，电池提示信息如果放到后面，要么拆分开，复制一份逻辑，增加计算</li>\n<li>如果电池 icon 和 电池提示信息都放后面，进行定位，要改的地方多</li>\n</ol>\n<p>方案 3: 一个 view 承载，类似 web 浮动与清除浮动</p>\n<img src=\"http://t-blog-images.aijs.top/img/202304201142030.webp\" />\n\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">&#x2F;&#x2F; ....\n&lt;View style&#x3D;&#123;&#123; position: &#39;relative&#39;, minHeight: 60, alignItems: &#39;center&#39; &#125;&#125;&gt;\n  &#123;!overCr1 &amp;&amp; (\n    &lt;TouchableOpacity\n      activeOpacity&#x3D;&#123;0.8&#125;\n      style&#x3D;&#123;[styles.tipContentBtn]&#125;\n      onPress&#x3D;&#123;() &#x3D;&gt; &#123;\n        &#x2F;&#x2F; this.handleTip(tipTxt, otherText);\n      &#125;&#125;\n    &gt;\n      &lt;Image style&#x3D;&#123;styles.wornIcon&#125; source&#x3D;&#123;require(&#39;..&#x2F;..&#x2F;res&#x2F;notice.png&#39;)&#125; &#x2F;&gt;\n      &lt;Text style&#x3D;&#123;[&#123; color: &#39;#FF4A4A&#39; &#125;]&#125;&gt;\n        &#123;Strings.getLang(&#39;alert&#39;)&#125; &#123;Strings.getLang(&#39;view_more&#39;)&#125; &gt;\n      &lt;&#x2F;Text&gt;\n    &lt;&#x2F;TouchableOpacity&gt;\n  )&#125;\n&lt;&#x2F;View&gt;;\n&#x2F;&#x2F; ....\n\nconst styles &#x3D; StyleSheet.create(&#123;\n  tipContentBtn: &#123;\n    height: cy(26),\n    flexDirection: &#39;row&#39;,\n    alignItems: &#39;center&#39;,\n    borderRadius: 24.5,\n    marginTop: cy(14),\n    &#x2F;&#x2F; marginBottom: cy(18),\n    minWidth: cx(118),\n    paddingRight: cx(10),\n    &#x2F;&#x2F; top: cy(36),\n    &#x2F;&#x2F; left: &#39;50%&#39;,\n    &#x2F;&#x2F; transform: [&#123; translateX: -cx(56) &#125;, &#123; translateY: cy(56) &#125;],\n    &#x2F;&#x2F; position: &#39;absolute&#39;,\n    backgroundColor: &#39;#FF898933&#39;,\n    position: &#39;absolute&#39;,\n  &#125;,\n  wornIcon: &#123;\n    width: cx(18),\n    height: cx(18),\n    marginHorizontal: cx(4),\n  &#125;,\n&#125;);</code></pre>\n\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><ol>\n<li>position absolute,会改变层级，后面的层级高于前面的，zIndex 会失效</li>\n<li>解决方案有两种： 1. 前面的放后面 2. 不进行定位</li>\n</ol>\n<h2 id=\"参考链接\"><a href=\"#参考链接\" class=\"headerlink\" title=\"参考链接\"></a>参考链接</h2><p><a href=\"https://segmentfault.com/q/1010000006979119\" target=\"_blank\" >Text 标签的默认宽度和 View 一样，怎么做才能自适应？?</a></p>\n","text":"背景最近在给另一个部门兜底项目，火急火燎的，在开发随贴开关面板时候遇到了 ,页面中使用多个 position 电量告警信息在顶部，中间是开关面板主控制区域，主控制区域外部：使用了 position（主控制区域内部：还是 position） 页面结构： 电池 icon 电池提示信息...","link":"","photos":[],"count_time":{"symbolsCount":"2.9k","symbolsTime":"3 mins."},"categories":[{"name":"react-native","slug":"react-native","count":8,"path":"api/categories/react-native.json"}],"tags":[{"name":"react-native","slug":"react-native","count":8,"path":"api/tags/react-native.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%83%8C%E6%99%AF\"><span class=\"toc-text\">背景</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#RN-%E5%A4%9A%E4%B8%AA-position-Bug\"><span class=\"toc-text\">RN 多个 position Bug</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B9%8B%E5%89%8D%E7%9A%84-web-%E5%86%99%E6%B3%95\"><span class=\"toc-text\">之前的 web 写法</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BF%AE%E6%94%B9%E6%96%B9%E6%A1%88\"><span class=\"toc-text\">修改方案</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%80%BB%E7%BB%93\"><span class=\"toc-text\">总结</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5\"><span class=\"toc-text\">参考链接</span></a></li></ol>","author":{"name":"举手摘月亮","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/202303171118970.webp","link":"/","description":"<div><p>举手向苍穹，并非一定要摘到星月</p><p>眼中有光，心中有梦，脚下有路</p><div>","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Go Rate Limiting","uid":"b9e3c4baf5e8fc792ec5ea4b47abd686","slug":"2023-04-19go","date":"2023-04-19T16:33:01.000Z","updated":"2023-05-15T13:17:32.995Z","comments":true,"path":"api/articles/2023-04-19go.json","keywords":null,"cover":null,"text":"并发数量限制见 package main import ( &quot;fmt&quot; &quot;time&quot; ) func main() &#123; requests :&#x3D; make(chan int, 5) for i :&#x3D; 1; i &l...","link":"","photos":[],"count_time":{"symbolsCount":"1.6k","symbolsTime":"1 mins."},"categories":[{"name":"Go","slug":"Go","count":19,"path":"api/categories/Go.json"}],"tags":[{"name":"Go","slug":"Go","count":19,"path":"api/tags/Go.json"}],"author":{"name":"举手摘月亮","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/202303171118970.webp","link":"/","description":"<div><p>举手向苍穹，并非一定要摘到星月</p><p>眼中有光，心中有梦，脚下有路</p><div>","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}},"next_post":{"title":"Go Method","uid":"5cdf9e167cb5f0e4541536dd6c2982d9","slug":"2023-04-18go","date":"2023-04-18T15:55:37.000Z","updated":"2023-05-15T13:17:32.994Z","comments":true,"path":"api/articles/2023-04-18go.json","keywords":null,"cover":null,"text":"方法模型func (接收器变量 接收器类型) 方法名(参数列表) (返回参数) &#123; 方法体 &#125; 方法中调用 使用类型的值，调用值接收器声明的方法时，会使用值的副本来执行，因此该类型的值并不会被改变。 使用类型的指针，调用值接收器声明的方法时，指针被解引为值的副...","link":"","photos":[],"count_time":{"symbolsCount":"2.4k","symbolsTime":"2 mins."},"categories":[{"name":"Go","slug":"Go","count":19,"path":"api/categories/Go.json"}],"tags":[{"name":"Go","slug":"Go","count":19,"path":"api/tags/Go.json"}],"author":{"name":"举手摘月亮","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/202303171118970.webp","link":"/","description":"<div><p>举手向苍穹，并非一定要摘到星月</p><p>眼中有光，心中有梦，脚下有路</p><div>","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}}}