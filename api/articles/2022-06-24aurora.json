{"title":"hexo-theme-aurora源码修改","uid":"e1c1013f78e2c9e4246458e52acbd895","slug":"2022-06-24aurora","date":"2022-06-24T03:43:51.000Z","updated":"2022-06-25T09:34:46.445Z","comments":true,"path":"api/articles/2022-06-24aurora.json","keywords":null,"cover":[],"content":"<h2 id=\"背景\"><a href=\"#背景\" class=\"headerlink\" title=\"背景\"></a>背景</h2><p><code>hexo-theme-aurora</code>是一款不错的主题，在使用过程无疑会遇到一些问题。遇到问题首先去 github 上找 issue 来处理，有些问题需要改源码，之前使用<code>patch</code>进行简单的修改，这次遇到了 tag 查不到，本地是有的，发布后找不到了，导致文章在<code>tag</code>情况下不可见，之前作者在详情页留了<code>categories</code>，但是没有入口。等了几周，作者没有 fix,动手改～</p>\n<img src=\"http://t-blog-images.aijs.top/img/20220624114614.webp\" />\n\n<p>源码<code>node-sass</code>安装要注意了，可能会报错</p>\n<p>查询 node-sass 对应的 node.js 版本。<br><a href=\"https://github.com/sass/node-sass/releases?page=1#:~:text=Compare-,v5.0.0,-Breaking%20changes\" target=\"_blank\" >见</a></p>\n<p><a href=\"https://github.com/841660202/hexo-theme-aurora\" target=\"_blank\" >源码已经 fork</a></p>\n<p>源码使用：vue3 + pinia + cli，理想组合是：vue3 + pinia + vite</p>\n<div class=\"custom-quote tip\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12.01 15C12.01 14.5 12.01 14.5 12.01 14.5C12.04 13.75 13 13.46 14.04 12.2C14.41 11.74 14.69 11.41 14.86 10.85C15.15 9.95 14.92 9.18 14.86 9.02C14.8 8.79 14.52 8 13.72 7.46C13.06 7.02 12.42 7 12.14 7C11.9 7 11.36 7 10.78 7.3C10.28 7.56 9.98 7.9 9.83 8.1C9.24 8.82 9.06 9.63 9 10.06\"></path>\n<path stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 18H12.01\"></path>\n</svg></span>\n<p class=\"custom-quote-title\">TIP</p>\n<p><code>hexo-theme-aurora</code>运行起来会开启 <code>http://localhost:9666/</code>端口，会与你的 hexo 打通 <code>9966端口</code> 访问的是<code>你的hexo博客项目4000端口</code>，主题资源是<code>hexo-theme-aurora</code>,厉害～\n</div>\n<p>主要改 categories 相关功能</p>\n<img src=\"http://t-blog-images.aijs.top/img/20220624112340.webp\" />\n<img src=\"http://t-blog-images.aijs.top/img/20220624112640.webp\" />\n\n<hr/>\n\n<h2 id=\"categories\"><a href=\"#categories\" class=\"headerlink\" title=\"categories\"></a>categories</h2><pre class=\"line-numbers language-log\" data-language=\"log\"><code class=\"language-log\">Commit:        b1e1d23ed1bf320b1151db3a7708f3ea6078d5ba\nAuthor:        昊天 &lt;haotian.chen@ty.com&gt;\nAuthorDate:    Fri Jun 24 11:51:04 2022\nCommit:        昊天 &lt;haotian.chen@ty.com&gt;\nCommitDate:    Fri Jun 24 11:51:04 2022\n\nfix categories\n\n-----------------------------\n\n _config.yml                                |   1 +\n 新增部分\n src&#x2F;components&#x2F;Category&#x2F;CategoryItem.vue   | 110 +++++++++++++++++++++++++++++\n src&#x2F;components&#x2F;Category&#x2F;CategoryList.vue   |  13 ++++\n src&#x2F;components&#x2F;Category&#x2F;index.ts           |   2 +\n 修改为可点击\n src&#x2F;components&#x2F;Sidebar&#x2F;src&#x2F;CategoryBox.vue |  47 ++++--------\n categories空多语言提示\n src&#x2F;locales&#x2F;languages&#x2F;cn.json              |   1 +\n src&#x2F;locales&#x2F;languages&#x2F;en.json              |   1 +\n 配置导航\n src&#x2F;models&#x2F;ThemeConfig.class.ts            |   8 +++\n 增加新的category查询结果\n src&#x2F;router&#x2F;index.ts                        |   7 ++\n fix 分类展示数据\n src&#x2F;views&#x2F;Category.vue                     |  75 ++++++++++++++------\n 3中情况，展示不同维度的数据内容\n src&#x2F;views&#x2F;Result.vue                       |  10 +++\n 11 files changed, 220 insertions(+), 55 deletions(-)\n</code></pre>\n\n<img src=\"http://t-blog-images.aijs.top/img/20220624120506.webp\" />\n\n<p>具体修改内容<a href=\"https://github.com/841660202/hexo-theme-aurora/commit/b1e1d23ed1bf320b1151db3a7708f3ea6078d5ba\" target=\"_blank\" >见</a></p>\n<hr/>\n\n<h2 id=\"Author-信息不展示\"><a href=\"#Author-信息不展示\" class=\"headerlink\" title=\"Author 信息不展示\"></a>Author 信息不展示</h2><img src=\"http://t-blog-images.aijs.top/img/20220624140553.webp\" />\n<img src=\"http://t-blog-images.aijs.top/img/20220624140458.webp\" />\n\n<p><a href=\"https://github.com/auroral-ui/hexo-theme-aurora/commit/e46b36250fa424993e8b0548b37bd0cecf2f0b60\" target=\"_blank\" >见 fix author 接口</a></p>\n<hr/>\n\n<h2 id=\"代码配色\"><a href=\"#代码配色\" class=\"headerlink\" title=\"代码配色\"></a>代码配色</h2><p><a href=\"https://github.com/auroral-ui/hexo-theme-aurora/commit/6aa84b720220d70242f8ef763e095ef6a9d06d5c\" target=\"_blank\" >见 opt 配色</a></p>\n<h2 id=\"样式错乱\"><a href=\"#样式错乱\" class=\"headerlink\" title=\"样式错乱\"></a>样式错乱</h2><img src=\"http://t-blog-images.aijs.top/img/20220624141103.webp\" />\n\n<pre class=\"line-numbers language-css\" data-language=\"css\"><code class=\"language-css\">.article .article-content p &#123;\n  font-size: 1rem;\n  line-height: 1.5rem;\n  margin-bottom: 0.5rem;\n  padding-bottom: 1.5rem;\n  word-break: break-all; &#x2F;&#x2F; 这里\n&#125;</code></pre>\n\n<p><a href=\"https://github.com/auroral-ui/hexo-theme-aurora/commit/0af1a5a33b6665adbc0038f6310bc07b823698ec\" target=\"_blank\" >见 fix p style</a></p>\n<h2 id=\"a-标签标记\"><a href=\"#a-标签标记\" class=\"headerlink\" title=\"a 标签标记\"></a>a 标签标记</h2><p>标签的 target &#x3D; ‘_blank’ 属性的元素</p>\n<img src=\"http://t-blog-images.aijs.top/img/20220624141924.webp\" />\n\n<p><a href=\"https://github.com/auroral-ui/hexo-theme-aurora/commit/7cce635a6cc89e81af0fc934d1cc45265a5a19be\" target=\"_blank\" >见 含 a target&#x3D;_blank 属性的增加标记</a></p>\n<h2 id=\"patch\"><a href=\"#patch\" class=\"headerlink\" title=\"patch\"></a>patch</h2><p>不了解<code>patch</code>，<a href=\"http://v.aijs.top/post/2022-06-09patch-package\" target=\"_blank\" >更多</a></p>\n<ol>\n<li>修改后的<code>hexo-theme-aurora</code>项目打包，</li>\n<li>博客中之前补丁移除，之后重新生成新的补丁</li>\n</ol>\n<p><code>package.json</code></p>\n<pre class=\"line-numbers language-json\" data-language=\"json\"><code class=\"language-json\">-    &quot;patch:hexo-theme-aurora&quot;: &quot;yarn patch-package hexo-theme-aurora&quot;,\n-    &quot;postinstall&quot;: &quot;yarn patch-package&quot;</code></pre>\n\n<ol start=\"3\">\n<li><p>删除 <code>technology-blog/patches/hexo-theme-aurora+1.5.5.patch</code> 补丁</p>\n</li>\n<li><p>拷贝<code>hexo-theme-aurora</code>打包后的代码</p>\n</li>\n</ol>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">source&#x2F;static 目录\nsource&#x2F;layout 目录（hash改变，这个也要换新的）\n</code></pre>\n\n<ol start=\"5\">\n<li><p>生成补丁, 执行<code>yarn patch-package hexo-theme-aurora</code> </p>\n</li>\n<li><p>package.json</p>\n</li>\n</ol>\n<pre class=\"line-numbers language-json\" data-language=\"json\"><code class=\"language-json\">+    &quot;patch:hexo-theme-aurora&quot;: &quot;yarn patch-package hexo-theme-aurora&quot;,\n+    &quot;postinstall&quot;: &quot;yarn patch-package&quot;</code></pre>\n","text":"背景hexo-theme-aurora是一款不错的主题，在使用过程无疑会遇到一些问题。遇到问题首先去 github 上找 issue 来处理，有些问题需要改源码，之前使用patch进行简单的修改，这次遇到了 tag 查不到，本地是有的，发布后找不到了，导致文章在tag情况下不可见...","link":"","photos":[],"count_time":{"symbolsCount":"2.6k","symbolsTime":"2 mins."},"categories":[{"name":"工具","slug":"工具","count":16,"path":"api/categories/工具.json"}],"tags":[{"name":"hexo","slug":"hexo","count":2,"path":"api/tags/hexo.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%83%8C%E6%99%AF\"><span class=\"toc-text\">背景</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#categories\"><span class=\"toc-text\">categories</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Author-%E4%BF%A1%E6%81%AF%E4%B8%8D%E5%B1%95%E7%A4%BA\"><span class=\"toc-text\">Author 信息不展示</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BB%A3%E7%A0%81%E9%85%8D%E8%89%B2\"><span class=\"toc-text\">代码配色</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%A0%B7%E5%BC%8F%E9%94%99%E4%B9%B1\"><span class=\"toc-text\">样式错乱</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#a-%E6%A0%87%E7%AD%BE%E6%A0%87%E8%AE%B0\"><span class=\"toc-text\">a 标签标记</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#patch\"><span class=\"toc-text\">patch</span></a></li></ol>","author":{"name":"陈海龙","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"需要就学呗，多大点事😂","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"待办事项","uid":"c370dd6ecfc84fe9fdfa77b1a6f29341","slug":"todo","date":"2022-12-14T03:59:59.000Z","updated":"2022-06-25T09:34:46.445Z","comments":true,"path":"api/articles/todo.json","keywords":null,"cover":[],"text":"&#x2F;&#x2F; 1. headless-recorder &#x2F;&#x2F; 2. lightHouse https:&#x2F;&#x2F;blog.csdn.net&#x2F;tangdou369098655&#x2F;article&#x2F;details...","link":"","photos":[],"count_time":{"symbolsCount":"1.5k","symbolsTime":"1 mins."},"categories":[{"name":"Todo","slug":"Todo","count":1,"path":"api/categories/Todo.json"}],"tags":[{"name":"Todo","slug":"Todo","count":1,"path":"api/tags/Todo.json"}],"author":{"name":"陈海龙","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"需要就学呗，多大点事😂","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}},"next_post":{"title":"点","uid":"e9a180d03e63743825beabe89becedc8","slug":"2022-06-23点","date":"2022-06-23T09:53:22.000Z","updated":"2022-06-25T09:34:46.445Z","comments":true,"path":"api/articles/2022-06-23点.json","keywords":null,"cover":[],"text":" 记得之前在哪看到过是js解析时候的问题 &#x2F;&#x2F; 比如 1.toString() &#x2F;&#x2F; 会被解析认为这个.是数字1的点，即：1. 这个含小数的数 Number(1).toString() &#x2F;&#x2F; ok 1 .toString...","link":"","photos":[],"count_time":{"symbolsCount":295,"symbolsTime":"1 mins."},"categories":[{"name":"javaScript","slug":"javaScript","count":1,"path":"api/categories/javaScript.json"}],"tags":[{"name":"javaScript","slug":"javaScript","count":1,"path":"api/tags/javaScript.json"}],"author":{"name":"陈海龙","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"需要就学呗，多大点事😂","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}}}