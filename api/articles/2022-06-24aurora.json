{"title":"hexo-theme-aurora源码修改","uid":"e1c1013f78e2c9e4246458e52acbd895","slug":"2022-06-24aurora","date":"2022-06-24T03:43:51.000Z","updated":"2022-09-16T14:47:55.958Z","comments":true,"path":"api/articles/2022-06-24aurora.json","keywords":null,"cover":[],"content":"<h2 id=\"背景\"><a href=\"#背景\" class=\"headerlink\" title=\"背景\"></a>背景</h2><p><code>hexo-theme-aurora</code>是一款不错的主题，在使用过程无疑会遇到一些问题。遇到问题首先去 github 上找 issue 来处理，有些问题需要改源码，之前使用<code>patch</code>进行简单的修改，这次遇到了 tag 查不到，本地是有的，发布后找不到了，导致文章在<code>tag</code>情况下不可见，之前作者在详情页留了<code>categories</code>，但是没有入口。等了几周，作者没有 fix,动手改～</p>\n<img src=\"http://t-blog-images.aijs.top/img/20220624114614.webp\" />\n\n<p>源码<code>node-sass</code>安装要注意了，可能会报错</p>\n<p>查询 node-sass 对应的 node.js 版本。<br><a href=\"https://github.com/sass/node-sass/releases?page=1#:~:text=Compare-,v5.0.0,-Breaking%20changes\" target=\"_blank\" >见</a></p>\n<p><a href=\"https://github.com/841660202/hexo-theme-aurora\" target=\"_blank\" >源码已经 fork</a></p>\n<p>源码使用：vue3 + pinia + cli，理想组合是：vue3 + pinia + vite</p>\n<div class=\"custom-quote tip\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12.01 15C12.01 14.5 12.01 14.5 12.01 14.5C12.04 13.75 13 13.46 14.04 12.2C14.41 11.74 14.69 11.41 14.86 10.85C15.15 9.95 14.92 9.18 14.86 9.02C14.8 8.79 14.52 8 13.72 7.46C13.06 7.02 12.42 7 12.14 7C11.9 7 11.36 7 10.78 7.3C10.28 7.56 9.98 7.9 9.83 8.1C9.24 8.82 9.06 9.63 9 10.06\"></path>\n<path stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 18H12.01\"></path>\n</svg></span>\n<p class=\"custom-quote-title\">TIP</p>\n<p><code>hexo-theme-aurora</code>运行起来会开启 <code>http://localhost:9666/</code>端口，会与你的 hexo 打通 <code>9966端口</code> 访问的是<code>你的hexo博客项目4000端口</code>，主题资源是<code>hexo-theme-aurora</code>,厉害～\n</div>\n<p>主要改 categories 相关功能</p>\n<img src=\"http://t-blog-images.aijs.top/img/20220624112340.webp\" />\n<img src=\"http://t-blog-images.aijs.top/img/20220624112640.webp\" />\n\n<hr/>\n\n<h2 id=\"categories\"><a href=\"#categories\" class=\"headerlink\" title=\"categories\"></a>categories</h2><pre class=\"line-numbers language-log\" data-language=\"log\"><code class=\"language-log\">Commit:        b1e1d23ed1bf320b1151db3a7708f3ea6078d5ba\nAuthor:        昊天 &lt;haotian.chen@ty.com&gt;\nAuthorDate:    Fri Jun 24 11:51:04 2022\nCommit:        昊天 &lt;haotian.chen@ty.com&gt;\nCommitDate:    Fri Jun 24 11:51:04 2022\n\nfix categories\n\n-----------------------------\n\n _config.yml                                |   1 +\n 新增部分\n src&#x2F;components&#x2F;Category&#x2F;CategoryItem.vue   | 110 +++++++++++++++++++++++++++++\n src&#x2F;components&#x2F;Category&#x2F;CategoryList.vue   |  13 ++++\n src&#x2F;components&#x2F;Category&#x2F;index.ts           |   2 +\n 修改为可点击\n src&#x2F;components&#x2F;Sidebar&#x2F;src&#x2F;CategoryBox.vue |  47 ++++--------\n categories空多语言提示\n src&#x2F;locales&#x2F;languages&#x2F;cn.json              |   1 +\n src&#x2F;locales&#x2F;languages&#x2F;en.json              |   1 +\n 配置导航\n src&#x2F;models&#x2F;ThemeConfig.class.ts            |   8 +++\n 增加新的category查询结果\n src&#x2F;router&#x2F;index.ts                        |   7 ++\n fix 分类展示数据\n src&#x2F;views&#x2F;Category.vue                     |  75 ++++++++++++++------\n 3中情况，展示不同维度的数据内容\n src&#x2F;views&#x2F;Result.vue                       |  10 +++\n 11 files changed, 220 insertions(+), 55 deletions(-)\n</code></pre>\n\n<img src=\"http://t-blog-images.aijs.top/img/20220624120506.webp\" />\n\n<p>具体修改内容<a href=\"https://github.com/841660202/hexo-theme-aurora/commit/b1e1d23ed1bf320b1151db3a7708f3ea6078d5ba\" target=\"_blank\" >见</a></p>\n<hr/>\n\n<h2 id=\"Author-信息不展示\"><a href=\"#Author-信息不展示\" class=\"headerlink\" title=\"Author 信息不展示\"></a>Author 信息不展示</h2><img src=\"http://t-blog-images.aijs.top/img/20220624140553.webp\" />\n<img src=\"http://t-blog-images.aijs.top/img/20220624140458.webp\" />\n\n<p><a href=\"https://github.com/auroral-ui/hexo-theme-aurora/commit/e46b36250fa424993e8b0548b37bd0cecf2f0b60\" target=\"_blank\" >见 fix author 接口</a></p>\n<hr/>\n\n<h2 id=\"代码配色\"><a href=\"#代码配色\" class=\"headerlink\" title=\"代码配色\"></a>代码配色</h2><p><a href=\"https://github.com/auroral-ui/hexo-theme-aurora/commit/6aa84b720220d70242f8ef763e095ef6a9d06d5c\" target=\"_blank\" >见 opt 配色</a></p>\n<h2 id=\"样式错乱\"><a href=\"#样式错乱\" class=\"headerlink\" title=\"样式错乱\"></a>样式错乱</h2><img src=\"http://t-blog-images.aijs.top/img/20220624141103.webp\" />\n\n<pre class=\"line-numbers language-css\" data-language=\"css\"><code class=\"language-css\">.article .article-content p &#123;\n  font-size: 1rem;\n  line-height: 1.5rem;\n  margin-bottom: 0.5rem;\n  padding-bottom: 1.5rem;\n  word-break: break-all; &#x2F;&#x2F; 这里\n&#125;</code></pre>\n\n<p><a href=\"https://github.com/auroral-ui/hexo-theme-aurora/commit/0af1a5a33b6665adbc0038f6310bc07b823698ec\" target=\"_blank\" >见 fix p style</a></p>\n<h2 id=\"a-标签标记\"><a href=\"#a-标签标记\" class=\"headerlink\" title=\"a 标签标记\"></a>a 标签标记</h2><p>标签的 target &#x3D; ‘_blank’ 属性的元素</p>\n<img src=\"http://t-blog-images.aijs.top/img/20220624141924.webp\" />\n\n<p><a href=\"https://github.com/auroral-ui/hexo-theme-aurora/commit/7cce635a6cc89e81af0fc934d1cc45265a5a19be\" target=\"_blank\" >见 含 a target&#x3D;_blank 属性的增加标记</a></p>\n<h2 id=\"patch\"><a href=\"#patch\" class=\"headerlink\" title=\"patch\"></a>patch</h2><p>不了解<code>patch</code>，<a href=\"http://v.aijs.top/post/2022-06-09patch-package\" target=\"_blank\" >更多</a></p>\n<ol>\n<li>修改后的<code>hexo-theme-aurora</code>项目打包，</li>\n<li>博客中之前补丁移除，之后重新生成新的补丁</li>\n</ol>\n<p><code>package.json</code></p>\n<pre class=\"line-numbers language-json\" data-language=\"json\"><code class=\"language-json\">-    &quot;patch:hexo-theme-aurora&quot;: &quot;yarn patch-package hexo-theme-aurora&quot;,\n-    &quot;postinstall&quot;: &quot;yarn patch-package&quot;</code></pre>\n\n<ol start=\"3\">\n<li><p>删除 <code>technology-blog/patches/hexo-theme-aurora+1.5.5.patch</code> 补丁</p>\n</li>\n<li><p>拷贝<code>hexo-theme-aurora</code>打包后的代码</p>\n</li>\n</ol>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">source&#x2F;static 目录\nsource&#x2F;layout 目录（hash改变，这个也要换新的）\n</code></pre>\n\n<ol start=\"5\">\n<li><p>生成补丁, 执行<code>yarn patch-package hexo-theme-aurora</code></p>\n</li>\n<li><p>package.json</p>\n</li>\n</ol>\n<pre class=\"line-numbers language-json\" data-language=\"json\"><code class=\"language-json\">+    &quot;patch:hexo-theme-aurora&quot;: &quot;yarn patch-package hexo-theme-aurora&quot;,\n+    &quot;postinstall&quot;: &quot;yarn patch-package&quot;</code></pre>\n\n<h2 id=\"部分路由刷新后-404\"><a href=\"#部分路由刷新后-404\" class=\"headerlink\" title=\"部分路由刷新后 404\"></a>部分路由刷新后 404</h2><img src=\"http://t-blog-images.aijs.top/img/202207260934046.webp\" />\n\n<img src=\"http://t-blog-images.aijs.top/img/202209152159235.png\" />\n\n<p>404 坑你没话说，本地一切正常，部署后 404 找不到</p>\n<p>网上解决方案是：配置<code> git config ignorecase = true</code>,部分文件没问题，但是部分还是有问题的</p>\n<p>这个问题有点恶心～</p>\n<img src=\"http://t-blog-images.aijs.top/img/202209152211906.png\" />\n\n<pre class=\"line-numbers language-none\"><code class=\"language-none\"># 全局配置区分大小写\ngit config core.ignorecase false</code></pre>\n\n<img src=\"http://t-blog-images.aijs.top/img/202209152212477.png\" />\n\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">\ngit push origin --delete gh-pages\n\ngit branch -D gh-pages\n</code></pre>\n\n<p>删除分支，再打包发布会报错，按照提示，删除 node_modules，重新安装，然后打包部署，之后，github 会创建新的分支</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">♠ &#x2F;Users&#x2F;chenhailong&#x2F;Desktop&#x2F;841660202.github.io $ git branch -d gh-pages\nerror: The branch &#39;gh-pages&#39; is not fully merged.\nIf you are sure you want to delete it, run &#39;git branch -D gh-pages&#39;.\n♠ &#x2F;Users&#x2F;chenhailong&#x2F;Desktop&#x2F;841660202.github.io $ git branch -D gh-pages\nDeleted branch gh-pages (was 7a873693).\n♠ &#x2F;Users&#x2F;chenhailong&#x2F;Desktop&#x2F;841660202.github.io $ pn release\n\n&gt; hexo-site@0.0.0 release &#x2F;Users&#x2F;chenhailong&#x2F;Desktop&#x2F;841660202.github.io\n&gt; git push &amp;&amp; hexo clean &amp;&amp; hexo deploy\n\nEverything up-to-date\nERROR Cannot find module &#39;hexo&#39; from &#39;&#x2F;Users&#x2F;chenhailong&#x2F;Desktop&#x2F;841660202.github.io&#39;\nERROR Local hexo loading failed in ~&#x2F;Desktop&#x2F;841660202.github.io\nERROR Try running: &#39;rm -rf node_modules &amp;&amp; npm install --force&#39;\n ELIFECYCLE  Command failed with exit code 2.\n♠ &#x2F;Users&#x2F;chenhailong&#x2F;Desktop&#x2F;841660202.github.io $ hexo clean\nERROR Cannot find module &#39;hexo&#39; from &#39;&#x2F;Users&#x2F;chenhailong&#x2F;Desktop&#x2F;841660202.github.io&#39;\nERROR Local hexo loading failed in ~&#x2F;Desktop&#x2F;841660202.github.io\nERROR Try running: &#39;rm -rf node_modules &amp;&amp; npm install --force&#39;\n♠ &#x2F;Users&#x2F;chenhailong&#x2F;Desktop&#x2F;841660202.github.io $ rm -rf node_modules\n♠ &#x2F;Users&#x2F;chenhailong&#x2F;Desktop&#x2F;841660202.github.io $ pn i\nLockfile is up to date, resolution step is skipped\nPackages: +437\n\n# 。。。。\n\nWriting objects: 100% (2320&#x2F;2320), 2.98 MiB | 1.26 MiB&#x2F;s, done.\nTotal 2320 (delta 1870), reused 0 (delta 0)\nremote: Resolving deltas: 100% (1870&#x2F;1870), done.\nremote:\nremote: Create a pull request for &#39;gh-pages&#39; on GitHub by visiting:\nremote:      https:&#x2F;&#x2F;github.com&#x2F;841660202&#x2F;841660202.github.io&#x2F;pull&#x2F;new&#x2F;gh-pages\nremote:\nTo https:&#x2F;&#x2F;github.com&#x2F;841660202&#x2F;841660202.github.io\n * [new branch]      HEAD -&gt; gh-pages\nBranch &#39;master&#39; set up to track remote branch &#39;gh-pages&#39; from &#39;https:&#x2F;&#x2F;github.com&#x2F;841660202&#x2F;841660202.github.io&#39;.\nINFO  Deploy done: git\nINFO Thanks for using Aurora v1.5.5\nINFO Check out the repo at: https:&#x2F;&#x2F;github.com&#x2F;auroral-ui&#x2F;hexo-theme-aurora</code></pre>\n\n<img src=\"http://t-blog-images.aijs.top/img/202209152228582.png\" />\n\n<img src=\"http://t-blog-images.aijs.top/img/202209152249538.png\" />\n\n<h2 id=\"可以断定是-github-的-bug\"><a href=\"#可以断定是-github-的-bug\" class=\"headerlink\" title=\"可以断定是 github 的 bug\"></a>可以断定是 github 的 bug</h2><img src=\"http://t-blog-images.aijs.top/img/202209162153870.png\" />\n\n<h2 id=\"axios-超时时间\"><a href=\"#axios-超时时间\" class=\"headerlink\" title=\"axios 超时时间\"></a>axios 超时时间</h2><p>由 5000 改为 10000</p>\n<p>超时情况，请求会被取消</p>\n","text":"背景hexo-theme-aurora是一款不错的主题，在使用过程无疑会遇到一些问题。遇到问题首先去 github 上找 issue 来处理，有些问题需要改源码，之前使用patch进行简单的修改，这次遇到了 tag 查不到，本地是有的，发布后找不到了，导致文章在tag情况下不可见...","link":"","photos":[],"count_time":{"symbolsCount":"5.3k","symbolsTime":"5 mins."},"categories":[{"name":"工具","slug":"工具","count":15,"path":"api/categories/工具.json"}],"tags":[{"name":"hexo","slug":"hexo","count":2,"path":"api/tags/hexo.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%83%8C%E6%99%AF\"><span class=\"toc-text\">背景</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#categories\"><span class=\"toc-text\">categories</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Author-%E4%BF%A1%E6%81%AF%E4%B8%8D%E5%B1%95%E7%A4%BA\"><span class=\"toc-text\">Author 信息不展示</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BB%A3%E7%A0%81%E9%85%8D%E8%89%B2\"><span class=\"toc-text\">代码配色</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%A0%B7%E5%BC%8F%E9%94%99%E4%B9%B1\"><span class=\"toc-text\">样式错乱</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#a-%E6%A0%87%E7%AD%BE%E6%A0%87%E8%AE%B0\"><span class=\"toc-text\">a 标签标记</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#patch\"><span class=\"toc-text\">patch</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%83%A8%E5%88%86%E8%B7%AF%E7%94%B1%E5%88%B7%E6%96%B0%E5%90%8E-404\"><span class=\"toc-text\">部分路由刷新后 404</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8F%AF%E4%BB%A5%E6%96%AD%E5%AE%9A%E6%98%AF-github-%E7%9A%84-bug\"><span class=\"toc-text\">可以断定是 github 的 bug</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#axios-%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4\"><span class=\"toc-text\">axios 超时时间</span></a></li></ol>","author":{"name":"陈哈喽","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"Don't repeat yourself！Faster and better！","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"企业微信授权流程","uid":"240950b163de231df264068b4d1b9085","slug":"2022-06-29wx-auth","date":"2022-06-29T08:27:52.000Z","updated":"2022-09-16T13:54:56.204Z","comments":true,"path":"api/articles/2022-06-29wx-auth.json","keywords":null,"cover":[],"text":"准备工作 确保本地已经正确配置了 HOST，能够从工作台入口打开本地的开发服务 确保已获取到当前企业的唯一 ID：corp_id，在【管理后台】- 【我的企业】-【企业信息】页面，最下面找到【企业 ID】 已经通过接口调用获取到当前应用的 access_token，请参考 二：如...","link":"","photos":[],"count_time":{"symbolsCount":"4.1k","symbolsTime":"4 mins."},"categories":[{"name":"企业微信","slug":"企业微信","count":5,"path":"api/categories/企业微信.json"}],"tags":[{"name":"企业微信","slug":"企业微信","count":5,"path":"api/tags/企业微信.json"}],"author":{"name":"陈哈喽","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"Don't repeat yourself！Faster and better！","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}},"next_post":{"title":"点","uid":"e9a180d03e63743825beabe89becedc8","slug":"2022-06-23点","date":"2022-06-23T09:53:22.000Z","updated":"2022-09-16T13:54:56.153Z","comments":true,"path":"api/articles/2022-06-23点.json","keywords":null,"cover":[],"text":" 记得之前在哪看到过是js解析时候的问题 &#x2F;&#x2F; 比如 1.toString() &#x2F;&#x2F; 会被解析认为这个.是数字1的点，即：1. 这个含小数的数 Number(1).toString() &#x2F;&#x2F; ok 1 .toString...","link":"","photos":[],"count_time":{"symbolsCount":295,"symbolsTime":"1 mins."},"categories":[{"name":"javaScript","slug":"javaScript","count":1,"path":"api/categories/javaScript.json"}],"tags":[{"name":"javaScript","slug":"javaScript","count":1,"path":"api/tags/javaScript.json"}],"author":{"name":"陈哈喽","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"Don't repeat yourself！Faster and better！","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}}}