{"title":"组件库开发 Storybook(待补)","uid":"2f2a1dbb480f2860f9722fc87c8a2adf","slug":"2022-11-24storybook","date":"2022-11-24T01:37:43.000Z","updated":"2022-12-22T13:36:21.797Z","comments":true,"path":"api/articles/2022-11-24storybook.json","keywords":null,"cover":"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTuymoMI6bs_b5ORCcr6bysEDzWi5It3fSfcg&usqp=CAU","content":"<h2 id=\"背景\"><a href=\"#背景\" class=\"headerlink\" title=\"背景\"></a>背景</h2><p>最近维护一个项目，项目中的业务组件是单独维护的，至于为什么，不是很清楚。</p>\n<h2 id=\"疑问\"><a href=\"#疑问\" class=\"headerlink\" title=\"疑问\"></a>疑问</h2><p><strong>优点</strong></p>\n<ul>\n<li>难道只是为了开发方便，项目用的公司内定的 nextjs 3.x.x 的版本？webpack 编译速度太慢？</li>\n</ul>\n<p><strong>缺点</strong></p>\n<ul>\n<li>难复用：因为接口是写到业务组件中的，其他项目要想复，有一定的难度（虽然公司应用使用网关授权的方式进行调用）</li>\n<li>高冗余：假设其他项目用，其他业务组件会出现冗余情况</li>\n<li>storybook：需要一定的学习成本</li>\n<li>成本高：对于业务组件与业务项目拆分，发布时候，要先发布组件，然后项目再获取新的依赖进行发布</li>\n<li>不确定性：中间还可能出现差异</li>\n</ul>\n<h2 id=\"storybook\"><a href=\"#storybook\" class=\"headerlink\" title=\"storybook\"></a>storybook</h2><h3 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h3><p>网络的普遍性将更多的复杂性推向了前端。它始于响应式网页设计，将每个用户界面从一个变成了 10、100、1000 个不同的用户界面。随着时间的推移，更多的需求堆积在设备、浏览器、可访问性、性能和异步状态等方面。</p>\n<p>组件驱动的工具，如 React、Vue 和 Angular，有助于将复杂的 UI 分解为简单的组件，但它们不是灵丹妙药。随着前端的增长，组件的数量也在膨胀。成熟的项目可能包含数百个组件，这些组件会产生数千种离散的变体。</p>\n<p>更复杂的是，这些 UI 很难调试，因为它们纠缠在业务逻辑、交互状态和应用上下文中。</p>\n<p>现代前端的广度压倒了现有的工作流程。开发人员必须考虑无数的 UI 变体，但还没有准备好开发或组织它们。您最终会遇到这样一种情况，即 UI 更难构建、使用起来不太令人满意并且很脆弱。</p>\n<p>用户界面多元宇宙</p>\n<h3 id=\"解决方案\"><a href=\"#解决方案\" class=\"headerlink\" title=\"解决方案\"></a>解决方案</h3><p>独立构建 UI<br>每一个 UI 现在都是一个零件. 组件的强大之处在于，您无需为了查看它们的呈现方式而启动整个应用程序。您可以通过传入道具、模拟数据或伪造事件来单独呈现特定的变体。</p>\n<p>Storybook 被打包成一个小型的，仅供开发，作坊与您的应用程序一起生活。它提供了一个独立的 iframe 来呈现组件，而不受应用程序业务逻辑和上下文的干扰。这有助于您将开发重点放在组件的每个变体上，甚至是难以触及的边缘情况。</p>\n<div style=\"display: flex;align-items: center;padding-top:4px;padding-bottom: 4px\"><a target=\"_blank\" href=\"https://github.com/storybookjs/storybook\">https://github.com/storybookjs/storybook</a><img src=\"https://img.shields.io/github/stars/storybookjs/storybook?style=social\" /></div>\n\n<h3 id=\"优点\"><a href=\"#优点\" class=\"headerlink\" title=\"优点\"></a>优点</h3><p>当您为组件编写故事时，您会免费获得许多额外的好处。</p>\n<p>📝 开发更耐用的 UI<br>隔离组件和页面并跟踪它们的用例故事. 验证难以触及的 UI 边缘情况。使用插件来模拟组件所需的一切——上下文、API 请求、设备功能等。</p>\n<p>✅ 更轻松地测试 UI，没有问题<br>故事是一种实用的、可重现的跟踪 UI 状态的方式。在开发过程中使用它们对 UI 进行现场测试。Storybook 提供了内置的自动化工作流程辅助功能,相互作用， 和视觉的测试。或者通过将故事导入其他 JavaScript 测试工具来将故事用作测试用例。</p>\n<p>📚 文档 UI 供您的团队重用<br>Storybook 是您 UI 的唯一真实来源。故事为您的所有组件及其各种状态编制索引，使您的团队可以轻松找到并重用现有的 UI 模式。Storybook 也会自动生成文档从那些故事中。</p>\n<p>📤 分享 UI 的实际工作原理<br>故事展示了 UI 的实际工作方式，而不仅仅是它们应该如何工作的图片。这使每个人都了解当前正在生产的内容。出版故事书得到队友的签字。或者嵌入他们在 wikis、Markdown 和 Figma 中以简化协作。</p>\n<p>🚦 自动化 UI 工作流程<br>Storybook 与您的持续集成工作流程兼容。将其添加为 CI 步骤以自动化用户界面测试、与团队成员一起审查实施并获得利益相关者的签署。</p>\n<h2 id=\"stories\"><a href=\"#stories\" class=\"headerlink\" title=\"stories\"></a>stories</h2><ul>\n<li>.stories 文件可以认为是页面，所有封装的组件都可以在.stories 文件中使用</li>\n<li>.stories 使用 title 进行目录划分</li>\n</ul>\n<h2 id=\"storybook-中间件\"><a href=\"#storybook-中间件\" class=\"headerlink\" title=\"storybook 中间件\"></a>storybook 中间件</h2><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">.storybook\n├── main.js\n├── middleware.js # 中间件，可以进行接口代理到日常环境\n├── preview-head.html\n└── preview.js</code></pre>\n\n<h2 id=\"参考案例\"><a href=\"#参考案例\" class=\"headerlink\" title=\"参考案例\"></a>参考案例</h2><h3 id=\"按钮\"><a href=\"#按钮\" class=\"headerlink\" title=\"按钮\"></a>按钮</h3><p><a href=\"https://6195b518b76f57003aa69b4c-dzkgzotbvz.chromatic.com/?path=/docs/buttons-icontextbutton-coloredicontextbutton--default\" target=\"_blank\" >https://6195b518b76f57003aa69b4c-dzkgzotbvz.chromatic.com/?path=/docs/buttons-icontextbutton-coloredicontextbutton--default</a></p>\n<h3 id=\"仓库\"><a href=\"#仓库\" class=\"headerlink\" title=\"仓库\"></a>仓库</h3><p><a href=\"https://github.com/phork/phorkit/tree/develop/src/components/Button\" target=\"_blank\" >https://github.com/phork/phorkit/tree/develop/src/components/Button</a></p>\n<h3 id=\"MDX\"><a href=\"#MDX\" class=\"headerlink\" title=\"MDX\"></a>MDX</h3><p><a href=\"https://marketplace.visualstudio.com/items?itemName=unifiedjs.vscode-mdx\" target=\"_blank\" >vscocde MDX 插件</a></p>\n<h2 id=\"参考链接\"><a href=\"#参考链接\" class=\"headerlink\" title=\"参考链接\"></a>参考链接</h2><p><a href=\"https://storybook.js.org/tutorials/intro-to-storybook/react/zh-CN/get-started/\" target=\"_blank\" >storybook React 教程</a></p>\n<p><a href=\"https://devpress.csdn.net/vue/62f15728c6770329307f5661.html\" target=\"_blank\" >[Storybook] 使用 Vue Storybook addon-docs 创建文档</a></p>\n<p><a href=\"https://www.docz.site/docs/getting-started\" target=\"_blank\" >docz</a></p>\n","text":"背景最近维护一个项目，项目中的业务组件是单独维护的，至于为什么，不是很清楚。 疑问优点 难道只是为了开发方便，项目用的公司内定的 nextjs 3.x.x 的版本？webpack 编译速度太慢？ 缺点 难复用：因为接口是写到业务组件中的，其他项目要想复，有一定的难度（虽然公司应用...","link":"","photos":[],"count_time":{"symbolsCount":"1.9k","symbolsTime":"2 mins."},"categories":[{"name":"Npm","slug":"Npm","count":2,"path":"api/categories/Npm.json"}],"tags":[{"name":"Npm","slug":"Npm","count":2,"path":"api/tags/Npm.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%83%8C%E6%99%AF\"><span class=\"toc-text\">背景</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%96%91%E9%97%AE\"><span class=\"toc-text\">疑问</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#storybook\"><span class=\"toc-text\">storybook</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%97%AE%E9%A2%98\"><span class=\"toc-text\">问题</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88\"><span class=\"toc-text\">解决方案</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BC%98%E7%82%B9\"><span class=\"toc-text\">优点</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#stories\"><span class=\"toc-text\">stories</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#storybook-%E4%B8%AD%E9%97%B4%E4%BB%B6\"><span class=\"toc-text\">storybook 中间件</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8F%82%E8%80%83%E6%A1%88%E4%BE%8B\"><span class=\"toc-text\">参考案例</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%8C%89%E9%92%AE\"><span class=\"toc-text\">按钮</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BB%93%E5%BA%93\"><span class=\"toc-text\">仓库</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#MDX\"><span class=\"toc-text\">MDX</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5\"><span class=\"toc-text\">参考链接</span></a></li></ol>","author":{"name":"举手摘月亮","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"眼中有光，心中有梦，脚下有路","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"useGetLastState","uid":"9322ab91805d186b28cb967a708e37ed","slug":"2022-11-25useGetLastState","date":"2022-11-25T05:49:23.000Z","updated":"2022-12-22T13:36:21.799Z","comments":true,"path":"api/articles/2022-11-25useGetLastState.json","keywords":null,"cover":"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTuymoMI6bs_b5ORCcr6bysEDzWi5It3fSfcg&usqp=CAU","text":"背景有时候，我们想要利用 useState 来更新数据，并且有时候，我们需要不断的拿到最新的值，来继续进行数据更新，频率很高～ 简单场景：同时我们晓得用setState(preState=&gt; newState)，来继续更新最新的值，这种用法在简单业务中使用没问题，复杂业务场...","link":"","photos":[],"count_time":{"symbolsCount":"2.6k","symbolsTime":"2 mins."},"categories":[{"name":"React","slug":"React","count":34,"path":"api/categories/React.json"}],"tags":[{"name":"React","slug":"React","count":28,"path":"api/tags/React.json"}],"author":{"name":"举手摘月亮","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"眼中有光，心中有梦，脚下有路","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}},"next_post":{"title":"组件库开发 yalc","uid":"2ca18facf08aecc1df3a76171b2916fc","slug":"2022-11-24yalc","date":"2022-11-24T01:29:26.000Z","updated":"2022-12-22T13:36:21.798Z","comments":true,"path":"api/articles/2022-11-24yalc.json","keywords":null,"cover":[],"text":"背景使用 npm link&#x2F;yarn link&#x2F;yalc 等工具，通过软链接的方式进行调试，影响 node_modules 中原本的包; yalc 在开发和创作多个包（私有或公共）时，您通常会发现自己需要在本地环境中正在处理的其他项目中使用最新的&#x2F;W...","link":"","photos":[],"count_time":{"symbolsCount":"1.8k","symbolsTime":"2 mins."},"categories":[{"name":"Npm","slug":"Npm","count":2,"path":"api/categories/Npm.json"}],"tags":[{"name":"Npm","slug":"Npm","count":2,"path":"api/tags/Npm.json"}],"author":{"name":"举手摘月亮","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"眼中有光，心中有梦，脚下有路","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}}}