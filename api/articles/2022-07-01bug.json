{"title":"react hook 使用 bug","uid":"e5dbf22be09b32f376c35e2a002b6557","slug":"2022-07-01bug","date":"2022-07-01T03:16:39.000Z","updated":"2022-07-06T11:54:37.691Z","comments":true,"path":"api/articles/2022-07-01bug.json","keywords":null,"cover":[],"content":"<h2 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h2><p>Rendered more hooks than during the previous render.</p>\n<img src=\"http://t-blog-images.aijs.top/img/20220701111839.webp\" />\n\n<h2 id=\"解决\"><a href=\"#解决\" class=\"headerlink\" title=\"解决\"></a>解决</h2><img src=\"http://t-blog-images.aijs.top/img/20220701111740.webp\" />\n\n<p>两种方式解决：</p>\n<ul>\n<li>勾子前置</li>\n<li>不用这个勾子</li>\n</ul>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><p><strong>勾子不能在条件语句中使用</strong> 这个要注意并不是一定这种形式</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">if (条件) &#123;\n  &#x2F;&#x2F; 如果条件用于是true，相当于没有外层的if，\n  勾子;\n&#125;</code></pre>\n\n<ul>\n<li>这个勾子放在了 if 的后面 条件语句如果在第一次命中的是提前结束，下次渲染没命中 if，走了后面的代码就会出这个问题</li>\n<li>如果测试不全面，这个 bug 就可能到线上了， 因为你测试的有可能每次命中 if 而不会到 else，<strong>下面这种模式</strong>一不注意就错了</li>\n</ul>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">if () &#123;\n  return 渲染\n&#125;\n勾子</code></pre>\n\n<h2 id=\"原因\"><a href=\"#原因\" class=\"headerlink\" title=\"原因\"></a>原因</h2><p>react 收集勾子的时候，需要保证勾子数量是一致的，不多不少，刚刚好</p>\n<p>续。。。源码找这个日志</p>\n","text":"问题Rendered more hooks than during the previous render. 解决 两种方式解决： 勾子前置 不用这个勾子 总结勾子不能在条件语句中使用 这个要注意并不是一定这种形式 if (条件) &#123; &#x2F;&#x2F; 如果条件...","link":"","photos":[],"count_time":{"symbolsCount":394,"symbolsTime":"1 mins."},"categories":[{"name":"bug","slug":"bug","count":4,"path":"api/categories/bug.json"}],"tags":[{"name":"React","slug":"React","count":6,"path":"api/tags/React.json"},{"name":"bug","slug":"bug","count":6,"path":"api/tags/bug.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%97%AE%E9%A2%98\"><span class=\"toc-text\">问题</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%A7%A3%E5%86%B3\"><span class=\"toc-text\">解决</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%80%BB%E7%BB%93\"><span class=\"toc-text\">总结</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8E%9F%E5%9B%A0\"><span class=\"toc-text\">原因</span></a></li></ol>","author":{"name":"陈海龙","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"需要就学呗，多大点事😂","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"授权与校验场景「简聊」","uid":"22d71efeaa5b73e832334cf42551f026","slug":"2022-07-01auth","date":"2022-07-01T09:12:26.000Z","updated":"2022-07-06T11:54:37.691Z","comments":true,"path":"api/articles/2022-07-01auth.json","keywords":null,"cover":null,"text":"最简单用变量，模拟数据 session + cookie每个用户对应一个会话 SSO 1 session + redis + cookie 觉得有点奇葩，第二份核心项目遇到 jwt + redis第二份非核心项目遇到 以下是一般公司常用的方式，面试的时候，大家都在唠这个 SSO ...","link":"","photos":[],"count_time":{"symbolsCount":914,"symbolsTime":"1 mins."},"categories":[{"name":"auth","slug":"auth","count":1,"path":"api/categories/auth.json"}],"tags":[{"name":"auth","slug":"auth","count":1,"path":"api/tags/auth.json"}],"author":{"name":"陈海龙","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"需要就学呗，多大点事😂","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}},"next_post":{"title":"react-native-webview中处理外网链接","uid":"da1169afdf41f1a24b458b57385fca2d","slug":"2022-06-29rn-wewb","date":"2022-06-29T09:11:44.000Z","updated":"2022-07-06T11:54:37.690Z","comments":true,"path":"api/articles/2022-06-29rn-wewb.json","keywords":null,"cover":[],"text":"背景之前公司移动端是使用 vpn 连接到内网，由于某些原因，IOS 企业证书即将到期，应用需要上架，vpn 不满足上架要求，所以： vpn 要从 iOS 包中移除 vpn 移除导致不能直接访问内网 需要通过外网域名访问内网资源 不同环境的请求 原生及 RN 代码，接口访问走 AT...","link":"","photos":[],"count_time":{"symbolsCount":"1.4k","symbolsTime":"1 mins."},"categories":[{"name":"react-native","slug":"react-native","count":2,"path":"api/categories/react-native.json"}],"tags":[{"name":"react-native","slug":"react-native","count":2,"path":"api/tags/react-native.json"}],"author":{"name":"陈海龙","slug":"blog-author","avatar":"http://t-blog-images.aijs.top/img/avatar.jpeg","link":"/","description":"需要就学呗，多大点事😂","socials":{"github":"https://github.com/841660202","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/web_longboss","juejin":"","customs":{}}}}}